// File:js/build/lib.min.js

// File:js/lib/bzip2.min.js

var bzip2={array:function(b){var e=0,q=0,n=[0,1,3,7,15,31,63,127,255];return function(a){for(var c=0;0<a;){var s=8-e;a>=s?(c<<=s,c|=n[s]&b[q++],e=0,a-=s):(c<<=a,c|=(b[q]&n[a]<<8-a-e)>>8-a-e,e+=a,a=0)}return c}},simple:function(b){var e=bzip2.header(b),q="",n="";do q+=n,n=bzip2.decompress(b,e);while(-1!=n);return q},header:function(b){if(4348520!=b(24))throw"No magic number found";b=b(8)-48;if(1>b||9<b)throw"Not a BZIP archive";return b},decompress:function(b,e,q){var n=1E5*e;e="";for(var a=0;6>a;a++)e+=
b(8).toString(16);if("177245385090"==e)return-1;if("314159265359"!=e)throw"eek not valid bzip data";b(32);if(b(1))throw"unsupported obsolete version";e=b(24);if(e>n)throw"Initial position larger than buffer size";for(var c=b(16),s=new Uint8Array(256),x=0,a=0;16>a;a++)if(c&1<<15-a)for(var v=b(16),d=0;16>d;d++)v&1<<15-d&&(s[x++]=16*a+d);var m=b(3);if(2>m||6<m)throw"another error";v=b(15);if(0==v)throw"meh";for(var r=[],a=0;a<m;a++)r[a]=a;for(var y=new Uint8Array(32768),a=0;a<v;a++){for(var d=0;b(1);d++)if(d>=
m)throw"whoops another error";var g=r[d];r.splice(d,1);r.splice(0,0,g);y[a]=g}for(var w=x+2,z=[],d=0;d<m;d++){for(var l=new Uint8Array(258),g=new Uint8Array(21),c=b(5),a=0;a<w;a++){for(;;){if(1>c||20<c)throw"I gave up a while ago on writing error messages";if(!b(1))break;b(1)?c--:c++}l[a]=c}var k,h;k=h=l[0];for(a=1;a<w;a++)l[a]>h?h=l[a]:l[a]<k&&(k=l[a]);var f;f=z[d]={};f.permute=new Uint32Array(258);f.limit=new Uint32Array(21);f.base=new Uint32Array(21);f.minLen=k;f.maxLen=h;for(var t=f.base.subarray(1),
u=f.limit.subarray(1),p=0,a=k;a<=h;a++)for(c=0;c<w;c++)l[c]==a&&(f.permute[p++]=c);for(a=k;a<=h;a++)g[a]=u[a]=0;for(a=0;a<w;a++)g[l[a]]++;p=c=0;for(a=k;a<h;a++)p+=g[a],u[a]=p-1,p<<=1,t[a+1]=p-(c+=g[a]);u[h]=p+g[h]-1;t[k]=0}k=new Uint32Array(256);for(a=0;256>a;a++)r[a]=a;h=m=w=p=0;for(l=new Uint32Array(n);;){if(!w--){w=49;if(p>=v)throw"meow i'm a kitty, that's an error";f=z[y[p++]];t=f.base.subarray(1);u=f.limit.subarray(1)}a=f.minLen;for(d=b(a);;){if(a>f.maxLen)throw"rawr i'm a dinosaur";if(d<=u[a])break;
a++;d=d<<1|b(1)}d-=t[a];if(0>d||258<=d)throw"moo i'm a cow";a=f.permute[d];if(0==a||1==a)h||(h=1,c=0),c=0==a?c+h:c+2*h,h<<=1;else{if(h){h=0;if(m+c>=n)throw"Boom.";g=s[r[0]];for(k[g]+=c;c--;)l[m++]=g}if(a>x)break;if(m>=n)throw"I can't think of anything. Error";--a;g=r[a];r.splice(a,1);r.splice(0,0,g);g=s[g];k[g]++;l[m++]=g}}if(0>e||e>=m)throw"I'm a monkey and I'm throwing something at someone, namely you";for(a=d=0;256>a;a++)v=d+k[a],k[a]=d,d=v;for(a=0;a<m;a++)g=l[a]&255,l[k[g]]|=a<<8,k[g]++;t=f=b=
0;m&&(b=l[e],f=b&255,b>>=8,t=-1);e="";for(q||(q=Infinity);m;){m--;n=f;b=l[b];f=b&255;b>>=8;3==t++?(u=f,a=n,f=-1):(u=1,a=f);for(;u--;)if(e+=String.fromCharCode(a),!--q)return e;f!=n&&(t=0)}return e}};

// File:js/lib/chroma.min.js

/** echo  * @license echo  * while read i do echo  *  done echo
*/
!function(){var Color,K,PITHIRD,TWOPI,X,Y,Z,bezier,brewer,chroma,clip_rgb,colors,cos,css2rgb,hex2rgb,hsi2rgb,hsl2rgb,hsv2rgb,lab2lch,lab2rgb,lab_xyz,lch2lab,lch2rgb,limit,luminance,luminance_x,rgb2hex,rgb2hsi,rgb2hsl,rgb2hsv,rgb2lab,rgb2lch,rgb_xyz,root,type,unpack,xyz_lab,xyz_rgb,_ref;chroma=function(x,y,z,m){return new Color(x,y,z,m)};if(typeof module!=="undefined"&&module!==null&&module.exports!=null){module.exports=chroma}if(typeof define==="function"&&define.amd){define([],function(){return chroma})}else{root=typeof exports!=="undefined"&&exports!==null?exports:this;root.chroma=chroma}chroma.color=function(x,y,z,m){return new Color(x,y,z,m)};chroma.hsl=function(h,s,l,a){return new Color(h,s,l,a,"hsl")};chroma.hsv=function(h,s,v,a){return new Color(h,s,v,a,"hsv")};chroma.rgb=function(r,g,b,a){return new Color(r,g,b,a,"rgb")};chroma.hex=function(x){return new Color(x)};chroma.css=function(x){return new Color(x)};chroma.lab=function(l,a,b){return new Color(l,a,b,"lab")};chroma.lch=function(l,c,h){return new Color(l,c,h,"lch")};chroma.hsi=function(h,s,i){return new Color(h,s,i,"hsi")};chroma.gl=function(r,g,b,a){return new Color(r*255,g*255,b*255,a,"gl")};chroma.interpolate=function(a,b,f,m){if(a==null||b==null){return"#000"}if(type(a)==="string"){a=new Color(a)}if(type(b)==="string"){b=new Color(b)}return a.interpolate(f,b,m)};chroma.mix=chroma.interpolate;chroma.contrast=function(a,b){var l1,l2;if(type(a)==="string"){a=new Color(a)}if(type(b)==="string"){b=new Color(b)}l1=a.luminance();l2=b.luminance();if(l1>l2){return(l1+.05)/(l2+.05)}else{return(l2+.05)/(l1+.05)}};chroma.luminance=function(color){return chroma(color).luminance()};chroma._Color=Color;Color=function(){function Color(){var a,arg,args,m,me,me_rgb,x,y,z,_i,_len,_ref,_ref1,_ref2,_ref3;me=this;args=[];for(_i=0,_len=arguments.length;_i<_len;_i++){arg=arguments[_i];if(arg!=null){args.push(arg)}}if(args.length===0){_ref=[255,0,255,1,"rgb"],x=_ref[0],y=_ref[1],z=_ref[2],a=_ref[3],m=_ref[4]}else if(type(args[0])==="array"){if(args[0].length===3){_ref1=args[0],x=_ref1[0],y=_ref1[1],z=_ref1[2];a=1}else if(args[0].length===4){_ref2=args[0],x=_ref2[0],y=_ref2[1],z=_ref2[2],a=_ref2[3]}else{throw"unknown input argument"}m=args[1]}else if(type(args[0])==="string"){x=args[0];m="hex"}else if(type(args[0])==="object"){_ref3=args[0]._rgb,x=_ref3[0],y=_ref3[1],z=_ref3[2],a=_ref3[3];m="rgb"}else if(args.length>=3){x=args[0];y=args[1];z=args[2]}if(args.length===3){m="rgb";a=1}else if(args.length===4){if(type(args[3])==="string"){m=args[3];a=1}else if(type(args[3])==="number"){m="rgb";a=args[3]}}else if(args.length===5){a=args[3];m=args[4]}if(a==null){a=1}if(m==="rgb"){me._rgb=[x,y,z,a]}else if(m==="gl"){me._rgb=[x*255,y*255,z*255,a]}else if(m==="hsl"){me._rgb=hsl2rgb(x,y,z);me._rgb[3]=a}else if(m==="hsv"){me._rgb=hsv2rgb(x,y,z);me._rgb[3]=a}else if(m==="hex"){me._rgb=hex2rgb(x)}else if(m==="lab"){me._rgb=lab2rgb(x,y,z);me._rgb[3]=a}else if(m==="lch"){me._rgb=lch2rgb(x,y,z);me._rgb[3]=a}else if(m==="hsi"){me._rgb=hsi2rgb(x,y,z);me._rgb[3]=a}me_rgb=clip_rgb(me._rgb)}Color.prototype.rgb=function(){return this._rgb.slice(0,3)};Color.prototype.rgba=function(){return this._rgb};Color.prototype.hex=function(){return rgb2hex(this._rgb)};Color.prototype.toString=function(){return this.name()};Color.prototype.hsl=function(){return rgb2hsl(this._rgb)};Color.prototype.hsv=function(){return rgb2hsv(this._rgb)};Color.prototype.lab=function(){return rgb2lab(this._rgb)};Color.prototype.lch=function(){return rgb2lch(this._rgb)};Color.prototype.hsi=function(){return rgb2hsi(this._rgb)};Color.prototype.gl=function(){return[this._rgb[0]/255,this._rgb[1]/255,this._rgb[2]/255,this._rgb[3]]};Color.prototype.luminance=function(){return luminance(this._rgb)};Color.prototype.name=function(){var h,k;h=this.hex();for(k in chroma.colors){if(h===chroma.colors[k]){return k}}return h};Color.prototype.alpha=function(alpha){if(arguments.length){this._rgb[3]=alpha;return this}return this._rgb[3]};Color.prototype.css=function(mode){var hsl,me,rgb,rnd;if(mode==null){mode="rgb"}me=this;rgb=me._rgb;if(mode.length===3&&rgb[3]<1){mode+="a"}if(mode==="rgb"){return mode+"("+rgb.slice(0,3).join(",")+")"}else if(mode==="rgba"){return mode+"("+rgb.join(",")+")"}else if(mode==="hsl"||mode==="hsla"){hsl=me.hsl();rnd=function(a){return Math.round(a*100)/100};hsl[0]=rnd(hsl[0]);hsl[1]=rnd(hsl[1]*100)+"%";hsl[2]=rnd(hsl[2]*100)+"%";if(mode.length===4){hsl[3]=rgb[3]}return mode+"("+hsl.join(",")+")"}};Color.prototype.interpolate=function(f,col,m){var dh,hue,hue0,hue1,lbv,lbv0,lbv1,me,res,sat,sat0,sat1,xyz0,xyz1;me=this;if(m==null){m="rgb"}if(type(col)==="string"){col=new Color(col)}if(m==="hsl"||m==="hsv"||m==="lch"||m==="hsi"){if(m==="hsl"){xyz0=me.hsl();xyz1=col.hsl()}else if(m==="hsv"){xyz0=me.hsv();xyz1=col.hsv()}else if(m==="hsi"){xyz0=me.hsi();xyz1=col.hsi()}else if(m==="lch"){xyz0=me.lch();xyz1=col.lch()}if(m.substr(0,1)==="h"){hue0=xyz0[0],sat0=xyz0[1],lbv0=xyz0[2];hue1=xyz1[0],sat1=xyz1[1],lbv1=xyz1[2]}else{lbv0=xyz0[0],sat0=xyz0[1],hue0=xyz0[2];lbv1=xyz1[0],sat1=xyz1[1],hue1=xyz1[2]}if(!isNaN(hue0)&&!isNaN(hue1)){if(hue1>hue0&&hue1-hue0>180){dh=hue1-(hue0+360)}else if(hue1<hue0&&hue0-hue1>180){dh=hue1+360-hue0}else{dh=hue1-hue0}hue=hue0+f*dh}else if(!isNaN(hue0)){hue=hue0;if(lbv1===1||lbv1===0){sat=sat0}}else if(!isNaN(hue1)){hue=hue1;if(lbv0===1||lbv0===0){sat=sat1}}else{hue=Number.NaN}if(sat==null){sat=sat0+f*(sat1-sat0)}lbv=lbv0+f*(lbv1-lbv0);if(m.substr(0,1)==="h"){res=new Color(hue,sat,lbv,m)}else{res=new Color(lbv,sat,hue,m)}}else if(m==="rgb"){xyz0=me._rgb;xyz1=col._rgb;res=new Color(xyz0[0]+f*(xyz1[0]-xyz0[0]),xyz0[1]+f*(xyz1[1]-xyz0[1]),xyz0[2]+f*(xyz1[2]-xyz0[2]),m)}else if(m==="lab"){xyz0=me.lab();xyz1=col.lab();res=new Color(xyz0[0]+f*(xyz1[0]-xyz0[0]),xyz0[1]+f*(xyz1[1]-xyz0[1]),xyz0[2]+f*(xyz1[2]-xyz0[2]),m)}else{throw"color mode "+m+" is not supported"}res.alpha(me.alpha()+f*(col.alpha()-me.alpha()));return res};Color.prototype.premultiply=function(){var a,rgb;rgb=this.rgb();a=this.alpha();return chroma(rgb[0]*a,rgb[1]*a,rgb[2]*a,a)};Color.prototype.darken=function(amount){var lch,me;if(amount==null){amount=20}me=this;lch=me.lch();lch[0]-=amount;return chroma.lch(lch).alpha(me.alpha())};Color.prototype.darker=function(amount){return this.darken(amount)};Color.prototype.brighten=function(amount){if(amount==null){amount=20}return this.darken(-amount)};Color.prototype.brighter=function(amount){return this.brighten(amount)};Color.prototype.saturate=function(amount){var lch,me;if(amount==null){amount=20}me=this;lch=me.lch();lch[1]+=amount;return chroma.lch(lch).alpha(me.alpha())};Color.prototype.desaturate=function(amount){if(amount==null){amount=20}return this.saturate(-amount)};return Color}();clip_rgb=function(rgb){var i;for(i in rgb){if(i<3){if(rgb[i]<0){rgb[i]=0}if(rgb[i]>255){rgb[i]=255}}else if(i===3){if(rgb[i]<0){rgb[i]=0}if(rgb[i]>1){rgb[i]=1}}}return rgb};css2rgb=function(css){var hsl,i,m,rgb,_i,_j,_k,_l;css=css.toLowerCase();if(chroma.colors!=null&&chroma.colors[css]){return hex2rgb(chroma.colors[css])}if(m=css.match(/rgb\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*\)/)){rgb=m.slice(1,4);for(i=_i=0;_i<=2;i=++_i){rgb[i]=+rgb[i]}rgb[3]=1}else if(m=css.match(/rgba\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*,\s*([01]|[01]?\.\d+)\)/)){rgb=m.slice(1,5);for(i=_j=0;_j<=3;i=++_j){rgb[i]=+rgb[i]}}else if(m=css.match(/rgb\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/)){rgb=m.slice(1,4);for(i=_k=0;_k<=2;i=++_k){rgb[i]=Math.round(rgb[i]*2.55)}rgb[3]=1}else if(m=css.match(/rgba\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/)){rgb=m.slice(1,5);for(i=_l=0;_l<=2;i=++_l){rgb[i]=Math.round(rgb[i]*2.55)}rgb[3]=+rgb[3]}else if(m=css.match(/hsl\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/)){hsl=m.slice(1,4);hsl[1]*=.01;hsl[2]*=.01;rgb=hsl2rgb(hsl);rgb[3]=1}else if(m=css.match(/hsla\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/)){hsl=m.slice(1,4);hsl[1]*=.01;hsl[2]*=.01;rgb=hsl2rgb(hsl);rgb[3]=+m[4]}return rgb};hex2rgb=function(hex){var a,b,g,r,rgb,u;if(hex.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/)){if(hex.length===4||hex.length===7){hex=hex.substr(1)}if(hex.length===3){hex=hex.split("");hex=hex[0]+hex[0]+hex[1]+hex[1]+hex[2]+hex[2]}u=parseInt(hex,16);r=u>>16;g=u>>8&255;b=u&255;return[r,g,b,1]}if(hex.match(/^#?([A-Fa-f0-9]{8})$/)){if(hex.length===9){hex=hex.substr(1)}u=parseInt(hex,16);r=u>>24&255;g=u>>16&255;b=u>>8&255;a=u&255;return[r,g,b,a]}if(rgb=css2rgb(hex)){return rgb}throw"unknown color: "+hex};hsi2rgb=function(h,s,i){var b,g,r,_ref;_ref=unpack(arguments),h=_ref[0],s=_ref[1],i=_ref[2];h/=360;if(h<1/3){b=(1-s)/3;r=(1+s*cos(TWOPI*h)/cos(PITHIRD-TWOPI*h))/3;g=1-(b+r)}else if(h<2/3){h-=1/3;r=(1-s)/3;g=(1+s*cos(TWOPI*h)/cos(PITHIRD-TWOPI*h))/3;b=1-(r+g)}else{h-=2/3;g=(1-s)/3;b=(1+s*cos(TWOPI*h)/cos(PITHIRD-TWOPI*h))/3;r=1-(g+b)}r=limit(i*r*3);g=limit(i*g*3);b=limit(i*b*3);return[r*255,g*255,b*255]};hsl2rgb=function(){var b,c,g,h,i,l,r,s,t1,t2,t3,_i,_ref,_ref1;_ref=unpack(arguments),h=_ref[0],s=_ref[1],l=_ref[2];if(s===0){r=g=b=l*255}else{t3=[0,0,0];c=[0,0,0];t2=l<.5?l*(1+s):l+s-l*s;t1=2*l-t2;h/=360;t3[0]=h+1/3;t3[1]=h;t3[2]=h-1/3;for(i=_i=0;_i<=2;i=++_i){if(t3[i]<0){t3[i]+=1}if(t3[i]>1){t3[i]-=1}if(6*t3[i]<1){c[i]=t1+(t2-t1)*6*t3[i]}else if(2*t3[i]<1){c[i]=t2}else if(3*t3[i]<2){c[i]=t1+(t2-t1)*(2/3-t3[i])*6}else{c[i]=t1}}_ref1=[Math.round(c[0]*255),Math.round(c[1]*255),Math.round(c[2]*255)],r=_ref1[0],g=_ref1[1],b=_ref1[2]}return[r,g,b]};hsv2rgb=function(){var b,f,g,h,i,p,q,r,s,t,v,_ref,_ref1,_ref2,_ref3,_ref4,_ref5,_ref6;_ref=unpack(arguments),h=_ref[0],s=_ref[1],v=_ref[2];v*=255;if(s===0){r=g=b=v}else{if(h===360){h=0}if(h>360){h-=360}if(h<0){h+=360}h/=60;i=Math.floor(h);f=h-i;p=v*(1-s);q=v*(1-s*f);t=v*(1-s*(1-f));switch(i){case 0:_ref1=[v,t,p],r=_ref1[0],g=_ref1[1],b=_ref1[2];break;case 1:_ref2=[q,v,p],r=_ref2[0],g=_ref2[1],b=_ref2[2];break;case 2:_ref3=[p,v,t],r=_ref3[0],g=_ref3[1],b=_ref3[2];break;case 3:_ref4=[p,q,v],r=_ref4[0],g=_ref4[1],b=_ref4[2];break;case 4:_ref5=[t,p,v],r=_ref5[0],g=_ref5[1],b=_ref5[2];break;case 5:_ref6=[v,p,q],r=_ref6[0],g=_ref6[1],b=_ref6[2]}}r=Math.round(r);g=Math.round(g);b=Math.round(b);return[r,g,b]};K=18;X=.95047;Y=1;Z=1.08883;lab2lch=function(){var a,b,c,h,l,_ref;_ref=unpack(arguments),l=_ref[0],a=_ref[1],b=_ref[2];c=Math.sqrt(a*a+b*b);h=Math.atan2(b,a)/Math.PI*180;return[l,c,h]};lab2rgb=function(l,a,b){var g,r,x,y,z,_ref,_ref1;if(l!==void 0&&l.length===3){_ref=l,l=_ref[0],a=_ref[1],b=_ref[2]}if(l!==void 0&&l.length===3){_ref1=l,l=_ref1[0],a=_ref1[1],b=_ref1[2]}y=(l+16)/116;x=y+a/500;z=y-b/200;x=lab_xyz(x)*X;y=lab_xyz(y)*Y;z=lab_xyz(z)*Z;r=xyz_rgb(3.2404542*x-1.5371385*y-.4985314*z);g=xyz_rgb(-.969266*x+1.8760108*y+.041556*z);b=xyz_rgb(.0556434*x-.2040259*y+1.0572252*z);return[limit(r,0,255),limit(g,0,255),limit(b,0,255),1]};lab_xyz=function(x){if(x>.206893034){return x*x*x}else{return(x-4/29)/7.787037}};xyz_rgb=function(r){return Math.round(255*(r<=.00304?12.92*r:1.055*Math.pow(r,1/2.4)-.055))};lch2lab=function(){var c,h,l,_ref;_ref=unpack(arguments),l=_ref[0],c=_ref[1],h=_ref[2];h=h*Math.PI/180;return[l,Math.cos(h)*c,Math.sin(h)*c]};lch2rgb=function(l,c,h){var L,a,b,g,r,_ref,_ref1;_ref=lch2lab(l,c,h),L=_ref[0],a=_ref[1],b=_ref[2];_ref1=lab2rgb(L,a,b),r=_ref1[0],g=_ref1[1],b=_ref1[2];return[limit(r,0,255),limit(g,0,255),limit(b,0,255)]};luminance=function(r,g,b){var _ref;_ref=unpack(arguments),r=_ref[0],g=_ref[1],b=_ref[2];r=luminance_x(r);g=luminance_x(g);b=luminance_x(b);return.2126*r+.7152*g+.0722*b};luminance_x=function(x){x/=255;if(x<=.03928){return x/12.92}else{return Math.pow((x+.055)/1.055,2.4)}};rgb2hex=function(){var b,g,r,str,u,_ref;_ref=unpack(arguments),r=_ref[0],g=_ref[1],b=_ref[2];u=r<<16|g<<8|b;str="000000"+u.toString(16);return"#"+str.substr(str.length-6)};rgb2hsi=function(){var TWOPI,b,g,h,i,min,r,s,_ref;_ref=unpack(arguments),r=_ref[0],g=_ref[1],b=_ref[2];TWOPI=Math.PI*2;r/=255;g/=255;b/=255;min=Math.min(r,g,b);i=(r+g+b)/3;s=1-min/i;if(s===0){h=0}else{h=(r-g+(r-b))/2;h/=Math.sqrt((r-g)*(r-g)+(r-b)*(g-b));h=Math.acos(h);if(b>g){h=TWOPI-h}h/=TWOPI}return[h*360,s,i]};rgb2hsl=function(r,g,b){var h,l,max,min,s,_ref;if(r!==void 0&&r.length>=3){_ref=r,r=_ref[0],g=_ref[1],b=_ref[2]}r/=255;g/=255;b/=255;min=Math.min(r,g,b);max=Math.max(r,g,b);l=(max+min)/2;if(max===min){s=0;h=Number.NaN}else{s=l<.5?(max-min)/(max+min):(max-min)/(2-max-min)}if(r===max){h=(g-b)/(max-min)}else if(g===max){h=2+(b-r)/(max-min)}else if(b===max){h=4+(r-g)/(max-min)}h*=60;if(h<0){h+=360}return[h,s,l]};rgb2hsv=function(){var b,delta,g,h,max,min,r,s,v,_ref;_ref=unpack(arguments),r=_ref[0],g=_ref[1],b=_ref[2];min=Math.min(r,g,b);max=Math.max(r,g,b);delta=max-min;v=max/255;if(max===0){h=Number.NaN;s=0}else{s=delta/max;if(r===max){h=(g-b)/delta}if(g===max){h=2+(b-r)/delta}if(b===max){h=4+(r-g)/delta}h*=60;if(h<0){h+=360}}return[h,s,v]};rgb2lab=function(){var b,g,r,x,y,z,_ref;_ref=unpack(arguments),r=_ref[0],g=_ref[1],b=_ref[2];r=rgb_xyz(r);g=rgb_xyz(g);b=rgb_xyz(b);x=xyz_lab((.4124564*r+.3575761*g+.1804375*b)/X);y=xyz_lab((.2126729*r+.7151522*g+.072175*b)/Y);z=xyz_lab((.0193339*r+.119192*g+.9503041*b)/Z);return[116*y-16,500*(x-y),200*(y-z)]};rgb_xyz=function(r){if((r/=255)<=.04045){return r/12.92}else{return Math.pow((r+.055)/1.055,2.4)}};xyz_lab=function(x){if(x>.008856){return Math.pow(x,1/3)}else{return 7.787037*x+4/29}};rgb2lch=function(){var a,b,g,l,r,_ref,_ref1;_ref=unpack(arguments),r=_ref[0],g=_ref[1],b=_ref[2];_ref1=rgb2lab(r,g,b),l=_ref1[0],a=_ref1[1],b=_ref1[2];return lab2lch(l,a,b)};chroma.scale=function(colors,positions){var classifyValue,f,getClass,getColor,resetCache,setColors,setDomain,tmap,_colorCache,_colors,_correctLightness,_domain,_fixed,_max,_min,_mode,_nacol,_numClasses,_out,_pos,_spread;_mode="rgb";_nacol=chroma("#ccc");_spread=0;_fixed=false;_domain=[0,1];_colors=[];_out=false;_pos=[];_min=0;_max=1;_correctLightness=false;_numClasses=0;_colorCache={};setColors=function(colors,positions){var c,col,_i,_j,_ref,_ref1,_ref2;if(colors==null){colors=["#ddd","#222"]}if(colors!=null&&type(colors)==="string"&&((_ref=chroma.brewer)!=null?_ref[colors]:void 0)!=null){colors=chroma.brewer[colors]}if(type(colors)==="array"){colors=colors.slice(0);for(c=_i=0,_ref1=colors.length-1;0<=_ref1?_i<=_ref1:_i>=_ref1;c=0<=_ref1?++_i:--_i){col=colors[c];if(type(col)==="string"){colors[c]=chroma(col)}}if(positions!=null){_pos=positions}else{_pos=[];for(c=_j=0,_ref2=colors.length-1;0<=_ref2?_j<=_ref2:_j>=_ref2;c=0<=_ref2?++_j:--_j){_pos.push(c/(colors.length-1))}}}resetCache();return _colors=colors};setDomain=function(domain){if(domain==null){domain=[]}_domain=domain;_min=domain[0];_max=domain[domain.length-1];resetCache();if(domain.length===2){return _numClasses=0}else{return _numClasses=domain.length-1}};getClass=function(value){var i,n;if(_domain!=null){n=_domain.length-1;i=0;while(i<n&&value>=_domain[i]){i++}return i-1}return 0};tmap=function(t){return t};classifyValue=function(value){var i,maxc,minc,n,val;val=value;if(_domain.length>2){n=_domain.length-1;i=getClass(value);minc=_domain[0]+(_domain[1]-_domain[0])*(0+_spread*.5);maxc=_domain[n-1]+(_domain[n]-_domain[n-1])*(1-_spread*.5);val=_min+(_domain[i]+(_domain[i+1]-_domain[i])*.5-minc)/(maxc-minc)*(_max-_min)}return val};getColor=function(val,bypassMap){var c,col,f0,i,k,p,t,_i,_ref;if(bypassMap==null){bypassMap=false}if(isNaN(val)){return _nacol}if(!bypassMap){if(_domain.length>2){c=getClass(val);t=c/(_numClasses-1)}else{t=f0=(val-_min)/(_max-_min);t=Math.min(1,Math.max(0,t))}}else{t=val}if(!bypassMap){t=tmap(t)}k=Math.floor(t*1e4);if(_colorCache[k]){col=_colorCache[k]}else{if(type(_colors)==="array"){for(i=_i=0,_ref=_pos.length-1;0<=_ref?_i<=_ref:_i>=_ref;i=0<=_ref?++_i:--_i){p=_pos[i];if(t<=p){col=_colors[i];break}if(t>=p&&i===_pos.length-1){col=_colors[i];break}if(t>p&&t<_pos[i+1]){t=(t-p)/(_pos[i+1]-p);col=chroma.interpolate(_colors[i],_colors[i+1],t,_mode);break}}}else if(type(_colors)==="function"){col=_colors(t)}_colorCache[k]=col}return col};resetCache=function(){return _colorCache={}};setColors(colors,positions);f=function(v){var c;c=getColor(v);if(_out&&c[_out]){return c[_out]()}else{return c}};f.domain=function(domain,classes,mode,key){var d;if(mode==null){mode="e"}if(!arguments.length){return _domain}if(classes!=null){d=chroma.analyze(domain,key);if(classes===0){domain=[d.min,d.max]}else{domain=chroma.limits(d,mode,classes)}}setDomain(domain);return f};f.mode=function(_m){if(!arguments.length){return _mode}_mode=_m;resetCache();return f};f.range=function(colors,_pos){setColors(colors,_pos);return f};f.out=function(_o){_out=_o;return f};f.spread=function(val){if(!arguments.length){return _spread}_spread=val;return f};f.correctLightness=function(v){if(!arguments.length){return _correctLightness}_correctLightness=v;resetCache();if(_correctLightness){tmap=function(t){var L0,L1,L_actual,L_diff,L_ideal,max_iter,pol,t0,t1;L0=getColor(0,true).lab()[0];L1=getColor(1,true).lab()[0];pol=L0>L1;L_actual=getColor(t,true).lab()[0];L_ideal=L0+(L1-L0)*t;L_diff=L_actual-L_ideal;t0=0;t1=1;max_iter=20;while(Math.abs(L_diff)>.01&&max_iter-->0){!function(){if(pol){L_diff*=-1}if(L_diff<0){t0=t;t+=(t1-t)*.5}else{t1=t;t+=(t0-t)*.5}L_actual=getColor(t,true).lab()[0];return L_diff=L_actual-L_ideal}()}return t}}else{tmap=function(t){return t}}return f};f.colors=function(out){var i,samples,_i,_j,_len,_ref;if(out==null){out="hex"}colors=[];samples=[];if(_domain.length>2){for(i=_i=1,_ref=_domain.length;1<=_ref?_i<_ref:_i>_ref;i=1<=_ref?++_i:--_i){samples.push((_domain[i-1]+_domain[i])*.5)}}else{samples=_domain}for(_j=0,_len=samples.length;_j<_len;_j++){i=samples[_j];colors.push(f(i)[out]())}return colors};return f};if((_ref=chroma.scales)==null){chroma.scales={}}chroma.scales.cool=function(){return chroma.scale([chroma.hsl(180,1,.9),chroma.hsl(250,.7,.4)])};chroma.scales.hot=function(){return chroma.scale(["#000","#f00","#ff0","#fff"],[0,.25,.75,1]).mode("rgb")};chroma.analyze=function(data,key,filter){var add,k,r,val,visit,_i,_len;r={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};if(filter==null){filter=function(){return true}}add=function(val){if(val!=null&&!isNaN(val)){r.values.push(val);r.sum+=val;if(val<r.min){r.min=val}if(val>r.max){r.max=val}r.count+=1}};visit=function(val,k){if(filter(val,k)){if(key!=null&&type(key)==="function"){return add(key(val))}else if(key!=null&&type(key)==="string"||type(key)==="number"){return add(val[key])}else{return add(val)}}};if(type(data)==="array"){for(_i=0,_len=data.length;_i<_len;_i++){val=data[_i];visit(val)}}else{for(k in data){val=data[k];visit(val,k)}}r.domain=[r.min,r.max];r.limits=function(mode,num){return chroma.limits(r,mode,num)};return r};chroma.limits=function(data,mode,num){var assignments,best,centroids,cluster,clusterSizes,dist,i,j,kClusters,limits,max,max_log,min,min_log,mindist,n,nb_iters,newCentroids,p,pb,pr,repeat,sum,tmpKMeansBreaks,value,values,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_ref1,_ref10,_ref11,_ref12,_ref13,_ref14,_ref15,_ref2,_ref3,_ref4,_ref5,_ref6,_ref7,_ref8,_ref9,_s,_t,_u,_v,_w;if(mode==null){mode="equal"}if(num==null){num=7}if(data.values==null){data=chroma.analyze(data)}min=data.min;max=data.max;sum=data.sum;values=data.values.sort(function(a,b){return a-b});limits=[];if(mode.substr(0,1)==="c"){limits.push(min);limits.push(max)}if(mode.substr(0,1)==="e"){limits.push(min);for(i=_i=1,_ref1=num-1;1<=_ref1?_i<=_ref1:_i>=_ref1;i=1<=_ref1?++_i:--_i){limits.push(min+i/num*(max-min))}limits.push(max)}else if(mode.substr(0,1)==="l"){if(min<=0){throw"Logarithmic scales are only possible for values > 0"}min_log=Math.LOG10E*Math.log(min);max_log=Math.LOG10E*Math.log(max);limits.push(min);for(i=_j=1,_ref2=num-1;1<=_ref2?_j<=_ref2:_j>=_ref2;i=1<=_ref2?++_j:--_j){limits.push(Math.pow(10,min_log+i/num*(max_log-min_log)))}limits.push(max)}else if(mode.substr(0,1)==="q"){limits.push(min);for(i=_k=1,_ref3=num-1;1<=_ref3?_k<=_ref3:_k>=_ref3;i=1<=_ref3?++_k:--_k){p=values.length*i/num;pb=Math.floor(p);if(pb===p){limits.push(values[pb])}else{pr=p-pb;limits.push(values[pb]*pr+values[pb+1]*(1-pr))}}limits.push(max)}else if(mode.substr(0,1)==="k"){n=values.length;assignments=new Array(n);clusterSizes=new Array(num);repeat=true;nb_iters=0;centroids=null;centroids=[];centroids.push(min);for(i=_l=1,_ref4=num-1;1<=_ref4?_l<=_ref4:_l>=_ref4;i=1<=_ref4?++_l:--_l){centroids.push(min+i/num*(max-min))}centroids.push(max);while(repeat){for(j=_m=0,_ref5=num-1;0<=_ref5?_m<=_ref5:_m>=_ref5;j=0<=_ref5?++_m:--_m){clusterSizes[j]=0}for(i=_n=0,_ref6=n-1;0<=_ref6?_n<=_ref6:_n>=_ref6;i=0<=_ref6?++_n:--_n){value=values[i];mindist=Number.MAX_VALUE;for(j=_o=0,_ref7=num-1;0<=_ref7?_o<=_ref7:_o>=_ref7;j=0<=_ref7?++_o:--_o){dist=Math.abs(centroids[j]-value);if(dist<mindist){mindist=dist;best=j}}clusterSizes[best]++;assignments[i]=best}newCentroids=new Array(num);for(j=_p=0,_ref8=num-1;0<=_ref8?_p<=_ref8:_p>=_ref8;j=0<=_ref8?++_p:--_p){newCentroids[j]=null}for(i=_q=0,_ref9=n-1;0<=_ref9?_q<=_ref9:_q>=_ref9;i=0<=_ref9?++_q:--_q){cluster=assignments[i];if(newCentroids[cluster]===null){newCentroids[cluster]=values[i]}else{newCentroids[cluster]+=values[i]}}for(j=_r=0,_ref10=num-1;0<=_ref10?_r<=_ref10:_r>=_ref10;j=0<=_ref10?++_r:--_r){newCentroids[j]*=1/clusterSizes[j]}repeat=false;for(j=_s=0,_ref11=num-1;0<=_ref11?_s<=_ref11:_s>=_ref11;j=0<=_ref11?++_s:--_s){if(newCentroids[j]!==centroids[i]){repeat=true;break}}centroids=newCentroids;nb_iters++;if(nb_iters>200){repeat=false}}kClusters={};for(j=_t=0,_ref12=num-1;0<=_ref12?_t<=_ref12:_t>=_ref12;j=0<=_ref12?++_t:--_t){kClusters[j]=[]}for(i=_u=0,_ref13=n-1;0<=_ref13?_u<=_ref13:_u>=_ref13;i=0<=_ref13?++_u:--_u){cluster=assignments[i];kClusters[cluster].push(values[i])}tmpKMeansBreaks=[];for(j=_v=0,_ref14=num-1;0<=_ref14?_v<=_ref14:_v>=_ref14;j=0<=_ref14?++_v:--_v){tmpKMeansBreaks.push(kClusters[j][0]);tmpKMeansBreaks.push(kClusters[j][kClusters[j].length-1])}tmpKMeansBreaks=tmpKMeansBreaks.sort(function(a,b){return a-b});limits.push(tmpKMeansBreaks[0]);for(i=_w=1,_ref15=tmpKMeansBreaks.length-1;_w<=_ref15;i=_w+=2){if(!isNaN(tmpKMeansBreaks[i])){limits.push(tmpKMeansBreaks[i])}}}return limits};/**
  	ColorBrewer colors for chroma.js
  
  	Copyright (c) 2002 Cynthia Brewer, Mark Harrower, and The 
  	Pennsylvania State University.
  
  	Licensed under the Apache License, Version 2.0 (the "License"); 
  	you may not use this file except in compliance with the License.
  	You may obtain a copy of the License at	
  	http://www.apache.org/licenses/LICENSE-2.0
  
  	Unless required by applicable law or agreed to in writing, software distributed
  	under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
  	CONDITIONS OF ANY KIND, either express or implied. See the License for the
  	specific language governing permissions and limitations under the License.
  
      @preserve
  */
chroma.brewer=brewer={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]};chroma.colors=colors={indigo:"#4b0082",gold:"#ffd700",hotpink:"#ff69b4",firebrick:"#b22222",indianred:"#cd5c5c",yellow:"#ffff00",mistyrose:"#ffe4e1",darkolivegreen:"#556b2f",olive:"#808000",darkseagreen:"#8fbc8f",pink:"#ffc0cb",tomato:"#ff6347",lightcoral:"#f08080",orangered:"#ff4500",navajowhite:"#ffdead",lime:"#00ff00",palegreen:"#98fb98",darkslategrey:"#2f4f4f",greenyellow:"#adff2f",burlywood:"#deb887",seashell:"#fff5ee",mediumspringgreen:"#00fa9a",fuchsia:"#ff00ff",papayawhip:"#ffefd5",blanchedalmond:"#ffebcd",chartreuse:"#7fff00",dimgray:"#696969",black:"#000000",peachpuff:"#ffdab9",springgreen:"#00ff7f",aquamarine:"#7fffd4",white:"#ffffff",orange:"#ffa500",lightsalmon:"#ffa07a",darkslategray:"#2f4f4f",brown:"#a52a2a",ivory:"#fffff0",dodgerblue:"#1e90ff",peru:"#cd853f",lawngreen:"#7cfc00",chocolate:"#d2691e",crimson:"#dc143c",forestgreen:"#228b22",darkgrey:"#a9a9a9",lightseagreen:"#20b2aa",cyan:"#00ffff",mintcream:"#f5fffa",silver:"#c0c0c0",antiquewhite:"#faebd7",mediumorchid:"#ba55d3",skyblue:"#87ceeb",gray:"#808080",darkturquoise:"#00ced1",goldenrod:"#daa520",darkgreen:"#006400",floralwhite:"#fffaf0",darkviolet:"#9400d3",darkgray:"#a9a9a9",moccasin:"#ffe4b5",saddlebrown:"#8b4513",grey:"#808080",darkslateblue:"#483d8b",lightskyblue:"#87cefa",lightpink:"#ffb6c1",mediumvioletred:"#c71585",slategrey:"#708090",red:"#ff0000",deeppink:"#ff1493",limegreen:"#32cd32",darkmagenta:"#8b008b",palegoldenrod:"#eee8aa",plum:"#dda0dd",turquoise:"#40e0d0",lightgrey:"#d3d3d3",lightgoldenrodyellow:"#fafad2",darkgoldenrod:"#b8860b",lavender:"#e6e6fa",maroon:"#800000",yellowgreen:"#9acd32",sandybrown:"#f4a460",thistle:"#d8bfd8",violet:"#ee82ee",navy:"#000080",magenta:"#ff00ff",dimgrey:"#696969",tan:"#d2b48c",rosybrown:"#bc8f8f",olivedrab:"#6b8e23",blue:"#0000ff",lightblue:"#add8e6",ghostwhite:"#f8f8ff",honeydew:"#f0fff0",cornflowerblue:"#6495ed",slateblue:"#6a5acd",linen:"#faf0e6",darkblue:"#00008b",powderblue:"#b0e0e6",seagreen:"#2e8b57",darkkhaki:"#bdb76b",snow:"#fffafa",sienna:"#a0522d",mediumblue:"#0000cd",royalblue:"#4169e1",lightcyan:"#e0ffff",green:"#008000",mediumpurple:"#9370db",midnightblue:"#191970",cornsilk:"#fff8dc",paleturquoise:"#afeeee",bisque:"#ffe4c4",slategray:"#708090",darkcyan:"#008b8b",khaki:"#f0e68c",wheat:"#f5deb3",teal:"#008080",darkorchid:"#9932cc",deepskyblue:"#00bfff",salmon:"#fa8072",darkred:"#8b0000",steelblue:"#4682b4",palevioletred:"#db7093",lightslategray:"#778899",aliceblue:"#f0f8ff",lightslategrey:"#778899",lightgreen:"#90ee90",orchid:"#da70d6",gainsboro:"#dcdcdc",mediumseagreen:"#3cb371",lightgray:"#d3d3d3",mediumturquoise:"#48d1cc",lemonchiffon:"#fffacd",cadetblue:"#5f9ea0",lightyellow:"#ffffe0",lavenderblush:"#fff0f5",coral:"#ff7f50",purple:"#800080",aqua:"#00ffff",whitesmoke:"#f5f5f5",mediumslateblue:"#7b68ee",darkorange:"#ff8c00",mediumaquamarine:"#66cdaa",darksalmon:"#e9967a",beige:"#f5f5dc",blueviolet:"#8a2be2",azure:"#f0ffff",lightsteelblue:"#b0c4de",oldlace:"#fdf5e6"};type=function(){var classToType,name,_i,_len,_ref1;classToType={};_ref1="Boolean Number String Function Array Date RegExp Undefined Null".split(" ");for(_i=0,_len=_ref1.length;_i<_len;_i++){name=_ref1[_i];classToType["[object "+name+"]"]=name.toLowerCase()}return function(obj){var strType;strType=Object.prototype.toString.call(obj);return classToType[strType]||"object"}}();limit=function(x,min,max){if(min==null){min=0}if(max==null){max=1}if(x<min){x=min}if(x>max){x=max}return x};unpack=function(args){if(args.length>=3){return args}else{return args[0]}};TWOPI=Math.PI*2;PITHIRD=Math.PI/3;cos=Math.cos;bezier=function(colors){var I,I0,I1,c,lab0,lab1,lab2,lab3,_ref1,_ref2,_ref3;colors=function(){var _i,_len,_results;_results=[];for(_i=0,_len=colors.length;_i<_len;_i++){c=colors[_i];_results.push(chroma(c))}return _results}();if(colors.length===2){_ref1=function(){var _i,_len,_results;_results=[];for(_i=0,_len=colors.length;_i<_len;_i++){c=colors[_i];_results.push(c.lab())}return _results}(),lab0=_ref1[0],lab1=_ref1[1];I=function(t){var i,lab;lab=function(){var _i,_results;_results=[];for(i=_i=0;_i<=2;i=++_i){_results.push(lab0[i]+t*(lab1[i]-lab0[i]))}return _results}();return chroma.lab.apply(chroma,lab)}}else if(colors.length===3){_ref2=function(){var _i,_len,_results;_results=[];for(_i=0,_len=colors.length;_i<_len;_i++){c=colors[_i];_results.push(c.lab())}return _results}(),lab0=_ref2[0],lab1=_ref2[1],lab2=_ref2[2];I=function(t){var i,lab;lab=function(){var _i,_results;_results=[];for(i=_i=0;_i<=2;i=++_i){_results.push((1-t)*(1-t)*lab0[i]+2*(1-t)*t*lab1[i]+t*t*lab2[i])}return _results}();return chroma.lab.apply(chroma,lab)}}else if(colors.length===4){_ref3=function(){var _i,_len,_results;_results=[];for(_i=0,_len=colors.length;_i<_len;_i++){c=colors[_i];_results.push(c.lab())}return _results}(),lab0=_ref3[0],lab1=_ref3[1],lab2=_ref3[2],lab3=_ref3[3];I=function(t){var i,lab;lab=function(){var _i,_results;_results=[];for(i=_i=0;_i<=2;i=++_i){_results.push((1-t)*(1-t)*(1-t)*lab0[i]+3*(1-t)*(1-t)*t*lab1[i]+3*(1-t)*t*t*lab2[i]+t*t*t*lab3[i])}return _results}();return chroma.lab.apply(chroma,lab)}}else if(colors.length===5){I0=bezier(colors.slice(0,3));I1=bezier(colors.slice(2,5));I=function(t){if(t<.5){return I0(t*2)}else{return I1((t-.5)*2)}}}return I};chroma.interpolate.bezier=bezier}.call(this);
// File:js/lib/jszip.min.js

/*!

JSZip - A Javascript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2014 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/master/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/master/LICENSE
*/
!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.JSZip=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";c.encode=function(a){for(var b,c,e,f,g,h,i,j="",k=0;k<a.length;)b=a.charCodeAt(k++),c=a.charCodeAt(k++),e=a.charCodeAt(k++),f=b>>2,g=(3&b)<<4|c>>4,h=(15&c)<<2|e>>6,i=63&e,isNaN(c)?h=i=64:isNaN(e)&&(i=64),j=j+d.charAt(f)+d.charAt(g)+d.charAt(h)+d.charAt(i);return j},c.decode=function(a){var b,c,e,f,g,h,i,j="",k=0;for(a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");k<a.length;)f=d.indexOf(a.charAt(k++)),g=d.indexOf(a.charAt(k++)),h=d.indexOf(a.charAt(k++)),i=d.indexOf(a.charAt(k++)),b=f<<2|g>>4,c=(15&g)<<4|h>>2,e=(3&h)<<6|i,j+=String.fromCharCode(b),64!=h&&(j+=String.fromCharCode(c)),64!=i&&(j+=String.fromCharCode(e));return j}},{}],2:[function(a,b){"use strict";function c(){this.compressedSize=0,this.uncompressedSize=0,this.crc32=0,this.compressionMethod=null,this.compressedContent=null}c.prototype={getContent:function(){return null},getCompressedContent:function(){return null}},b.exports=c},{}],3:[function(a,b,c){"use strict";c.STORE={magic:"\x00\x00",compress:function(a){return a},uncompress:function(a){return a},compressInputType:null,uncompressInputType:null},c.DEFLATE=a("./flate")},{"./flate":8}],4:[function(a,b){"use strict";var c=a("./utils"),d=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];b.exports=function(a,b){if("undefined"==typeof a||!a.length)return 0;var e="string"!==c.getTypeOf(a);"undefined"==typeof b&&(b=0);var f=0,g=0,h=0;b=-1^b;for(var i=0,j=a.length;j>i;i++)h=e?a[i]:a.charCodeAt(i),g=255&(b^h),f=d[g],b=b>>>8^f;return-1^b}},{"./utils":21}],5:[function(a,b){"use strict";function c(){this.data=null,this.length=0,this.index=0}var d=a("./utils");c.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<a||0>a)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var b,c=0;for(this.checkOffset(a),b=this.index+a-1;b>=this.index;b--)c=(c<<8)+this.byteAt(b);return this.index+=a,c},readString:function(a){return d.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date((a>>25&127)+1980,(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1)}},b.exports=c},{"./utils":21}],6:[function(a,b,c){"use strict";c.base64=!1,c.binary=!1,c.dir=!1,c.createFolders=!1,c.date=null,c.compression=null,c.comment=null},{}],7:[function(a,b,c){"use strict";var d=a("./utils");c.string2binary=function(a){return d.string2binary(a)},c.string2Uint8Array=function(a){return d.transformTo("uint8array",a)},c.uint8Array2String=function(a){return d.transformTo("string",a)},c.string2Blob=function(a){var b=d.transformTo("arraybuffer",a);return d.arrayBuffer2Blob(b)},c.arrayBuffer2Blob=function(a){return d.arrayBuffer2Blob(a)},c.transformTo=function(a,b){return d.transformTo(a,b)},c.getTypeOf=function(a){return d.getTypeOf(a)},c.checkSupport=function(a){return d.checkSupport(a)},c.MAX_VALUE_16BITS=d.MAX_VALUE_16BITS,c.MAX_VALUE_32BITS=d.MAX_VALUE_32BITS,c.pretty=function(a){return d.pretty(a)},c.findCompression=function(a){return d.findCompression(a)},c.isRegExp=function(a){return d.isRegExp(a)}},{"./utils":21}],8:[function(a,b,c){"use strict";var d="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,e=a("pako");c.uncompressInputType=d?"uint8array":"array",c.compressInputType=d?"uint8array":"array",c.magic="\b\x00",c.compress=function(a){return e.deflateRaw(a)},c.uncompress=function(a){return e.inflateRaw(a)}},{pako:24}],9:[function(a,b){"use strict";function c(a,b){return this instanceof c?(this.files={},this.comment=null,this.root="",a&&this.load(a,b),void(this.clone=function(){var a=new c;for(var b in this)"function"!=typeof this[b]&&(a[b]=this[b]);return a})):new c(a,b)}var d=a("./base64");c.prototype=a("./object"),c.prototype.load=a("./load"),c.support=a("./support"),c.defaults=a("./defaults"),c.utils=a("./deprecatedPublicUtils"),c.base64={encode:function(a){return d.encode(a)},decode:function(a){return d.decode(a)}},c.compressions=a("./compressions"),b.exports=c},{"./base64":1,"./compressions":3,"./defaults":6,"./deprecatedPublicUtils":7,"./load":10,"./object":13,"./support":17}],10:[function(a,b){"use strict";var c=a("./base64"),d=a("./zipEntries");b.exports=function(a,b){var e,f,g,h;for(b=b||{},b.base64&&(a=c.decode(a)),f=new d(a,b),e=f.files,g=0;g<e.length;g++)h=e[g],this.file(h.fileName,h.decompressed,{binary:!0,optimizedBinaryString:!0,date:h.date,dir:h.dir,comment:h.fileComment.length?h.fileComment:null,createFolders:b.createFolders});return f.zipComment.length&&(this.comment=f.zipComment),this}},{"./base64":1,"./zipEntries":22}],11:[function(a,b){(function(a){"use strict";b.exports=function(b,c){return new a(b,c)},b.exports.test=function(b){return a.isBuffer(b)}}).call(this,"undefined"!=typeof Buffer?Buffer:void 0)},{}],12:[function(a,b){"use strict";function c(a){this.data=a,this.length=this.data.length,this.index=0}var d=a("./uint8ArrayReader");c.prototype=new d,c.prototype.readData=function(a){this.checkOffset(a);var b=this.data.slice(this.index,this.index+a);return this.index+=a,b},b.exports=c},{"./uint8ArrayReader":18}],13:[function(a,b){"use strict";var c=a("./support"),d=a("./utils"),e=a("./crc32"),f=a("./signature"),g=a("./defaults"),h=a("./base64"),i=a("./compressions"),j=a("./compressedObject"),k=a("./nodeBuffer"),l=a("./utf8"),m=a("./stringWriter"),n=a("./uint8ArrayWriter"),o=function(a){if(a._data instanceof j&&(a._data=a._data.getContent(),a.options.binary=!0,a.options.base64=!1,"uint8array"===d.getTypeOf(a._data))){var b=a._data;a._data=new Uint8Array(b.length),0!==b.length&&a._data.set(b,0)}return a._data},p=function(a){var b=o(a),e=d.getTypeOf(b);return"string"===e?!a.options.binary&&c.nodebuffer?k(b,"utf-8"):a.asBinary():b},q=function(a){var b=o(this);return null===b||"undefined"==typeof b?"":(this.options.base64&&(b=h.decode(b)),b=a&&this.options.binary?A.utf8decode(b):d.transformTo("string",b),a||this.options.binary||(b=d.transformTo("string",A.utf8encode(b))),b)},r=function(a,b,c){this.name=a,this.dir=c.dir,this.date=c.date,this.comment=c.comment,this._data=b,this.options=c,this._initialMetadata={dir:c.dir,date:c.date}};r.prototype={asText:function(){return q.call(this,!0)},asBinary:function(){return q.call(this,!1)},asNodeBuffer:function(){var a=p(this);return d.transformTo("nodebuffer",a)},asUint8Array:function(){var a=p(this);return d.transformTo("uint8array",a)},asArrayBuffer:function(){return this.asUint8Array().buffer}};var s=function(a,b){var c,d="";for(c=0;b>c;c++)d+=String.fromCharCode(255&a),a>>>=8;return d},t=function(){var a,b,c={};for(a=0;a<arguments.length;a++)for(b in arguments[a])arguments[a].hasOwnProperty(b)&&"undefined"==typeof c[b]&&(c[b]=arguments[a][b]);return c},u=function(a){return a=a||{},a.base64!==!0||null!==a.binary&&void 0!==a.binary||(a.binary=!0),a=t(a,g),a.date=a.date||new Date,null!==a.compression&&(a.compression=a.compression.toUpperCase()),a},v=function(a,b,c){var e,f=d.getTypeOf(b);if(c=u(c),c.createFolders&&(e=w(a))&&x.call(this,e,!0),c.dir||null===b||"undefined"==typeof b)c.base64=!1,c.binary=!1,b=null;else if("string"===f)c.binary&&!c.base64&&c.optimizedBinaryString!==!0&&(b=d.string2binary(b));else{if(c.base64=!1,c.binary=!0,!(f||b instanceof j))throw new Error("The data of '"+a+"' is in an unsupported format !");"arraybuffer"===f&&(b=d.transformTo("uint8array",b))}var g=new r(a,b,c);return this.files[a]=g,g},w=function(a){"/"==a.slice(-1)&&(a=a.substring(0,a.length-1));var b=a.lastIndexOf("/");return b>0?a.substring(0,b):""},x=function(a,b){return"/"!=a.slice(-1)&&(a+="/"),b="undefined"!=typeof b?b:!1,this.files[a]||v.call(this,a,null,{dir:!0,createFolders:b}),this.files[a]},y=function(a,b){var c,f=new j;return a._data instanceof j?(f.uncompressedSize=a._data.uncompressedSize,f.crc32=a._data.crc32,0===f.uncompressedSize||a.dir?(b=i.STORE,f.compressedContent="",f.crc32=0):a._data.compressionMethod===b.magic?f.compressedContent=a._data.getCompressedContent():(c=a._data.getContent(),f.compressedContent=b.compress(d.transformTo(b.compressInputType,c)))):(c=p(a),(!c||0===c.length||a.dir)&&(b=i.STORE,c=""),f.uncompressedSize=c.length,f.crc32=e(c),f.compressedContent=b.compress(d.transformTo(b.compressInputType,c))),f.compressedSize=f.compressedContent.length,f.compressionMethod=b.magic,f},z=function(a,b,c,g){var h,i,j,k,m=(c.compressedContent,d.transformTo("string",l.utf8encode(b.name))),n=b.comment||"",o=d.transformTo("string",l.utf8encode(n)),p=m.length!==b.name.length,q=o.length!==n.length,r=b.options,t="",u="",v="";j=b._initialMetadata.dir!==b.dir?b.dir:r.dir,k=b._initialMetadata.date!==b.date?b.date:r.date,h=k.getHours(),h<<=6,h|=k.getMinutes(),h<<=5,h|=k.getSeconds()/2,i=k.getFullYear()-1980,i<<=4,i|=k.getMonth()+1,i<<=5,i|=k.getDate(),p&&(u=s(1,1)+s(e(m),4)+m,t+="up"+s(u.length,2)+u),q&&(v=s(1,1)+s(this.crc32(o),4)+o,t+="uc"+s(v.length,2)+v);var w="";w+="\n\x00",w+=p||q?"\x00\b":"\x00\x00",w+=c.compressionMethod,w+=s(h,2),w+=s(i,2),w+=s(c.crc32,4),w+=s(c.compressedSize,4),w+=s(c.uncompressedSize,4),w+=s(m.length,2),w+=s(t.length,2);var x=f.LOCAL_FILE_HEADER+w+m+t,y=f.CENTRAL_FILE_HEADER+"\x00"+w+s(o.length,2)+"\x00\x00\x00\x00"+(j===!0?"\x00\x00\x00":"\x00\x00\x00\x00")+s(g,4)+m+t+o;return{fileRecord:x,dirRecord:y,compressedObject:c}},A={load:function(){throw new Error("Load method is not defined. Is the file jszip-load.js included ?")},filter:function(a){var b,c,d,e,f=[];for(b in this.files)this.files.hasOwnProperty(b)&&(d=this.files[b],e=new r(d.name,d._data,t(d.options)),c=b.slice(this.root.length,b.length),b.slice(0,this.root.length)===this.root&&a(c,e)&&f.push(e));return f},file:function(a,b,c){if(1===arguments.length){if(d.isRegExp(a)){var e=a;return this.filter(function(a,b){return!b.dir&&e.test(a)})}return this.filter(function(b,c){return!c.dir&&b===a})[0]||null}return a=this.root+a,v.call(this,a,b,c),this},folder:function(a){if(!a)return this;if(d.isRegExp(a))return this.filter(function(b,c){return c.dir&&a.test(b)});var b=this.root+a,c=x.call(this,b),e=this.clone();return e.root=c.name,e},remove:function(a){a=this.root+a;var b=this.files[a];if(b||("/"!=a.slice(-1)&&(a+="/"),b=this.files[a]),b&&!b.dir)delete this.files[a];else for(var c=this.filter(function(b,c){return c.name.slice(0,a.length)===a}),d=0;d<c.length;d++)delete this.files[c[d].name];return this},generate:function(a){a=t(a||{},{base64:!0,compression:"STORE",type:"base64",comment:null}),d.checkSupport(a.type);var b,c,e=[],g=0,j=0,k=d.transformTo("string",this.utf8encode(a.comment||this.comment||""));for(var l in this.files)if(this.files.hasOwnProperty(l)){var o=this.files[l],p=o.options.compression||a.compression.toUpperCase(),q=i[p];if(!q)throw new Error(p+" is not a valid compression method !");var r=y.call(this,o,q),u=z.call(this,l,o,r,g);g+=u.fileRecord.length+r.compressedSize,j+=u.dirRecord.length,e.push(u)}var v="";v=f.CENTRAL_DIRECTORY_END+"\x00\x00\x00\x00"+s(e.length,2)+s(e.length,2)+s(j,4)+s(g,4)+s(k.length,2)+k;var w=a.type.toLowerCase();for(b="uint8array"===w||"arraybuffer"===w||"blob"===w||"nodebuffer"===w?new n(g+j+v.length):new m(g+j+v.length),c=0;c<e.length;c++)b.append(e[c].fileRecord),b.append(e[c].compressedObject.compressedContent);for(c=0;c<e.length;c++)b.append(e[c].dirRecord);b.append(v);var x=b.finalize();switch(a.type.toLowerCase()){case"uint8array":case"arraybuffer":case"nodebuffer":return d.transformTo(a.type.toLowerCase(),x);case"blob":return d.arrayBuffer2Blob(d.transformTo("arraybuffer",x));case"base64":return a.base64?h.encode(x):x;default:return x}},crc32:function(a,b){return e(a,b)},utf8encode:function(a){return d.transformTo("string",l.utf8encode(a))},utf8decode:function(a){return l.utf8decode(a)}};b.exports=A},{"./base64":1,"./compressedObject":2,"./compressions":3,"./crc32":4,"./defaults":6,"./nodeBuffer":11,"./signature":14,"./stringWriter":16,"./support":17,"./uint8ArrayWriter":19,"./utf8":20,"./utils":21}],14:[function(a,b,c){"use strict";c.LOCAL_FILE_HEADER="PK",c.CENTRAL_FILE_HEADER="PK",c.CENTRAL_DIRECTORY_END="PK",c.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",c.ZIP64_CENTRAL_DIRECTORY_END="PK",c.DATA_DESCRIPTOR="PK\b"},{}],15:[function(a,b){"use strict";function c(a,b){this.data=a,b||(this.data=e.string2binary(this.data)),this.length=this.data.length,this.index=0}var d=a("./dataReader"),e=a("./utils");c.prototype=new d,c.prototype.byteAt=function(a){return this.data.charCodeAt(a)},c.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)},c.prototype.readData=function(a){this.checkOffset(a);var b=this.data.slice(this.index,this.index+a);return this.index+=a,b},b.exports=c},{"./dataReader":5,"./utils":21}],16:[function(a,b){"use strict";var c=a("./utils"),d=function(){this.data=[]};d.prototype={append:function(a){a=c.transformTo("string",a),this.data.push(a)},finalize:function(){return this.data.join("")}},b.exports=d},{"./utils":21}],17:[function(a,b,c){(function(a){"use strict";if(c.base64=!0,c.array=!0,c.string=!0,c.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,c.nodebuffer="undefined"!=typeof a,c.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)c.blob=!1;else{var b=new ArrayBuffer(0);try{c.blob=0===new Blob([b],{type:"application/zip"}).size}catch(d){try{var e=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,f=new e;f.append(b),c.blob=0===f.getBlob("application/zip").size}catch(d){c.blob=!1}}}}).call(this,"undefined"!=typeof Buffer?Buffer:void 0)},{}],18:[function(a,b){"use strict";function c(a){a&&(this.data=a,this.length=this.data.length,this.index=0)}var d=a("./dataReader");c.prototype=new d,c.prototype.byteAt=function(a){return this.data[a]},c.prototype.lastIndexOfSignature=function(a){for(var b=a.charCodeAt(0),c=a.charCodeAt(1),d=a.charCodeAt(2),e=a.charCodeAt(3),f=this.length-4;f>=0;--f)if(this.data[f]===b&&this.data[f+1]===c&&this.data[f+2]===d&&this.data[f+3]===e)return f;return-1},c.prototype.readData=function(a){if(this.checkOffset(a),0===a)return new Uint8Array(0);var b=this.data.subarray(this.index,this.index+a);return this.index+=a,b},b.exports=c},{"./dataReader":5}],19:[function(a,b){"use strict";var c=a("./utils"),d=function(a){this.data=new Uint8Array(a),this.index=0};d.prototype={append:function(a){0!==a.length&&(a=c.transformTo("uint8array",a),this.data.set(a,this.index),this.index+=a.length)},finalize:function(){return this.data}},b.exports=d},{"./utils":21}],20:[function(a,b,c){"use strict";for(var d=a("./utils"),e=a("./support"),f=a("./nodeBuffer"),g=new Array(256),h=0;256>h;h++)g[h]=h>=252?6:h>=248?5:h>=240?4:h>=224?3:h>=192?2:1;g[254]=g[254]=1;var i=function(a){var b,c,d,f,g,h=a.length,i=0;for(f=0;h>f;f++)c=a.charCodeAt(f),55296===(64512&c)&&h>f+1&&(d=a.charCodeAt(f+1),56320===(64512&d)&&(c=65536+(c-55296<<10)+(d-56320),f++)),i+=128>c?1:2048>c?2:65536>c?3:4;for(b=e.uint8array?new Uint8Array(i):new Array(i),g=0,f=0;i>g;f++)c=a.charCodeAt(f),55296===(64512&c)&&h>f+1&&(d=a.charCodeAt(f+1),56320===(64512&d)&&(c=65536+(c-55296<<10)+(d-56320),f++)),128>c?b[g++]=c:2048>c?(b[g++]=192|c>>>6,b[g++]=128|63&c):65536>c?(b[g++]=224|c>>>12,b[g++]=128|c>>>6&63,b[g++]=128|63&c):(b[g++]=240|c>>>18,b[g++]=128|c>>>12&63,b[g++]=128|c>>>6&63,b[g++]=128|63&c);return b},j=function(a,b){var c;for(b=b||a.length,b>a.length&&(b=a.length),c=b-1;c>=0&&128===(192&a[c]);)c--;return 0>c?b:0===c?b:c+g[a[c]]>b?c:b},k=function(a){var b,c,e,f,h=a.length,i=new Array(2*h);for(c=0,b=0;h>b;)if(e=a[b++],128>e)i[c++]=e;else if(f=g[e],f>4)i[c++]=65533,b+=f-1;else{for(e&=2===f?31:3===f?15:7;f>1&&h>b;)e=e<<6|63&a[b++],f--;f>1?i[c++]=65533:65536>e?i[c++]=e:(e-=65536,i[c++]=55296|e>>10&1023,i[c++]=56320|1023&e)}return i.length!==c&&(i.subarray?i=i.subarray(0,c):i.length=c),d.applyFromCharCode(i)};c.utf8encode=function(a){return e.nodebuffer?f(a,"utf-8"):i(a)},c.utf8decode=function(a){if(e.nodebuffer)return d.transformTo("nodebuffer",a).toString("utf-8");a=d.transformTo(e.uint8array?"uint8array":"array",a);for(var b=[],c=0,f=a.length,g=65536;f>c;){var h=j(a,Math.min(c+g,f));b.push(e.uint8array?k(a.subarray(c,h)):k(a.slice(c,h))),c=h}return b.join("")}},{"./nodeBuffer":11,"./support":17,"./utils":21}],21:[function(a,b,c){"use strict";function d(a){return a}function e(a,b){for(var c=0;c<a.length;++c)b[c]=255&a.charCodeAt(c);return b}function f(a){var b=65536,d=[],e=a.length,f=c.getTypeOf(a),g=0,h=!0;try{switch(f){case"uint8array":String.fromCharCode.apply(null,new Uint8Array(0));break;case"nodebuffer":String.fromCharCode.apply(null,j(0))}}catch(i){h=!1}if(!h){for(var k="",l=0;l<a.length;l++)k+=String.fromCharCode(a[l]);return k}for(;e>g&&b>1;)try{d.push("array"===f||"nodebuffer"===f?String.fromCharCode.apply(null,a.slice(g,Math.min(g+b,e))):String.fromCharCode.apply(null,a.subarray(g,Math.min(g+b,e)))),g+=b}catch(i){b=Math.floor(b/2)}return d.join("")}function g(a,b){for(var c=0;c<a.length;c++)b[c]=a[c];return b}var h=a("./support"),i=a("./compressions"),j=a("./nodeBuffer");c.string2binary=function(a){for(var b="",c=0;c<a.length;c++)b+=String.fromCharCode(255&a.charCodeAt(c));return b},c.arrayBuffer2Blob=function(a){c.checkSupport("blob");try{return new Blob([a],{type:"application/zip"})}catch(b){try{var d=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,e=new d;return e.append(a),e.getBlob("application/zip")}catch(b){throw new Error("Bug : can't construct the Blob.")}}},c.applyFromCharCode=f;var k={};k.string={string:d,array:function(a){return e(a,new Array(a.length))},arraybuffer:function(a){return k.string.uint8array(a).buffer},uint8array:function(a){return e(a,new Uint8Array(a.length))},nodebuffer:function(a){return e(a,j(a.length))}},k.array={string:f,array:d,arraybuffer:function(a){return new Uint8Array(a).buffer},uint8array:function(a){return new Uint8Array(a)},nodebuffer:function(a){return j(a)}},k.arraybuffer={string:function(a){return f(new Uint8Array(a))},array:function(a){return g(new Uint8Array(a),new Array(a.byteLength))},arraybuffer:d,uint8array:function(a){return new Uint8Array(a)},nodebuffer:function(a){return j(new Uint8Array(a))}},k.uint8array={string:f,array:function(a){return g(a,new Array(a.length))},arraybuffer:function(a){return a.buffer},uint8array:d,nodebuffer:function(a){return j(a)}},k.nodebuffer={string:f,array:function(a){return g(a,new Array(a.length))},arraybuffer:function(a){return k.nodebuffer.uint8array(a).buffer},uint8array:function(a){return g(a,new Uint8Array(a.length))},nodebuffer:d},c.transformTo=function(a,b){if(b||(b=""),!a)return b;c.checkSupport(a);var d=c.getTypeOf(b),e=k[d][a](b);return e},c.getTypeOf=function(a){return"string"==typeof a?"string":"[object Array]"===Object.prototype.toString.call(a)?"array":h.nodebuffer&&j.test(a)?"nodebuffer":h.uint8array&&a instanceof Uint8Array?"uint8array":h.arraybuffer&&a instanceof ArrayBuffer?"arraybuffer":void 0},c.checkSupport=function(a){var b=h[a.toLowerCase()];if(!b)throw new Error(a+" is not supported by this browser")},c.MAX_VALUE_16BITS=65535,c.MAX_VALUE_32BITS=-1,c.pretty=function(a){var b,c,d="";for(c=0;c<(a||"").length;c++)b=a.charCodeAt(c),d+="\\x"+(16>b?"0":"")+b.toString(16).toUpperCase();return d},c.findCompression=function(a){for(var b in i)if(i.hasOwnProperty(b)&&i[b].magic===a)return i[b];return null},c.isRegExp=function(a){return"[object RegExp]"===Object.prototype.toString.call(a)}},{"./compressions":3,"./nodeBuffer":11,"./support":17}],22:[function(a,b){"use strict";function c(a,b){this.files=[],this.loadOptions=b,a&&this.load(a)}var d=a("./stringReader"),e=a("./nodeBufferReader"),f=a("./uint8ArrayReader"),g=a("./utils"),h=a("./signature"),i=a("./zipEntry"),j=a("./support"),k=a("./object");c.prototype={checkSignature:function(a){var b=this.reader.readString(4);if(b!==a)throw new Error("Corrupted zip or bug : unexpected signature ("+g.pretty(b)+", expected "+g.pretty(a)+")")},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2),this.zipComment=this.reader.readString(this.zipCommentLength),this.zipComment=k.utf8decode(this.zipComment)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.versionMadeBy=this.reader.readString(2),this.versionNeeded=this.reader.readInt(2),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var a,b,c,d=this.zip64EndOfCentralSize-44,e=0;d>e;)a=this.reader.readInt(2),b=this.reader.readInt(4),c=this.reader.readString(b),this.zip64ExtensibleData[a]={id:a,length:b,value:c}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var a,b;for(a=0;a<this.files.length;a++)b=this.files[a],this.reader.setIndex(b.localHeaderOffset),this.checkSignature(h.LOCAL_FILE_HEADER),b.readLocalPart(this.reader),b.handleUTF8()},readCentralDir:function(){var a;for(this.reader.setIndex(this.centralDirOffset);this.reader.readString(4)===h.CENTRAL_FILE_HEADER;)a=new i({zip64:this.zip64},this.loadOptions),a.readCentralPart(this.reader),this.files.push(a)},readEndOfCentral:function(){var a=this.reader.lastIndexOfSignature(h.CENTRAL_DIRECTORY_END);if(-1===a)throw new Error("Corrupted zip : can't find end of central directory");if(this.reader.setIndex(a),this.checkSignature(h.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===g.MAX_VALUE_16BITS||this.diskWithCentralDirStart===g.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===g.MAX_VALUE_16BITS||this.centralDirRecords===g.MAX_VALUE_16BITS||this.centralDirSize===g.MAX_VALUE_32BITS||this.centralDirOffset===g.MAX_VALUE_32BITS){if(this.zip64=!0,a=this.reader.lastIndexOfSignature(h.ZIP64_CENTRAL_DIRECTORY_LOCATOR),-1===a)throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");this.reader.setIndex(a),this.checkSignature(h.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(h.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}},prepareReader:function(a){var b=g.getTypeOf(a);this.reader="string"!==b||j.uint8array?"nodebuffer"===b?new e(a):new f(g.transformTo("uint8array",a)):new d(a,this.loadOptions.optimizedBinaryString)},load:function(a){this.prepareReader(a),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},b.exports=c},{"./nodeBufferReader":12,"./object":13,"./signature":14,"./stringReader":15,"./support":17,"./uint8ArrayReader":18,"./utils":21,"./zipEntry":23}],23:[function(a,b){"use strict";function c(a,b){this.options=a,this.loadOptions=b}var d=a("./stringReader"),e=a("./utils"),f=a("./compressedObject"),g=a("./object");c.prototype={isEncrypted:function(){return 1===(1&this.bitFlag)},useUTF8:function(){return 2048===(2048&this.bitFlag)},prepareCompressedContent:function(a,b,c){return function(){var d=a.index;a.setIndex(b);var e=a.readData(c);return a.setIndex(d),e}},prepareContent:function(a,b,c,d,f){return function(){var a=e.transformTo(d.uncompressInputType,this.getCompressedContent()),b=d.uncompress(a);if(b.length!==f)throw new Error("Bug : uncompressed data size mismatch");return b}},readLocalPart:function(a){var b,c;if(a.skip(22),this.fileNameLength=a.readInt(2),c=a.readInt(2),this.fileName=a.readString(this.fileNameLength),a.skip(c),-1==this.compressedSize||-1==this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)");if(b=e.findCompression(this.compressionMethod),null===b)throw new Error("Corrupted zip : compression "+e.pretty(this.compressionMethod)+" unknown (inner file : "+this.fileName+")");if(this.decompressed=new f,this.decompressed.compressedSize=this.compressedSize,this.decompressed.uncompressedSize=this.uncompressedSize,this.decompressed.crc32=this.crc32,this.decompressed.compressionMethod=this.compressionMethod,this.decompressed.getCompressedContent=this.prepareCompressedContent(a,a.index,this.compressedSize,b),this.decompressed.getContent=this.prepareContent(a,a.index,this.compressedSize,b,this.uncompressedSize),this.loadOptions.checkCRC32&&(this.decompressed=e.transformTo("string",this.decompressed.getContent()),g.crc32(this.decompressed)!==this.crc32))throw new Error("Corrupted zip : CRC32 mismatch")},readCentralPart:function(a){if(this.versionMadeBy=a.readString(2),this.versionNeeded=a.readInt(2),this.bitFlag=a.readInt(2),this.compressionMethod=a.readString(2),this.date=a.readDate(),this.crc32=a.readInt(4),this.compressedSize=a.readInt(4),this.uncompressedSize=a.readInt(4),this.fileNameLength=a.readInt(2),this.extraFieldsLength=a.readInt(2),this.fileCommentLength=a.readInt(2),this.diskNumberStart=a.readInt(2),this.internalFileAttributes=a.readInt(2),this.externalFileAttributes=a.readInt(4),this.localHeaderOffset=a.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");this.fileName=a.readString(this.fileNameLength),this.readExtraFields(a),this.parseZIP64ExtraField(a),this.fileComment=a.readString(this.fileCommentLength),this.dir=16&this.externalFileAttributes?!0:!1},parseZIP64ExtraField:function(){if(this.extraFields[1]){var a=new d(this.extraFields[1].value);this.uncompressedSize===e.MAX_VALUE_32BITS&&(this.uncompressedSize=a.readInt(8)),this.compressedSize===e.MAX_VALUE_32BITS&&(this.compressedSize=a.readInt(8)),this.localHeaderOffset===e.MAX_VALUE_32BITS&&(this.localHeaderOffset=a.readInt(8)),this.diskNumberStart===e.MAX_VALUE_32BITS&&(this.diskNumberStart=a.readInt(4))}},readExtraFields:function(a){var b,c,d,e=a.index;for(this.extraFields=this.extraFields||{};a.index<e+this.extraFieldsLength;)b=a.readInt(2),c=a.readInt(2),d=a.readString(c),this.extraFields[b]={id:b,length:c,value:d}},handleUTF8:function(){if(this.useUTF8())this.fileName=g.utf8decode(this.fileName),this.fileComment=g.utf8decode(this.fileComment);else{var a=this.findExtraFieldUnicodePath();null!==a&&(this.fileName=a);var b=this.findExtraFieldUnicodeComment();null!==b&&(this.fileComment=b)}},findExtraFieldUnicodePath:function(){var a=this.extraFields[28789];if(a){var b=new d(a.value);return 1!==b.readInt(1)?null:g.crc32(this.fileName)!==b.readInt(4)?null:g.utf8decode(b.readString(a.length-5))}return null},findExtraFieldUnicodeComment:function(){var a=this.extraFields[25461];if(a){var b=new d(a.value);return 1!==b.readInt(1)?null:g.crc32(this.fileComment)!==b.readInt(4)?null:g.utf8decode(b.readString(a.length-5))}return null}},b.exports=c},{"./compressedObject":2,"./object":13,"./stringReader":15,"./utils":21}],24:[function(a,b){"use strict";var c=a("./lib/utils/common").assign,d=a("./lib/deflate"),e=a("./lib/inflate"),f=a("./lib/zlib/constants"),g={};c(g,d,e,f),b.exports=g},{"./lib/deflate":25,"./lib/inflate":26,"./lib/utils/common":27,"./lib/zlib/constants":30}],25:[function(a,b,c){"use strict";function d(a,b){var c=new s(b);if(c.push(a,!0),c.err)throw c.msg;return c.result}function e(a,b){return b=b||{},b.raw=!0,d(a,b)}function f(a,b){return b=b||{},b.gzip=!0,d(a,b)}var g=a("./zlib/deflate.js"),h=a("./utils/common"),i=a("./utils/strings"),j=a("./zlib/messages"),k=a("./zlib/zstream"),l=0,m=4,n=0,o=1,p=-1,q=0,r=8,s=function(a){this.options=h.assign({level:p,method:r,chunkSize:16384,windowBits:15,memLevel:8,strategy:q,to:""},a||{});var b=this.options;b.raw&&b.windowBits>0?b.windowBits=-b.windowBits:b.gzip&&b.windowBits>0&&b.windowBits<16&&(b.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new k,this.strm.avail_out=0;var c=g.deflateInit2(this.strm,b.level,b.method,b.windowBits,b.memLevel,b.strategy);if(c!==n)throw new Error(j[c]);b.header&&g.deflateSetHeader(this.strm,b.header)
};s.prototype.push=function(a,b){var c,d,e=this.strm,f=this.options.chunkSize;if(this.ended)return!1;d=b===~~b?b:b===!0?m:l,e.input="string"==typeof a?i.string2buf(a):a,e.next_in=0,e.avail_in=e.input.length;do{if(0===e.avail_out&&(e.output=new h.Buf8(f),e.next_out=0,e.avail_out=f),c=g.deflate(e,d),c!==o&&c!==n)return this.onEnd(c),this.ended=!0,!1;(0===e.avail_out||0===e.avail_in&&d===m)&&this.onData("string"===this.options.to?i.buf2binstring(h.shrinkBuf(e.output,e.next_out)):h.shrinkBuf(e.output,e.next_out))}while((e.avail_in>0||0===e.avail_out)&&c!==o);return d===m?(c=g.deflateEnd(this.strm),this.onEnd(c),this.ended=!0,c===n):!0},s.prototype.onData=function(a){this.chunks.push(a)},s.prototype.onEnd=function(a){a===n&&(this.result="string"===this.options.to?this.chunks.join(""):h.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg},c.Deflate=s,c.deflate=d,c.deflateRaw=e,c.gzip=f},{"./utils/common":27,"./utils/strings":28,"./zlib/deflate.js":32,"./zlib/messages":37,"./zlib/zstream":39}],26:[function(a,b,c){"use strict";function d(a,b){var c=new m(b);if(c.push(a,!0),c.err)throw c.msg;return c.result}function e(a,b){return b=b||{},b.raw=!0,d(a,b)}var f=a("./zlib/inflate.js"),g=a("./utils/common"),h=a("./utils/strings"),i=a("./zlib/constants"),j=a("./zlib/messages"),k=a("./zlib/zstream"),l=a("./zlib/gzheader"),m=function(a){this.options=g.assign({chunkSize:16384,windowBits:0,to:""},a||{});var b=this.options;b.raw&&b.windowBits>=0&&b.windowBits<16&&(b.windowBits=-b.windowBits,0===b.windowBits&&(b.windowBits=-15)),!(b.windowBits>=0&&b.windowBits<16)||a&&a.windowBits||(b.windowBits+=32),b.windowBits>15&&b.windowBits<48&&0===(15&b.windowBits)&&(b.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new k,this.strm.avail_out=0;var c=f.inflateInit2(this.strm,b.windowBits);if(c!==i.Z_OK)throw new Error(j[c]);this.header=new l,f.inflateGetHeader(this.strm,this.header)};m.prototype.push=function(a,b){var c,d,e,j,k,l=this.strm,m=this.options.chunkSize;if(this.ended)return!1;d=b===~~b?b:b===!0?i.Z_FINISH:i.Z_NO_FLUSH,l.input="string"==typeof a?h.binstring2buf(a):a,l.next_in=0,l.avail_in=l.input.length;do{if(0===l.avail_out&&(l.output=new g.Buf8(m),l.next_out=0,l.avail_out=m),c=f.inflate(l,i.Z_NO_FLUSH),c!==i.Z_STREAM_END&&c!==i.Z_OK)return this.onEnd(c),this.ended=!0,!1;l.next_out&&(0===l.avail_out||c===i.Z_STREAM_END||0===l.avail_in&&d===i.Z_FINISH)&&("string"===this.options.to?(e=h.utf8border(l.output,l.next_out),j=l.next_out-e,k=h.buf2string(l.output,e),l.next_out=j,l.avail_out=m-j,j&&g.arraySet(l.output,l.output,e,j,0),this.onData(k)):this.onData(g.shrinkBuf(l.output,l.next_out)))}while(l.avail_in>0&&c!==i.Z_STREAM_END);return c===i.Z_STREAM_END&&(d=i.Z_FINISH),d===i.Z_FINISH?(c=f.inflateEnd(this.strm),this.onEnd(c),this.ended=!0,c===i.Z_OK):!0},m.prototype.onData=function(a){this.chunks.push(a)},m.prototype.onEnd=function(a){a===i.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):g.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg},c.Inflate=m,c.inflate=d,c.inflateRaw=e,c.ungzip=d},{"./utils/common":27,"./utils/strings":28,"./zlib/constants":30,"./zlib/gzheader":33,"./zlib/inflate.js":35,"./zlib/messages":37,"./zlib/zstream":39}],27:[function(a,b,c){"use strict";var d="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;c.assign=function(a){for(var b=Array.prototype.slice.call(arguments,1);b.length;){var c=b.shift();if(c){if("object"!=typeof c)throw new TypeError(c+"must be non-object");for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d])}}return a},c.shrinkBuf=function(a,b){return a.length===b?a:a.subarray?a.subarray(0,b):(a.length=b,a)};var e={arraySet:function(a,b,c,d,e){if(b.subarray&&a.subarray)return void a.set(b.subarray(c,c+d),e);for(var f=0;d>f;f++)a[e+f]=b[c+f]},flattenChunks:function(a){var b,c,d,e,f,g;for(d=0,b=0,c=a.length;c>b;b++)d+=a[b].length;for(g=new Uint8Array(d),e=0,b=0,c=a.length;c>b;b++)f=a[b],g.set(f,e),e+=f.length;return g}},f={arraySet:function(a,b,c,d,e){for(var f=0;d>f;f++)a[e+f]=b[c+f]},flattenChunks:function(a){return[].concat.apply([],a)}};c.setTyped=function(a){a?(c.Buf8=Uint8Array,c.Buf16=Uint16Array,c.Buf32=Int32Array,c.assign(c,e)):(c.Buf8=Array,c.Buf16=Array,c.Buf32=Array,c.assign(c,f))},c.setTyped(d)},{}],28:[function(a,b,c){"use strict";function d(a,b){if(65537>b&&(a.subarray&&g||!a.subarray&&f))return String.fromCharCode.apply(null,e.shrinkBuf(a,b));for(var c="",d=0;b>d;d++)c+=String.fromCharCode(a[d]);return c}var e=a("./common"),f=!0,g=!0;try{String.fromCharCode.apply(null,[0])}catch(h){f=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(h){g=!1}for(var i=new e.Buf8(256),j=0;256>j;j++)i[j]=j>=252?6:j>=248?5:j>=240?4:j>=224?3:j>=192?2:1;i[254]=i[254]=1,c.string2buf=function(a){var b,c,d,f,g,h=a.length,i=0;for(f=0;h>f;f++)c=a.charCodeAt(f),55296===(64512&c)&&h>f+1&&(d=a.charCodeAt(f+1),56320===(64512&d)&&(c=65536+(c-55296<<10)+(d-56320),f++)),i+=128>c?1:2048>c?2:65536>c?3:4;for(b=new e.Buf8(i),g=0,f=0;i>g;f++)c=a.charCodeAt(f),55296===(64512&c)&&h>f+1&&(d=a.charCodeAt(f+1),56320===(64512&d)&&(c=65536+(c-55296<<10)+(d-56320),f++)),128>c?b[g++]=c:2048>c?(b[g++]=192|c>>>6,b[g++]=128|63&c):65536>c?(b[g++]=224|c>>>12,b[g++]=128|c>>>6&63,b[g++]=128|63&c):(b[g++]=240|c>>>18,b[g++]=128|c>>>12&63,b[g++]=128|c>>>6&63,b[g++]=128|63&c);return b},c.buf2binstring=function(a){return d(a,a.length)},c.binstring2buf=function(a){for(var b=new e.Buf8(a.length),c=0,d=b.length;d>c;c++)b[c]=a.charCodeAt(c);return b},c.buf2string=function(a,b){var c,e,f,g,h=b||a.length,j=new Array(2*h);for(e=0,c=0;h>c;)if(f=a[c++],128>f)j[e++]=f;else if(g=i[f],g>4)j[e++]=65533,c+=g-1;else{for(f&=2===g?31:3===g?15:7;g>1&&h>c;)f=f<<6|63&a[c++],g--;g>1?j[e++]=65533:65536>f?j[e++]=f:(f-=65536,j[e++]=55296|f>>10&1023,j[e++]=56320|1023&f)}return d(j,e)},c.utf8border=function(a,b){var c;for(b=b||a.length,b>a.length&&(b=a.length),c=b-1;c>=0&&128===(192&a[c]);)c--;return 0>c?b:0===c?b:c+i[a[c]]>b?c:b}},{"./common":27}],29:[function(a,b){"use strict";function c(a,b,c,d){for(var e=65535&a|0,f=a>>>16&65535|0,g=0;0!==c;){g=c>2e3?2e3:c,c-=g;do e=e+b[d++]|0,f=f+e|0;while(--g);e%=65521,f%=65521}return e|f<<16|0}b.exports=c},{}],30:[function(a,b){b.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],31:[function(a,b){"use strict";function c(){for(var a,b=[],c=0;256>c;c++){a=c;for(var d=0;8>d;d++)a=1&a?3988292384^a>>>1:a>>>1;b[c]=a}return b}function d(a,b,c,d){var f=e,g=d+c;a=-1^a;for(var h=d;g>h;h++)a=a>>>8^f[255&(a^b[h])];return-1^a}var e=c();b.exports=d},{}],32:[function(a,b,c){"use strict";function d(a,b){return a.msg=G[b],b}function e(a){return(a<<1)-(a>4?9:0)}function f(a){for(var b=a.length;--b>=0;)a[b]=0}function g(a){var b=a.state,c=b.pending;c>a.avail_out&&(c=a.avail_out),0!==c&&(C.arraySet(a.output,b.pending_buf,b.pending_out,c,a.next_out),a.next_out+=c,b.pending_out+=c,a.total_out+=c,a.avail_out-=c,b.pending-=c,0===b.pending&&(b.pending_out=0))}function h(a,b){D._tr_flush_block(a,a.block_start>=0?a.block_start:-1,a.strstart-a.block_start,b),a.block_start=a.strstart,g(a.strm)}function i(a,b){a.pending_buf[a.pending++]=b}function j(a,b){a.pending_buf[a.pending++]=b>>>8&255,a.pending_buf[a.pending++]=255&b}function k(a,b,c,d){var e=a.avail_in;return e>d&&(e=d),0===e?0:(a.avail_in-=e,C.arraySet(b,a.input,a.next_in,e,c),1===a.state.wrap?a.adler=E(a.adler,b,e,c):2===a.state.wrap&&(a.adler=F(a.adler,b,e,c)),a.next_in+=e,a.total_in+=e,e)}function l(a,b){var c,d,e=a.max_chain_length,f=a.strstart,g=a.prev_length,h=a.nice_match,i=a.strstart>a.w_size-jb?a.strstart-(a.w_size-jb):0,j=a.window,k=a.w_mask,l=a.prev,m=a.strstart+ib,n=j[f+g-1],o=j[f+g];a.prev_length>=a.good_match&&(e>>=2),h>a.lookahead&&(h=a.lookahead);do if(c=b,j[c+g]===o&&j[c+g-1]===n&&j[c]===j[f]&&j[++c]===j[f+1]){f+=2,c++;do;while(j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&m>f);if(d=ib-(m-f),f=m-ib,d>g){if(a.match_start=b,g=d,d>=h)break;n=j[f+g-1],o=j[f+g]}}while((b=l[b&k])>i&&0!==--e);return g<=a.lookahead?g:a.lookahead}function m(a){var b,c,d,e,f,g=a.w_size;do{if(e=a.window_size-a.lookahead-a.strstart,a.strstart>=g+(g-jb)){C.arraySet(a.window,a.window,g,g,0),a.match_start-=g,a.strstart-=g,a.block_start-=g,c=a.hash_size,b=c;do d=a.head[--b],a.head[b]=d>=g?d-g:0;while(--c);c=g,b=c;do d=a.prev[--b],a.prev[b]=d>=g?d-g:0;while(--c);e+=g}if(0===a.strm.avail_in)break;if(c=k(a.strm,a.window,a.strstart+a.lookahead,e),a.lookahead+=c,a.lookahead+a.insert>=hb)for(f=a.strstart-a.insert,a.ins_h=a.window[f],a.ins_h=(a.ins_h<<a.hash_shift^a.window[f+1])&a.hash_mask;a.insert&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[f+hb-1])&a.hash_mask,a.prev[f&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=f,f++,a.insert--,!(a.lookahead+a.insert<hb)););}while(a.lookahead<jb&&0!==a.strm.avail_in)}function n(a,b){var c=65535;for(c>a.pending_buf_size-5&&(c=a.pending_buf_size-5);;){if(a.lookahead<=1){if(m(a),0===a.lookahead&&b===H)return sb;if(0===a.lookahead)break}a.strstart+=a.lookahead,a.lookahead=0;var d=a.block_start+c;if((0===a.strstart||a.strstart>=d)&&(a.lookahead=a.strstart-d,a.strstart=d,h(a,!1),0===a.strm.avail_out))return sb;if(a.strstart-a.block_start>=a.w_size-jb&&(h(a,!1),0===a.strm.avail_out))return sb}return a.insert=0,b===K?(h(a,!0),0===a.strm.avail_out?ub:vb):a.strstart>a.block_start&&(h(a,!1),0===a.strm.avail_out)?sb:sb}function o(a,b){for(var c,d;;){if(a.lookahead<jb){if(m(a),a.lookahead<jb&&b===H)return sb;if(0===a.lookahead)break}if(c=0,a.lookahead>=hb&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+hb-1])&a.hash_mask,c=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),0!==c&&a.strstart-c<=a.w_size-jb&&(a.match_length=l(a,c)),a.match_length>=hb)if(d=D._tr_tally(a,a.strstart-a.match_start,a.match_length-hb),a.lookahead-=a.match_length,a.match_length<=a.max_lazy_match&&a.lookahead>=hb){a.match_length--;do a.strstart++,a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+hb-1])&a.hash_mask,c=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;while(0!==--a.match_length);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+1])&a.hash_mask;else d=D._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(d&&(h(a,!1),0===a.strm.avail_out))return sb}return a.insert=a.strstart<hb-1?a.strstart:hb-1,b===K?(h(a,!0),0===a.strm.avail_out?ub:vb):a.last_lit&&(h(a,!1),0===a.strm.avail_out)?sb:tb}function p(a,b){for(var c,d,e;;){if(a.lookahead<jb){if(m(a),a.lookahead<jb&&b===H)return sb;if(0===a.lookahead)break}if(c=0,a.lookahead>=hb&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+hb-1])&a.hash_mask,c=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),a.prev_length=a.match_length,a.prev_match=a.match_start,a.match_length=hb-1,0!==c&&a.prev_length<a.max_lazy_match&&a.strstart-c<=a.w_size-jb&&(a.match_length=l(a,c),a.match_length<=5&&(a.strategy===S||a.match_length===hb&&a.strstart-a.match_start>4096)&&(a.match_length=hb-1)),a.prev_length>=hb&&a.match_length<=a.prev_length){e=a.strstart+a.lookahead-hb,d=D._tr_tally(a,a.strstart-1-a.prev_match,a.prev_length-hb),a.lookahead-=a.prev_length-1,a.prev_length-=2;do++a.strstart<=e&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+hb-1])&a.hash_mask,c=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);while(0!==--a.prev_length);if(a.match_available=0,a.match_length=hb-1,a.strstart++,d&&(h(a,!1),0===a.strm.avail_out))return sb}else if(a.match_available){if(d=D._tr_tally(a,0,a.window[a.strstart-1]),d&&h(a,!1),a.strstart++,a.lookahead--,0===a.strm.avail_out)return sb}else a.match_available=1,a.strstart++,a.lookahead--}return a.match_available&&(d=D._tr_tally(a,0,a.window[a.strstart-1]),a.match_available=0),a.insert=a.strstart<hb-1?a.strstart:hb-1,b===K?(h(a,!0),0===a.strm.avail_out?ub:vb):a.last_lit&&(h(a,!1),0===a.strm.avail_out)?sb:tb}function q(a,b){for(var c,d,e,f,g=a.window;;){if(a.lookahead<=ib){if(m(a),a.lookahead<=ib&&b===H)return sb;if(0===a.lookahead)break}if(a.match_length=0,a.lookahead>=hb&&a.strstart>0&&(e=a.strstart-1,d=g[e],d===g[++e]&&d===g[++e]&&d===g[++e])){f=a.strstart+ib;do;while(d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&f>e);a.match_length=ib-(f-e),a.match_length>a.lookahead&&(a.match_length=a.lookahead)}if(a.match_length>=hb?(c=D._tr_tally(a,1,a.match_length-hb),a.lookahead-=a.match_length,a.strstart+=a.match_length,a.match_length=0):(c=D._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++),c&&(h(a,!1),0===a.strm.avail_out))return sb}return a.insert=0,b===K?(h(a,!0),0===a.strm.avail_out?ub:vb):a.last_lit&&(h(a,!1),0===a.strm.avail_out)?sb:tb}function r(a,b){for(var c;;){if(0===a.lookahead&&(m(a),0===a.lookahead)){if(b===H)return sb;break}if(a.match_length=0,c=D._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++,c&&(h(a,!1),0===a.strm.avail_out))return sb}return a.insert=0,b===K?(h(a,!0),0===a.strm.avail_out?ub:vb):a.last_lit&&(h(a,!1),0===a.strm.avail_out)?sb:tb}function s(a){a.window_size=2*a.w_size,f(a.head),a.max_lazy_match=B[a.level].max_lazy,a.good_match=B[a.level].good_length,a.nice_match=B[a.level].nice_length,a.max_chain_length=B[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=hb-1,a.match_available=0,a.ins_h=0}function t(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new C.Buf16(2*fb),this.dyn_dtree=new C.Buf16(2*(2*db+1)),this.bl_tree=new C.Buf16(2*(2*eb+1)),f(this.dyn_ltree),f(this.dyn_dtree),f(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new C.Buf16(gb+1),this.heap=new C.Buf16(2*cb+1),f(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new C.Buf16(2*cb+1),f(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function u(a){var b;return a&&a.state?(a.total_in=a.total_out=0,a.data_type=X,b=a.state,b.pending=0,b.pending_out=0,b.wrap<0&&(b.wrap=-b.wrap),b.status=b.wrap?lb:qb,a.adler=2===b.wrap?0:1,b.last_flush=H,D._tr_init(b),M):d(a,O)}function v(a){var b=u(a);return b===M&&s(a.state),b}function w(a,b){return a&&a.state?2!==a.state.wrap?O:(a.state.gzhead=b,M):O}function x(a,b,c,e,f,g){if(!a)return O;var h=1;if(b===R&&(b=6),0>e?(h=0,e=-e):e>15&&(h=2,e-=16),1>f||f>Z||c!==Y||8>e||e>15||0>b||b>9||0>g||g>V)return d(a,O);8===e&&(e=9);var i=new t;return a.state=i,i.strm=a,i.wrap=h,i.gzhead=null,i.w_bits=e,i.w_size=1<<i.w_bits,i.w_mask=i.w_size-1,i.hash_bits=f+7,i.hash_size=1<<i.hash_bits,i.hash_mask=i.hash_size-1,i.hash_shift=~~((i.hash_bits+hb-1)/hb),i.window=new C.Buf8(2*i.w_size),i.head=new C.Buf16(i.hash_size),i.prev=new C.Buf16(i.w_size),i.lit_bufsize=1<<f+6,i.pending_buf_size=4*i.lit_bufsize,i.pending_buf=new C.Buf8(i.pending_buf_size),i.d_buf=i.lit_bufsize>>1,i.l_buf=3*i.lit_bufsize,i.level=b,i.strategy=g,i.method=c,v(a)}function y(a,b){return x(a,b,Y,$,_,W)}function z(a,b){var c,h,k,l;if(!a||!a.state||b>L||0>b)return a?d(a,O):O;if(h=a.state,!a.output||!a.input&&0!==a.avail_in||h.status===rb&&b!==K)return d(a,0===a.avail_out?Q:O);if(h.strm=a,c=h.last_flush,h.last_flush=b,h.status===lb)if(2===h.wrap)a.adler=0,i(h,31),i(h,139),i(h,8),h.gzhead?(i(h,(h.gzhead.text?1:0)+(h.gzhead.hcrc?2:0)+(h.gzhead.extra?4:0)+(h.gzhead.name?8:0)+(h.gzhead.comment?16:0)),i(h,255&h.gzhead.time),i(h,h.gzhead.time>>8&255),i(h,h.gzhead.time>>16&255),i(h,h.gzhead.time>>24&255),i(h,9===h.level?2:h.strategy>=T||h.level<2?4:0),i(h,255&h.gzhead.os),h.gzhead.extra&&h.gzhead.extra.length&&(i(h,255&h.gzhead.extra.length),i(h,h.gzhead.extra.length>>8&255)),h.gzhead.hcrc&&(a.adler=F(a.adler,h.pending_buf,h.pending,0)),h.gzindex=0,h.status=mb):(i(h,0),i(h,0),i(h,0),i(h,0),i(h,0),i(h,9===h.level?2:h.strategy>=T||h.level<2?4:0),i(h,wb),h.status=qb);else{var m=Y+(h.w_bits-8<<4)<<8,n=-1;n=h.strategy>=T||h.level<2?0:h.level<6?1:6===h.level?2:3,m|=n<<6,0!==h.strstart&&(m|=kb),m+=31-m%31,h.status=qb,j(h,m),0!==h.strstart&&(j(h,a.adler>>>16),j(h,65535&a.adler)),a.adler=1}if(h.status===mb)if(h.gzhead.extra){for(k=h.pending;h.gzindex<(65535&h.gzhead.extra.length)&&(h.pending!==h.pending_buf_size||(h.gzhead.hcrc&&h.pending>k&&(a.adler=F(a.adler,h.pending_buf,h.pending-k,k)),g(a),k=h.pending,h.pending!==h.pending_buf_size));)i(h,255&h.gzhead.extra[h.gzindex]),h.gzindex++;h.gzhead.hcrc&&h.pending>k&&(a.adler=F(a.adler,h.pending_buf,h.pending-k,k)),h.gzindex===h.gzhead.extra.length&&(h.gzindex=0,h.status=nb)}else h.status=nb;if(h.status===nb)if(h.gzhead.name){k=h.pending;do{if(h.pending===h.pending_buf_size&&(h.gzhead.hcrc&&h.pending>k&&(a.adler=F(a.adler,h.pending_buf,h.pending-k,k)),g(a),k=h.pending,h.pending===h.pending_buf_size)){l=1;break}l=h.gzindex<h.gzhead.name.length?255&h.gzhead.name.charCodeAt(h.gzindex++):0,i(h,l)}while(0!==l);h.gzhead.hcrc&&h.pending>k&&(a.adler=F(a.adler,h.pending_buf,h.pending-k,k)),0===l&&(h.gzindex=0,h.status=ob)}else h.status=ob;if(h.status===ob)if(h.gzhead.comment){k=h.pending;do{if(h.pending===h.pending_buf_size&&(h.gzhead.hcrc&&h.pending>k&&(a.adler=F(a.adler,h.pending_buf,h.pending-k,k)),g(a),k=h.pending,h.pending===h.pending_buf_size)){l=1;break}l=h.gzindex<h.gzhead.comment.length?255&h.gzhead.comment.charCodeAt(h.gzindex++):0,i(h,l)}while(0!==l);h.gzhead.hcrc&&h.pending>k&&(a.adler=F(a.adler,h.pending_buf,h.pending-k,k)),0===l&&(h.status=pb)}else h.status=pb;if(h.status===pb&&(h.gzhead.hcrc?(h.pending+2>h.pending_buf_size&&g(a),h.pending+2<=h.pending_buf_size&&(i(h,255&a.adler),i(h,a.adler>>8&255),a.adler=0,h.status=qb)):h.status=qb),0!==h.pending){if(g(a),0===a.avail_out)return h.last_flush=-1,M}else if(0===a.avail_in&&e(b)<=e(c)&&b!==K)return d(a,Q);if(h.status===rb&&0!==a.avail_in)return d(a,Q);if(0!==a.avail_in||0!==h.lookahead||b!==H&&h.status!==rb){var o=h.strategy===T?r(h,b):h.strategy===U?q(h,b):B[h.level].func(h,b);if((o===ub||o===vb)&&(h.status=rb),o===sb||o===ub)return 0===a.avail_out&&(h.last_flush=-1),M;if(o===tb&&(b===I?D._tr_align(h):b!==L&&(D._tr_stored_block(h,0,0,!1),b===J&&(f(h.head),0===h.lookahead&&(h.strstart=0,h.block_start=0,h.insert=0))),g(a),0===a.avail_out))return h.last_flush=-1,M}return b!==K?M:h.wrap<=0?N:(2===h.wrap?(i(h,255&a.adler),i(h,a.adler>>8&255),i(h,a.adler>>16&255),i(h,a.adler>>24&255),i(h,255&a.total_in),i(h,a.total_in>>8&255),i(h,a.total_in>>16&255),i(h,a.total_in>>24&255)):(j(h,a.adler>>>16),j(h,65535&a.adler)),g(a),h.wrap>0&&(h.wrap=-h.wrap),0!==h.pending?M:N)}function A(a){var b;return a&&a.state?(b=a.state.status,b!==lb&&b!==mb&&b!==nb&&b!==ob&&b!==pb&&b!==qb&&b!==rb?d(a,O):(a.state=null,b===qb?d(a,P):M)):O}var B,C=a("../utils/common"),D=a("./trees"),E=a("./adler32"),F=a("./crc32"),G=a("./messages"),H=0,I=1,J=3,K=4,L=5,M=0,N=1,O=-2,P=-3,Q=-5,R=-1,S=1,T=2,U=3,V=4,W=0,X=2,Y=8,Z=9,$=15,_=8,ab=29,bb=256,cb=bb+1+ab,db=30,eb=19,fb=2*cb+1,gb=15,hb=3,ib=258,jb=ib+hb+1,kb=32,lb=42,mb=69,nb=73,ob=91,pb=103,qb=113,rb=666,sb=1,tb=2,ub=3,vb=4,wb=3,xb=function(a,b,c,d,e){this.good_length=a,this.max_lazy=b,this.nice_length=c,this.max_chain=d,this.func=e};B=[new xb(0,0,0,0,n),new xb(4,4,8,4,o),new xb(4,5,16,8,o),new xb(4,6,32,32,o),new xb(4,4,16,16,p),new xb(8,16,32,32,p),new xb(8,16,128,128,p),new xb(8,32,128,256,p),new xb(32,128,258,1024,p),new xb(32,258,258,4096,p)],c.deflateInit=y,c.deflateInit2=x,c.deflateReset=v,c.deflateResetKeep=u,c.deflateSetHeader=w,c.deflate=z,c.deflateEnd=A,c.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":27,"./adler32":29,"./crc32":31,"./messages":37,"./trees":38}],33:[function(a,b){"use strict";function c(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}b.exports=c},{}],34:[function(a,b){"use strict";var c=30,d=12;b.exports=function(a,b){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C;e=a.state,f=a.next_in,B=a.input,g=f+(a.avail_in-5),h=a.next_out,C=a.output,i=h-(b-a.avail_out),j=h+(a.avail_out-257),k=e.dmax,l=e.wsize,m=e.whave,n=e.wnext,o=e.window,p=e.hold,q=e.bits,r=e.lencode,s=e.distcode,t=(1<<e.lenbits)-1,u=(1<<e.distbits)-1;a:do{15>q&&(p+=B[f++]<<q,q+=8,p+=B[f++]<<q,q+=8),v=r[p&t];b:for(;;){if(w=v>>>24,p>>>=w,q-=w,w=v>>>16&255,0===w)C[h++]=65535&v;else{if(!(16&w)){if(0===(64&w)){v=r[(65535&v)+(p&(1<<w)-1)];continue b}if(32&w){e.mode=d;break a}a.msg="invalid literal/length code",e.mode=c;break a}x=65535&v,w&=15,w&&(w>q&&(p+=B[f++]<<q,q+=8),x+=p&(1<<w)-1,p>>>=w,q-=w),15>q&&(p+=B[f++]<<q,q+=8,p+=B[f++]<<q,q+=8),v=s[p&u];c:for(;;){if(w=v>>>24,p>>>=w,q-=w,w=v>>>16&255,!(16&w)){if(0===(64&w)){v=s[(65535&v)+(p&(1<<w)-1)];continue c}a.msg="invalid distance code",e.mode=c;break a}if(y=65535&v,w&=15,w>q&&(p+=B[f++]<<q,q+=8,w>q&&(p+=B[f++]<<q,q+=8)),y+=p&(1<<w)-1,y>k){a.msg="invalid distance too far back",e.mode=c;break a}if(p>>>=w,q-=w,w=h-i,y>w){if(w=y-w,w>m&&e.sane){a.msg="invalid distance too far back",e.mode=c;break a}if(z=0,A=o,0===n){if(z+=l-w,x>w){x-=w;do C[h++]=o[z++];while(--w);z=h-y,A=C}}else if(w>n){if(z+=l+n-w,w-=n,x>w){x-=w;do C[h++]=o[z++];while(--w);if(z=0,x>n){w=n,x-=w;do C[h++]=o[z++];while(--w);z=h-y,A=C}}}else if(z+=n-w,x>w){x-=w;do C[h++]=o[z++];while(--w);z=h-y,A=C}for(;x>2;)C[h++]=A[z++],C[h++]=A[z++],C[h++]=A[z++],x-=3;x&&(C[h++]=A[z++],x>1&&(C[h++]=A[z++]))}else{z=h-y;do C[h++]=C[z++],C[h++]=C[z++],C[h++]=C[z++],x-=3;while(x>2);x&&(C[h++]=C[z++],x>1&&(C[h++]=C[z++]))}break}}break}}while(g>f&&j>h);x=q>>3,f-=x,q-=x<<3,p&=(1<<q)-1,a.next_in=f,a.next_out=h,a.avail_in=g>f?5+(g-f):5-(f-g),a.avail_out=j>h?257+(j-h):257-(h-j),e.hold=p,e.bits=q}},{}],35:[function(a,b,c){"use strict";function d(a){return(a>>>24&255)+(a>>>8&65280)+((65280&a)<<8)+((255&a)<<24)}function e(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function f(a){var b;return a&&a.state?(b=a.state,a.total_in=a.total_out=b.total=0,a.msg="",b.wrap&&(a.adler=1&b.wrap),b.mode=K,b.last=0,b.havedict=0,b.dmax=32768,b.head=null,b.hold=0,b.bits=0,b.lencode=b.lendyn=new r.Buf32(ob),b.distcode=b.distdyn=new r.Buf32(pb),b.sane=1,b.back=-1,C):F}function g(a){var b;return a&&a.state?(b=a.state,b.wsize=0,b.whave=0,b.wnext=0,f(a)):F}function h(a,b){var c,d;return a&&a.state?(d=a.state,0>b?(c=0,b=-b):(c=(b>>4)+1,48>b&&(b&=15)),b&&(8>b||b>15)?F:(null!==d.window&&d.wbits!==b&&(d.window=null),d.wrap=c,d.wbits=b,g(a))):F}function i(a,b){var c,d;return a?(d=new e,a.state=d,d.window=null,c=h(a,b),c!==C&&(a.state=null),c):F}function j(a){return i(a,rb)}function k(a){if(sb){var b;for(p=new r.Buf32(512),q=new r.Buf32(32),b=0;144>b;)a.lens[b++]=8;for(;256>b;)a.lens[b++]=9;for(;280>b;)a.lens[b++]=7;for(;288>b;)a.lens[b++]=8;for(v(x,a.lens,0,288,p,0,a.work,{bits:9}),b=0;32>b;)a.lens[b++]=5;v(y,a.lens,0,32,q,0,a.work,{bits:5}),sb=!1}a.lencode=p,a.lenbits=9,a.distcode=q,a.distbits=5}function l(a,b,c,d){var e,f=a.state;return null===f.window&&(f.wsize=1<<f.wbits,f.wnext=0,f.whave=0,f.window=new r.Buf8(f.wsize)),d>=f.wsize?(r.arraySet(f.window,b,c-f.wsize,f.wsize,0),f.wnext=0,f.whave=f.wsize):(e=f.wsize-f.wnext,e>d&&(e=d),r.arraySet(f.window,b,c-d,e,f.wnext),d-=e,d?(r.arraySet(f.window,b,c-d,d,0),f.wnext=d,f.whave=f.wsize):(f.wnext+=e,f.wnext===f.wsize&&(f.wnext=0),f.whave<f.wsize&&(f.whave+=e))),0}function m(a,b){var c,e,f,g,h,i,j,m,n,o,p,q,ob,pb,qb,rb,sb,tb,ub,vb,wb,xb,yb,zb,Ab=0,Bb=new r.Buf8(4),Cb=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!a||!a.state||!a.output||!a.input&&0!==a.avail_in)return F;c=a.state,c.mode===V&&(c.mode=W),h=a.next_out,f=a.output,j=a.avail_out,g=a.next_in,e=a.input,i=a.avail_in,m=c.hold,n=c.bits,o=i,p=j,xb=C;a:for(;;)switch(c.mode){case K:if(0===c.wrap){c.mode=W;break}for(;16>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(2&c.wrap&&35615===m){c.check=0,Bb[0]=255&m,Bb[1]=m>>>8&255,c.check=t(c.check,Bb,2,0),m=0,n=0,c.mode=L;break}if(c.flags=0,c.head&&(c.head.done=!1),!(1&c.wrap)||(((255&m)<<8)+(m>>8))%31){a.msg="incorrect header check",c.mode=lb;break}if((15&m)!==J){a.msg="unknown compression method",c.mode=lb;break}if(m>>>=4,n-=4,wb=(15&m)+8,0===c.wbits)c.wbits=wb;else if(wb>c.wbits){a.msg="invalid window size",c.mode=lb;break}c.dmax=1<<wb,a.adler=c.check=1,c.mode=512&m?T:V,m=0,n=0;break;case L:for(;16>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(c.flags=m,(255&c.flags)!==J){a.msg="unknown compression method",c.mode=lb;break}if(57344&c.flags){a.msg="unknown header flags set",c.mode=lb;break}c.head&&(c.head.text=m>>8&1),512&c.flags&&(Bb[0]=255&m,Bb[1]=m>>>8&255,c.check=t(c.check,Bb,2,0)),m=0,n=0,c.mode=M;case M:for(;32>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.head&&(c.head.time=m),512&c.flags&&(Bb[0]=255&m,Bb[1]=m>>>8&255,Bb[2]=m>>>16&255,Bb[3]=m>>>24&255,c.check=t(c.check,Bb,4,0)),m=0,n=0,c.mode=N;case N:for(;16>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.head&&(c.head.xflags=255&m,c.head.os=m>>8),512&c.flags&&(Bb[0]=255&m,Bb[1]=m>>>8&255,c.check=t(c.check,Bb,2,0)),m=0,n=0,c.mode=O;case O:if(1024&c.flags){for(;16>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.length=m,c.head&&(c.head.extra_len=m),512&c.flags&&(Bb[0]=255&m,Bb[1]=m>>>8&255,c.check=t(c.check,Bb,2,0)),m=0,n=0}else c.head&&(c.head.extra=null);c.mode=P;case P:if(1024&c.flags&&(q=c.length,q>i&&(q=i),q&&(c.head&&(wb=c.head.extra_len-c.length,c.head.extra||(c.head.extra=new Array(c.head.extra_len)),r.arraySet(c.head.extra,e,g,q,wb)),512&c.flags&&(c.check=t(c.check,e,q,g)),i-=q,g+=q,c.length-=q),c.length))break a;c.length=0,c.mode=Q;case Q:if(2048&c.flags){if(0===i)break a;q=0;do wb=e[g+q++],c.head&&wb&&c.length<65536&&(c.head.name+=String.fromCharCode(wb));while(wb&&i>q);if(512&c.flags&&(c.check=t(c.check,e,q,g)),i-=q,g+=q,wb)break a}else c.head&&(c.head.name=null);c.length=0,c.mode=R;case R:if(4096&c.flags){if(0===i)break a;q=0;do wb=e[g+q++],c.head&&wb&&c.length<65536&&(c.head.comment+=String.fromCharCode(wb));while(wb&&i>q);if(512&c.flags&&(c.check=t(c.check,e,q,g)),i-=q,g+=q,wb)break a}else c.head&&(c.head.comment=null);c.mode=S;case S:if(512&c.flags){for(;16>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(m!==(65535&c.check)){a.msg="header crc mismatch",c.mode=lb;break}m=0,n=0}c.head&&(c.head.hcrc=c.flags>>9&1,c.head.done=!0),a.adler=c.check=0,c.mode=V;break;case T:for(;32>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}a.adler=c.check=d(m),m=0,n=0,c.mode=U;case U:if(0===c.havedict)return a.next_out=h,a.avail_out=j,a.next_in=g,a.avail_in=i,c.hold=m,c.bits=n,E;a.adler=c.check=1,c.mode=V;case V:if(b===A||b===B)break a;case W:if(c.last){m>>>=7&n,n-=7&n,c.mode=ib;break}for(;3>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}switch(c.last=1&m,m>>>=1,n-=1,3&m){case 0:c.mode=X;break;case 1:if(k(c),c.mode=bb,b===B){m>>>=2,n-=2;break a}break;case 2:c.mode=$;break;case 3:a.msg="invalid block type",c.mode=lb}m>>>=2,n-=2;break;case X:for(m>>>=7&n,n-=7&n;32>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if((65535&m)!==(m>>>16^65535)){a.msg="invalid stored block lengths",c.mode=lb;break}if(c.length=65535&m,m=0,n=0,c.mode=Y,b===B)break a;case Y:c.mode=Z;case Z:if(q=c.length){if(q>i&&(q=i),q>j&&(q=j),0===q)break a;r.arraySet(f,e,g,q,h),i-=q,g+=q,j-=q,h+=q,c.length-=q;break}c.mode=V;break;case $:for(;14>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(c.nlen=(31&m)+257,m>>>=5,n-=5,c.ndist=(31&m)+1,m>>>=5,n-=5,c.ncode=(15&m)+4,m>>>=4,n-=4,c.nlen>286||c.ndist>30){a.msg="too many length or distance symbols",c.mode=lb;break}c.have=0,c.mode=_;case _:for(;c.have<c.ncode;){for(;3>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.lens[Cb[c.have++]]=7&m,m>>>=3,n-=3}for(;c.have<19;)c.lens[Cb[c.have++]]=0;if(c.lencode=c.lendyn,c.lenbits=7,yb={bits:c.lenbits},xb=v(w,c.lens,0,19,c.lencode,0,c.work,yb),c.lenbits=yb.bits,xb){a.msg="invalid code lengths set",c.mode=lb;break}c.have=0,c.mode=ab;case ab:for(;c.have<c.nlen+c.ndist;){for(;Ab=c.lencode[m&(1<<c.lenbits)-1],qb=Ab>>>24,rb=Ab>>>16&255,sb=65535&Ab,!(n>=qb);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(16>sb)m>>>=qb,n-=qb,c.lens[c.have++]=sb;else{if(16===sb){for(zb=qb+2;zb>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(m>>>=qb,n-=qb,0===c.have){a.msg="invalid bit length repeat",c.mode=lb;break}wb=c.lens[c.have-1],q=3+(3&m),m>>>=2,n-=2}else if(17===sb){for(zb=qb+3;zb>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}m>>>=qb,n-=qb,wb=0,q=3+(7&m),m>>>=3,n-=3}else{for(zb=qb+7;zb>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}m>>>=qb,n-=qb,wb=0,q=11+(127&m),m>>>=7,n-=7}if(c.have+q>c.nlen+c.ndist){a.msg="invalid bit length repeat",c.mode=lb;break}for(;q--;)c.lens[c.have++]=wb}}if(c.mode===lb)break;if(0===c.lens[256]){a.msg="invalid code -- missing end-of-block",c.mode=lb;break}if(c.lenbits=9,yb={bits:c.lenbits},xb=v(x,c.lens,0,c.nlen,c.lencode,0,c.work,yb),c.lenbits=yb.bits,xb){a.msg="invalid literal/lengths set",c.mode=lb;break}if(c.distbits=6,c.distcode=c.distdyn,yb={bits:c.distbits},xb=v(y,c.lens,c.nlen,c.ndist,c.distcode,0,c.work,yb),c.distbits=yb.bits,xb){a.msg="invalid distances set",c.mode=lb;break}if(c.mode=bb,b===B)break a;case bb:c.mode=cb;case cb:if(i>=6&&j>=258){a.next_out=h,a.avail_out=j,a.next_in=g,a.avail_in=i,c.hold=m,c.bits=n,u(a,p),h=a.next_out,f=a.output,j=a.avail_out,g=a.next_in,e=a.input,i=a.avail_in,m=c.hold,n=c.bits,c.mode===V&&(c.back=-1);break}for(c.back=0;Ab=c.lencode[m&(1<<c.lenbits)-1],qb=Ab>>>24,rb=Ab>>>16&255,sb=65535&Ab,!(n>=qb);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(rb&&0===(240&rb)){for(tb=qb,ub=rb,vb=sb;Ab=c.lencode[vb+((m&(1<<tb+ub)-1)>>tb)],qb=Ab>>>24,rb=Ab>>>16&255,sb=65535&Ab,!(n>=tb+qb);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}m>>>=tb,n-=tb,c.back+=tb}if(m>>>=qb,n-=qb,c.back+=qb,c.length=sb,0===rb){c.mode=hb;break}if(32&rb){c.back=-1,c.mode=V;break}if(64&rb){a.msg="invalid literal/length code",c.mode=lb;break}c.extra=15&rb,c.mode=db;case db:if(c.extra){for(zb=c.extra;zb>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.length+=m&(1<<c.extra)-1,m>>>=c.extra,n-=c.extra,c.back+=c.extra}c.was=c.length,c.mode=eb;case eb:for(;Ab=c.distcode[m&(1<<c.distbits)-1],qb=Ab>>>24,rb=Ab>>>16&255,sb=65535&Ab,!(n>=qb);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(0===(240&rb)){for(tb=qb,ub=rb,vb=sb;Ab=c.distcode[vb+((m&(1<<tb+ub)-1)>>tb)],qb=Ab>>>24,rb=Ab>>>16&255,sb=65535&Ab,!(n>=tb+qb);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}m>>>=tb,n-=tb,c.back+=tb}if(m>>>=qb,n-=qb,c.back+=qb,64&rb){a.msg="invalid distance code",c.mode=lb;break}c.offset=sb,c.extra=15&rb,c.mode=fb;case fb:if(c.extra){for(zb=c.extra;zb>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.offset+=m&(1<<c.extra)-1,m>>>=c.extra,n-=c.extra,c.back+=c.extra}if(c.offset>c.dmax){a.msg="invalid distance too far back",c.mode=lb;break}c.mode=gb;case gb:if(0===j)break a;
if(q=p-j,c.offset>q){if(q=c.offset-q,q>c.whave&&c.sane){a.msg="invalid distance too far back",c.mode=lb;break}q>c.wnext?(q-=c.wnext,ob=c.wsize-q):ob=c.wnext-q,q>c.length&&(q=c.length),pb=c.window}else pb=f,ob=h-c.offset,q=c.length;q>j&&(q=j),j-=q,c.length-=q;do f[h++]=pb[ob++];while(--q);0===c.length&&(c.mode=cb);break;case hb:if(0===j)break a;f[h++]=c.length,j--,c.mode=cb;break;case ib:if(c.wrap){for(;32>n;){if(0===i)break a;i--,m|=e[g++]<<n,n+=8}if(p-=j,a.total_out+=p,c.total+=p,p&&(a.adler=c.check=c.flags?t(c.check,f,p,h-p):s(c.check,f,p,h-p)),p=j,(c.flags?m:d(m))!==c.check){a.msg="incorrect data check",c.mode=lb;break}m=0,n=0}c.mode=jb;case jb:if(c.wrap&&c.flags){for(;32>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(m!==(4294967295&c.total)){a.msg="incorrect length check",c.mode=lb;break}m=0,n=0}c.mode=kb;case kb:xb=D;break a;case lb:xb=G;break a;case mb:return H;case nb:default:return F}return a.next_out=h,a.avail_out=j,a.next_in=g,a.avail_in=i,c.hold=m,c.bits=n,(c.wsize||p!==a.avail_out&&c.mode<lb&&(c.mode<ib||b!==z))&&l(a,a.output,a.next_out,p-a.avail_out)?(c.mode=mb,H):(o-=a.avail_in,p-=a.avail_out,a.total_in+=o,a.total_out+=p,c.total+=p,c.wrap&&p&&(a.adler=c.check=c.flags?t(c.check,f,p,a.next_out-p):s(c.check,f,p,a.next_out-p)),a.data_type=c.bits+(c.last?64:0)+(c.mode===V?128:0)+(c.mode===bb||c.mode===Y?256:0),(0===o&&0===p||b===z)&&xb===C&&(xb=I),xb)}function n(a){if(!a||!a.state)return F;var b=a.state;return b.window&&(b.window=null),a.state=null,C}function o(a,b){var c;return a&&a.state?(c=a.state,0===(2&c.wrap)?F:(c.head=b,b.done=!1,C)):F}var p,q,r=a("../utils/common"),s=a("./adler32"),t=a("./crc32"),u=a("./inffast"),v=a("./inftrees"),w=0,x=1,y=2,z=4,A=5,B=6,C=0,D=1,E=2,F=-2,G=-3,H=-4,I=-5,J=8,K=1,L=2,M=3,N=4,O=5,P=6,Q=7,R=8,S=9,T=10,U=11,V=12,W=13,X=14,Y=15,Z=16,$=17,_=18,ab=19,bb=20,cb=21,db=22,eb=23,fb=24,gb=25,hb=26,ib=27,jb=28,kb=29,lb=30,mb=31,nb=32,ob=852,pb=592,qb=15,rb=qb,sb=!0;c.inflateReset=g,c.inflateReset2=h,c.inflateResetKeep=f,c.inflateInit=j,c.inflateInit2=i,c.inflate=m,c.inflateEnd=n,c.inflateGetHeader=o,c.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":27,"./adler32":29,"./crc32":31,"./inffast":34,"./inftrees":36}],36:[function(a,b){"use strict";var c=a("../utils/common"),d=15,e=852,f=592,g=0,h=1,i=2,j=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],k=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],m=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];b.exports=function(a,b,n,o,p,q,r,s){var t,u,v,w,x,y,z,A,B,C=s.bits,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,N=null,O=0,P=new c.Buf16(d+1),Q=new c.Buf16(d+1),R=null,S=0;for(D=0;d>=D;D++)P[D]=0;for(E=0;o>E;E++)P[b[n+E]]++;for(H=C,G=d;G>=1&&0===P[G];G--);if(H>G&&(H=G),0===G)return p[q++]=20971520,p[q++]=20971520,s.bits=1,0;for(F=1;G>F&&0===P[F];F++);for(F>H&&(H=F),K=1,D=1;d>=D;D++)if(K<<=1,K-=P[D],0>K)return-1;if(K>0&&(a===g||1!==G))return-1;for(Q[1]=0,D=1;d>D;D++)Q[D+1]=Q[D]+P[D];for(E=0;o>E;E++)0!==b[n+E]&&(r[Q[b[n+E]]++]=E);if(a===g?(N=R=r,y=19):a===h?(N=j,O-=257,R=k,S-=257,y=256):(N=l,R=m,y=-1),M=0,E=0,D=F,x=q,I=H,J=0,v=-1,L=1<<H,w=L-1,a===h&&L>e||a===i&&L>f)return 1;for(var T=0;;){T++,z=D-J,r[E]<y?(A=0,B=r[E]):r[E]>y?(A=R[S+r[E]],B=N[O+r[E]]):(A=96,B=0),t=1<<D-J,u=1<<I,F=u;do u-=t,p[x+(M>>J)+u]=z<<24|A<<16|B|0;while(0!==u);for(t=1<<D-1;M&t;)t>>=1;if(0!==t?(M&=t-1,M+=t):M=0,E++,0===--P[D]){if(D===G)break;D=b[n+r[E]]}if(D>H&&(M&w)!==v){for(0===J&&(J=H),x+=F,I=D-J,K=1<<I;G>I+J&&(K-=P[I+J],!(0>=K));)I++,K<<=1;if(L+=1<<I,a===h&&L>e||a===i&&L>f)return 1;v=M&w,p[v]=H<<24|I<<16|x-q|0}}return 0!==M&&(p[x+M]=D-J<<24|64<<16|0),s.bits=H,0}},{"../utils/common":27}],37:[function(a,b){"use strict";b.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],38:[function(a,b,c){"use strict";function d(a){for(var b=a.length;--b>=0;)a[b]=0}function e(a){return 256>a?gb[a]:gb[256+(a>>>7)]}function f(a,b){a.pending_buf[a.pending++]=255&b,a.pending_buf[a.pending++]=b>>>8&255}function g(a,b,c){a.bi_valid>V-c?(a.bi_buf|=b<<a.bi_valid&65535,f(a,a.bi_buf),a.bi_buf=b>>V-a.bi_valid,a.bi_valid+=c-V):(a.bi_buf|=b<<a.bi_valid&65535,a.bi_valid+=c)}function h(a,b,c){g(a,c[2*b],c[2*b+1])}function i(a,b){var c=0;do c|=1&a,a>>>=1,c<<=1;while(--b>0);return c>>>1}function j(a){16===a.bi_valid?(f(a,a.bi_buf),a.bi_buf=0,a.bi_valid=0):a.bi_valid>=8&&(a.pending_buf[a.pending++]=255&a.bi_buf,a.bi_buf>>=8,a.bi_valid-=8)}function k(a,b){var c,d,e,f,g,h,i=b.dyn_tree,j=b.max_code,k=b.stat_desc.static_tree,l=b.stat_desc.has_stree,m=b.stat_desc.extra_bits,n=b.stat_desc.extra_base,o=b.stat_desc.max_length,p=0;for(f=0;U>=f;f++)a.bl_count[f]=0;for(i[2*a.heap[a.heap_max]+1]=0,c=a.heap_max+1;T>c;c++)d=a.heap[c],f=i[2*i[2*d+1]+1]+1,f>o&&(f=o,p++),i[2*d+1]=f,d>j||(a.bl_count[f]++,g=0,d>=n&&(g=m[d-n]),h=i[2*d],a.opt_len+=h*(f+g),l&&(a.static_len+=h*(k[2*d+1]+g)));if(0!==p){do{for(f=o-1;0===a.bl_count[f];)f--;a.bl_count[f]--,a.bl_count[f+1]+=2,a.bl_count[o]--,p-=2}while(p>0);for(f=o;0!==f;f--)for(d=a.bl_count[f];0!==d;)e=a.heap[--c],e>j||(i[2*e+1]!==f&&(a.opt_len+=(f-i[2*e+1])*i[2*e],i[2*e+1]=f),d--)}}function l(a,b,c){var d,e,f=new Array(U+1),g=0;for(d=1;U>=d;d++)f[d]=g=g+c[d-1]<<1;for(e=0;b>=e;e++){var h=a[2*e+1];0!==h&&(a[2*e]=i(f[h]++,h))}}function m(){var a,b,c,d,e,f=new Array(U+1);for(c=0,d=0;O-1>d;d++)for(ib[d]=c,a=0;a<1<<_[d];a++)hb[c++]=d;for(hb[c-1]=d,e=0,d=0;16>d;d++)for(jb[d]=e,a=0;a<1<<ab[d];a++)gb[e++]=d;for(e>>=7;R>d;d++)for(jb[d]=e<<7,a=0;a<1<<ab[d]-7;a++)gb[256+e++]=d;for(b=0;U>=b;b++)f[b]=0;for(a=0;143>=a;)eb[2*a+1]=8,a++,f[8]++;for(;255>=a;)eb[2*a+1]=9,a++,f[9]++;for(;279>=a;)eb[2*a+1]=7,a++,f[7]++;for(;287>=a;)eb[2*a+1]=8,a++,f[8]++;for(l(eb,Q+1,f),a=0;R>a;a++)fb[2*a+1]=5,fb[2*a]=i(a,5);kb=new nb(eb,_,P+1,Q,U),lb=new nb(fb,ab,0,R,U),mb=new nb(new Array(0),bb,0,S,W)}function n(a){var b;for(b=0;Q>b;b++)a.dyn_ltree[2*b]=0;for(b=0;R>b;b++)a.dyn_dtree[2*b]=0;for(b=0;S>b;b++)a.bl_tree[2*b]=0;a.dyn_ltree[2*X]=1,a.opt_len=a.static_len=0,a.last_lit=a.matches=0}function o(a){a.bi_valid>8?f(a,a.bi_buf):a.bi_valid>0&&(a.pending_buf[a.pending++]=a.bi_buf),a.bi_buf=0,a.bi_valid=0}function p(a,b,c,d){o(a),d&&(f(a,c),f(a,~c)),E.arraySet(a.pending_buf,a.window,b,c,a.pending),a.pending+=c}function q(a,b,c,d){var e=2*b,f=2*c;return a[e]<a[f]||a[e]===a[f]&&d[b]<=d[c]}function r(a,b,c){for(var d=a.heap[c],e=c<<1;e<=a.heap_len&&(e<a.heap_len&&q(b,a.heap[e+1],a.heap[e],a.depth)&&e++,!q(b,d,a.heap[e],a.depth));)a.heap[c]=a.heap[e],c=e,e<<=1;a.heap[c]=d}function s(a,b,c){var d,f,i,j,k=0;if(0!==a.last_lit)do d=a.pending_buf[a.d_buf+2*k]<<8|a.pending_buf[a.d_buf+2*k+1],f=a.pending_buf[a.l_buf+k],k++,0===d?h(a,f,b):(i=hb[f],h(a,i+P+1,b),j=_[i],0!==j&&(f-=ib[i],g(a,f,j)),d--,i=e(d),h(a,i,c),j=ab[i],0!==j&&(d-=jb[i],g(a,d,j)));while(k<a.last_lit);h(a,X,b)}function t(a,b){var c,d,e,f=b.dyn_tree,g=b.stat_desc.static_tree,h=b.stat_desc.has_stree,i=b.stat_desc.elems,j=-1;for(a.heap_len=0,a.heap_max=T,c=0;i>c;c++)0!==f[2*c]?(a.heap[++a.heap_len]=j=c,a.depth[c]=0):f[2*c+1]=0;for(;a.heap_len<2;)e=a.heap[++a.heap_len]=2>j?++j:0,f[2*e]=1,a.depth[e]=0,a.opt_len--,h&&(a.static_len-=g[2*e+1]);for(b.max_code=j,c=a.heap_len>>1;c>=1;c--)r(a,f,c);e=i;do c=a.heap[1],a.heap[1]=a.heap[a.heap_len--],r(a,f,1),d=a.heap[1],a.heap[--a.heap_max]=c,a.heap[--a.heap_max]=d,f[2*e]=f[2*c]+f[2*d],a.depth[e]=(a.depth[c]>=a.depth[d]?a.depth[c]:a.depth[d])+1,f[2*c+1]=f[2*d+1]=e,a.heap[1]=e++,r(a,f,1);while(a.heap_len>=2);a.heap[--a.heap_max]=a.heap[1],k(a,b),l(f,j,a.bl_count)}function u(a,b,c){var d,e,f=-1,g=b[1],h=0,i=7,j=4;for(0===g&&(i=138,j=3),b[2*(c+1)+1]=65535,d=0;c>=d;d++)e=g,g=b[2*(d+1)+1],++h<i&&e===g||(j>h?a.bl_tree[2*e]+=h:0!==e?(e!==f&&a.bl_tree[2*e]++,a.bl_tree[2*Y]++):10>=h?a.bl_tree[2*Z]++:a.bl_tree[2*$]++,h=0,f=e,0===g?(i=138,j=3):e===g?(i=6,j=3):(i=7,j=4))}function v(a,b,c){var d,e,f=-1,i=b[1],j=0,k=7,l=4;for(0===i&&(k=138,l=3),d=0;c>=d;d++)if(e=i,i=b[2*(d+1)+1],!(++j<k&&e===i)){if(l>j){do h(a,e,a.bl_tree);while(0!==--j)}else 0!==e?(e!==f&&(h(a,e,a.bl_tree),j--),h(a,Y,a.bl_tree),g(a,j-3,2)):10>=j?(h(a,Z,a.bl_tree),g(a,j-3,3)):(h(a,$,a.bl_tree),g(a,j-11,7));j=0,f=e,0===i?(k=138,l=3):e===i?(k=6,l=3):(k=7,l=4)}}function w(a){var b;for(u(a,a.dyn_ltree,a.l_desc.max_code),u(a,a.dyn_dtree,a.d_desc.max_code),t(a,a.bl_desc),b=S-1;b>=3&&0===a.bl_tree[2*cb[b]+1];b--);return a.opt_len+=3*(b+1)+5+5+4,b}function x(a,b,c,d){var e;for(g(a,b-257,5),g(a,c-1,5),g(a,d-4,4),e=0;d>e;e++)g(a,a.bl_tree[2*cb[e]+1],3);v(a,a.dyn_ltree,b-1),v(a,a.dyn_dtree,c-1)}function y(a){var b,c=4093624447;for(b=0;31>=b;b++,c>>>=1)if(1&c&&0!==a.dyn_ltree[2*b])return G;if(0!==a.dyn_ltree[18]||0!==a.dyn_ltree[20]||0!==a.dyn_ltree[26])return H;for(b=32;P>b;b++)if(0!==a.dyn_ltree[2*b])return H;return G}function z(a){pb||(m(),pb=!0),a.l_desc=new ob(a.dyn_ltree,kb),a.d_desc=new ob(a.dyn_dtree,lb),a.bl_desc=new ob(a.bl_tree,mb),a.bi_buf=0,a.bi_valid=0,n(a)}function A(a,b,c,d){g(a,(J<<1)+(d?1:0),3),p(a,b,c,!0)}function B(a){g(a,K<<1,3),h(a,X,eb),j(a)}function C(a,b,c,d){var e,f,h=0;a.level>0?(a.strm.data_type===I&&(a.strm.data_type=y(a)),t(a,a.l_desc),t(a,a.d_desc),h=w(a),e=a.opt_len+3+7>>>3,f=a.static_len+3+7>>>3,e>=f&&(e=f)):e=f=c+5,e>=c+4&&-1!==b?A(a,b,c,d):a.strategy===F||f===e?(g(a,(K<<1)+(d?1:0),3),s(a,eb,fb)):(g(a,(L<<1)+(d?1:0),3),x(a,a.l_desc.max_code+1,a.d_desc.max_code+1,h+1),s(a,a.dyn_ltree,a.dyn_dtree)),n(a),d&&o(a)}function D(a,b,c){return a.pending_buf[a.d_buf+2*a.last_lit]=b>>>8&255,a.pending_buf[a.d_buf+2*a.last_lit+1]=255&b,a.pending_buf[a.l_buf+a.last_lit]=255&c,a.last_lit++,0===b?a.dyn_ltree[2*c]++:(a.matches++,b--,a.dyn_ltree[2*(hb[c]+P+1)]++,a.dyn_dtree[2*e(b)]++),a.last_lit===a.lit_bufsize-1}var E=a("../utils/common"),F=4,G=0,H=1,I=2,J=0,K=1,L=2,M=3,N=258,O=29,P=256,Q=P+1+O,R=30,S=19,T=2*Q+1,U=15,V=16,W=7,X=256,Y=16,Z=17,$=18,_=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ab=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],bb=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],cb=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],db=512,eb=new Array(2*(Q+2));d(eb);var fb=new Array(2*R);d(fb);var gb=new Array(db);d(gb);var hb=new Array(N-M+1);d(hb);var ib=new Array(O);d(ib);var jb=new Array(R);d(jb);var kb,lb,mb,nb=function(a,b,c,d,e){this.static_tree=a,this.extra_bits=b,this.extra_base=c,this.elems=d,this.max_length=e,this.has_stree=a&&a.length},ob=function(a,b){this.dyn_tree=a,this.max_code=0,this.stat_desc=b},pb=!1;c._tr_init=z,c._tr_stored_block=A,c._tr_flush_block=C,c._tr_tally=D,c._tr_align=B},{"../utils/common":27}],39:[function(a,b){"use strict";function c(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}b.exports=c},{}]},{},[9])(9)});
// File:js/lib/lzma.min.js

var LZMA=LZMA||{};LZMA.OutWindow=function(){this._windowSize=0};LZMA.OutWindow.prototype.create=function(a){this._buffer&&this._windowSize===a||(this._buffer=[]);this._windowSize=a;this._streamPos=this._pos=0};LZMA.OutWindow.prototype.flush=function(){var a=this._pos-this._streamPos;if(0!==a){for(;a--;)this._stream.writeByte(this._buffer[this._streamPos++]);this._pos>=this._windowSize&&(this._pos=0);this._streamPos=this._pos}};
LZMA.OutWindow.prototype.releaseStream=function(){this.flush();this._stream=null};LZMA.OutWindow.prototype.setStream=function(a){this.releaseStream();this._stream=a};LZMA.OutWindow.prototype.init=function(a){a||(this._pos=this._streamPos=0)};LZMA.OutWindow.prototype.copyBlock=function(a,b){var c=this._pos-a-1;for(0>c&&(c+=this._windowSize);b--;)c>=this._windowSize&&(c=0),this._buffer[this._pos++]=this._buffer[c++],this._pos>=this._windowSize&&this.flush()};
LZMA.OutWindow.prototype.putByte=function(a){this._buffer[this._pos++]=a;this._pos>=this._windowSize&&this.flush()};LZMA.OutWindow.prototype.getByte=function(a){a=this._pos-a-1;0>a&&(a+=this._windowSize);return this._buffer[a]};LZMA.RangeDecoder=function(){};LZMA.RangeDecoder.prototype.setStream=function(a){this._stream=a};LZMA.RangeDecoder.prototype.releaseStream=function(){this._stream=null};
LZMA.RangeDecoder.prototype.init=function(){var a=5;this._code=0;for(this._range=-1;a--;)this._code=this._code<<8|this._stream.readByte()};LZMA.RangeDecoder.prototype.decodeDirectBits=function(a){for(var b=0,c;a--;)this._range>>>=1,c=this._code-this._range>>>31,this._code-=this._range&c-1,b=b<<1|1-c,0===(this._range&4278190080)&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8);return b};
LZMA.RangeDecoder.prototype.decodeBit=function(a,b){var c=a[b],d=(this._range>>>11)*c;if((this._code^2147483648)<(d^2147483648))return this._range=d,a[b]+=2048-c>>>5,0===(this._range&4278190080)&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8),0;this._range-=d;this._code-=d;a[b]-=c>>>5;0===(this._range&4278190080)&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8);return 1};LZMA.initBitModels=function(a,b){for(;b--;)a[b]=1024};
LZMA.BitTreeDecoder=function(a){this._models=[];this._numBitLevels=a};LZMA.BitTreeDecoder.prototype.init=function(){LZMA.initBitModels(this._models,1<<this._numBitLevels)};LZMA.BitTreeDecoder.prototype.decode=function(a){for(var b=1,c=this._numBitLevels;c--;)b=b<<1|a.decodeBit(this._models,b);return b-(1<<this._numBitLevels)};LZMA.BitTreeDecoder.prototype.reverseDecode=function(a){for(var b=1,c=0,d=0,e;d<this._numBitLevels;++d)e=a.decodeBit(this._models,b),b=b<<1|e,c|=e<<d;return c};
LZMA.reverseDecode2=function(a,b,c,d){for(var e=1,g=0,h=0,k;h<d;++h)k=c.decodeBit(a,b+e),e=e<<1|k,g|=k<<h;return g};LZMA.LenDecoder=function(){this._choice=[];this._lowCoder=[];this._midCoder=[];this._highCoder=new LZMA.BitTreeDecoder(8);this._numPosStates=0};LZMA.LenDecoder.prototype.create=function(a){for(;this._numPosStates<a;++this._numPosStates)this._lowCoder[this._numPosStates]=new LZMA.BitTreeDecoder(3),this._midCoder[this._numPosStates]=new LZMA.BitTreeDecoder(3)};
LZMA.LenDecoder.prototype.init=function(){var a=this._numPosStates;for(LZMA.initBitModels(this._choice,2);a--;)this._lowCoder[a].init(),this._midCoder[a].init();this._highCoder.init()};LZMA.LenDecoder.prototype.decode=function(a,b){return 0===a.decodeBit(this._choice,0)?this._lowCoder[b].decode(a):0===a.decodeBit(this._choice,1)?8+this._midCoder[b].decode(a):16+this._highCoder.decode(a)};LZMA.Decoder2=function(){this._decoders=[]};
LZMA.Decoder2.prototype.init=function(){LZMA.initBitModels(this._decoders,768)};LZMA.Decoder2.prototype.decodeNormal=function(a){var b=1;do b=b<<1|a.decodeBit(this._decoders,b);while(256>b);return b&255};LZMA.Decoder2.prototype.decodeWithMatchByte=function(a,b){var c=1,d,e;do if(d=b>>7&1,b<<=1,e=a.decodeBit(this._decoders,(1+d<<8)+c),c=c<<1|e,d!==e){for(;256>c;)c=c<<1|a.decodeBit(this._decoders,c);break}while(256>c);return c&255};LZMA.LiteralDecoder=function(){};
LZMA.LiteralDecoder.prototype.create=function(a,b){var c;if(!this._coders||this._numPrevBits!==b||this._numPosBits!==a)for(this._numPosBits=a,this._posMask=(1<<a)-1,this._numPrevBits=b,this._coders=[],c=1<<this._numPrevBits+this._numPosBits;c--;)this._coders[c]=new LZMA.Decoder2};LZMA.LiteralDecoder.prototype.init=function(){for(var a=1<<this._numPrevBits+this._numPosBits;a--;)this._coders[a].init()};
LZMA.LiteralDecoder.prototype.getDecoder=function(a,b){return this._coders[((a&this._posMask)<<this._numPrevBits)+((b&255)>>>8-this._numPrevBits)]};
LZMA.Decoder=function(){this._outWindow=new LZMA.OutWindow;this._rangeDecoder=new LZMA.RangeDecoder;this._isMatchDecoders=[];this._isRepDecoders=[];this._isRepG0Decoders=[];this._isRepG1Decoders=[];this._isRepG2Decoders=[];this._isRep0LongDecoders=[];this._posSlotDecoder=[];this._posDecoders=[];this._posAlignDecoder=new LZMA.BitTreeDecoder(4);this._lenDecoder=new LZMA.LenDecoder;this._repLenDecoder=new LZMA.LenDecoder;this._literalDecoder=new LZMA.LiteralDecoder;this._dictionarySizeCheck=this._dictionarySize=
-1;this._posSlotDecoder[0]=new LZMA.BitTreeDecoder(6);this._posSlotDecoder[1]=new LZMA.BitTreeDecoder(6);this._posSlotDecoder[2]=new LZMA.BitTreeDecoder(6);this._posSlotDecoder[3]=new LZMA.BitTreeDecoder(6)};LZMA.Decoder.prototype.setDictionarySize=function(a){if(0>a)return!1;this._dictionarySize!==a&&(this._dictionarySize=a,this._dictionarySizeCheck=Math.max(this._dictionarySize,1),this._outWindow.create(Math.max(this._dictionarySizeCheck,4096)));return!0};
LZMA.Decoder.prototype.setLcLpPb=function(a,b,c){var d=1<<c;if(8<a||4<b||4<c)return!1;this._literalDecoder.create(b,a);this._lenDecoder.create(d);this._repLenDecoder.create(d);this._posStateMask=d-1;return!0};
LZMA.Decoder.prototype.init=function(){var a=4;this._outWindow.init(!1);LZMA.initBitModels(this._isMatchDecoders,192);LZMA.initBitModels(this._isRep0LongDecoders,192);LZMA.initBitModels(this._isRepDecoders,12);LZMA.initBitModels(this._isRepG0Decoders,12);LZMA.initBitModels(this._isRepG1Decoders,12);LZMA.initBitModels(this._isRepG2Decoders,12);LZMA.initBitModels(this._posDecoders,114);for(this._literalDecoder.init();a--;)this._posSlotDecoder[a].init();this._lenDecoder.init();this._repLenDecoder.init();
this._posAlignDecoder.init();this._rangeDecoder.init()};
LZMA.Decoder.prototype.decode=function(a,b,c){var d=0,e=0,g=0,h=0,k=0,l=0,f=0;this._rangeDecoder.setStream(a);this._outWindow.setStream(b);for(this.init();0>c||l<c;)if(a=l&this._posStateMask,0===this._rangeDecoder.decodeBit(this._isMatchDecoders,(d<<4)+a))f=this._literalDecoder.getDecoder(l++,f),f=7<=d?f.decodeWithMatchByte(this._rangeDecoder,this._outWindow.getByte(e)):f.decodeNormal(this._rangeDecoder),this._outWindow.putByte(f),d=4>d?0:d-(10>d?3:6);else{if(1===this._rangeDecoder.decodeBit(this._isRepDecoders,
d))f=0,0===this._rangeDecoder.decodeBit(this._isRepG0Decoders,d)?0===this._rangeDecoder.decodeBit(this._isRep0LongDecoders,(d<<4)+a)&&(d=7>d?9:11,f=1):(0===this._rangeDecoder.decodeBit(this._isRepG1Decoders,d)?b=g:(0===this._rangeDecoder.decodeBit(this._isRepG2Decoders,d)?b=h:(b=k,k=h),h=g),g=e,e=b),0===f&&(f=2+this._repLenDecoder.decode(this._rangeDecoder,a),d=7>d?8:11);else if(k=h,h=g,g=e,f=2+this._lenDecoder.decode(this._rangeDecoder,a),d=7>d?7:10,a=this._posSlotDecoder[5>=f?f-2:3].decode(this._rangeDecoder),
4<=a)if(b=(a>>1)-1,e=(2|a&1)<<b,14>a)e+=LZMA.reverseDecode2(this._posDecoders,e-a-1,this._rangeDecoder,b);else{if(e+=this._rangeDecoder.decodeDirectBits(b-4)<<4,e+=this._posAlignDecoder.reverseDecode(this._rangeDecoder),0>e){if(-1===e)break;return!1}}else e=a;if(e>=l||e>=this._dictionarySizeCheck)return!1;this._outWindow.copyBlock(e,f);l+=f;f=this._outWindow.getByte(0)}this._outWindow.flush();this._outWindow.releaseStream();this._rangeDecoder.releaseStream();return!0};
LZMA.Decoder.prototype.setDecoderProperties=function(a){var b,c;if(5>a.size)return!1;b=a.readByte();c=b%9;b=~~(b/9);if(!this.setLcLpPb(c,b%5,~~(b/5)))return!1;b=a.readByte();b|=a.readByte()<<8;b|=a.readByte()<<16;b+=16777216*a.readByte();return this.setDictionarySize(b)};LZMA.decompress=function(a,b,c,d){var e=new LZMA.Decoder;if(!e.setDecoderProperties(a))throw"Incorrect stream properties";if(!e.decode(b,c,d))throw"Error in data stream";return!0};
LZMA.decompressFile=function(a,b){var c=new LZMA.Decoder,d;if(!c.setDecoderProperties(a))throw"Incorrect stream properties";d=a.readByte();d|=a.readByte()<<8;d|=a.readByte()<<16;d+=16777216*a.readByte();a.readByte();a.readByte();a.readByte();a.readByte();if(!c.decode(a,b,d))throw"Error in data stream";return!0};

// File:js/lib/pako.min.js

/* pako 0.2.5 nodeca/pako */
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.pako=t()}}(function(){return function t(e,a,i){function n(s,o){if(!a[s]){if(!e[s]){var l="function"==typeof require&&require;if(!o&&l)return l(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+s+"'")}var h=a[s]={exports:{}};e[s][0].call(h.exports,function(t){var a=e[s][1][t];return n(a?a:t)},h,h.exports,t,e,a,i)}return a[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)n(i[s]);return n}({1:[function(t,e){"use strict";var a=t("./lib/utils/common").assign,i=t("./lib/deflate"),n=t("./lib/inflate"),r=t("./lib/zlib/constants"),s={};a(s,i,n,r),e.exports=s},{"./lib/deflate":2,"./lib/inflate":3,"./lib/utils/common":4,"./lib/zlib/constants":7}],2:[function(t,e,a){"use strict";function i(t,e){var a=new w(e);if(a.push(t,!0),a.err)throw a.msg;return a.result}function n(t,e){return e=e||{},e.raw=!0,i(t,e)}function r(t,e){return e=e||{},e.gzip=!0,i(t,e)}var s=t("./zlib/deflate.js"),o=t("./utils/common"),l=t("./utils/strings"),h=t("./zlib/messages"),d=t("./zlib/zstream"),f=0,_=4,u=0,c=1,b=-1,g=0,m=8,w=function(t){this.options=o.assign({level:b,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var a=s.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(a!==u)throw new Error(h[a]);e.header&&s.deflateSetHeader(this.strm,e.header)};w.prototype.push=function(t,e){var a,i,n=this.strm,r=this.options.chunkSize;if(this.ended)return!1;i=e===~~e?e:e===!0?_:f,n.input="string"==typeof t?l.string2buf(t):t,n.next_in=0,n.avail_in=n.input.length;do{if(0===n.avail_out&&(n.output=new o.Buf8(r),n.next_out=0,n.avail_out=r),a=s.deflate(n,i),a!==c&&a!==u)return this.onEnd(a),this.ended=!0,!1;(0===n.avail_out||0===n.avail_in&&i===_)&&this.onData("string"===this.options.to?l.buf2binstring(o.shrinkBuf(n.output,n.next_out)):o.shrinkBuf(n.output,n.next_out))}while((n.avail_in>0||0===n.avail_out)&&a!==c);return i===_?(a=s.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===u):!0},w.prototype.onData=function(t){this.chunks.push(t)},w.prototype.onEnd=function(t){t===u&&(this.result="string"===this.options.to?this.chunks.join(""):o.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},a.Deflate=w,a.deflate=i,a.deflateRaw=n,a.gzip=r},{"./utils/common":4,"./utils/strings":5,"./zlib/deflate.js":9,"./zlib/messages":14,"./zlib/zstream":16}],3:[function(t,e,a){"use strict";function i(t,e){var a=new _(e);if(a.push(t,!0),a.err)throw a.msg;return a.result}function n(t,e){return e=e||{},e.raw=!0,i(t,e)}var r=t("./zlib/inflate.js"),s=t("./utils/common"),o=t("./utils/strings"),l=t("./zlib/constants"),h=t("./zlib/messages"),d=t("./zlib/zstream"),f=t("./zlib/gzheader"),_=function(t){this.options=s.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0===(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var a=r.inflateInit2(this.strm,e.windowBits);if(a!==l.Z_OK)throw new Error(h[a]);this.header=new f,r.inflateGetHeader(this.strm,this.header)};_.prototype.push=function(t,e){var a,i,n,h,d,f=this.strm,_=this.options.chunkSize;if(this.ended)return!1;i=e===~~e?e:e===!0?l.Z_FINISH:l.Z_NO_FLUSH,f.input="string"==typeof t?o.binstring2buf(t):t,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new s.Buf8(_),f.next_out=0,f.avail_out=_),a=r.inflate(f,l.Z_NO_FLUSH),a!==l.Z_STREAM_END&&a!==l.Z_OK)return this.onEnd(a),this.ended=!0,!1;f.next_out&&(0===f.avail_out||a===l.Z_STREAM_END||0===f.avail_in&&i===l.Z_FINISH)&&("string"===this.options.to?(n=o.utf8border(f.output,f.next_out),h=f.next_out-n,d=o.buf2string(f.output,n),f.next_out=h,f.avail_out=_-h,h&&s.arraySet(f.output,f.output,n,h,0),this.onData(d)):this.onData(s.shrinkBuf(f.output,f.next_out)))}while(f.avail_in>0&&a!==l.Z_STREAM_END);return a===l.Z_STREAM_END&&(i=l.Z_FINISH),i===l.Z_FINISH?(a=r.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===l.Z_OK):!0},_.prototype.onData=function(t){this.chunks.push(t)},_.prototype.onEnd=function(t){t===l.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):s.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},a.Inflate=_,a.inflate=i,a.inflateRaw=n,a.ungzip=i},{"./utils/common":4,"./utils/strings":5,"./zlib/constants":7,"./zlib/gzheader":10,"./zlib/inflate.js":12,"./zlib/messages":14,"./zlib/zstream":16}],4:[function(t,e,a){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;a.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var a=e.shift();if(a){if("object"!=typeof a)throw new TypeError(a+"must be non-object");for(var i in a)a.hasOwnProperty(i)&&(t[i]=a[i])}}return t},a.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var n={arraySet:function(t,e,a,i,n){if(e.subarray&&t.subarray)return void t.set(e.subarray(a,a+i),n);for(var r=0;i>r;r++)t[n+r]=e[a+r]},flattenChunks:function(t){var e,a,i,n,r,s;for(i=0,e=0,a=t.length;a>e;e++)i+=t[e].length;for(s=new Uint8Array(i),n=0,e=0,a=t.length;a>e;e++)r=t[e],s.set(r,n),n+=r.length;return s}},r={arraySet:function(t,e,a,i,n){for(var r=0;i>r;r++)t[n+r]=e[a+r]},flattenChunks:function(t){return[].concat.apply([],t)}};a.setTyped=function(t){t?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,n)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,r))},a.setTyped(i)},{}],5:[function(t,e,a){"use strict";function i(t,e){if(65537>e&&(t.subarray&&s||!t.subarray&&r))return String.fromCharCode.apply(null,n.shrinkBuf(t,e));for(var a="",i=0;e>i;i++)a+=String.fromCharCode(t[i]);return a}var n=t("./common"),r=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(o){r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(o){s=!1}for(var l=new n.Buf8(256),h=0;256>h;h++)l[h]=h>=252?6:h>=248?5:h>=240?4:h>=224?3:h>=192?2:1;l[254]=l[254]=1,a.string2buf=function(t){var e,a,i,r,s,o=t.length,l=0;for(r=0;o>r;r++)a=t.charCodeAt(r),55296===(64512&a)&&o>r+1&&(i=t.charCodeAt(r+1),56320===(64512&i)&&(a=65536+(a-55296<<10)+(i-56320),r++)),l+=128>a?1:2048>a?2:65536>a?3:4;for(e=new n.Buf8(l),s=0,r=0;l>s;r++)a=t.charCodeAt(r),55296===(64512&a)&&o>r+1&&(i=t.charCodeAt(r+1),56320===(64512&i)&&(a=65536+(a-55296<<10)+(i-56320),r++)),128>a?e[s++]=a:2048>a?(e[s++]=192|a>>>6,e[s++]=128|63&a):65536>a?(e[s++]=224|a>>>12,e[s++]=128|a>>>6&63,e[s++]=128|63&a):(e[s++]=240|a>>>18,e[s++]=128|a>>>12&63,e[s++]=128|a>>>6&63,e[s++]=128|63&a);return e},a.buf2binstring=function(t){return i(t,t.length)},a.binstring2buf=function(t){for(var e=new n.Buf8(t.length),a=0,i=e.length;i>a;a++)e[a]=t.charCodeAt(a);return e},a.buf2string=function(t,e){var a,n,r,s,o=e||t.length,h=new Array(2*o);for(n=0,a=0;o>a;)if(r=t[a++],128>r)h[n++]=r;else if(s=l[r],s>4)h[n++]=65533,a+=s-1;else{for(r&=2===s?31:3===s?15:7;s>1&&o>a;)r=r<<6|63&t[a++],s--;s>1?h[n++]=65533:65536>r?h[n++]=r:(r-=65536,h[n++]=55296|r>>10&1023,h[n++]=56320|1023&r)}return i(h,n)},a.utf8border=function(t,e){var a;for(e=e||t.length,e>t.length&&(e=t.length),a=e-1;a>=0&&128===(192&t[a]);)a--;return 0>a?e:0===a?e:a+l[t[a]]>e?a:e}},{"./common":4}],6:[function(t,e){"use strict";function a(t,e,a,i){for(var n=65535&t|0,r=t>>>16&65535|0,s=0;0!==a;){s=a>2e3?2e3:a,a-=s;do n=n+e[i++]|0,r=r+n|0;while(--s);n%=65521,r%=65521}return n|r<<16|0}e.exports=a},{}],7:[function(t,e){e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],8:[function(t,e){"use strict";function a(){for(var t,e=[],a=0;256>a;a++){t=a;for(var i=0;8>i;i++)t=1&t?3988292384^t>>>1:t>>>1;e[a]=t}return e}function i(t,e,a,i){var r=n,s=i+a;t=-1^t;for(var o=i;s>o;o++)t=t>>>8^r[255&(t^e[o])];return-1^t}var n=a();e.exports=i},{}],9:[function(t,e,a){"use strict";function i(t,e){return t.msg=I[e],e}function n(t){return(t<<1)-(t>4?9:0)}function r(t){for(var e=t.length;--e>=0;)t[e]=0}function s(t){var e=t.state,a=e.pending;a>t.avail_out&&(a=t.avail_out),0!==a&&(A.arraySet(t.output,e.pending_buf,e.pending_out,a,t.next_out),t.next_out+=a,e.pending_out+=a,t.total_out+=a,t.avail_out-=a,e.pending-=a,0===e.pending&&(e.pending_out=0))}function o(t,e){Z._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,s(t.strm)}function l(t,e){t.pending_buf[t.pending++]=e}function h(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function d(t,e,a,i){var n=t.avail_in;return n>i&&(n=i),0===n?0:(t.avail_in-=n,A.arraySet(e,t.input,t.next_in,n,a),1===t.state.wrap?t.adler=R(t.adler,e,n,a):2===t.state.wrap&&(t.adler=C(t.adler,e,n,a)),t.next_in+=n,t.total_in+=n,n)}function f(t,e){var a,i,n=t.max_chain_length,r=t.strstart,s=t.prev_length,o=t.nice_match,l=t.strstart>t.w_size-he?t.strstart-(t.w_size-he):0,h=t.window,d=t.w_mask,f=t.prev,_=t.strstart+le,u=h[r+s-1],c=h[r+s];t.prev_length>=t.good_match&&(n>>=2),o>t.lookahead&&(o=t.lookahead);do if(a=e,h[a+s]===c&&h[a+s-1]===u&&h[a]===h[r]&&h[++a]===h[r+1]){r+=2,a++;do;while(h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&_>r);if(i=le-(_-r),r=_-le,i>s){if(t.match_start=e,s=i,i>=o)break;u=h[r+s-1],c=h[r+s]}}while((e=f[e&d])>l&&0!==--n);return s<=t.lookahead?s:t.lookahead}function _(t){var e,a,i,n,r,s=t.w_size;do{if(n=t.window_size-t.lookahead-t.strstart,t.strstart>=s+(s-he)){A.arraySet(t.window,t.window,s,s,0),t.match_start-=s,t.strstart-=s,t.block_start-=s,a=t.hash_size,e=a;do i=t.head[--e],t.head[e]=i>=s?i-s:0;while(--a);a=s,e=a;do i=t.prev[--e],t.prev[e]=i>=s?i-s:0;while(--a);n+=s}if(0===t.strm.avail_in)break;if(a=d(t.strm,t.window,t.strstart+t.lookahead,n),t.lookahead+=a,t.lookahead+t.insert>=oe)for(r=t.strstart-t.insert,t.ins_h=t.window[r],t.ins_h=(t.ins_h<<t.hash_shift^t.window[r+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[r+oe-1])&t.hash_mask,t.prev[r&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=r,r++,t.insert--,!(t.lookahead+t.insert<oe)););}while(t.lookahead<he&&0!==t.strm.avail_in)}function u(t,e){var a=65535;for(a>t.pending_buf_size-5&&(a=t.pending_buf_size-5);;){if(t.lookahead<=1){if(_(t),0===t.lookahead&&e===N)return we;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var i=t.block_start+a;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,o(t,!1),0===t.strm.avail_out))return we;if(t.strstart-t.block_start>=t.w_size-he&&(o(t,!1),0===t.strm.avail_out))return we}return t.insert=0,e===D?(o(t,!0),0===t.strm.avail_out?ve:ke):t.strstart>t.block_start&&(o(t,!1),0===t.strm.avail_out)?we:we}function c(t,e){for(var a,i;;){if(t.lookahead<he){if(_(t),t.lookahead<he&&e===N)return we;if(0===t.lookahead)break}if(a=0,t.lookahead>=oe&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+oe-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==a&&t.strstart-a<=t.w_size-he&&(t.match_length=f(t,a)),t.match_length>=oe)if(i=Z._tr_tally(t,t.strstart-t.match_start,t.match_length-oe),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=oe){t.match_length--;do t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+oe-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(0!==--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else i=Z._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(o(t,!1),0===t.strm.avail_out))return we}return t.insert=t.strstart<oe-1?t.strstart:oe-1,e===D?(o(t,!0),0===t.strm.avail_out?ve:ke):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?we:pe}function b(t,e){for(var a,i,n;;){if(t.lookahead<he){if(_(t),t.lookahead<he&&e===N)return we;if(0===t.lookahead)break}if(a=0,t.lookahead>=oe&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+oe-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=oe-1,0!==a&&t.prev_length<t.max_lazy_match&&t.strstart-a<=t.w_size-he&&(t.match_length=f(t,a),t.match_length<=5&&(t.strategy===P||t.match_length===oe&&t.strstart-t.match_start>4096)&&(t.match_length=oe-1)),t.prev_length>=oe&&t.match_length<=t.prev_length){n=t.strstart+t.lookahead-oe,i=Z._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-oe),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=n&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+oe-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(0!==--t.prev_length);if(t.match_available=0,t.match_length=oe-1,t.strstart++,i&&(o(t,!1),0===t.strm.avail_out))return we}else if(t.match_available){if(i=Z._tr_tally(t,0,t.window[t.strstart-1]),i&&o(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return we}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=Z._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<oe-1?t.strstart:oe-1,e===D?(o(t,!0),0===t.strm.avail_out?ve:ke):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?we:pe}function g(t,e){for(var a,i,n,r,s=t.window;;){if(t.lookahead<=le){if(_(t),t.lookahead<=le&&e===N)return we;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=oe&&t.strstart>0&&(n=t.strstart-1,i=s[n],i===s[++n]&&i===s[++n]&&i===s[++n])){r=t.strstart+le;do;while(i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&r>n);t.match_length=le-(r-n),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=oe?(a=Z._tr_tally(t,1,t.match_length-oe),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(a=Z._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),a&&(o(t,!1),0===t.strm.avail_out))return we}return t.insert=0,e===D?(o(t,!0),0===t.strm.avail_out?ve:ke):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?we:pe}function m(t,e){for(var a;;){if(0===t.lookahead&&(_(t),0===t.lookahead)){if(e===N)return we;break}if(t.match_length=0,a=Z._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,a&&(o(t,!1),0===t.strm.avail_out))return we}return t.insert=0,e===D?(o(t,!0),0===t.strm.avail_out?ve:ke):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?we:pe}function w(t){t.window_size=2*t.w_size,r(t.head),t.max_lazy_match=E[t.level].max_lazy,t.good_match=E[t.level].good_length,t.nice_match=E[t.level].nice_length,t.max_chain_length=E[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=oe-1,t.match_available=0,t.ins_h=0}function p(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=J,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new A.Buf16(2*re),this.dyn_dtree=new A.Buf16(2*(2*ie+1)),this.bl_tree=new A.Buf16(2*(2*ne+1)),r(this.dyn_ltree),r(this.dyn_dtree),r(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new A.Buf16(se+1),this.heap=new A.Buf16(2*ae+1),r(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new A.Buf16(2*ae+1),r(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function v(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=W,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?fe:ge,t.adler=2===e.wrap?0:1,e.last_flush=N,Z._tr_init(e),L):i(t,H)}function k(t){var e=v(t);return e===L&&w(t.state),e}function x(t,e){return t&&t.state?2!==t.state.wrap?H:(t.state.gzhead=e,L):H}function y(t,e,a,n,r,s){if(!t)return H;var o=1;if(e===K&&(e=6),0>n?(o=0,n=-n):n>15&&(o=2,n-=16),1>r||r>Q||a!==J||8>n||n>15||0>e||e>9||0>s||s>G)return i(t,H);8===n&&(n=9);var l=new p;return t.state=l,l.strm=t,l.wrap=o,l.gzhead=null,l.w_bits=n,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=r+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+oe-1)/oe),l.window=new A.Buf8(2*l.w_size),l.head=new A.Buf16(l.hash_size),l.prev=new A.Buf16(l.w_size),l.lit_bufsize=1<<r+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new A.Buf8(l.pending_buf_size),l.d_buf=l.lit_bufsize>>1,l.l_buf=3*l.lit_bufsize,l.level=e,l.strategy=s,l.method=a,k(t)}function z(t,e){return y(t,e,J,V,$,X)}function B(t,e){var a,o,d,f;if(!t||!t.state||e>F||0>e)return t?i(t,H):H;if(o=t.state,!t.output||!t.input&&0!==t.avail_in||o.status===me&&e!==D)return i(t,0===t.avail_out?M:H);if(o.strm=t,a=o.last_flush,o.last_flush=e,o.status===fe)if(2===o.wrap)t.adler=0,l(o,31),l(o,139),l(o,8),o.gzhead?(l(o,(o.gzhead.text?1:0)+(o.gzhead.hcrc?2:0)+(o.gzhead.extra?4:0)+(o.gzhead.name?8:0)+(o.gzhead.comment?16:0)),l(o,255&o.gzhead.time),l(o,o.gzhead.time>>8&255),l(o,o.gzhead.time>>16&255),l(o,o.gzhead.time>>24&255),l(o,9===o.level?2:o.strategy>=q||o.level<2?4:0),l(o,255&o.gzhead.os),o.gzhead.extra&&o.gzhead.extra.length&&(l(o,255&o.gzhead.extra.length),l(o,o.gzhead.extra.length>>8&255)),o.gzhead.hcrc&&(t.adler=C(t.adler,o.pending_buf,o.pending,0)),o.gzindex=0,o.status=_e):(l(o,0),l(o,0),l(o,0),l(o,0),l(o,0),l(o,9===o.level?2:o.strategy>=q||o.level<2?4:0),l(o,xe),o.status=ge);else{var _=J+(o.w_bits-8<<4)<<8,u=-1;u=o.strategy>=q||o.level<2?0:o.level<6?1:6===o.level?2:3,_|=u<<6,0!==o.strstart&&(_|=de),_+=31-_%31,o.status=ge,h(o,_),0!==o.strstart&&(h(o,t.adler>>>16),h(o,65535&t.adler)),t.adler=1}if(o.status===_e)if(o.gzhead.extra){for(d=o.pending;o.gzindex<(65535&o.gzhead.extra.length)&&(o.pending!==o.pending_buf_size||(o.gzhead.hcrc&&o.pending>d&&(t.adler=C(t.adler,o.pending_buf,o.pending-d,d)),s(t),d=o.pending,o.pending!==o.pending_buf_size));)l(o,255&o.gzhead.extra[o.gzindex]),o.gzindex++;o.gzhead.hcrc&&o.pending>d&&(t.adler=C(t.adler,o.pending_buf,o.pending-d,d)),o.gzindex===o.gzhead.extra.length&&(o.gzindex=0,o.status=ue)}else o.status=ue;if(o.status===ue)if(o.gzhead.name){d=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>d&&(t.adler=C(t.adler,o.pending_buf,o.pending-d,d)),s(t),d=o.pending,o.pending===o.pending_buf_size)){f=1;break}f=o.gzindex<o.gzhead.name.length?255&o.gzhead.name.charCodeAt(o.gzindex++):0,l(o,f)}while(0!==f);o.gzhead.hcrc&&o.pending>d&&(t.adler=C(t.adler,o.pending_buf,o.pending-d,d)),0===f&&(o.gzindex=0,o.status=ce)}else o.status=ce;if(o.status===ce)if(o.gzhead.comment){d=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>d&&(t.adler=C(t.adler,o.pending_buf,o.pending-d,d)),s(t),d=o.pending,o.pending===o.pending_buf_size)){f=1;break}f=o.gzindex<o.gzhead.comment.length?255&o.gzhead.comment.charCodeAt(o.gzindex++):0,l(o,f)}while(0!==f);o.gzhead.hcrc&&o.pending>d&&(t.adler=C(t.adler,o.pending_buf,o.pending-d,d)),0===f&&(o.status=be)}else o.status=be;if(o.status===be&&(o.gzhead.hcrc?(o.pending+2>o.pending_buf_size&&s(t),o.pending+2<=o.pending_buf_size&&(l(o,255&t.adler),l(o,t.adler>>8&255),t.adler=0,o.status=ge)):o.status=ge),0!==o.pending){if(s(t),0===t.avail_out)return o.last_flush=-1,L}else if(0===t.avail_in&&n(e)<=n(a)&&e!==D)return i(t,M);if(o.status===me&&0!==t.avail_in)return i(t,M);if(0!==t.avail_in||0!==o.lookahead||e!==N&&o.status!==me){var c=o.strategy===q?m(o,e):o.strategy===Y?g(o,e):E[o.level].func(o,e);if((c===ve||c===ke)&&(o.status=me),c===we||c===ve)return 0===t.avail_out&&(o.last_flush=-1),L;if(c===pe&&(e===O?Z._tr_align(o):e!==F&&(Z._tr_stored_block(o,0,0,!1),e===T&&(r(o.head),0===o.lookahead&&(o.strstart=0,o.block_start=0,o.insert=0))),s(t),0===t.avail_out))return o.last_flush=-1,L}return e!==D?L:o.wrap<=0?U:(2===o.wrap?(l(o,255&t.adler),l(o,t.adler>>8&255),l(o,t.adler>>16&255),l(o,t.adler>>24&255),l(o,255&t.total_in),l(o,t.total_in>>8&255),l(o,t.total_in>>16&255),l(o,t.total_in>>24&255)):(h(o,t.adler>>>16),h(o,65535&t.adler)),s(t),o.wrap>0&&(o.wrap=-o.wrap),0!==o.pending?L:U)}function S(t){var e;return t&&t.state?(e=t.state.status,e!==fe&&e!==_e&&e!==ue&&e!==ce&&e!==be&&e!==ge&&e!==me?i(t,H):(t.state=null,e===ge?i(t,j):L)):H}var E,A=t("../utils/common"),Z=t("./trees"),R=t("./adler32"),C=t("./crc32"),I=t("./messages"),N=0,O=1,T=3,D=4,F=5,L=0,U=1,H=-2,j=-3,M=-5,K=-1,P=1,q=2,Y=3,G=4,X=0,W=2,J=8,Q=9,V=15,$=8,te=29,ee=256,ae=ee+1+te,ie=30,ne=19,re=2*ae+1,se=15,oe=3,le=258,he=le+oe+1,de=32,fe=42,_e=69,ue=73,ce=91,be=103,ge=113,me=666,we=1,pe=2,ve=3,ke=4,xe=3,ye=function(t,e,a,i,n){this.good_length=t,this.max_lazy=e,this.nice_length=a,this.max_chain=i,this.func=n};E=[new ye(0,0,0,0,u),new ye(4,4,8,4,c),new ye(4,5,16,8,c),new ye(4,6,32,32,c),new ye(4,4,16,16,b),new ye(8,16,32,32,b),new ye(8,16,128,128,b),new ye(8,32,128,256,b),new ye(32,128,258,1024,b),new ye(32,258,258,4096,b)],a.deflateInit=z,a.deflateInit2=y,a.deflateReset=k,a.deflateResetKeep=v,a.deflateSetHeader=x,a.deflate=B,a.deflateEnd=S,a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":4,"./adler32":6,"./crc32":8,"./messages":14,"./trees":15}],10:[function(t,e){"use strict";function a(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}e.exports=a},{}],11:[function(t,e){"use strict";var a=30,i=12;e.exports=function(t,e){var n,r,s,o,l,h,d,f,_,u,c,b,g,m,w,p,v,k,x,y,z,B,S,E,A;n=t.state,r=t.next_in,E=t.input,s=r+(t.avail_in-5),o=t.next_out,A=t.output,l=o-(e-t.avail_out),h=o+(t.avail_out-257),d=n.dmax,f=n.wsize,_=n.whave,u=n.wnext,c=n.window,b=n.hold,g=n.bits,m=n.lencode,w=n.distcode,p=(1<<n.lenbits)-1,v=(1<<n.distbits)-1;t:do{15>g&&(b+=E[r++]<<g,g+=8,b+=E[r++]<<g,g+=8),k=m[b&p];e:for(;;){if(x=k>>>24,b>>>=x,g-=x,x=k>>>16&255,0===x)A[o++]=65535&k;else{if(!(16&x)){if(0===(64&x)){k=m[(65535&k)+(b&(1<<x)-1)];continue e}if(32&x){n.mode=i;break t}t.msg="invalid literal/length code",n.mode=a;break t}y=65535&k,x&=15,x&&(x>g&&(b+=E[r++]<<g,g+=8),y+=b&(1<<x)-1,b>>>=x,g-=x),15>g&&(b+=E[r++]<<g,g+=8,b+=E[r++]<<g,g+=8),k=w[b&v];a:for(;;){if(x=k>>>24,b>>>=x,g-=x,x=k>>>16&255,!(16&x)){if(0===(64&x)){k=w[(65535&k)+(b&(1<<x)-1)];continue a}t.msg="invalid distance code",n.mode=a;break t}if(z=65535&k,x&=15,x>g&&(b+=E[r++]<<g,g+=8,x>g&&(b+=E[r++]<<g,g+=8)),z+=b&(1<<x)-1,z>d){t.msg="invalid distance too far back",n.mode=a;break t}if(b>>>=x,g-=x,x=o-l,z>x){if(x=z-x,x>_&&n.sane){t.msg="invalid distance too far back",n.mode=a;break t}if(B=0,S=c,0===u){if(B+=f-x,y>x){y-=x;do A[o++]=c[B++];while(--x);B=o-z,S=A}}else if(x>u){if(B+=f+u-x,x-=u,y>x){y-=x;do A[o++]=c[B++];while(--x);if(B=0,y>u){x=u,y-=x;do A[o++]=c[B++];while(--x);B=o-z,S=A}}}else if(B+=u-x,y>x){y-=x;do A[o++]=c[B++];while(--x);B=o-z,S=A}for(;y>2;)A[o++]=S[B++],A[o++]=S[B++],A[o++]=S[B++],y-=3;y&&(A[o++]=S[B++],y>1&&(A[o++]=S[B++]))}else{B=o-z;do A[o++]=A[B++],A[o++]=A[B++],A[o++]=A[B++],y-=3;while(y>2);y&&(A[o++]=A[B++],y>1&&(A[o++]=A[B++]))}break}}break}}while(s>r&&h>o);y=g>>3,r-=y,g-=y<<3,b&=(1<<g)-1,t.next_in=r,t.next_out=o,t.avail_in=s>r?5+(s-r):5-(r-s),t.avail_out=h>o?257+(h-o):257-(o-h),n.hold=b,n.bits=g}},{}],12:[function(t,e,a){"use strict";function i(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function n(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new m.Buf16(320),this.work=new m.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function r(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=D,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new m.Buf32(ce),e.distcode=e.distdyn=new m.Buf32(be),e.sane=1,e.back=-1,A):C}function s(t){var e;return t&&t.state?(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,r(t)):C}function o(t,e){var a,i;return t&&t.state?(i=t.state,0>e?(a=0,e=-e):(a=(e>>4)+1,48>e&&(e&=15)),e&&(8>e||e>15)?C:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=a,i.wbits=e,s(t))):C}function l(t,e){var a,i;return t?(i=new n,t.state=i,i.window=null,a=o(t,e),a!==A&&(t.state=null),a):C}function h(t){return l(t,me)}function d(t){if(we){var e;for(b=new m.Buf32(512),g=new m.Buf32(32),e=0;144>e;)t.lens[e++]=8;for(;256>e;)t.lens[e++]=9;for(;280>e;)t.lens[e++]=7;for(;288>e;)t.lens[e++]=8;for(k(y,t.lens,0,288,b,0,t.work,{bits:9}),e=0;32>e;)t.lens[e++]=5;k(z,t.lens,0,32,g,0,t.work,{bits:5}),we=!1}t.lencode=b,t.lenbits=9,t.distcode=g,t.distbits=5}function f(t,e,a,i){var n,r=t.state;return null===r.window&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new m.Buf8(r.wsize)),i>=r.wsize?(m.arraySet(r.window,e,a-r.wsize,r.wsize,0),r.wnext=0,r.whave=r.wsize):(n=r.wsize-r.wnext,n>i&&(n=i),m.arraySet(r.window,e,a-i,n,r.wnext),i-=n,i?(m.arraySet(r.window,e,a-i,i,0),r.wnext=i,r.whave=r.wsize):(r.wnext+=n,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=n))),0}function _(t,e){var a,n,r,s,o,l,h,_,u,c,b,g,ce,be,ge,me,we,pe,ve,ke,xe,ye,ze,Be,Se=0,Ee=new m.Buf8(4),Ae=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return C;a=t.state,a.mode===G&&(a.mode=X),o=t.next_out,r=t.output,h=t.avail_out,s=t.next_in,n=t.input,l=t.avail_in,_=a.hold,u=a.bits,c=l,b=h,ye=A;t:for(;;)switch(a.mode){case D:if(0===a.wrap){a.mode=X;break}for(;16>u;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}if(2&a.wrap&&35615===_){a.check=0,Ee[0]=255&_,Ee[1]=_>>>8&255,a.check=p(a.check,Ee,2,0),_=0,u=0,a.mode=F;break}if(a.flags=0,a.head&&(a.head.done=!1),!(1&a.wrap)||(((255&_)<<8)+(_>>8))%31){t.msg="incorrect header check",a.mode=fe;break}if((15&_)!==T){t.msg="unknown compression method",a.mode=fe;break}if(_>>>=4,u-=4,xe=(15&_)+8,0===a.wbits)a.wbits=xe;else if(xe>a.wbits){t.msg="invalid window size",a.mode=fe;break}a.dmax=1<<xe,t.adler=a.check=1,a.mode=512&_?q:G,_=0,u=0;break;case F:for(;16>u;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}if(a.flags=_,(255&a.flags)!==T){t.msg="unknown compression method",a.mode=fe;break}if(57344&a.flags){t.msg="unknown header flags set",a.mode=fe;break}a.head&&(a.head.text=_>>8&1),512&a.flags&&(Ee[0]=255&_,Ee[1]=_>>>8&255,a.check=p(a.check,Ee,2,0)),_=0,u=0,a.mode=L;case L:for(;32>u;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}a.head&&(a.head.time=_),512&a.flags&&(Ee[0]=255&_,Ee[1]=_>>>8&255,Ee[2]=_>>>16&255,Ee[3]=_>>>24&255,a.check=p(a.check,Ee,4,0)),_=0,u=0,a.mode=U;case U:for(;16>u;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}a.head&&(a.head.xflags=255&_,a.head.os=_>>8),512&a.flags&&(Ee[0]=255&_,Ee[1]=_>>>8&255,a.check=p(a.check,Ee,2,0)),_=0,u=0,a.mode=H;case H:if(1024&a.flags){for(;16>u;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}a.length=_,a.head&&(a.head.extra_len=_),512&a.flags&&(Ee[0]=255&_,Ee[1]=_>>>8&255,a.check=p(a.check,Ee,2,0)),_=0,u=0}else a.head&&(a.head.extra=null);a.mode=j;case j:if(1024&a.flags&&(g=a.length,g>l&&(g=l),g&&(a.head&&(xe=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Array(a.head.extra_len)),m.arraySet(a.head.extra,n,s,g,xe)),512&a.flags&&(a.check=p(a.check,n,g,s)),l-=g,s+=g,a.length-=g),a.length))break t;a.length=0,a.mode=M;case M:if(2048&a.flags){if(0===l)break t;g=0;do xe=n[s+g++],a.head&&xe&&a.length<65536&&(a.head.name+=String.fromCharCode(xe));while(xe&&l>g);if(512&a.flags&&(a.check=p(a.check,n,g,s)),l-=g,s+=g,xe)break t}else a.head&&(a.head.name=null);a.length=0,a.mode=K;case K:if(4096&a.flags){if(0===l)break t;g=0;do xe=n[s+g++],a.head&&xe&&a.length<65536&&(a.head.comment+=String.fromCharCode(xe));while(xe&&l>g);if(512&a.flags&&(a.check=p(a.check,n,g,s)),l-=g,s+=g,xe)break t}else a.head&&(a.head.comment=null);a.mode=P;case P:if(512&a.flags){for(;16>u;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}if(_!==(65535&a.check)){t.msg="header crc mismatch",a.mode=fe;break}_=0,u=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),t.adler=a.check=0,a.mode=G;break;case q:for(;32>u;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}t.adler=a.check=i(_),_=0,u=0,a.mode=Y;case Y:if(0===a.havedict)return t.next_out=o,t.avail_out=h,t.next_in=s,t.avail_in=l,a.hold=_,a.bits=u,R;t.adler=a.check=1,a.mode=G;case G:if(e===S||e===E)break t;case X:if(a.last){_>>>=7&u,u-=7&u,a.mode=le;break}for(;3>u;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}switch(a.last=1&_,_>>>=1,u-=1,3&_){case 0:a.mode=W;break;case 1:if(d(a),a.mode=ee,e===E){_>>>=2,u-=2;break t}break;case 2:a.mode=V;break;case 3:t.msg="invalid block type",a.mode=fe}_>>>=2,u-=2;break;case W:for(_>>>=7&u,u-=7&u;32>u;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}if((65535&_)!==(_>>>16^65535)){t.msg="invalid stored block lengths",a.mode=fe;break}if(a.length=65535&_,_=0,u=0,a.mode=J,e===E)break t;case J:a.mode=Q;case Q:if(g=a.length){if(g>l&&(g=l),g>h&&(g=h),0===g)break t;m.arraySet(r,n,s,g,o),l-=g,s+=g,h-=g,o+=g,a.length-=g;break}a.mode=G;break;case V:for(;14>u;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}if(a.nlen=(31&_)+257,_>>>=5,u-=5,a.ndist=(31&_)+1,_>>>=5,u-=5,a.ncode=(15&_)+4,_>>>=4,u-=4,a.nlen>286||a.ndist>30){t.msg="too many length or distance symbols",a.mode=fe;break}a.have=0,a.mode=$;case $:for(;a.have<a.ncode;){for(;3>u;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}a.lens[Ae[a.have++]]=7&_,_>>>=3,u-=3}for(;a.have<19;)a.lens[Ae[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,ze={bits:a.lenbits},ye=k(x,a.lens,0,19,a.lencode,0,a.work,ze),a.lenbits=ze.bits,ye){t.msg="invalid code lengths set",a.mode=fe;break}a.have=0,a.mode=te;case te:for(;a.have<a.nlen+a.ndist;){for(;Se=a.lencode[_&(1<<a.lenbits)-1],ge=Se>>>24,me=Se>>>16&255,we=65535&Se,!(u>=ge);){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}if(16>we)_>>>=ge,u-=ge,a.lens[a.have++]=we;else{if(16===we){for(Be=ge+2;Be>u;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}if(_>>>=ge,u-=ge,0===a.have){t.msg="invalid bit length repeat",a.mode=fe;break}xe=a.lens[a.have-1],g=3+(3&_),_>>>=2,u-=2}else if(17===we){for(Be=ge+3;Be>u;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}_>>>=ge,u-=ge,xe=0,g=3+(7&_),_>>>=3,u-=3}else{for(Be=ge+7;Be>u;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}_>>>=ge,u-=ge,xe=0,g=11+(127&_),_>>>=7,u-=7}if(a.have+g>a.nlen+a.ndist){t.msg="invalid bit length repeat",a.mode=fe;break}for(;g--;)a.lens[a.have++]=xe}}if(a.mode===fe)break;if(0===a.lens[256]){t.msg="invalid code -- missing end-of-block",a.mode=fe;break}if(a.lenbits=9,ze={bits:a.lenbits},ye=k(y,a.lens,0,a.nlen,a.lencode,0,a.work,ze),a.lenbits=ze.bits,ye){t.msg="invalid literal/lengths set",a.mode=fe;break}if(a.distbits=6,a.distcode=a.distdyn,ze={bits:a.distbits},ye=k(z,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,ze),a.distbits=ze.bits,ye){t.msg="invalid distances set",a.mode=fe;
break}if(a.mode=ee,e===E)break t;case ee:a.mode=ae;case ae:if(l>=6&&h>=258){t.next_out=o,t.avail_out=h,t.next_in=s,t.avail_in=l,a.hold=_,a.bits=u,v(t,b),o=t.next_out,r=t.output,h=t.avail_out,s=t.next_in,n=t.input,l=t.avail_in,_=a.hold,u=a.bits,a.mode===G&&(a.back=-1);break}for(a.back=0;Se=a.lencode[_&(1<<a.lenbits)-1],ge=Se>>>24,me=Se>>>16&255,we=65535&Se,!(u>=ge);){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}if(me&&0===(240&me)){for(pe=ge,ve=me,ke=we;Se=a.lencode[ke+((_&(1<<pe+ve)-1)>>pe)],ge=Se>>>24,me=Se>>>16&255,we=65535&Se,!(u>=pe+ge);){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}_>>>=pe,u-=pe,a.back+=pe}if(_>>>=ge,u-=ge,a.back+=ge,a.length=we,0===me){a.mode=oe;break}if(32&me){a.back=-1,a.mode=G;break}if(64&me){t.msg="invalid literal/length code",a.mode=fe;break}a.extra=15&me,a.mode=ie;case ie:if(a.extra){for(Be=a.extra;Be>u;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}a.length+=_&(1<<a.extra)-1,_>>>=a.extra,u-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=ne;case ne:for(;Se=a.distcode[_&(1<<a.distbits)-1],ge=Se>>>24,me=Se>>>16&255,we=65535&Se,!(u>=ge);){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}if(0===(240&me)){for(pe=ge,ve=me,ke=we;Se=a.distcode[ke+((_&(1<<pe+ve)-1)>>pe)],ge=Se>>>24,me=Se>>>16&255,we=65535&Se,!(u>=pe+ge);){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}_>>>=pe,u-=pe,a.back+=pe}if(_>>>=ge,u-=ge,a.back+=ge,64&me){t.msg="invalid distance code",a.mode=fe;break}a.offset=we,a.extra=15&me,a.mode=re;case re:if(a.extra){for(Be=a.extra;Be>u;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}a.offset+=_&(1<<a.extra)-1,_>>>=a.extra,u-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){t.msg="invalid distance too far back",a.mode=fe;break}a.mode=se;case se:if(0===h)break t;if(g=b-h,a.offset>g){if(g=a.offset-g,g>a.whave&&a.sane){t.msg="invalid distance too far back",a.mode=fe;break}g>a.wnext?(g-=a.wnext,ce=a.wsize-g):ce=a.wnext-g,g>a.length&&(g=a.length),be=a.window}else be=r,ce=o-a.offset,g=a.length;g>h&&(g=h),h-=g,a.length-=g;do r[o++]=be[ce++];while(--g);0===a.length&&(a.mode=ae);break;case oe:if(0===h)break t;r[o++]=a.length,h--,a.mode=ae;break;case le:if(a.wrap){for(;32>u;){if(0===l)break t;l--,_|=n[s++]<<u,u+=8}if(b-=h,t.total_out+=b,a.total+=b,b&&(t.adler=a.check=a.flags?p(a.check,r,b,o-b):w(a.check,r,b,o-b)),b=h,(a.flags?_:i(_))!==a.check){t.msg="incorrect data check",a.mode=fe;break}_=0,u=0}a.mode=he;case he:if(a.wrap&&a.flags){for(;32>u;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}if(_!==(4294967295&a.total)){t.msg="incorrect length check",a.mode=fe;break}_=0,u=0}a.mode=de;case de:ye=Z;break t;case fe:ye=I;break t;case _e:return N;case ue:default:return C}return t.next_out=o,t.avail_out=h,t.next_in=s,t.avail_in=l,a.hold=_,a.bits=u,(a.wsize||b!==t.avail_out&&a.mode<fe&&(a.mode<le||e!==B))&&f(t,t.output,t.next_out,b-t.avail_out)?(a.mode=_e,N):(c-=t.avail_in,b-=t.avail_out,t.total_in+=c,t.total_out+=b,a.total+=b,a.wrap&&b&&(t.adler=a.check=a.flags?p(a.check,r,b,t.next_out-b):w(a.check,r,b,t.next_out-b)),t.data_type=a.bits+(a.last?64:0)+(a.mode===G?128:0)+(a.mode===ee||a.mode===J?256:0),(0===c&&0===b||e===B)&&ye===A&&(ye=O),ye)}function u(t){if(!t||!t.state)return C;var e=t.state;return e.window&&(e.window=null),t.state=null,A}function c(t,e){var a;return t&&t.state?(a=t.state,0===(2&a.wrap)?C:(a.head=e,e.done=!1,A)):C}var b,g,m=t("../utils/common"),w=t("./adler32"),p=t("./crc32"),v=t("./inffast"),k=t("./inftrees"),x=0,y=1,z=2,B=4,S=5,E=6,A=0,Z=1,R=2,C=-2,I=-3,N=-4,O=-5,T=8,D=1,F=2,L=3,U=4,H=5,j=6,M=7,K=8,P=9,q=10,Y=11,G=12,X=13,W=14,J=15,Q=16,V=17,$=18,te=19,ee=20,ae=21,ie=22,ne=23,re=24,se=25,oe=26,le=27,he=28,de=29,fe=30,_e=31,ue=32,ce=852,be=592,ge=15,me=ge,we=!0;a.inflateReset=s,a.inflateReset2=o,a.inflateResetKeep=r,a.inflateInit=h,a.inflateInit2=l,a.inflate=_,a.inflateEnd=u,a.inflateGetHeader=c,a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":4,"./adler32":6,"./crc32":8,"./inffast":11,"./inftrees":13}],13:[function(t,e){"use strict";var a=t("../utils/common"),i=15,n=852,r=592,s=0,o=1,l=2,h=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],d=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],f=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],_=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,u,c,b,g,m,w){var p,v,k,x,y,z,B,S,E,A=w.bits,Z=0,R=0,C=0,I=0,N=0,O=0,T=0,D=0,F=0,L=0,U=null,H=0,j=new a.Buf16(i+1),M=new a.Buf16(i+1),K=null,P=0;for(Z=0;i>=Z;Z++)j[Z]=0;for(R=0;c>R;R++)j[e[u+R]]++;for(N=A,I=i;I>=1&&0===j[I];I--);if(N>I&&(N=I),0===I)return b[g++]=20971520,b[g++]=20971520,w.bits=1,0;for(C=1;I>C&&0===j[C];C++);for(C>N&&(N=C),D=1,Z=1;i>=Z;Z++)if(D<<=1,D-=j[Z],0>D)return-1;if(D>0&&(t===s||1!==I))return-1;for(M[1]=0,Z=1;i>Z;Z++)M[Z+1]=M[Z]+j[Z];for(R=0;c>R;R++)0!==e[u+R]&&(m[M[e[u+R]]++]=R);if(t===s?(U=K=m,z=19):t===o?(U=h,H-=257,K=d,P-=257,z=256):(U=f,K=_,z=-1),L=0,R=0,Z=C,y=g,O=N,T=0,k=-1,F=1<<N,x=F-1,t===o&&F>n||t===l&&F>r)return 1;for(var q=0;;){q++,B=Z-T,m[R]<z?(S=0,E=m[R]):m[R]>z?(S=K[P+m[R]],E=U[H+m[R]]):(S=96,E=0),p=1<<Z-T,v=1<<O,C=v;do v-=p,b[y+(L>>T)+v]=B<<24|S<<16|E|0;while(0!==v);for(p=1<<Z-1;L&p;)p>>=1;if(0!==p?(L&=p-1,L+=p):L=0,R++,0===--j[Z]){if(Z===I)break;Z=e[u+m[R]]}if(Z>N&&(L&x)!==k){for(0===T&&(T=N),y+=C,O=Z-T,D=1<<O;I>O+T&&(D-=j[O+T],!(0>=D));)O++,D<<=1;if(F+=1<<O,t===o&&F>n||t===l&&F>r)return 1;k=L&x,b[k]=N<<24|O<<16|y-g|0}}return 0!==L&&(b[y+L]=Z-T<<24|64<<16|0),w.bits=N,0}},{"../utils/common":4}],14:[function(t,e){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],15:[function(t,e,a){"use strict";function i(t){for(var e=t.length;--e>=0;)t[e]=0}function n(t){return 256>t?se[t]:se[256+(t>>>7)]}function r(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function s(t,e,a){t.bi_valid>G-a?(t.bi_buf|=e<<t.bi_valid&65535,r(t,t.bi_buf),t.bi_buf=e>>G-t.bi_valid,t.bi_valid+=a-G):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=a)}function o(t,e,a){s(t,a[2*e],a[2*e+1])}function l(t,e){var a=0;do a|=1&t,t>>>=1,a<<=1;while(--e>0);return a>>>1}function h(t){16===t.bi_valid?(r(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}function d(t,e){var a,i,n,r,s,o,l=e.dyn_tree,h=e.max_code,d=e.stat_desc.static_tree,f=e.stat_desc.has_stree,_=e.stat_desc.extra_bits,u=e.stat_desc.extra_base,c=e.stat_desc.max_length,b=0;for(r=0;Y>=r;r++)t.bl_count[r]=0;for(l[2*t.heap[t.heap_max]+1]=0,a=t.heap_max+1;q>a;a++)i=t.heap[a],r=l[2*l[2*i+1]+1]+1,r>c&&(r=c,b++),l[2*i+1]=r,i>h||(t.bl_count[r]++,s=0,i>=u&&(s=_[i-u]),o=l[2*i],t.opt_len+=o*(r+s),f&&(t.static_len+=o*(d[2*i+1]+s)));if(0!==b){do{for(r=c-1;0===t.bl_count[r];)r--;t.bl_count[r]--,t.bl_count[r+1]+=2,t.bl_count[c]--,b-=2}while(b>0);for(r=c;0!==r;r--)for(i=t.bl_count[r];0!==i;)n=t.heap[--a],n>h||(l[2*n+1]!==r&&(t.opt_len+=(r-l[2*n+1])*l[2*n],l[2*n+1]=r),i--)}}function f(t,e,a){var i,n,r=new Array(Y+1),s=0;for(i=1;Y>=i;i++)r[i]=s=s+a[i-1]<<1;for(n=0;e>=n;n++){var o=t[2*n+1];0!==o&&(t[2*n]=l(r[o]++,o))}}function _(){var t,e,a,i,n,r=new Array(Y+1);for(a=0,i=0;H-1>i;i++)for(le[i]=a,t=0;t<1<<$[i];t++)oe[a++]=i;for(oe[a-1]=i,n=0,i=0;16>i;i++)for(he[i]=n,t=0;t<1<<te[i];t++)se[n++]=i;for(n>>=7;K>i;i++)for(he[i]=n<<7,t=0;t<1<<te[i]-7;t++)se[256+n++]=i;for(e=0;Y>=e;e++)r[e]=0;for(t=0;143>=t;)ne[2*t+1]=8,t++,r[8]++;for(;255>=t;)ne[2*t+1]=9,t++,r[9]++;for(;279>=t;)ne[2*t+1]=7,t++,r[7]++;for(;287>=t;)ne[2*t+1]=8,t++,r[8]++;for(f(ne,M+1,r),t=0;K>t;t++)re[2*t+1]=5,re[2*t]=l(t,5);de=new ue(ne,$,j+1,M,Y),fe=new ue(re,te,0,K,Y),_e=new ue(new Array(0),ee,0,P,X)}function u(t){var e;for(e=0;M>e;e++)t.dyn_ltree[2*e]=0;for(e=0;K>e;e++)t.dyn_dtree[2*e]=0;for(e=0;P>e;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*W]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function c(t){t.bi_valid>8?r(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function b(t,e,a,i){c(t),i&&(r(t,a),r(t,~a)),R.arraySet(t.pending_buf,t.window,e,a,t.pending),t.pending+=a}function g(t,e,a,i){var n=2*e,r=2*a;return t[n]<t[r]||t[n]===t[r]&&i[e]<=i[a]}function m(t,e,a){for(var i=t.heap[a],n=a<<1;n<=t.heap_len&&(n<t.heap_len&&g(e,t.heap[n+1],t.heap[n],t.depth)&&n++,!g(e,i,t.heap[n],t.depth));)t.heap[a]=t.heap[n],a=n,n<<=1;t.heap[a]=i}function w(t,e,a){var i,r,l,h,d=0;if(0!==t.last_lit)do i=t.pending_buf[t.d_buf+2*d]<<8|t.pending_buf[t.d_buf+2*d+1],r=t.pending_buf[t.l_buf+d],d++,0===i?o(t,r,e):(l=oe[r],o(t,l+j+1,e),h=$[l],0!==h&&(r-=le[l],s(t,r,h)),i--,l=n(i),o(t,l,a),h=te[l],0!==h&&(i-=he[l],s(t,i,h)));while(d<t.last_lit);o(t,W,e)}function p(t,e){var a,i,n,r=e.dyn_tree,s=e.stat_desc.static_tree,o=e.stat_desc.has_stree,l=e.stat_desc.elems,h=-1;for(t.heap_len=0,t.heap_max=q,a=0;l>a;a++)0!==r[2*a]?(t.heap[++t.heap_len]=h=a,t.depth[a]=0):r[2*a+1]=0;for(;t.heap_len<2;)n=t.heap[++t.heap_len]=2>h?++h:0,r[2*n]=1,t.depth[n]=0,t.opt_len--,o&&(t.static_len-=s[2*n+1]);for(e.max_code=h,a=t.heap_len>>1;a>=1;a--)m(t,r,a);n=l;do a=t.heap[1],t.heap[1]=t.heap[t.heap_len--],m(t,r,1),i=t.heap[1],t.heap[--t.heap_max]=a,t.heap[--t.heap_max]=i,r[2*n]=r[2*a]+r[2*i],t.depth[n]=(t.depth[a]>=t.depth[i]?t.depth[a]:t.depth[i])+1,r[2*a+1]=r[2*i+1]=n,t.heap[1]=n++,m(t,r,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],d(t,e),f(r,h,t.bl_count)}function v(t,e,a){var i,n,r=-1,s=e[1],o=0,l=7,h=4;for(0===s&&(l=138,h=3),e[2*(a+1)+1]=65535,i=0;a>=i;i++)n=s,s=e[2*(i+1)+1],++o<l&&n===s||(h>o?t.bl_tree[2*n]+=o:0!==n?(n!==r&&t.bl_tree[2*n]++,t.bl_tree[2*J]++):10>=o?t.bl_tree[2*Q]++:t.bl_tree[2*V]++,o=0,r=n,0===s?(l=138,h=3):n===s?(l=6,h=3):(l=7,h=4))}function k(t,e,a){var i,n,r=-1,l=e[1],h=0,d=7,f=4;for(0===l&&(d=138,f=3),i=0;a>=i;i++)if(n=l,l=e[2*(i+1)+1],!(++h<d&&n===l)){if(f>h){do o(t,n,t.bl_tree);while(0!==--h)}else 0!==n?(n!==r&&(o(t,n,t.bl_tree),h--),o(t,J,t.bl_tree),s(t,h-3,2)):10>=h?(o(t,Q,t.bl_tree),s(t,h-3,3)):(o(t,V,t.bl_tree),s(t,h-11,7));h=0,r=n,0===l?(d=138,f=3):n===l?(d=6,f=3):(d=7,f=4)}}function x(t){var e;for(v(t,t.dyn_ltree,t.l_desc.max_code),v(t,t.dyn_dtree,t.d_desc.max_code),p(t,t.bl_desc),e=P-1;e>=3&&0===t.bl_tree[2*ae[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}function y(t,e,a,i){var n;for(s(t,e-257,5),s(t,a-1,5),s(t,i-4,4),n=0;i>n;n++)s(t,t.bl_tree[2*ae[n]+1],3);k(t,t.dyn_ltree,e-1),k(t,t.dyn_dtree,a-1)}function z(t){var e,a=4093624447;for(e=0;31>=e;e++,a>>>=1)if(1&a&&0!==t.dyn_ltree[2*e])return I;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return N;for(e=32;j>e;e++)if(0!==t.dyn_ltree[2*e])return N;return I}function B(t){be||(_(),be=!0),t.l_desc=new ce(t.dyn_ltree,de),t.d_desc=new ce(t.dyn_dtree,fe),t.bl_desc=new ce(t.bl_tree,_e),t.bi_buf=0,t.bi_valid=0,u(t)}function S(t,e,a,i){s(t,(T<<1)+(i?1:0),3),b(t,e,a,!0)}function E(t){s(t,D<<1,3),o(t,W,ne),h(t)}function A(t,e,a,i){var n,r,o=0;t.level>0?(t.strm.data_type===O&&(t.strm.data_type=z(t)),p(t,t.l_desc),p(t,t.d_desc),o=x(t),n=t.opt_len+3+7>>>3,r=t.static_len+3+7>>>3,n>=r&&(n=r)):n=r=a+5,n>=a+4&&-1!==e?S(t,e,a,i):t.strategy===C||r===n?(s(t,(D<<1)+(i?1:0),3),w(t,ne,re)):(s(t,(F<<1)+(i?1:0),3),y(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),w(t,t.dyn_ltree,t.dyn_dtree)),u(t),i&&c(t)}function Z(t,e,a){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&a,t.last_lit++,0===e?t.dyn_ltree[2*a]++:(t.matches++,e--,t.dyn_ltree[2*(oe[a]+j+1)]++,t.dyn_dtree[2*n(e)]++),t.last_lit===t.lit_bufsize-1}var R=t("../utils/common"),C=4,I=0,N=1,O=2,T=0,D=1,F=2,L=3,U=258,H=29,j=256,M=j+1+H,K=30,P=19,q=2*M+1,Y=15,G=16,X=7,W=256,J=16,Q=17,V=18,$=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],te=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],ee=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ae=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ie=512,ne=new Array(2*(M+2));i(ne);var re=new Array(2*K);i(re);var se=new Array(ie);i(se);var oe=new Array(U-L+1);i(oe);var le=new Array(H);i(le);var he=new Array(K);i(he);var de,fe,_e,ue=function(t,e,a,i,n){this.static_tree=t,this.extra_bits=e,this.extra_base=a,this.elems=i,this.max_length=n,this.has_stree=t&&t.length},ce=function(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e},be=!1;a._tr_init=B,a._tr_stored_block=S,a._tr_flush_block=A,a._tr_tally=Z,a._tr_align=E},{"../utils/common":4}],16:[function(t,e){"use strict";function a(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}e.exports=a},{}]},{},[1])(1)});
// File:js/lib/promise-6.0.0.min.js

!function n(t,e,o){function i(u,f){if(!e[u]){if(!t[u]){var c="function"==typeof require&&require;if(!f&&c)return c(u,!0);if(r)return r(u,!0);var s=new Error("Cannot find module '"+u+"'");throw s.code="MODULE_NOT_FOUND",s}var a=e[u]={exports:{}};t[u][0].call(a.exports,function(n){var e=t[u][1][n];return i(e?e:n)},a,a.exports,n,t,e,o)}return e[u].exports}for(var r="function"==typeof require&&require,u=0;u<o.length;u++)i(o[u]);return i}({1:[function(n,t){function e(){}var o=t.exports={};o.nextTick=function(){var n="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(n)return function(n){return window.setImmediate(n)};if(t){var e=[];return window.addEventListener("message",function(n){var t=n.source;if((t===window||null===t)&&"process-tick"===n.data&&(n.stopPropagation(),e.length>0)){var o=e.shift();o()}},!0),function(n){e.push(n),window.postMessage("process-tick","*")}}return function(n){setTimeout(n,0)}}(),o.title="browser",o.browser=!0,o.env={},o.argv=[],o.on=e,o.addListener=e,o.once=e,o.off=e,o.removeListener=e,o.removeAllListeners=e,o.emit=e,o.binding=function(){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(){throw new Error("process.chdir is not supported")}},{}],2:[function(n,t){"use strict";function e(n){function t(n){return null===c?void a.push(n):void r(function(){var t=c?n.onFulfilled:n.onRejected;if(null===t)return void(c?n.resolve:n.reject)(s);var e;try{e=t(s)}catch(o){return void n.reject(o)}n.resolve(e)})}function e(n){try{if(n===l)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"==typeof n||"function"==typeof n)){var t=n.then;if("function"==typeof t)return void i(t.bind(n),e,u)}c=!0,s=n,f()}catch(o){u(o)}}function u(n){c=!1,s=n,f()}function f(){for(var n=0,e=a.length;e>n;n++)t(a[n]);a=null}if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof n)throw new TypeError("not a function");var c=null,s=null,a=[],l=this;this.then=function(n,e){return new l.constructor(function(i,r){t(new o(n,e,i,r))})},i(n,e,u)}function o(n,t,e,o){this.onFulfilled="function"==typeof n?n:null,this.onRejected="function"==typeof t?t:null,this.resolve=e,this.reject=o}function i(n,t,e){var o=!1;try{n(function(n){o||(o=!0,t(n))},function(n){o||(o=!0,e(n))})}catch(i){if(o)return;o=!0,e(i)}}var r=n("asap");t.exports=e},{asap:4}],3:[function(n,t){"use strict";function e(n){this.then=function(t){return"function"!=typeof t?this:new o(function(e,o){i(function(){try{e(t(n))}catch(i){o(i)}})})}}var o=n("./core.js"),i=n("asap");t.exports=o,e.prototype=o.prototype;var r=new e(!0),u=new e(!1),f=new e(null),c=new e(void 0),s=new e(0),a=new e("");o.resolve=function(n){if(n instanceof o)return n;if(null===n)return f;if(void 0===n)return c;if(n===!0)return r;if(n===!1)return u;if(0===n)return s;if(""===n)return a;if("object"==typeof n||"function"==typeof n)try{var t=n.then;if("function"==typeof t)return new o(t.bind(n))}catch(i){return new o(function(n,t){t(i)})}return new e(n)},o.all=function(n){var t=Array.prototype.slice.call(n);return new o(function(n,e){function o(r,u){try{if(u&&("object"==typeof u||"function"==typeof u)){var f=u.then;if("function"==typeof f)return void f.call(u,function(n){o(r,n)},e)}t[r]=u,0===--i&&n(t)}catch(c){e(c)}}if(0===t.length)return n([]);for(var i=t.length,r=0;r<t.length;r++)o(r,t[r])})},o.reject=function(n){return new o(function(t,e){e(n)})},o.race=function(n){return new o(function(t,e){n.forEach(function(n){o.resolve(n).then(t,e)})})},o.prototype["catch"]=function(n){return this.then(null,n)}},{"./core.js":2,asap:4}],4:[function(n,t){(function(n){function e(){for(;i.next;){i=i.next;var n=i.task;i.task=void 0;var t=i.domain;t&&(i.domain=void 0,t.enter());try{n()}catch(o){if(c)throw t&&t.exit(),setTimeout(e,0),t&&t.enter(),o;setTimeout(function(){throw o},0)}t&&t.exit()}u=!1}function o(t){r=r.next={task:t,domain:c&&n.domain,next:null},u||(u=!0,f())}var i={task:void 0,next:null},r=i,u=!1,f=void 0,c=!1;if("undefined"!=typeof n&&n.nextTick)c=!0,f=function(){n.nextTick(e)};else if("function"==typeof setImmediate)f="undefined"!=typeof window?setImmediate.bind(window,e):function(){setImmediate(e)};else if("undefined"!=typeof MessageChannel){var s=new MessageChannel;s.port1.onmessage=e,f=function(){s.port2.postMessage(0)}}else f=function(){setTimeout(e,0)};t.exports=o}).call(this,n("_process"))},{_process:1}],5:[function(){"function"!=typeof Promise.prototype.done&&(Promise.prototype.done=function(){var n=arguments.length?this.then.apply(this,arguments):this;n.then(null,function(n){setTimeout(function(){throw n},0)})})},{}],6:[function(n){n("asap");"undefined"==typeof Promise&&(Promise=n("./lib/core.js"),n("./lib/es6-extensions.js")),n("./polyfill-done.js")},{"./lib/core.js":2,"./lib/es6-extensions.js":3,"./polyfill-done.js":5,asap:4}]},{},[6]);
// File:js/lib/async.min.js

(function(){function w(a){var b=!1;return function(){if(b)throw Error("Callback was already called.");b=!0;a.apply(n,arguments)}}var d={},n,x;n=this;null!=n&&(x=n.async);d.noConflict=function(){n.async=x;return d};var B=Object.prototype.toString,p=Array.isArray||function(a){return"[object Array]"===B.call(a)},l=function(a,b){if(a.forEach)return a.forEach(b);for(var c=0;c<a.length;c+=1)b(a[c],c,a)},m=function(a,b){if(a.map)return a.map(b);var c=[];l(a,function(a,f,g){c.push(b(a,f,g))});return c},C=
function(a,b,c){if(a.reduce)return a.reduce(b,c);l(a,function(a,f,g){c=b(c,a,f,g)});return c},s=function(a){if(Object.keys)return Object.keys(a);var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(c);return b};"undefined"!==typeof process&&process.nextTick?(d.nextTick=process.nextTick,d.setImmediate="undefined"!==typeof setImmediate?function(a){setImmediate(a)}:d.nextTick):(d.nextTick="function"===typeof setImmediate?function(a){setImmediate(a)}:function(a){setTimeout(a,0)},d.setImmediate=d.nextTick);
d.each=function(a,b,c){function e(b){b?(c(b),c=function(){}):(f+=1,f>=a.length&&c())}c=c||function(){};if(!a.length)return c();var f=0;l(a,function(a){b(a,w(e))})};d.forEach=d.each;d.eachSeries=function(a,b,c){c=c||function(){};if(!a.length)return c();var e=0,f=function(){b(a[e],function(b){b?(c(b),c=function(){}):(e+=1,e>=a.length?c():f())})};f()};d.forEachSeries=d.eachSeries;d.eachLimit=function(a,b,c,e){u(b).apply(null,[a,c,e])};d.forEachLimit=d.eachLimit;var u=function(a){return function(b,c,
e){e=e||function(){};if(!b.length||0>=a)return e();var f=0,g=0,d=0;(function D(){if(f>=b.length)return e();for(;d<a&&g<b.length;)g+=1,d+=1,c(b[g-1],function(a){a?(e(a),e=function(){}):(f+=1,--d,f>=b.length?e():D())})})()}},q=function(a){return function(){var b=Array.prototype.slice.call(arguments);return a.apply(null,[d.each].concat(b))}},y=function(a,b){return function(){var c=Array.prototype.slice.call(arguments);return b.apply(null,[u(a)].concat(c))}},r=function(a){return function(){var b=Array.prototype.slice.call(arguments);
return a.apply(null,[d.eachSeries].concat(b))}},t=function(a,b,c,e){b=m(b,function(a,b){return{index:b,value:a}});if(e){var f=[];a(b,function(a,b){c(a.value,function(c,e){f[a.index]=e;b(c)})},function(a){e(a,f)})}else a(b,function(a,b){c(a.value,function(a){b(a)})})};d.map=q(t);d.mapSeries=r(t);d.mapLimit=function(a,b,c,e){return y(b,t)(a,c,e)};d.reduce=function(a,b,c,e){d.eachSeries(a,function(a,e){c(b,a,function(a,c){b=c;e(a)})},function(a){e(a,b)})};d.inject=d.reduce;d.foldl=d.reduce;d.reduceRight=
function(a,b,c,e){a=m(a,function(a){return a}).reverse();d.reduce(a,b,c,e)};d.foldr=d.reduceRight;var h=function(a,b,c,e){var f=[];b=m(b,function(a,b){return{index:b,value:a}});a(b,function(a,b){c(a.value,function(c){c&&f.push(a);b()})},function(a){e(m(f.sort(function(a,b){return a.index-b.index}),function(a){return a.value}))})};d.filter=q(h);d.filterSeries=r(h);d.select=d.filter;d.selectSeries=d.filterSeries;h=function(a,b,c,e){var f=[];b=m(b,function(a,b){return{index:b,value:a}});a(b,function(a,
b){c(a.value,function(c){c||f.push(a);b()})},function(a){e(m(f.sort(function(a,b){return a.index-b.index}),function(a){return a.value}))})};d.reject=q(h);d.rejectSeries=r(h);h=function(a,b,c,e){a(b,function(a,b){c(a,function(c){c?(e(a),e=function(){}):b()})},function(a){e()})};d.detect=q(h);d.detectSeries=r(h);d.some=function(a,b,c){d.each(a,function(a,f){b(a,function(a){a&&(c(!0),c=function(){});f()})},function(a){c(!1)})};d.any=d.some;d.every=function(a,b,c){d.each(a,function(a,f){b(a,function(a){a||
(c(!1),c=function(){});f()})},function(a){c(!0)})};d.all=d.every;d.sortBy=function(a,b,c){d.map(a,function(a,c){b(a,function(b,d){b?c(b):c(null,{value:a,criteria:d})})},function(a,b){if(a)return c(a);c(null,m(b.sort(function(a,b){var c=a.criteria,f=b.criteria;return c<f?-1:c>f?1:0}),function(a){return a.value}))})};d.auto=function(a,b){b=b||function(){};var c=s(a),e=c.length;if(!e)return b();var f={},g=[],k=function(a){g.unshift(a)},v=function(){e--;l(g.slice(0),function(a){a()})};k(function(){if(!e){var a=
b;b=function(){};a(null,f)}});l(c,function(c){var e=p(a[c])?a[c]:[a[c]],z=function(a){var e=Array.prototype.slice.call(arguments,1);1>=e.length&&(e=e[0]);if(a){var g={};l(s(f),function(a){g[a]=f[a]});g[c]=e;b(a,g);b=function(){}}else f[c]=e,d.setImmediate(v)},h=e.slice(0,Math.abs(e.length-1))||[],m=function(){return C(h,function(a,b){return a&&f.hasOwnProperty(b)},!0)&&!f.hasOwnProperty(c)};if(m())e[e.length-1](z,f);else{var n=function(){if(m()){a:for(var a=n,b=0;b<g.length;b+=1)if(g[b]===a){g.splice(b,
1);break a}e[e.length-1](z,f)}};k(n)}})};d.retry=function(a,b,c){var e=[];"function"===typeof a&&(c=b,b=a,a=5);a=parseInt(a,10)||5;var f=function(f,k){for(var v=function(a,b){return function(c){a(function(a,e){c(!a||b,{err:a,result:e})},k)}};a;)e.push(v(b,!--a));d.series(e,function(a,b){b=b[b.length-1];(f||c)(b.err,b.result)})};return c?f():f};d.waterfall=function(a,b){b=b||function(){};if(!p(a))return b(Error("First argument to waterfall must be an array of functions"));if(!a.length)return b();var c=
function(a){return function(f){if(f)b.apply(null,arguments),b=function(){};else{var g=Array.prototype.slice.call(arguments,1),k=a.next();k?g.push(c(k)):g.push(b);d.setImmediate(function(){a.apply(null,g)})}}};c(d.iterator(a))()};var A=function(a,b,c){c=c||function(){};if(p(b))a.map(b,function(a,b){a&&a(function(a){var c=Array.prototype.slice.call(arguments,1);1>=c.length&&(c=c[0]);b.call(null,a,c)})},c);else{var e={};a.each(s(b),function(a,c){b[a](function(b){var d=Array.prototype.slice.call(arguments,
1);1>=d.length&&(d=d[0]);e[a]=d;c(b)})},function(a){c(a,e)})}};d.parallel=function(a,b){A({map:d.map,each:d.each},a,b)};d.parallelLimit=function(a,b,c){A({map:y(b,t),each:u(b)},a,c)};d.series=function(a,b){b=b||function(){};if(p(a))d.mapSeries(a,function(a,b){a&&a(function(a){var c=Array.prototype.slice.call(arguments,1);1>=c.length&&(c=c[0]);b.call(null,a,c)})},b);else{var c={};d.eachSeries(s(a),function(b,d){a[b](function(a){var k=Array.prototype.slice.call(arguments,1);1>=k.length&&(k=k[0]);c[b]=
k;d(a)})},function(a){b(a,c)})}};d.iterator=function(a){var b=function(c){var e=function(){a.length&&a[c].apply(null,arguments);return e.next()};e.next=function(){return c<a.length-1?b(c+1):null};return e};return b(0)};d.apply=function(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b.concat(Array.prototype.slice.call(arguments)))}};h=function(a,b,c,e){var d=[];a(b,function(a,b){c(a,function(a,c){d=d.concat(c||[]);b(a)})},function(a){e(a,d)})};d.concat=q(h);
d.concatSeries=r(h);d.whilst=function(a,b,c){a()?b(function(e){if(e)return c(e);d.whilst(a,b,c)}):c()};d.doWhilst=function(a,b,c){a(function(e){if(e)return c(e);var f=Array.prototype.slice.call(arguments,1);b.apply(null,f)?d.doWhilst(a,b,c):c()})};d.until=function(a,b,c){a()?c():b(function(e){if(e)return c(e);d.until(a,b,c)})};d.doUntil=function(a,b,c){a(function(e){if(e)return c(e);var f=Array.prototype.slice.call(arguments,1);b.apply(null,f)?c():d.doUntil(a,b,c)})};d.queue=function(a,b){function c(a,
b,c,e){a.started||(a.started=!0);p(b)||(b=[b]);if(0==b.length)return d.setImmediate(function(){a.drain&&a.drain()});l(b,function(b){b={data:b,callback:"function"===typeof e?e:null};c?a.tasks.unshift(b):a.tasks.push(b);a.saturated&&a.tasks.length===a.concurrency&&a.saturated();d.setImmediate(a.process)})}void 0===b&&(b=1);var e=0,f={tasks:[],concurrency:b,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(a,b){c(f,a,!1,b)},kill:function(){f.drain=null;f.tasks=[]},unshift:function(a,
b){c(f,a,!0,b)},process:function(){if(!f.paused&&e<f.concurrency&&f.tasks.length){var b=f.tasks.shift();f.empty&&0===f.tasks.length&&f.empty();e+=1;var c=w(function(){--e;b.callback&&b.callback.apply(b,arguments);f.drain&&0===f.tasks.length+e&&f.drain();f.process()});a(b.data,c)}},length:function(){return f.tasks.length},running:function(){return e},idle:function(){return 0===f.tasks.length+e},pause:function(){!0!==f.paused&&(f.paused=!0)},resume:function(){if(!1!==f.paused){f.paused=!1;for(var a=
1;a<=f.concurrency;a++)d.setImmediate(f.process)}}};return f};d.priorityQueue=function(a,b){function c(a,b){return a.priority-b.priority}function e(a,b,c){for(var d=-1,e=a.length-1;d<e;){var f=d+(e-d+1>>>1);0<=c(b,a[f])?d=f:e=f-1}return d}function f(a,b,f,g){a.started||(a.started=!0);p(b)||(b=[b]);if(0==b.length)return d.setImmediate(function(){a.drain&&a.drain()});l(b,function(b){b={data:b,priority:f,callback:"function"===typeof g?g:null};a.tasks.splice(e(a.tasks,b,c)+1,0,b);a.saturated&&a.tasks.length===
a.concurrency&&a.saturated();d.setImmediate(a.process)})}var g=d.queue(a,b);g.push=function(a,b,c){f(g,a,b,c)};delete g.unshift;return g};d.cargo=function(a,b){var c=!1,e=[],f={tasks:e,payload:b,saturated:null,empty:null,drain:null,drained:!0,push:function(a,c){p(a)||(a=[a]);l(a,function(a){e.push({data:a,callback:"function"===typeof c?c:null});f.drained=!1;f.saturated&&e.length===b&&f.saturated()});d.setImmediate(f.process)},process:function k(){if(!c)if(0===e.length)f.drain&&!f.drained&&f.drain(),
f.drained=!0;else{var d="number"===typeof b?e.splice(0,b):e.splice(0,e.length),h=m(d,function(a){return a.data});f.empty&&f.empty();c=!0;a(h,function(){c=!1;var a=arguments;l(d,function(b){b.callback&&b.callback.apply(null,a)});k()})}},length:function(){return e.length},running:function(){return c}};return f};h=function(a){return function(b){var c=Array.prototype.slice.call(arguments,1);b.apply(null,c.concat([function(b){var c=Array.prototype.slice.call(arguments,1);"undefined"!==typeof console&&
(b?console.error&&console.error(b):console[a]&&l(c,function(b){console[a](b)}))}]))}};d.log=h("log");d.dir=h("dir");d.memoize=function(a,b){var c={},e={};b=b||function(a){return a};var f=function(){var f=Array.prototype.slice.call(arguments),k=f.pop(),h=b.apply(null,f);h in c?d.nextTick(function(){k.apply(null,c[h])}):h in e?e[h].push(k):(e[h]=[k],a.apply(null,f.concat([function(){c[h]=arguments;var a=e[h];delete e[h];for(var b=0,d=a.length;b<d;b++)a[b].apply(null,arguments)}])))};f.memo=c;f.unmemoized=
a;return f};d.unmemoize=function(a){return function(){return(a.unmemoized||a).apply(null,arguments)}};d.times=function(a,b,c){for(var e=[],f=0;f<a;f++)e.push(f);return d.map(e,b,c)};d.timesSeries=function(a,b,c){for(var e=[],f=0;f<a;f++)e.push(f);return d.mapSeries(e,b,c)};d.seq=function(){var a=arguments;return function(){var b=this,c=Array.prototype.slice.call(arguments),e=c.pop();d.reduce(a,c,function(a,c,d){c.apply(b,a.concat([function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,
1);d(a,b)}]))},function(a,c){e.apply(b,[a].concat(c))})}};d.compose=function(){return d.seq.apply(null,Array.prototype.reverse.call(arguments))};h=function(a,b){var c=function(){var c=this,d=Array.prototype.slice.call(arguments),e=d.pop();return a(b,function(a,b){a.apply(c,d.concat([b]))},e)};if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return c.apply(this,d)}return c};d.applyEach=q(h);d.applyEachSeries=r(h);d.forever=function(a,b){function c(d){if(d){if(b)return b(d);throw d;
}a(c)}c()};"undefined"!==typeof module&&module.exports?module.exports=d:"undefined"!==typeof define&&define.amd?define([],function(){return d}):n.async=d})();

// File:js/lib/signals.min.js

/*

 JS Signals <http://millermedeiros.github.com/js-signals/>
 Released under the MIT license
 Author: Miller Medeiros
 Version: 0.7.4 - Build: 252 (2012/02/24 10:30 PM)
*/
(function(h){function g(a,b,c,d,e){this._listener=b;this._isOnce=c;this.context=d;this._signal=a;this._priority=e||0}function f(a,b){if(typeof a!=="function")throw Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",b));}var e={VERSION:"0.7.4"};g.prototype={active:!0,params:null,execute:function(a){var b;this.active&&this._listener&&(a=this.params?this.params.concat(a):a,b=this._listener.apply(this.context,a),this._isOnce&&this.detach());return b},detach:function(){return this.isBound()?
this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},getListener:function(){return this._listener},_destroy:function(){delete this._signal;delete this._listener;delete this.context},isOnce:function(){return this._isOnce},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}};e.Signal=function(){this._bindings=[];this._prevParams=null};e.Signal.prototype={memorize:!1,_shouldPropagate:!0,
active:!0,_registerListener:function(a,b,c,d){var e=this._indexOfListener(a,c);if(e!==-1){if(a=this._bindings[e],a.isOnce()!==b)throw Error("You cannot add"+(b?"":"Once")+"() then add"+(!b?"":"Once")+"() the same listener without removing the relationship first.");}else a=new g(this,a,b,c,d),this._addBinding(a);this.memorize&&this._prevParams&&a.execute(this._prevParams);return a},_addBinding:function(a){var b=this._bindings.length;do--b;while(this._bindings[b]&&a._priority<=this._bindings[b]._priority);
this._bindings.splice(b+1,0,a)},_indexOfListener:function(a,b){for(var c=this._bindings.length,d;c--;)if(d=this._bindings[c],d._listener===a&&d.context===b)return c;return-1},has:function(a,b){return this._indexOfListener(a,b)!==-1},add:function(a,b,c){f(a,"add");return this._registerListener(a,!1,b,c)},addOnce:function(a,b,c){f(a,"addOnce");return this._registerListener(a,!0,b,c)},remove:function(a,b){f(a,"remove");var c=this._indexOfListener(a,b);c!==-1&&(this._bindings[c]._destroy(),this._bindings.splice(c,
1));return a},removeAll:function(){for(var a=this._bindings.length;a--;)this._bindings[a]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(a){if(this.active){var b=Array.prototype.slice.call(arguments),c=this._bindings.length,d;if(this.memorize)this._prevParams=b;if(c){d=this._bindings.slice();this._shouldPropagate=!0;do c--;while(d[c]&&this._shouldPropagate&&d[c].execute(b)!==!1)}}},forget:function(){this._prevParams=
null},dispose:function(){this.removeAll();delete this._bindings;delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};typeof define==="function"&&define.amd?define(e):typeof module!=="undefined"&&module.exports?module.exports=e:h.signals=e})(this);
// File:js/lib/sprintf.min.js

/*! sprintf-js | Alexandru Marasteanu <hello@alexei.ro> (http://alexei.ro/) | BSD-3-Clause */

!function(a){function b(){var a=arguments[0],c=b.cache;return c[a]&&c.hasOwnProperty(a)||(c[a]=b.parse(a)),b.format.call(null,c[a],arguments)}function c(a){return Object.prototype.toString.call(a).slice(8,-1).toLowerCase()}function d(a,b){return Array(b+1).join(a)}var e={not_string:/[^s]/,number:/[dief]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fiosuxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};b.format=function(a,f){var g,h,i,j,k,l,m,n=1,o=a.length,p="",q=[],r=!0,s="";for(h=0;o>h;h++)if(p=c(a[h]),"string"===p)q[q.length]=a[h];else if("array"===p){if(j=a[h],j[2])for(g=f[n],i=0;i<j[2].length;i++){if(!g.hasOwnProperty(j[2][i]))throw new Error(b("[sprintf] property '%s' does not exist",j[2][i]));g=g[j[2][i]]}else g=j[1]?f[j[1]]:f[n++];if("function"==c(g)&&(g=g()),e.not_string.test(j[8])&&"number"!=c(g)&&isNaN(g))throw new TypeError(b("[sprintf] expecting number but found %s",c(g)));switch(e.number.test(j[8])&&(r=g>=0),j[8]){case"b":g=g.toString(2);break;case"c":g=String.fromCharCode(g);break;case"d":case"i":g=parseInt(g,10);break;case"e":g=j[7]?g.toExponential(j[7]):g.toExponential();break;case"f":g=j[7]?parseFloat(g).toFixed(j[7]):parseFloat(g);break;case"o":g=g.toString(8);break;case"s":g=(g=String(g))&&j[7]?g.substring(0,j[7]):g;break;case"u":g>>>=0;break;case"x":g=g.toString(16);break;case"X":g=g.toString(16).toUpperCase()}!e.number.test(j[8])||r&&!j[3]?s="":(s=r?"+":"-",g=g.toString().replace(e.sign,"")),l=j[4]?"0"===j[4]?"0":j[4].charAt(1):" ",m=j[6]-(s+g).length,k=j[6]&&m>0?d(l,m):"",q[q.length]=j[5]?s+g+k:"0"===l?s+k+g:k+s+g}return q.join("")},b.cache={},b.parse=function(a){for(var b=a,c=[],d=[],f=0;b;){if(null!==(c=e.text.exec(b)))d[d.length]=c[0];else if(null!==(c=e.modulo.exec(b)))d[d.length]="%";else{if(null===(c=e.placeholder.exec(b)))throw new SyntaxError("[sprintf] unexpected placeholder");if(c[2]){f|=1;var g=[],h=c[2],i=[];if(null===(i=e.key.exec(h)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(g[g.length]=i[1];""!==(h=h.substring(i[0].length));)if(null!==(i=e.key_access.exec(h)))g[g.length]=i[1];else{if(null===(i=e.index_access.exec(h)))throw new SyntaxError("[sprintf] failed to parse named argument key");g[g.length]=i[1]}c[2]=g}else f|=2;if(3===f)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");d[d.length]=c}b=b.substring(c[0].length)}return d};var f=function(a,c,d){return d=(c||[]).slice(0),d.splice(0,0,a),b.apply(null,d)};"undefined"!=typeof exports?(exports.sprintf=b,exports.vsprintf=f):(a.sprintf=b,a.vsprintf=f,"function"==typeof define&&define.amd&&define(function(){return{sprintf:b,vsprintf:f}}))}("undefined"==typeof window?this:window);
// File:js/lib/svd.min.js

var jsfeat=jsfeat||{REVISION:"ALPHA"};
(function(f){var E=new Int32Array([-1,1,4,-1,4,-1,-1,-1,8,-1,-1,-1,-1,-1,-1,-1,8]),d=function(){return function(a){return a&65280}}(),g=function(){return function(a){return a&255}}(),a=function(){return function(a){return E[(a&65280)>>8]}}(),b=function(){return function(a,b){this.size=(a+7|0)&-8;"undefined"===typeof b?this.buffer=new ArrayBuffer(this.size):(this.buffer=b,this.size=b.length);this.u8=new Uint8Array(this.buffer);this.i32=new Int32Array(this.buffer);this.f32=new Float32Array(this.buffer);
this.f64=new Float64Array(this.buffer)}}(),h=function(){function h(a,b,c,m){this.type=d(c)|0;this.channel=g(c)|0;this.cols=a|0;this.rows=b|0;"undefined"===typeof m?this.allocate():(this.buffer=m,this.data=this.type&256?this.buffer.u8:this.type&512?this.buffer.i32:this.type&1024?this.buffer.f32:this.buffer.f64)}h.prototype.allocate=function(){delete this.data;delete this.buffer;this.buffer=new b(this.cols*a(this.type)*this.channel*this.rows);this.data=this.type&256?this.buffer.u8:this.type&512?this.buffer.i32:
this.type&1024?this.buffer.f32:this.buffer.f64};h.prototype.copy_to=function(a){a=a.data;for(var b=this.data,c=0,d=this.cols*this.rows*this.channel|0;c<d-4;c+=4)a[c]=b[c],a[c+1]=b[c+1],a[c+2]=b[c+2],a[c+3]=b[c+3];for(;c<d;++c)a[c]=b[c]};h.prototype.resize=function(a,b,c){"undefined"===typeof c&&(c=this.channel);a*c*b>this.rows*this.cols*this.channel?(this.cols=a,this.rows=b,this.channel=c,this.allocate()):(this.cols=a,this.rows=b,this.channel=c)};return h}();f.U8_t=256;f.S32_t=512;f.F32_t=1024;f.S64_t=
2048;f.F64_t=4096;f.C1_t=1;f.C2_t=2;f.C3_t=3;f.C4_t=4;f.U8C1_t=257;f.U8C3_t=259;f.U8C4_t=260;f.F32C1_t=1025;f.F32C2_t=1026;f.S32C1_t=513;f.S32C2_t=514;f.EPSILON=1.192092896E-7;f.FLT_MIN=1E-37;f.BOX_BLUR_NOSCALE=1;f.SVD_U_T=1;f.SVD_V_T=2;f.get_data_type=d;f.get_channel=g;f.get_data_type_size=a;f.data_t=b;f.matrix_t=h})(jsfeat);
(function(f){var E=function(){return{transpose:function(d,g){for(var a=0,b=0,h=g.rows,m=g.cols,k=0,p=0,c=0,f=g.data,y=d.data;a<h;p+=1,k+=m,a++)for(c=p,b=0;b<m;c+=h,b++)y[c]=f[k+b]},multiply:function(d,g,a){var b=0,h=0,m=0,k=0,p=0,c=0,f=0,y=0,q=g.cols,r=g.rows,t=a.cols;g=g.data;a=a.data;d=d.data;for(var z=0;b<r;k+=q,b++)for(h=f=0;h<t;y++,f++,h++){c=f;p=k;for(m=z=0;m<q;p++,c+=t,m++)z+=g[p]*a[c];d[y]=z}},multiply_ABt:function(d,g,a){var b=0,h=0,m=0,k=0,p=0,c=0,f=0,y=g.cols,q=g.rows,r=a.rows;g=g.data;
a=a.data;d=d.data;for(var t=0;b<q;k+=y,b++)for(h=c=0;h<r;f++,h++){p=k;for(m=t=0;m<y;p++,c++,m++)t+=g[p]*a[c];d[f]=t}},multiply_AtB:function(d,g,a){var b=0,h=0,m=0,k=0,p=0,c=0,f=0,y=0,q=g.cols,r=g.rows,t=a.cols;g=g.data;a=a.data;d=d.data;for(var z=0;b<q;k++,b++)for(h=f=0;h<t;y++,f++,h++){c=f;p=k;for(m=z=0;m<r;p+=q,c+=t,m++)z+=g[p]*a[c];d[y]=z}},invert_3x3:function(d,g){var a=d.data,b=g.data,h=a[4],m=a[8],k=a[5],f=a[7],c=a[0],J=c*h,y=c*k,q=a[3],r=a[1],t=q*r,z=a[2],N=q*z,a=a[6],O=a*r,F=a*z,D=1/(J*m-
y*f-t*m+N*f+O*k-F*h);b[0]=(h*m-k*f)*D;b[1]=-(r*m-z*f)*D;b[2]=-(-r*k+z*h)*D;b[3]=-(q*m-k*a)*D;b[4]=(c*m-F)*D;b[5]=-(y-N)*D;b[6]=-(-q*f+h*a)*D;b[7]=-(c*f-O)*D;b[8]=(J-t)*D},mat3x3_determinant:function(d){d=d.data;return d[0]*d[4]*d[8]-d[0]*d[5]*d[7]-d[3]*d[1]*d[8]+d[3]*d[2]*d[7]+d[6]*d[1]*d[5]-d[6]*d[2]*d[4]},multiply_3x3:function(d,g,a){d=d.data;var b=g.data,h=a.data;a=b[0];g=b[1];var m=b[2],k=b[3],f=b[4],c=b[5],J=b[6],y=b[7],b=b[8],q=h[0],r=h[1],t=h[2],z=h[3],N=h[4],O=h[5],F=h[6],D=h[7],h=h[8];d[0]=
a*q+g*z+m*F;d[1]=a*r+g*N+m*D;d[2]=a*t+g*O+m*h;d[3]=k*q+f*z+c*F;d[4]=k*r+f*N+c*D;d[5]=k*t+f*O+c*h;d[6]=J*q+y*z+b*F;d[7]=J*r+y*N+b*D;d[8]=J*t+y*O+b*h},mean_rows:function(d){var g,a=0,b=d.rows,h=d.cols,m=d.data,f=Array(h);for(g=0;g<h;++g)f[g]=0;for(d=0;d<b;++d)for(g=0;g<h;++g,++a)f[g]+=m[a];for(g=0;g<h;++g)f[g]/=b;return f},mean_cols:function(d){var g,a=0,b=d.rows,h=d.cols,f=d.data,k=Array(b);for(g=0;g<b;++g)k[g]=0;for(d=0;d<h;++d)for(g=0;g<b;++g,++a)k[g]+=f[a];for(g=0;g<b;++g)k[g]/=h;return k},sub_rows:function(d,
g){var a,b,h=0,f=d.rows,k=d.cols,p=d.data;for(a=0;a<f;++a)for(b=0;b<k;++b,++h)p[h]-=g[b]},sub_cols:function(d,g){var a,b,h=0,f=d.rows,k=d.cols,p=d.data;for(a=0;a<k;++a)for(b=0;b<f;++b,++h)p[h]-=g[b]},add_rows:function(d,g){var a,b,h=0,f=d.rows,k=d.cols,p=d.data;for(a=0;a<f;++a)for(b=0;b<k;++b,++h)p[h]+=g[b]},add_cols:function(d,g){var a,b,h=0,f=d.rows,k=d.cols,p=d.data;for(a=0;a<k;++a)for(b=0;b<f;++b,++h)p[h]+=g[b]}}}();f.matmath=E})(jsfeat);
(function(f){var E=function(){var d=function(){function a(b){this.next=null;this.data=new jsfeat.data_t(b);this.size=this.data.size;this.buffer=this.data.buffer;this.u8=this.data.u8;this.i32=this.data.i32;this.f32=this.data.f32;this.f64=this.data.f64}a.prototype.resize=function(a){delete this.data;this.data=new jsfeat.data_t(a);this.size=this.data.size;this.buffer=this.data.buffer;this.u8=this.data.u8;this.i32=this.data.i32;this.f32=this.data.f32;this.f64=this.data.f64};return a}(),g,a,b=0;return{allocate:function(h,
f){g=a=new d(f);for(var k=0;k<h;++k){var p=new d(f);a=a.next=p;b++}},get_buffer:function(a){var d=g;g=g.next;b--;a>d.size&&d.resize(a);return d},put_buffer:function(d){a=a.next=d;b++}}}();f.cache=E;E.allocate(30,2560)})(jsfeat);
(function(f){var E=function(){var d=function(a,b,d,g){g=a[b];a[b]=a[d];a[d]=g},g=function(a,b){a=Math.abs(a);b=Math.abs(b);return a>b?(b/=a,a*Math.sqrt(1+b*b)):0<b?(a/=b,b*Math.sqrt(1+a*a)):0};return{svd_decompose:function(a,b,f,m,k){"undefined"===typeof k&&(k=0);var p=0,c=0,J=a.rows,y=a.cols,q=J,r=y,t=a.type|jsfeat.C1_t;q<r&&(p=1,c=q,q=r,r=c);var z=jsfeat.cache.get_buffer(q*q<<3),N=jsfeat.cache.get_buffer(r<<3),O=jsfeat.cache.get_buffer(r*r<<3),F=new jsfeat.matrix_t(q,q,t,z.data),D=new jsfeat.matrix_t(1,
r,t,N.data),t=new jsfeat.matrix_t(r,r,t,O.data);if(0==p)jsfeat.matmath.transpose(F,a);else{for(c=0;c<y*J;c++)F.data[c]=a.data[c];for(;c<r*q;c++)F.data[c]=0}a=F.data;for(var c=q,J=D.data,u=t.data,E=r,H=q,I=r,T=q,U=2*jsfeat.EPSILON,V=jsfeat.FLT_MIN,l=0,x=0,e=0,P=0,W=Math.max(H,30),n=0,v=0,Q=v=n=0,w=0,C=0,G=0,s=0,B=0,A=0,K=w=e=w=0,L=s=0,R=4660,n=n=x=0,S=jsfeat.cache.get_buffer(I<<3),M=S.f64;l<I;l++){for(A=e=0;e<H;e++)G=a[l*c+e],A+=G*G;M[l]=A;if(u){for(e=0;e<I;e++)u[l*E+e]=0;u[l*E+l]=1}}for(;P<W;P++){for(l=
Q=0;l<I-1;l++)for(x=l+1;x<I;x++){n=l*c|0;v=x*c|0;K=M[l];s=0;L=M[x];e=2;s+=a[n]*a[v];for(s+=a[n+1]*a[v+1];e<H;e++)s+=a[n+e]*a[v+e];if(!(Math.abs(s)<=U*Math.sqrt(K*L))){s*=2;w=K-L;e=g(s,w);0>w?(w=.5*(e-w),C=Math.sqrt(w/e),w=s/(e*C*2)):(w=Math.sqrt((e+w)/(2*e)),C=s/(e*w*2));L=K=0;e=2;s=w*a[n]+C*a[v];B=-C*a[n]+w*a[v];a[n]=s;a[v]=B;K+=s*s;L+=B*B;s=w*a[n+1]+C*a[v+1];B=-C*a[n+1]+w*a[v+1];a[n+1]=s;a[v+1]=B;K+=s*s;for(L+=B*B;e<H;e++)s=w*a[n+e]+C*a[v+e],B=-C*a[n+e]+w*a[v+e],a[n+e]=s,a[v+e]=B,K+=s*s,L+=B*B;
M[l]=K;M[x]=L;Q=1;if(u)for(n=l*E|0,v=x*E|0,e=2,s=w*u[n]+C*u[v],B=-C*u[n]+w*u[v],u[n]=s,u[v]=B,s=w*u[n+1]+C*u[v+1],B=-C*u[n+1]+w*u[v+1],u[n+1]=s,u[v+1]=B;e<I;e++)s=w*u[n+e]+C*u[v+e],B=-C*u[n+e]+w*u[v+e],u[n+e]=s,u[v+e]=B}}if(0==Q)break}for(l=0;l<I;l++){for(A=e=0;e<H;e++)G=a[l*c+e],A+=G*G;M[l]=Math.sqrt(A)}for(l=0;l<I-1;l++){x=l;for(e=l+1;e<I;e++)M[x]<M[e]&&(x=e);if(l!=x&&(d(M,l,x,A),u)){for(e=0;e<H;e++)d(a,l*c+e,x*c+e,G);for(e=0;e<I;e++)d(u,l*E+e,x*E+e,G)}}for(l=0;l<I;l++)J[l]=M[l];if(u)for(l=0;l<
T;l++){for(A=l<I?M[l]:0;A<=V;){n=1/H;for(e=0;e<H;e++)R=214013*R+2531011,x=0!=(R>>16&256)?n:-n,a[l*c+e]=x;for(P=0;2>P;P++)for(x=0;x<l;x++){for(e=A=0;e<H;e++)A+=a[l*c+e]*a[x*c+e];for(e=n=0;e<H;e++)G=a[l*c+e]-A*a[x*c+e],a[l*c+e]=G,n+=Math.abs(G);n=n?1/n:0;for(e=0;e<H;e++)a[l*c+e]*=n}for(e=A=0;e<H;e++)G=a[l*c+e],A+=G*G;A=Math.sqrt(A)}C=1/A;for(e=0;e<H;e++)a[l*c+e]*=C}jsfeat.cache.put_buffer(S);if(b){for(c=0;c<r;c++)b.data[c]=D.data[c];for(;c<y;c++)b.data[c]=0}if(0==p){if(f&&k&jsfeat.SVD_U_T)for(c=q*q;0<=
--c;)f.data[c]=F.data[c];else f&&jsfeat.matmath.transpose(f,F);if(m&&k&jsfeat.SVD_V_T)for(c=r*r;0<=--c;)m.data[c]=t.data[c];else m&&jsfeat.matmath.transpose(m,t)}else{if(f&&k&jsfeat.SVD_U_T)for(c=r*r;0<=--c;)f.data[c]=t.data[c];else f&&jsfeat.matmath.transpose(f,t);if(m&&k&jsfeat.SVD_V_T)for(c=q*q;0<=--c;)m.data[c]=F.data[c];else m&&jsfeat.matmath.transpose(m,F)}jsfeat.cache.put_buffer(z);jsfeat.cache.put_buffer(N);jsfeat.cache.put_buffer(O)}}}();f.linalg=E})(jsfeat);


// File:js/build/three.custom.min.js

// https://github.com/arose/ngl/ LICENSE
/*
 MIT License <http://www.opensource.org/licenses/mit-license.php>

 Complexity: http://bigocheatsheet.com/ see Quicksort

 Example:
 points: [x, y, z, x, y, z, x, y, z, ...]
 eleSize: 3 //because of (x, y, z)
 orderElement: 0 //order according to x
 MIT License <http://www.opensource.org/licenses/mit-license.php>

 Requires typed array quicksort

 Example:
 points: [x, y, z, x, y, z, x, y, z, ...]
 metric: function(a, b){	return Math.pow(a[0] - b[0], 2) +  Math.pow(a[1] - b[1], 2) +  Math.pow(a[2] - b[2], 2); }  //Manhatten distance
 eleSize: 3 //because of (x, y, z)

 Further information (including mathematical properties)
 http://en.wikipedia.org/wiki/Binary_tree
 http://en.wikipedia.org/wiki/K-d_tree

 If you want to further minimize memory usage, remove Node.depth and replace in search algorithm with a traversal to root node (see comments at THREE.TypedArrayUtils.Kdtree.prototype.Node)
*/
var THREE={REVISION:"72dev"};"function"===typeof define&&define.amd?define("three",THREE):"undefined"!==typeof exports&&"undefined"!==typeof module&&(module.exports=THREE);
(function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!self.requestAnimationFrame;++c)self.requestAnimationFrame=self[b[c]+"RequestAnimationFrame"],self.cancelAnimationFrame=self[b[c]+"CancelAnimationFrame"]||self[b[c]+"CancelRequestAnimationFrame"];void 0===self.requestAnimationFrame&&void 0!==self.setTimeout&&(self.requestAnimationFrame=function(b){var c=Date.now(),g=Math.max(0,16-(c-a)),f=self.setTimeout(function(){b(c+g)},g);a=c+g;return f});void 0===self.cancelAnimationFrame&&void 0!==
self.clearTimeout&&(self.cancelAnimationFrame=function(a){self.clearTimeout(a)})})();void 0===Math.sign&&(Math.sign=function(a){return 0>a?-1:0<a?1:+a});void 0===Function.prototype.name&&void 0!==Object.defineProperty&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*(\S*)\s*\(/)[1]}});THREE.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2};THREE.CullFaceNone=0;THREE.CullFaceBack=1;THREE.CullFaceFront=2;THREE.CullFaceFrontBack=3;
THREE.FrontFaceDirectionCW=0;THREE.FrontFaceDirectionCCW=1;THREE.BasicShadowMap=0;THREE.PCFShadowMap=1;THREE.PCFSoftShadowMap=2;THREE.FrontSide=0;THREE.BackSide=1;THREE.DoubleSide=2;THREE.NoShading=0;THREE.FlatShading=1;THREE.SmoothShading=2;THREE.NoColors=0;THREE.FaceColors=1;THREE.VertexColors=2;THREE.NoBlending=0;THREE.NormalBlending=1;THREE.AdditiveBlending=2;THREE.SubtractiveBlending=3;THREE.MultiplyBlending=4;THREE.CustomBlending=5;THREE.AddEquation=100;THREE.SubtractEquation=101;
THREE.ReverseSubtractEquation=102;THREE.MinEquation=103;THREE.MaxEquation=104;THREE.ZeroFactor=200;THREE.OneFactor=201;THREE.SrcColorFactor=202;THREE.OneMinusSrcColorFactor=203;THREE.SrcAlphaFactor=204;THREE.OneMinusSrcAlphaFactor=205;THREE.DstAlphaFactor=206;THREE.OneMinusDstAlphaFactor=207;THREE.DstColorFactor=208;THREE.OneMinusDstColorFactor=209;THREE.SrcAlphaSaturateFactor=210;THREE.NeverDepth=0;THREE.AlwaysDepth=1;THREE.LessDepth=2;THREE.LessEqualDepth=3;THREE.EqualDepth=4;
THREE.GreaterEqualDepth=5;THREE.GreaterDepth=6;THREE.NotEqualDepth=7;THREE.MultiplyOperation=0;THREE.MixOperation=1;THREE.AddOperation=2;THREE.UVMapping=300;THREE.CubeReflectionMapping=301;THREE.CubeRefractionMapping=302;THREE.EquirectangularReflectionMapping=303;THREE.EquirectangularRefractionMapping=304;THREE.SphericalReflectionMapping=305;THREE.RepeatWrapping=1E3;THREE.ClampToEdgeWrapping=1001;THREE.MirroredRepeatWrapping=1002;THREE.NearestFilter=1003;THREE.NearestMipMapNearestFilter=1004;
THREE.NearestMipMapLinearFilter=1005;THREE.LinearFilter=1006;THREE.LinearMipMapNearestFilter=1007;THREE.LinearMipMapLinearFilter=1008;THREE.UnsignedByteType=1009;THREE.ByteType=1010;THREE.ShortType=1011;THREE.UnsignedShortType=1012;THREE.IntType=1013;THREE.UnsignedIntType=1014;THREE.FloatType=1015;THREE.HalfFloatType=1025;THREE.UnsignedShort4444Type=1016;THREE.UnsignedShort5551Type=1017;THREE.UnsignedShort565Type=1018;THREE.AlphaFormat=1019;THREE.RGBFormat=1020;THREE.RGBAFormat=1021;
THREE.LuminanceFormat=1022;THREE.LuminanceAlphaFormat=1023;THREE.RGBEFormat=THREE.RGBAFormat;THREE.RGB_S3TC_DXT1_Format=2001;THREE.RGBA_S3TC_DXT1_Format=2002;THREE.RGBA_S3TC_DXT3_Format=2003;THREE.RGBA_S3TC_DXT5_Format=2004;THREE.RGB_PVRTC_4BPPV1_Format=2100;THREE.RGB_PVRTC_2BPPV1_Format=2101;THREE.RGBA_PVRTC_4BPPV1_Format=2102;THREE.RGBA_PVRTC_2BPPV1_Format=2103;
THREE.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js.");this.projectVector=function(a,b){console.warn("THREE.Projector: .projectVector() is now vector.project().");a.project(b)};this.unprojectVector=function(a,b){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject().");a.unproject(b)};this.pickingRay=function(a,b){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}};
THREE.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js");this.domElement=document.createElement("canvas");this.clear=function(){};this.render=function(){};this.setClearColor=function(){};this.setSize=function(){}};THREE.Color=function(a){return 3===arguments.length?this.setRGB(arguments[0],arguments[1],arguments[2]):this.set(a)};
THREE.Color.prototype={constructor:THREE.Color,r:1,g:1,b:1,set:function(a){a instanceof THREE.Color?this.copy(a):"number"===typeof a?this.setHex(a):"string"===typeof a&&this.setStyle(a);return this},setHex:function(a){a=Math.floor(a);this.r=(a>>16&255)/255;this.g=(a>>8&255)/255;this.b=(a&255)/255;return this},setRGB:function(a,b,c){this.r=a;this.g=b;this.b=c;return this},setHSL:function(){function a(a,c,d){0>d&&(d+=1);1<d&&--d;return d<1/6?a+6*(c-a)*d:.5>d?c:d<2/3?a+6*(c-a)*(2/3-d):a}return function(b,
c,d){b=THREE.Math.euclideanModulo(b,1);c=THREE.Math.clamp(c,0,1);d=THREE.Math.clamp(d,0,1);0===c?this.r=this.g=this.b=d:(c=.5>=d?d*(1+c):d+c-d*c,d=2*d-c,this.r=a(d,c,b+1/3),this.g=a(d,c,b),this.b=a(d,c,b-1/3));return this}}(),setStyle:function(a){var b=function(b){b=parseFloat(b);1>b&&console.warn("THREE.Color: Alpha component of color "+a+" will be ignored.");return b},c;if(c=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(a)){var d=c[2];switch(c[1]){case "rgb":if(c=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*$/.exec(d))return this.r=
Math.min(255,parseInt(c[1],10))/255,this.g=Math.min(255,parseInt(c[2],10))/255,this.b=Math.min(255,parseInt(c[3],10))/255,this;if(c=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*$/.exec(d))return this.r=Math.min(100,parseInt(c[1],10))/100,this.g=Math.min(100,parseInt(c[2],10))/100,this.b=Math.min(100,parseInt(c[3],10))/100,this;break;case "rgba":if(c=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([0-9]*\.?[0-9]+)\s*$/.exec(d))return this.r=Math.min(255,parseInt(c[1],10))/255,this.g=Math.min(255,parseInt(c[2],10))/
255,this.b=Math.min(255,parseInt(c[3],10))/255,b(c[4]),this;if(c=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*([0-9]*\.?[0-9]+)\s*$/.exec(d))return this.r=Math.min(100,parseInt(c[1],10))/100,this.g=Math.min(100,parseInt(c[2],10))/100,this.b=Math.min(100,parseInt(c[3],10))/100,b(c[4]),this;break;case "hsl":if(c=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*$/.exec(d)){var d=parseFloat(c[1]),e=parseInt(c[2],10)/100,g=parseInt(c[3],10)/100;return this.setHSL(d,e,g)}break;case "hsla":if(c=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*([0-9]*\.?[0-9]+)\s*$/.exec(d))return d=
parseFloat(c[1]),e=parseInt(c[2],10)/100,g=parseInt(c[3],10)/100,b(c[4]),this.setHSL(d,e,g)}}else if(c=/^\#([A-Fa-f0-9]+)$/.exec(a)){b=c[1];c=b.length;if(3===c)return this.r=parseInt(b.charAt(0)+b.charAt(0),16)/255,this.g=parseInt(b.charAt(1)+b.charAt(1),16)/255,this.b=parseInt(b.charAt(2)+b.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(b.charAt(0)+b.charAt(1),16)/255,this.g=parseInt(b.charAt(2)+b.charAt(3),16)/255,this.b=parseInt(b.charAt(4)+b.charAt(5),16)/255,this}a&&0<a.length&&(b=THREE.ColorKeywords[a],
void 0!==b?this.setHex(b):console.warn("THREE.Color: Unknown color "+a));return this},copy:function(a){this.r=a.r;this.g=a.g;this.b=a.b;return this},copyGammaToLinear:function(a,b){void 0===b&&(b=2);this.r=Math.pow(a.r,b);this.g=Math.pow(a.g,b);this.b=Math.pow(a.b,b);return this},copyLinearToGamma:function(a,b){void 0===b&&(b=2);var c=0<b?1/b:1;this.r=Math.pow(a.r,c);this.g=Math.pow(a.g,c);this.b=Math.pow(a.b,c);return this},convertGammaToLinear:function(){var a=this.r,b=this.g,c=this.b;this.r=a*
a;this.g=b*b;this.b=c*c;return this},convertLinearToGamma:function(){this.r=Math.sqrt(this.r);this.g=Math.sqrt(this.g);this.b=Math.sqrt(this.b);return this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(a){a=a||{h:0,s:0,l:0};var b=this.r,c=this.g,d=this.b,e=Math.max(b,c,d),g=Math.min(b,c,d),f,h=(g+e)/2;if(g===e)g=f=0;else{var k=e-g,g=.5>=h?k/(e+g):k/(2-e-g);switch(e){case b:f=(c-d)/
k+(c<d?6:0);break;case c:f=(d-b)/k+2;break;case d:f=(b-c)/k+4}f/=6}a.h=f;a.s=g;a.l=h;return a},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(a,b,c){var d=this.getHSL();d.h+=a;d.s+=b;d.l+=c;this.setHSL(d.h,d.s,d.l);return this},add:function(a){this.r+=a.r;this.g+=a.g;this.b+=a.b;return this},addColors:function(a,b){this.r=a.r+b.r;this.g=a.g+b.g;this.b=a.b+b.b;return this},addScalar:function(a){this.r+=a;this.g+=a;this.b+=a;return this},
multiply:function(a){this.r*=a.r;this.g*=a.g;this.b*=a.b;return this},multiplyScalar:function(a){this.r*=a;this.g*=a;this.b*=a;return this},lerp:function(a,b){this.r+=(a.r-this.r)*b;this.g+=(a.g-this.g)*b;this.b+=(a.b-this.b)*b;return this},equals:function(a){return a.r===this.r&&a.g===this.g&&a.b===this.b},fromArray:function(a){this.r=a[0];this.g=a[1];this.b=a[2];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.r;a[b+1]=this.g;a[b+2]=this.b;return a},clone:function(){return(new THREE.Color).copy(this)}};
THREE.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,
darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,
grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,
lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,
palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,
tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};THREE.Quaternion=function(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._w=void 0!==d?d:1};
THREE.Quaternion.prototype={constructor:THREE.Quaternion,get x(){return this._x},set x(a){this._x=a;this.onChangeCallback()},get y(){return this._y},set y(a){this._y=a;this.onChangeCallback()},get z(){return this._z},set z(a){this._z=a;this.onChangeCallback()},get w(){return this._w},set w(a){this._w=a;this.onChangeCallback()},set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._w=d;this.onChangeCallback();return this},copy:function(a){this._x=a.x;this._y=a.y;this._z=a.z;this._w=a.w;this.onChangeCallback();
return this},setFromEuler:function(a,b){if(!1===a instanceof THREE.Euler)throw Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var c=Math.cos(a._x/2),d=Math.cos(a._y/2),e=Math.cos(a._z/2),g=Math.sin(a._x/2),f=Math.sin(a._y/2),h=Math.sin(a._z/2);"XYZ"===a.order?(this._x=g*d*e+c*f*h,this._y=c*f*e-g*d*h,this._z=c*d*h+g*f*e,this._w=c*d*e-g*f*h):"YXZ"===a.order?(this._x=g*d*e+c*f*h,this._y=c*f*e-g*d*h,this._z=c*d*h-g*f*e,this._w=c*d*e+g*f*h):"ZXY"===
a.order?(this._x=g*d*e-c*f*h,this._y=c*f*e+g*d*h,this._z=c*d*h+g*f*e,this._w=c*d*e-g*f*h):"ZYX"===a.order?(this._x=g*d*e-c*f*h,this._y=c*f*e+g*d*h,this._z=c*d*h-g*f*e,this._w=c*d*e+g*f*h):"YZX"===a.order?(this._x=g*d*e+c*f*h,this._y=c*f*e+g*d*h,this._z=c*d*h-g*f*e,this._w=c*d*e-g*f*h):"XZY"===a.order&&(this._x=g*d*e-c*f*h,this._y=c*f*e-g*d*h,this._z=c*d*h+g*f*e,this._w=c*d*e+g*f*h);if(!1!==b)this.onChangeCallback();return this},setFromAxisAngle:function(a,b){var c=b/2,d=Math.sin(c);this._x=a.x*d;
this._y=a.y*d;this._z=a.z*d;this._w=Math.cos(c);this.onChangeCallback();return this},setFromRotationMatrix:function(a){var b=a.elements,c=b[0];a=b[4];var d=b[8],e=b[1],g=b[5],f=b[9],h=b[2],k=b[6],b=b[10],n=c+g+b;0<n?(c=.5/Math.sqrt(n+1),this._w=.25/c,this._x=(k-f)*c,this._y=(d-h)*c,this._z=(e-a)*c):c>g&&c>b?(c=2*Math.sqrt(1+c-g-b),this._w=(k-f)/c,this._x=.25*c,this._y=(a+e)/c,this._z=(d+h)/c):g>b?(c=2*Math.sqrt(1+g-c-b),this._w=(d-h)/c,this._x=(a+e)/c,this._y=.25*c,this._z=(f+k)/c):(c=2*Math.sqrt(1+
b-c-g),this._w=(e-a)/c,this._x=(d+h)/c,this._y=(f+k)/c,this._z=.25*c);this.onChangeCallback();return this},setFromUnitVectors:function(){var a,b;return function(c,d){void 0===a&&(a=new THREE.Vector3);b=c.dot(d)+1;1E-6>b?(b=0,Math.abs(c.x)>Math.abs(c.z)?a.set(-c.y,c.x,0):a.set(0,-c.z,c.y)):a.crossVectors(c,d);this._x=a.x;this._y=a.y;this._z=a.z;this._w=b;this.normalize();return this}}(),inverse:function(){this.conjugate().normalize();return this},conjugate:function(){this._x*=-1;this._y*=-1;this._z*=
-1;this.onChangeCallback();return this},dot:function(a){return this._x*a._x+this._y*a._y+this._z*a._z+this._w*a._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var a=this.length();0===a?(this._z=this._y=this._x=0,this._w=1):(a=1/a,this._x*=a,this._y*=a,this._z*=a,this._w*=a);this.onChangeCallback();return this},multiply:function(a,
b){return void 0!==b?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(a,b)):this.multiplyQuaternions(this,a)},multiplyQuaternions:function(a,b){var c=a._x,d=a._y,e=a._z,g=a._w,f=b._x,h=b._y,k=b._z,n=b._w;this._x=c*n+g*f+d*k-e*h;this._y=d*n+g*h+e*f-c*k;this._z=e*n+g*k+c*h-d*f;this._w=g*n-c*f-d*h-e*k;this.onChangeCallback();return this},multiplyVector3:function(a){console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");
return a.applyQuaternion(this)},slerp:function(a,b){if(0===b)return this;if(1===b)return this.copy(a);var c=this._x,d=this._y,e=this._z,g=this._w,f=g*a._w+c*a._x+d*a._y+e*a._z;0>f?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=-a._z,f=-f):this.copy(a);if(1<=f)return this._w=g,this._x=c,this._y=d,this._z=e,this;var h=Math.acos(f),k=Math.sqrt(1-f*f);if(.001>Math.abs(k))return this._w=.5*(g+this._w),this._x=.5*(c+this._x),this._y=.5*(d+this._y),this._z=.5*(e+this._z),this;f=Math.sin((1-b)*h)/k;h=
Math.sin(b*h)/k;this._w=g*f+this._w*h;this._x=c*f+this._x*h;this._y=d*f+this._y*h;this._z=e*f+this._z*h;this.onChangeCallback();return this},equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w},fromArray:function(a,b){void 0===b&&(b=0);this._x=a[b];this._y=a[b+1];this._z=a[b+2];this._w=a[b+3];this.onChangeCallback();return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this._x;a[b+1]=this._y;a[b+2]=this._z;a[b+3]=this._w;return a},onChange:function(a){this.onChangeCallback=
a;return this},onChangeCallback:function(){},clone:function(){return new THREE.Quaternion(this._x,this._y,this._z,this._w)}};THREE.Quaternion.slerp=function(a,b,c,d){return c.copy(a).slerp(b,d)};THREE.Vector2=function(a,b){this.x=a||0;this.y=b||0};
THREE.Vector2.prototype={constructor:THREE.Vector2,set:function(a,b){this.x=a;this.y=b;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+a);}},copy:function(a){this.x=a.x;this.y=a.y;return this},add:function(a,
b){if(void 0!==b)return console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;return this},addScalar:function(a){this.x+=a;this.y+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),
this.subVectors(a,b);this.x-=a.x;this.y-=a.y;return this},subScalar:function(a){this.x-=a;this.y-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;return this},multiply:function(a){this.x*=a.x;this.y*=a.y;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;return this},divide:function(a){this.x/=a.x;this.y/=a.y;return this},divideScalar:function(a){0!==a?(a=1/a,this.x*=a,this.y*=a):this.y=this.x=0;return this},min:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=
a.y);return this},max:function(a){this.x<a.x&&(this.x=a.x);this.y<a.y&&(this.y=a.y);return this},clamp:function(a,b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);return this},clampScalar:function(){var a,b;return function(c,d){void 0===a&&(a=new THREE.Vector2,b=new THREE.Vector2);a.set(c,c);b.set(d,d);return this.clamp(a,b)}}(),floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);
this.y=Math.ceil(this.y);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);return this},negate:function(){this.x=-this.x;this.y=-this.y;return this},dot:function(a){return this.x*a.x+this.y*a.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+
Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x;a=this.y-a.y;return b*b+a*a},setLength:function(a){var b=this.length();0!==b&&a!==b&&this.multiplyScalar(a/b);return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;return this},lerpVectors:function(a,b,c){this.subVectors(b,a).multiplyScalar(c).add(a);return this},equals:function(a){return a.x===
this.x&&a.y===this.y},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;return a},fromAttribute:function(a,b,c){void 0===c&&(c=0);b=b*a.itemSize+c;this.x=a.array[b];this.y=a.array[b+1];return this},clone:function(){return new THREE.Vector2(this.x,this.y)}};THREE.Vector3=function(a,b,c){this.x=a||0;this.y=b||0;this.z=c||0};
THREE.Vector3.prototype={constructor:THREE.Vector3,set:function(a,b,c){this.x=a;this.y=b;this.z=c;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+
a);}},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;return this},
sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},subScalar:function(a){this.x-=a;this.y-=a;this.z-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this},multiply:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),
this.multiplyVectors(a,b);this.x*=a.x;this.y*=a.y;this.z*=a.z;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=a;return this},multiplyVectors:function(a,b){this.x=a.x*b.x;this.y=a.y*b.y;this.z=a.z*b.z;return this},applyEuler:function(){var a;return function(b){!1===b instanceof THREE.Euler&&console.error("THREE.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order.");void 0===a&&(a=new THREE.Quaternion);this.applyQuaternion(a.setFromEuler(b));return this}}(),
applyAxisAngle:function(){var a;return function(b,c){void 0===a&&(a=new THREE.Quaternion);this.applyQuaternion(a.setFromAxisAngle(b,c));return this}}(),applyMatrix3:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[3]*c+a[6]*d;this.y=a[1]*b+a[4]*c+a[7]*d;this.z=a[2]*b+a[5]*c+a[8]*d;return this},applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d+a[12];this.y=a[1]*b+a[5]*c+a[9]*d+a[13];this.z=a[2]*b+a[6]*c+a[10]*d+a[14];return this},
applyProjection:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;var e=1/(a[3]*b+a[7]*c+a[11]*d+a[15]);this.x=(a[0]*b+a[4]*c+a[8]*d+a[12])*e;this.y=(a[1]*b+a[5]*c+a[9]*d+a[13])*e;this.z=(a[2]*b+a[6]*c+a[10]*d+a[14])*e;return this},applyQuaternion:function(a){var b=this.x,c=this.y,d=this.z,e=a.x,g=a.y,f=a.z;a=a.w;var h=a*b+g*d-f*c,k=a*c+f*b-e*d,n=a*d+e*c-g*b,b=-e*b-g*c-f*d;this.x=h*a+b*-e+k*-f-n*-g;this.y=k*a+b*-g+n*-e-h*-f;this.z=n*a+b*-f+h*-g-k*-e;return this},project:function(){var a;return function(b){void 0===
a&&(a=new THREE.Matrix4);a.multiplyMatrices(b.projectionMatrix,a.getInverse(b.matrixWorld));return this.applyProjection(a)}}(),unproject:function(){var a;return function(b){void 0===a&&(a=new THREE.Matrix4);a.multiplyMatrices(b.matrixWorld,a.getInverse(b.projectionMatrix));return this.applyProjection(a)}}(),transformDirection:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d;this.y=a[1]*b+a[5]*c+a[9]*d;this.z=a[2]*b+a[6]*c+a[10]*d;this.normalize();return this},divide:function(a){this.x/=
a.x;this.y/=a.y;this.z/=a.z;return this},divideScalar:function(a){0!==a?(a=1/a,this.x*=a,this.y*=a,this.z*=a):this.z=this.y=this.x=0;return this},min:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);this.z>a.z&&(this.z=a.z);return this},max:function(a){this.x<a.x&&(this.x=a.x);this.y<a.y&&(this.y=a.y);this.z<a.z&&(this.z=a.z);return this},clamp:function(a,b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);this.z<a.z?this.z=a.z:this.z>b.z&&
(this.z=b.z);return this},clampScalar:function(){var a,b;return function(c,d){void 0===a&&(a=new THREE.Vector3,b=new THREE.Vector3);a.set(c,c,c);b.set(d,d,d);return this.clamp(a,b)}}(),floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},
roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+
Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){var b=this.length();0!==b&&a!==b&&this.multiplyScalar(a/b);return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;return this},lerpVectors:function(a,b,c){this.subVectors(b,a).multiplyScalar(c).add(a);return this},cross:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),
this.crossVectors(a,b);var c=this.x,d=this.y,e=this.z;this.x=d*a.z-e*a.y;this.y=e*a.x-c*a.z;this.z=c*a.y-d*a.x;return this},crossVectors:function(a,b){var c=a.x,d=a.y,e=a.z,g=b.x,f=b.y,h=b.z;this.x=d*h-e*f;this.y=e*g-c*h;this.z=c*f-d*g;return this},projectOnVector:function(){var a,b;return function(c){void 0===a&&(a=new THREE.Vector3);a.copy(c).normalize();b=this.dot(a);return this.copy(a).multiplyScalar(b)}}(),projectOnPlane:function(){var a;return function(b){void 0===a&&(a=new THREE.Vector3);a.copy(this).projectOnVector(b);
return this.sub(a)}}(),reflect:function(){var a;return function(b){void 0===a&&(a=new THREE.Vector3);return this.sub(a.copy(b).multiplyScalar(2*this.dot(b)))}}(),angleTo:function(a){a=this.dot(a)/(this.length()*a.length());return Math.acos(THREE.Math.clamp(a,-1,1))},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x,c=this.y-a.y;a=this.z-a.z;return b*b+c*c+a*a},setEulerFromRotationMatrix:function(a,b){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},
setEulerFromQuaternion:function(a,b){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(a){console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().");return this.setFromMatrixPosition(a)},getScaleFromMatrix:function(a){console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().");return this.setFromMatrixScale(a)},getColumnFromMatrix:function(a,
b){console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().");return this.setFromMatrixColumn(a,b)},setFromMatrixPosition:function(a){this.x=a.elements[12];this.y=a.elements[13];this.z=a.elements[14];return this},setFromMatrixScale:function(a){var b=this.set(a.elements[0],a.elements[1],a.elements[2]).length(),c=this.set(a.elements[4],a.elements[5],a.elements[6]).length();a=this.set(a.elements[8],a.elements[9],a.elements[10]).length();this.x=b;this.y=c;this.z=
a;return this},setFromMatrixColumn:function(a,b){var c=4*a,d=b.elements;this.x=d[c];this.y=d[c+1];this.z=d[c+2];return this},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;return a},fromAttribute:function(a,b,c){void 0===c&&(c=0);b=b*a.itemSize+c;this.x=a.array[b];this.y=a.array[b+1];this.z=
a.array[b+2];return this},clone:function(){return new THREE.Vector3(this.x,this.y,this.z)}};THREE.Vector4=function(a,b,c,d){this.x=a||0;this.y=b||0;this.z=c||0;this.w=void 0!==d?d:1};
THREE.Vector4.prototype={constructor:THREE.Vector4,set:function(a,b,c,d){this.x=a;this.y=b;this.z=c;this.w=d;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setW:function(a){this.w=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;case 3:this.w=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;
case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+a);}},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=void 0!==a.w?a.w:1;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;this.w+=a.w;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;this.w+=a;return this},
addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;this.w=a.w+b.w;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;this.w+=a.w*b;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;this.w-=a.w;return this},subScalar:function(a){this.x-=a;this.y-=a;this.z-=a;this.w-=a;return this},subVectors:function(a,
b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;this.w=a.w-b.w;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=a;this.w*=a;return this},applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z,e=this.w;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d+a[12]*e;this.y=a[1]*b+a[5]*c+a[9]*d+a[13]*e;this.z=a[2]*b+a[6]*c+a[10]*d+a[14]*e;this.w=a[3]*b+a[7]*c+a[11]*d+a[15]*e;return this},divideScalar:function(a){0!==a?(a=1/a,this.x*=a,this.y*=a,this.z*=a,this.w*=a):(this.z=this.y=this.x=0,this.w=
1);return this},setAxisAngleFromQuaternion:function(a){this.w=2*Math.acos(a.w);var b=Math.sqrt(1-a.w*a.w);1E-4>b?(this.x=1,this.z=this.y=0):(this.x=a.x/b,this.y=a.y/b,this.z=a.z/b);return this},setAxisAngleFromRotationMatrix:function(a){var b,c,d;a=a.elements;var e=a[0];d=a[4];var g=a[8],f=a[1],h=a[5],k=a[9];c=a[2];b=a[6];var n=a[10];if(.01>Math.abs(d-f)&&.01>Math.abs(g-c)&&.01>Math.abs(k-b)){if(.1>Math.abs(d+f)&&.1>Math.abs(g+c)&&.1>Math.abs(k+b)&&.1>Math.abs(e+h+n-3))return this.set(1,0,0,0),this;
a=Math.PI;e=(e+1)/2;h=(h+1)/2;n=(n+1)/2;d=(d+f)/4;g=(g+c)/4;k=(k+b)/4;e>h&&e>n?.01>e?(b=0,d=c=.707106781):(b=Math.sqrt(e),c=d/b,d=g/b):h>n?.01>h?(b=.707106781,c=0,d=.707106781):(c=Math.sqrt(h),b=d/c,d=k/c):.01>n?(c=b=.707106781,d=0):(d=Math.sqrt(n),b=g/d,c=k/d);this.set(b,c,d,a);return this}a=Math.sqrt((b-k)*(b-k)+(g-c)*(g-c)+(f-d)*(f-d));.001>Math.abs(a)&&(a=1);this.x=(b-k)/a;this.y=(g-c)/a;this.z=(f-d)/a;this.w=Math.acos((e+h+n-1)/2);return this},min:function(a){this.x>a.x&&(this.x=a.x);this.y>
a.y&&(this.y=a.y);this.z>a.z&&(this.z=a.z);this.w>a.w&&(this.w=a.w);return this},max:function(a){this.x<a.x&&(this.x=a.x);this.y<a.y&&(this.y=a.y);this.z<a.z&&(this.z=a.z);this.w<a.w&&(this.w=a.w);return this},clamp:function(a,b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);this.z<a.z?this.z=a.z:this.z>b.z&&(this.z=b.z);this.w<a.w?this.w=a.w:this.w>b.w&&(this.w=b.w);return this},clampScalar:function(){var a,b;return function(c,d){void 0===a&&(a=new THREE.Vector4,
b=new THREE.Vector4);a.set(c,c,c,c);b.set(d,d,d,d);return this.clamp(a,b)}}(),floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);this.w=Math.floor(this.w);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);this.w=Math.ceil(this.w);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.w=Math.round(this.w);return this},roundToZero:function(){this.x=
0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*
this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){var b=this.length();0!==b&&a!==b&&this.multiplyScalar(a/b);return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;this.w+=(a.w-this.w)*b;return this},lerpVectors:function(a,b,c){this.subVectors(b,a).multiplyScalar(c).add(a);
return this},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z&&a.w===this.w},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];this.w=a[b+3];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;a[b+3]=this.w;return a},fromAttribute:function(a,b,c){void 0===c&&(c=0);b=b*a.itemSize+c;this.x=a.array[b];this.y=a.array[b+1];this.z=a.array[b+2];this.w=a.array[b+3];return this},clone:function(){return new THREE.Vector4(this.x,
this.y,this.z,this.w)}};THREE.Euler=function(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._order=d||THREE.Euler.DefaultOrder};THREE.Euler.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" ");THREE.Euler.DefaultOrder="XYZ";
THREE.Euler.prototype={constructor:THREE.Euler,get x(){return this._x},set x(a){this._x=a;this.onChangeCallback()},get y(){return this._y},set y(a){this._y=a;this.onChangeCallback()},get z(){return this._z},set z(a){this._z=a;this.onChangeCallback()},get order(){return this._order},set order(a){this._order=a;this.onChangeCallback()},set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._order=d||this._order;this.onChangeCallback();return this},copy:function(a){this._x=a._x;this._y=a._y;this._z=
a._z;this._order=a._order;this.onChangeCallback();return this},setFromRotationMatrix:function(a,b,c){var d=THREE.Math.clamp,e=a.elements;a=e[0];var g=e[4],f=e[8],h=e[1],k=e[5],n=e[9],l=e[2],p=e[6],e=e[10];b=b||this._order;"XYZ"===b?(this._y=Math.asin(d(f,-1,1)),.99999>Math.abs(f)?(this._x=Math.atan2(-n,e),this._z=Math.atan2(-g,a)):(this._x=Math.atan2(p,k),this._z=0)):"YXZ"===b?(this._x=Math.asin(-d(n,-1,1)),.99999>Math.abs(n)?(this._y=Math.atan2(f,e),this._z=Math.atan2(h,k)):(this._y=Math.atan2(-l,
a),this._z=0)):"ZXY"===b?(this._x=Math.asin(d(p,-1,1)),.99999>Math.abs(p)?(this._y=Math.atan2(-l,e),this._z=Math.atan2(-g,k)):(this._y=0,this._z=Math.atan2(h,a))):"ZYX"===b?(this._y=Math.asin(-d(l,-1,1)),.99999>Math.abs(l)?(this._x=Math.atan2(p,e),this._z=Math.atan2(h,a)):(this._x=0,this._z=Math.atan2(-g,k))):"YZX"===b?(this._z=Math.asin(d(h,-1,1)),.99999>Math.abs(h)?(this._x=Math.atan2(-n,k),this._y=Math.atan2(-l,a)):(this._x=0,this._y=Math.atan2(f,e))):"XZY"===b?(this._z=Math.asin(-d(g,-1,1)),.99999>
Math.abs(g)?(this._x=Math.atan2(p,k),this._y=Math.atan2(f,a)):(this._x=Math.atan2(-n,e),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+b);this._order=b;if(!1!==c)this.onChangeCallback();return this},setFromQuaternion:function(){var a;return function(b,c,d){void 0===a&&(a=new THREE.Matrix4);a.makeRotationFromQuaternion(b);this.setFromRotationMatrix(a,c,d);return this}}(),setFromVector3:function(a,b){return this.set(a.x,a.y,a.z,b||this._order)},reorder:function(){var a=
new THREE.Quaternion;return function(b){a.setFromEuler(this);this.setFromQuaternion(a,b)}}(),equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order},fromArray:function(a){this._x=a[0];this._y=a[1];this._z=a[2];void 0!==a[3]&&(this._order=a[3]);this.onChangeCallback();return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this._x;a[b+1]=this._y;a[b+2]=this._z;a[b+3]=this._order;return a},toVector3:function(a){return a?a.set(this._x,this._y,
this._z):new THREE.Vector3(this._x,this._y,this._z)},onChange:function(a){this.onChangeCallback=a;return this},onChangeCallback:function(){},clone:function(){return new THREE.Euler(this._x,this._y,this._z,this._order)}};THREE.Line3=function(a,b){this.start=void 0!==a?a:new THREE.Vector3;this.end=void 0!==b?b:new THREE.Vector3};
THREE.Line3.prototype={constructor:THREE.Line3,set:function(a,b){this.start.copy(a);this.end.copy(b);return this},copy:function(a){this.start.copy(a.start);this.end.copy(a.end);return this},center:function(a){return(a||new THREE.Vector3).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(a){return(a||new THREE.Vector3).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(a,
b){var c=b||new THREE.Vector3;return this.delta(c).multiplyScalar(a).add(this.start)},closestPointToPointParameter:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c,d){a.subVectors(c,this.start);b.subVectors(this.end,this.start);var e=b.dot(b),e=b.dot(a)/e;d&&(e=THREE.Math.clamp(e,0,1));return e}}(),closestPointToPoint:function(a,b,c){a=this.closestPointToPointParameter(a,b);c=c||new THREE.Vector3;return this.delta(c).multiplyScalar(a).add(this.start)},applyMatrix4:function(a){this.start.applyMatrix4(a);
this.end.applyMatrix4(a);return this},equals:function(a){return a.start.equals(this.start)&&a.end.equals(this.end)},clone:function(){return(new THREE.Line3).copy(this)}};THREE.Box2=function(a,b){this.min=void 0!==a?a:new THREE.Vector2(Infinity,Infinity);this.max=void 0!==b?b:new THREE.Vector2(-Infinity,-Infinity)};
THREE.Box2.prototype={constructor:THREE.Box2,set:function(a,b){this.min.copy(a);this.max.copy(b);return this},setFromPoints:function(a){this.makeEmpty();for(var b=0,c=a.length;b<c;b++)this.expandByPoint(a[b]);return this},setFromCenterAndSize:function(){var a=new THREE.Vector2;return function(b,c){var d=a.copy(c).multiplyScalar(.5);this.min.copy(b).sub(d);this.max.copy(b).add(d);return this}}(),copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return this},makeEmpty:function(){this.min.x=
this.min.y=Infinity;this.max.x=this.max.y=-Infinity;return this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(a){return(a||new THREE.Vector2).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(a){return(a||new THREE.Vector2).subVectors(this.max,this.min)},expandByPoint:function(a){this.min.min(a);this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);this.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);
this.max.addScalar(a);return this},containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y?!0:!1},getParameter:function(a,b){return(b||new THREE.Vector2).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y))},isIntersectionBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>
this.max.y?!1:!0},clampPoint:function(a,b){return(b||new THREE.Vector2).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new THREE.Vector2;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);return this},union:function(a){this.min.min(a.min);this.max.max(a.max);return this},translate:function(a){this.min.add(a);this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&
a.max.equals(this.max)},clone:function(){return(new THREE.Box2).copy(this)}};THREE.Box3=function(a,b){this.min=void 0!==a?a:new THREE.Vector3(Infinity,Infinity,Infinity);this.max=void 0!==b?b:new THREE.Vector3(-Infinity,-Infinity,-Infinity)};
THREE.Box3.prototype={constructor:THREE.Box3,set:function(a,b){this.min.copy(a);this.max.copy(b);return this},setFromPoints:function(a){this.makeEmpty();for(var b=0,c=a.length;b<c;b++)this.expandByPoint(a[b]);return this},setFromCenterAndSize:function(){var a=new THREE.Vector3;return function(b,c){var d=a.copy(c).multiplyScalar(.5);this.min.copy(b).sub(d);this.max.copy(b).add(d);return this}}(),setFromObject:function(){var a=new THREE.Vector3;return function(b){var c=this;b.updateMatrixWorld(!0);
this.makeEmpty();b.traverse(function(b){var e=b.geometry;if(void 0!==e)if(e instanceof THREE.Geometry)for(var g=e.vertices,e=0,f=g.length;e<f;e++)a.copy(g[e]),a.applyMatrix4(b.matrixWorld),c.expandByPoint(a);else if(e instanceof THREE.BufferGeometry&&void 0!==e.attributes.position)for(g=e.attributes.position.array,e=0,f=g.length;e<f;e+=3)a.set(g[e],g[e+1],g[e+2]),a.applyMatrix4(b.matrixWorld),c.expandByPoint(a)});return this}}(),copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return this},
makeEmpty:function(){this.min.x=this.min.y=this.min.z=Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(a){return(a||new THREE.Vector3).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(a){return(a||new THREE.Vector3).subVectors(this.max,this.min)},expandByPoint:function(a){this.min.min(a);this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);
this.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);this.max.addScalar(a);return this},containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y||a.z<this.min.z||a.z>this.max.z?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&a.max.z<=this.max.z?!0:!1},getParameter:function(a,b){return(b||new THREE.Vector3).set((a.x-this.min.x)/(this.max.x-
this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))},isIntersectionBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y||a.max.z<this.min.z||a.min.z>this.max.z?!1:!0},clampPoint:function(a,b){return(b||new THREE.Vector3).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new THREE.Vector3;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),getBoundingSphere:function(){var a=
new THREE.Vector3;return function(b){b=b||new THREE.Sphere;b.center=this.center();b.radius=.5*this.size(a).length();return b}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);return this},union:function(a){this.min.min(a.min);this.max.max(a.max);return this},applyMatrix4:function(){var a=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];return function(b){a[0].set(this.min.x,this.min.y,
this.min.z).applyMatrix4(b);a[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(b);a[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(b);a[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(b);a[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(b);a[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(b);a[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(b);a[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(b);this.makeEmpty();this.setFromPoints(a);return this}}(),translate:function(a){this.min.add(a);
this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)},clone:function(){return(new THREE.Box3).copy(this)}};THREE.Matrix3=function(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]);0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")};
THREE.Matrix3.prototype={constructor:THREE.Matrix3,set:function(a,b,c,d,e,g,f,h,k){var n=this.elements;n[0]=a;n[3]=b;n[6]=c;n[1]=d;n[4]=e;n[7]=g;n[2]=f;n[5]=h;n[8]=k;return this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this},copy:function(a){a=a.elements;this.set(a[0],a[3],a[6],a[1],a[4],a[7],a[2],a[5],a[8]);return this},multiplyVector3:function(a){console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");return a.applyMatrix3(this)},
multiplyVector3Array:function(a){console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.");return this.applyToVector3Array(a)},applyToVector3Array:function(){var a;return function(b,c,d){void 0===a&&(a=new THREE.Vector3);void 0===c&&(c=0);void 0===d&&(d=b.length);for(var e=0;e<d;e+=3,c+=3)a.fromArray(b,c),a.applyMatrix3(this),a.toArray(b,c);return b}}(),applyToBuffer:function(){var a;return function(b,c,d){void 0===a&&(a=new THREE.Vector3);
void 0===c&&(c=0);void 0===d&&(d=b.length/b.itemSize);for(var e=0;e<d;e++,c++)a.x=b.getX(c),a.y=b.getY(c),a.z=b.getZ(c),a.applyMatrix3(this),b.setXYZ(a.x,a.y,a.z);return b}}(),multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[3]*=a;b[6]*=a;b[1]*=a;b[4]*=a;b[7]*=a;b[2]*=a;b[5]*=a;b[8]*=a;return this},determinant:function(){var a=this.elements,b=a[0],c=a[1],d=a[2],e=a[3],g=a[4],f=a[5],h=a[6],k=a[7],a=a[8];return b*g*a-b*f*k-c*e*a+c*f*h+d*e*k-d*g*h},getInverse:function(a,b){var c=a.elements,d=
this.elements;d[0]=c[10]*c[5]-c[6]*c[9];d[1]=-c[10]*c[1]+c[2]*c[9];d[2]=c[6]*c[1]-c[2]*c[5];d[3]=-c[10]*c[4]+c[6]*c[8];d[4]=c[10]*c[0]-c[2]*c[8];d[5]=-c[6]*c[0]+c[2]*c[4];d[6]=c[9]*c[4]-c[5]*c[8];d[7]=-c[9]*c[0]+c[1]*c[8];d[8]=c[5]*c[0]-c[1]*c[4];c=c[0]*d[0]+c[1]*d[3]+c[2]*d[6];if(0===c){if(b)throw Error("Matrix3.getInverse(): can't invert matrix, determinant is 0");console.warn("Matrix3.getInverse(): can't invert matrix, determinant is 0");this.identity();return this}this.multiplyScalar(1/c);return this},
transpose:function(){var a,b=this.elements;a=b[1];b[1]=b[3];b[3]=a;a=b[2];b[2]=b[6];b[6]=a;a=b[5];b[5]=b[7];b[7]=a;return this},flattenToArrayOffset:function(a,b){var c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];return a},getNormalMatrix:function(a){this.getInverse(a).transpose();return this},transposeIntoArray:function(a){var b=this.elements;a[0]=b[0];a[1]=b[3];a[2]=b[6];a[3]=b[1];a[4]=b[4];a[5]=b[7];a[6]=b[2];a[7]=b[5];
a[8]=b[8];return this},fromArray:function(a){this.elements.set(a);return this},toArray:function(){var a=this.elements;return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8]]},clone:function(){return(new THREE.Matrix3).fromArray(this.elements)}};THREE.Matrix4=function(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")};
THREE.Matrix4.prototype={constructor:THREE.Matrix4,set:function(a,b,c,d,e,g,f,h,k,n,l,p,m,q,r,t){var u=this.elements;u[0]=a;u[4]=b;u[8]=c;u[12]=d;u[1]=e;u[5]=g;u[9]=f;u[13]=h;u[2]=k;u[6]=n;u[10]=l;u[14]=p;u[3]=m;u[7]=q;u[11]=r;u[15]=t;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},copy:function(a){this.elements.set(a.elements);return this},extractPosition:function(a){console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().");return this.copyPosition(a)},
copyPosition:function(a){var b=this.elements;a=a.elements;b[12]=a[12];b[13]=a[13];b[14]=a[14];return this},extractBasis:function(a,b,c){var d=this.elements;a.set(d[0],d[1],d[2]);b.set(d[4],d[5],d[6]);c.set(d[8],d[9],d[10]);return this},makeBasis:function(a,b,c){this.set(a.x,b.x,c.x,0,a.y,b.y,c.y,0,a.z,b.z,c.z,0,0,0,0,1);return this},extractRotation:function(){var a;return function(b){void 0===a&&(a=new THREE.Vector3);var c=this.elements;b=b.elements;var d=1/a.set(b[0],b[1],b[2]).length(),e=1/a.set(b[4],
b[5],b[6]).length(),g=1/a.set(b[8],b[9],b[10]).length();c[0]=b[0]*d;c[1]=b[1]*d;c[2]=b[2]*d;c[4]=b[4]*e;c[5]=b[5]*e;c[6]=b[6]*e;c[8]=b[8]*g;c[9]=b[9]*g;c[10]=b[10]*g;return this}}(),makeRotationFromEuler:function(a){!1===a instanceof THREE.Euler&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var b=this.elements,c=a.x,d=a.y,e=a.z,g=Math.cos(c),c=Math.sin(c),f=Math.cos(d),d=Math.sin(d),h=Math.cos(e),e=Math.sin(e);if("XYZ"===a.order){a=
g*h;var k=g*e,n=c*h,l=c*e;b[0]=f*h;b[4]=-f*e;b[8]=d;b[1]=k+n*d;b[5]=a-l*d;b[9]=-c*f;b[2]=l-a*d;b[6]=n+k*d;b[10]=g*f}else"YXZ"===a.order?(a=f*h,k=f*e,n=d*h,l=d*e,b[0]=a+l*c,b[4]=n*c-k,b[8]=g*d,b[1]=g*e,b[5]=g*h,b[9]=-c,b[2]=k*c-n,b[6]=l+a*c,b[10]=g*f):"ZXY"===a.order?(a=f*h,k=f*e,n=d*h,l=d*e,b[0]=a-l*c,b[4]=-g*e,b[8]=n+k*c,b[1]=k+n*c,b[5]=g*h,b[9]=l-a*c,b[2]=-g*d,b[6]=c,b[10]=g*f):"ZYX"===a.order?(a=g*h,k=g*e,n=c*h,l=c*e,b[0]=f*h,b[4]=n*d-k,b[8]=a*d+l,b[1]=f*e,b[5]=l*d+a,b[9]=k*d-n,b[2]=-d,b[6]=c*
f,b[10]=g*f):"YZX"===a.order?(a=g*f,k=g*d,n=c*f,l=c*d,b[0]=f*h,b[4]=l-a*e,b[8]=n*e+k,b[1]=e,b[5]=g*h,b[9]=-c*h,b[2]=-d*h,b[6]=k*e+n,b[10]=a-l*e):"XZY"===a.order&&(a=g*f,k=g*d,n=c*f,l=c*d,b[0]=f*h,b[4]=-e,b[8]=d*h,b[1]=a*e+l,b[5]=g*h,b[9]=k*e-n,b[2]=n*e-k,b[6]=c*h,b[10]=l*e+a);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},setRotationFromQuaternion:function(a){console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().");return this.makeRotationFromQuaternion(a)},
makeRotationFromQuaternion:function(a){var b=this.elements,c=a.x,d=a.y,e=a.z,g=a.w,f=c+c,h=d+d,k=e+e;a=c*f;var n=c*h,c=c*k,l=d*h,d=d*k,e=e*k,f=g*f,h=g*h,g=g*k;b[0]=1-(l+e);b[4]=n-g;b[8]=c+h;b[1]=n+g;b[5]=1-(a+e);b[9]=d-f;b[2]=c-h;b[6]=d+f;b[10]=1-(a+l);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},lookAt:function(){var a,b,c;return function(d,e,g){void 0===a&&(a=new THREE.Vector3);void 0===b&&(b=new THREE.Vector3);void 0===c&&(c=new THREE.Vector3);var f=this.elements;c.subVectors(d,
e).normalize();0===c.length()&&(c.z=1);a.crossVectors(g,c).normalize();0===a.length()&&(c.x+=1E-4,a.crossVectors(g,c).normalize());b.crossVectors(c,a);f[0]=a.x;f[4]=b.x;f[8]=c.x;f[1]=a.y;f[5]=b.y;f[9]=c.y;f[2]=a.z;f[6]=b.z;f[10]=c.z;return this}}(),multiply:function(a,b){return void 0!==b?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(a,b)):this.multiplyMatrices(this,a)},multiplyMatrices:function(a,b){var c=a.elements,
d=b.elements,e=this.elements,g=c[0],f=c[4],h=c[8],k=c[12],n=c[1],l=c[5],p=c[9],m=c[13],q=c[2],r=c[6],t=c[10],u=c[14],y=c[3],w=c[7],A=c[11],c=c[15],v=d[0],z=d[4],C=d[8],B=d[12],x=d[1],J=d[5],G=d[9],F=d[13],O=d[2],D=d[6],K=d[10],I=d[14],H=d[3],N=d[7],L=d[11],d=d[15];e[0]=g*v+f*x+h*O+k*H;e[4]=g*z+f*J+h*D+k*N;e[8]=g*C+f*G+h*K+k*L;e[12]=g*B+f*F+h*I+k*d;e[1]=n*v+l*x+p*O+m*H;e[5]=n*z+l*J+p*D+m*N;e[9]=n*C+l*G+p*K+m*L;e[13]=n*B+l*F+p*I+m*d;e[2]=q*v+r*x+t*O+u*H;e[6]=q*z+r*J+t*D+u*N;e[10]=q*C+r*G+t*K+u*L;e[14]=
q*B+r*F+t*I+u*d;e[3]=y*v+w*x+A*O+c*H;e[7]=y*z+w*J+A*D+c*N;e[11]=y*C+w*G+A*K+c*L;e[15]=y*B+w*F+A*I+c*d;return this},multiplyToArray:function(a,b,c){var d=this.elements;this.multiplyMatrices(a,b);c[0]=d[0];c[1]=d[1];c[2]=d[2];c[3]=d[3];c[4]=d[4];c[5]=d[5];c[6]=d[6];c[7]=d[7];c[8]=d[8];c[9]=d[9];c[10]=d[10];c[11]=d[11];c[12]=d[12];c[13]=d[13];c[14]=d[14];c[15]=d[15];return this},multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=a;b[9]*=a;b[13]*=a;b[2]*=a;b[6]*=
a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;b[15]*=a;return this},multiplyVector3:function(a){console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead.");return a.applyProjection(this)},multiplyVector4:function(a){console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},multiplyVector3Array:function(a){console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.");
return this.applyToVector3Array(a)},applyToVector3Array:function(){var a;return function(b,c,d){void 0===a&&(a=new THREE.Vector3);void 0===c&&(c=0);void 0===d&&(d=b.length);for(var e=0;e<d;e+=3,c+=3)a.fromArray(b,c),a.applyMatrix4(this),a.toArray(b,c);return b}}(),applyToBuffer:function(){var a;return function(b,c,d){void 0===a&&(a=new THREE.Vector3);void 0===c&&(c=0);void 0===d&&(d=b.length/b.itemSize);for(var e=0;e<d;e++,c++)a.x=b.getX(c),a.y=b.getY(c),a.z=b.getZ(c),a.applyMatrix4(this),b.setXYZ(a.x,
a.y,a.z);return b}}(),rotateAxis:function(a){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");a.transformDirection(this)},crossVector:function(a){console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},determinant:function(){var a=this.elements,b=a[0],c=a[4],d=a[8],e=a[12],g=a[1],f=a[5],h=a[9],k=a[13],n=a[2],l=a[6],p=a[10],m=a[14];return a[3]*(+e*h*l-d*k*
l-e*f*p+c*k*p+d*f*m-c*h*m)+a[7]*(+b*h*m-b*k*p+e*g*p-d*g*m+d*k*n-e*h*n)+a[11]*(+b*k*l-b*f*m-e*g*l+c*g*m+e*f*n-c*k*n)+a[15]*(-d*f*n-b*h*l+b*f*p+d*g*l-c*g*p+c*h*n)},transpose:function(){var a=this.elements,b;b=a[1];a[1]=a[4];a[4]=b;b=a[2];a[2]=a[8];a[8]=b;b=a[6];a[6]=a[9];a[9]=b;b=a[3];a[3]=a[12];a[12]=b;b=a[7];a[7]=a[13];a[13]=b;b=a[11];a[11]=a[14];a[14]=b;return this},flattenToArrayOffset:function(a,b){var c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=
c[6];a[b+7]=c[7];a[b+8]=c[8];a[b+9]=c[9];a[b+10]=c[10];a[b+11]=c[11];a[b+12]=c[12];a[b+13]=c[13];a[b+14]=c[14];a[b+15]=c[15];return a},getPosition:function(){var a;return function(){void 0===a&&(a=new THREE.Vector3);console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");var b=this.elements;return a.set(b[12],b[13],b[14])}}(),setPosition:function(a){var b=this.elements;b[12]=a.x;b[13]=a.y;b[14]=a.z;return this},getInverse:function(a,b){var c=
this.elements,d=a.elements,e=d[0],g=d[4],f=d[8],h=d[12],k=d[1],n=d[5],l=d[9],p=d[13],m=d[2],q=d[6],r=d[10],t=d[14],u=d[3],y=d[7],w=d[11],d=d[15];c[0]=l*t*y-p*r*y+p*q*w-n*t*w-l*q*d+n*r*d;c[4]=h*r*y-f*t*y-h*q*w+g*t*w+f*q*d-g*r*d;c[8]=f*p*y-h*l*y+h*n*w-g*p*w-f*n*d+g*l*d;c[12]=h*l*q-f*p*q-h*n*r+g*p*r+f*n*t-g*l*t;c[1]=p*r*u-l*t*u-p*m*w+k*t*w+l*m*d-k*r*d;c[5]=f*t*u-h*r*u+h*m*w-e*t*w-f*m*d+e*r*d;c[9]=h*l*u-f*p*u-h*k*w+e*p*w+f*k*d-e*l*d;c[13]=f*p*m-h*l*m+h*k*r-e*p*r-f*k*t+e*l*t;c[2]=n*t*u-p*q*u+p*m*y-k*t*
y-n*m*d+k*q*d;c[6]=h*q*u-g*t*u-h*m*y+e*t*y+g*m*d-e*q*d;c[10]=g*p*u-h*n*u+h*k*y-e*p*y-g*k*d+e*n*d;c[14]=h*n*m-g*p*m-h*k*q+e*p*q+g*k*t-e*n*t;c[3]=l*q*u-n*r*u-l*m*y+k*r*y+n*m*w-k*q*w;c[7]=g*r*u-f*q*u+f*m*y-e*r*y-g*m*w+e*q*w;c[11]=f*n*u-g*l*u-f*k*y+e*l*y+g*k*w-e*n*w;c[15]=g*l*m-f*n*m+f*k*q-e*l*q-g*k*r+e*n*r;c=e*c[0]+k*c[4]+m*c[8]+u*c[12];if(0===c){if(b)throw Error("THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0");console.warn("THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0");
this.identity();return this}this.multiplyScalar(1/c);return this},translate:function(a){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(a){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(a){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(a){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(a,b){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},scale:function(a){var b=
this.elements,c=a.x,d=a.y;a=a.z;b[0]*=c;b[4]*=d;b[8]*=a;b[1]*=c;b[5]*=d;b[9]*=a;b[2]*=c;b[6]*=d;b[10]*=a;b[3]*=c;b[7]*=d;b[11]*=a;return this},getMaxScaleOnAxis:function(){var a=this.elements;return Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],Math.max(a[4]*a[4]+a[5]*a[5]+a[6]*a[6],a[8]*a[8]+a[9]*a[9]+a[10]*a[10])))},makeTranslation:function(a,b,c){this.set(1,0,0,a,0,1,0,b,0,0,1,c,0,0,0,1);return this},makeRotationX:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(1,0,0,0,0,b,-a,0,0,a,b,0,
0,0,0,1);return this},makeRotationY:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(b,0,a,0,0,1,0,0,-a,0,b,0,0,0,0,1);return this},makeRotationZ:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(b,-a,0,0,a,b,0,0,0,0,1,0,0,0,0,1);return this},makeRotationAxis:function(a,b){var c=Math.cos(b),d=Math.sin(b),e=1-c,g=a.x,f=a.y,h=a.z,k=e*g,n=e*f;this.set(k*g+c,k*f-d*h,k*h+d*f,0,k*f+d*h,n*f+c,n*h-d*g,0,k*h-d*f,n*h+d*g,e*h*h+c,0,0,0,0,1);return this},makeScale:function(a,b,c){this.set(a,0,0,0,0,b,
0,0,0,0,c,0,0,0,0,1);return this},compose:function(a,b,c){this.makeRotationFromQuaternion(b);this.scale(c);this.setPosition(a);return this},decompose:function(){var a,b;return function(c,d,e){void 0===a&&(a=new THREE.Vector3);void 0===b&&(b=new THREE.Matrix4);var g=this.elements,f=a.set(g[0],g[1],g[2]).length(),h=a.set(g[4],g[5],g[6]).length(),k=a.set(g[8],g[9],g[10]).length();0>this.determinant()&&(f=-f);c.x=g[12];c.y=g[13];c.z=g[14];b.elements.set(this.elements);c=1/f;var g=1/h,n=1/k;b.elements[0]*=
c;b.elements[1]*=c;b.elements[2]*=c;b.elements[4]*=g;b.elements[5]*=g;b.elements[6]*=g;b.elements[8]*=n;b.elements[9]*=n;b.elements[10]*=n;d.setFromRotationMatrix(b);e.x=f;e.y=h;e.z=k;return this}}(),makeFrustum:function(a,b,c,d,e,g){var f=this.elements;f[0]=2*e/(b-a);f[4]=0;f[8]=(b+a)/(b-a);f[12]=0;f[1]=0;f[5]=2*e/(d-c);f[9]=(d+c)/(d-c);f[13]=0;f[2]=0;f[6]=0;f[10]=-(g+e)/(g-e);f[14]=-2*g*e/(g-e);f[3]=0;f[7]=0;f[11]=-1;f[15]=0;return this},makePerspective:function(a,b,c,d){a=c*Math.tan(THREE.Math.degToRad(.5*
a));var e=-a;return this.makeFrustum(e*b,a*b,e,a,c,d)},makeOrthographic:function(a,b,c,d,e,g){var f=this.elements,h=b-a,k=c-d,n=g-e;f[0]=2/h;f[4]=0;f[8]=0;f[12]=-((b+a)/h);f[1]=0;f[5]=2/k;f[9]=0;f[13]=-((c+d)/k);f[2]=0;f[6]=0;f[10]=-2/n;f[14]=-((g+e)/n);f[3]=0;f[7]=0;f[11]=0;f[15]=1;return this},equals:function(a){var b=this.elements;a=a.elements;for(var c=0;16>c;c++)if(b[c]!==a[c])return!1;return!0},fromArray:function(a){this.elements.set(a);return this},toArray:function(){var a=this.elements;return[a[0],
a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15]]},clone:function(){return(new THREE.Matrix4).fromArray(this.elements)}};THREE.Ray=function(a,b){this.origin=void 0!==a?a:new THREE.Vector3;this.direction=void 0!==b?b:new THREE.Vector3};
THREE.Ray.prototype={constructor:THREE.Ray,set:function(a,b){this.origin.copy(a);this.direction.copy(b);return this},copy:function(a){this.origin.copy(a.origin);this.direction.copy(a.direction);return this},at:function(a,b){return(b||new THREE.Vector3).copy(this.direction).multiplyScalar(a).add(this.origin)},recast:function(){var a=new THREE.Vector3;return function(b){this.origin.copy(this.at(b,a));return this}}(),closestPointToPoint:function(a,b){var c=b||new THREE.Vector3;c.subVectors(a,this.origin);
var d=c.dot(this.direction);return 0>d?c.copy(this.origin):c.copy(this.direction).multiplyScalar(d).add(this.origin)},distanceToPoint:function(a){return Math.sqrt(this.distanceSqToPoint(a))},distanceSqToPoint:function(){var a=new THREE.Vector3;return function(b){var c=a.subVectors(b,this.origin).dot(this.direction);if(0>c)return this.origin.distanceToSquared(b);a.copy(this.direction).multiplyScalar(c).add(this.origin);return a.distanceToSquared(b)}}(),distanceSqToSegment:function(){var a=new THREE.Vector3,
b=new THREE.Vector3,c=new THREE.Vector3;return function(d,e,g,f){a.copy(d).add(e).multiplyScalar(.5);b.copy(e).sub(d).normalize();c.copy(this.origin).sub(a);var h=.5*d.distanceTo(e),k=-this.direction.dot(b),n=c.dot(this.direction),l=-c.dot(b),p=c.lengthSq(),m=Math.abs(1-k*k),q;0<m?(d=k*l-n,e=k*n-l,q=h*m,0<=d?e>=-q?e<=q?(h=1/m,d*=h,e*=h,k=d*(d+k*e+2*n)+e*(k*d+e+2*l)+p):(e=h,d=Math.max(0,-(k*e+n)),k=-d*d+e*(e+2*l)+p):(e=-h,d=Math.max(0,-(k*e+n)),k=-d*d+e*(e+2*l)+p):e<=-q?(d=Math.max(0,-(-k*h+n)),e=
0<d?-h:Math.min(Math.max(-h,-l),h),k=-d*d+e*(e+2*l)+p):e<=q?(d=0,e=Math.min(Math.max(-h,-l),h),k=e*(e+2*l)+p):(d=Math.max(0,-(k*h+n)),e=0<d?h:Math.min(Math.max(-h,-l),h),k=-d*d+e*(e+2*l)+p)):(e=0<k?-h:h,d=Math.max(0,-(k*e+n)),k=-d*d+e*(e+2*l)+p);g&&g.copy(this.direction).multiplyScalar(d).add(this.origin);f&&f.copy(b).multiplyScalar(e).add(a);return k}}(),isIntersectionSphere:function(a){return this.distanceToPoint(a.center)<=a.radius},intersectSphere:function(){var a=new THREE.Vector3;return function(b,
c){a.subVectors(b.center,this.origin);var d=a.dot(this.direction),e=a.dot(a)-d*d,g=b.radius*b.radius;if(e>g)return null;g=Math.sqrt(g-e);e=d-g;d+=g;return 0>e&&0>d?null:0>e?this.at(d,c):this.at(e,c)}}(),isIntersectionPlane:function(a){var b=a.distanceToPoint(this.origin);return 0===b||0>a.normal.dot(this.direction)*b?!0:!1},distanceToPlane:function(a){var b=a.normal.dot(this.direction);if(0===b)return 0===a.distanceToPoint(this.origin)?0:null;a=-(this.origin.dot(a.normal)+a.constant)/b;return 0<=
a?a:null},intersectPlane:function(a,b){var c=this.distanceToPlane(a);return null===c?null:this.at(c,b)},isIntersectionBox:function(){var a=new THREE.Vector3;return function(b){return null!==this.intersectBox(b,a)}}(),intersectBox:function(a,b){var c,d,e,g,f;d=1/this.direction.x;g=1/this.direction.y;f=1/this.direction.z;var h=this.origin;0<=d?(c=(a.min.x-h.x)*d,d*=a.max.x-h.x):(c=(a.max.x-h.x)*d,d*=a.min.x-h.x);0<=g?(e=(a.min.y-h.y)*g,g*=a.max.y-h.y):(e=(a.max.y-h.y)*g,g*=a.min.y-h.y);if(c>g||e>d)return null;
if(e>c||c!==c)c=e;if(g<d||d!==d)d=g;0<=f?(e=(a.min.z-h.z)*f,f*=a.max.z-h.z):(e=(a.max.z-h.z)*f,f*=a.min.z-h.z);if(c>f||e>d)return null;if(e>c||c!==c)c=e;if(f<d||d!==d)d=f;return 0>d?null:this.at(0<=c?c:d,b)},intersectTriangle:function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3,d=new THREE.Vector3;return function(e,g,f,h,k){b.subVectors(g,e);c.subVectors(f,e);d.crossVectors(b,c);g=this.direction.dot(d);if(0<g){if(h)return null;h=1}else if(0>g)h=-1,g=-g;else return null;a.subVectors(this.origin,
e);e=h*this.direction.dot(c.crossVectors(a,c));if(0>e)return null;f=h*this.direction.dot(b.cross(a));if(0>f||e+f>g)return null;e=-h*a.dot(d);return 0>e?null:this.at(e/g,k)}}(),applyMatrix4:function(a){this.direction.add(this.origin).applyMatrix4(a);this.origin.applyMatrix4(a);this.direction.sub(this.origin);this.direction.normalize();return this},equals:function(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)},clone:function(){return(new THREE.Ray).copy(this)}};
THREE.Sphere=function(a,b){this.center=void 0!==a?a:new THREE.Vector3;this.radius=void 0!==b?b:0};
THREE.Sphere.prototype={constructor:THREE.Sphere,set:function(a,b){this.center.copy(a);this.radius=b;return this},setFromPoints:function(){var a=new THREE.Box3;return function(b,c){var d=this.center;void 0!==c?d.copy(c):a.setFromPoints(b).center(d);for(var e=0,g=0,f=b.length;g<f;g++)e=Math.max(e,d.distanceToSquared(b[g]));this.radius=Math.sqrt(e);return this}}(),copy:function(a){this.center.copy(a.center);this.radius=a.radius;return this},empty:function(){return 0>=this.radius},containsPoint:function(a){return a.distanceToSquared(this.center)<=
this.radius*this.radius},distanceToPoint:function(a){return a.distanceTo(this.center)-this.radius},intersectsSphere:function(a){var b=this.radius+a.radius;return a.center.distanceToSquared(this.center)<=b*b},clampPoint:function(a,b){var c=this.center.distanceToSquared(a),d=b||new THREE.Vector3;d.copy(a);c>this.radius*this.radius&&(d.sub(this.center).normalize(),d.multiplyScalar(this.radius).add(this.center));return d},getBoundingBox:function(a){a=a||new THREE.Box3;a.set(this.center,this.center);a.expandByScalar(this.radius);
return a},applyMatrix4:function(a){this.center.applyMatrix4(a);this.radius*=a.getMaxScaleOnAxis();return this},translate:function(a){this.center.add(a);return this},equals:function(a){return a.center.equals(this.center)&&a.radius===this.radius},clone:function(){return(new THREE.Sphere).copy(this)}};
THREE.Frustum=function(a,b,c,d,e,g){this.planes=[void 0!==a?a:new THREE.Plane,void 0!==b?b:new THREE.Plane,void 0!==c?c:new THREE.Plane,void 0!==d?d:new THREE.Plane,void 0!==e?e:new THREE.Plane,void 0!==g?g:new THREE.Plane]};
THREE.Frustum.prototype={constructor:THREE.Frustum,set:function(a,b,c,d,e,g){var f=this.planes;f[0].copy(a);f[1].copy(b);f[2].copy(c);f[3].copy(d);f[4].copy(e);f[5].copy(g);return this},copy:function(a){for(var b=this.planes,c=0;6>c;c++)b[c].copy(a.planes[c]);return this},setFromMatrix:function(a){var b=this.planes,c=a.elements;a=c[0];var d=c[1],e=c[2],g=c[3],f=c[4],h=c[5],k=c[6],n=c[7],l=c[8],p=c[9],m=c[10],q=c[11],r=c[12],t=c[13],u=c[14],c=c[15];b[0].setComponents(g-a,n-f,q-l,c-r).normalize();b[1].setComponents(g+
a,n+f,q+l,c+r).normalize();b[2].setComponents(g+d,n+h,q+p,c+t).normalize();b[3].setComponents(g-d,n-h,q-p,c-t).normalize();b[4].setComponents(g-e,n-k,q-m,c-u).normalize();b[5].setComponents(g+e,n+k,q+m,c+u).normalize();return this},intersectsObject:function(){var a=new THREE.Sphere;return function(b){var c=b.geometry;null===c.boundingSphere&&c.computeBoundingSphere();a.copy(c.boundingSphere);a.applyMatrix4(b.matrixWorld);return this.intersectsSphere(a)}}(),intersectsSphere:function(a){var b=this.planes,
c=a.center;a=-a.radius;for(var d=0;6>d;d++)if(b[d].distanceToPoint(c)<a)return!1;return!0},intersectsBox:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c){for(var d=this.planes,e=0;6>e;e++){var g=d[e];a.x=0<g.normal.x?c.min.x:c.max.x;b.x=0<g.normal.x?c.max.x:c.min.x;a.y=0<g.normal.y?c.min.y:c.max.y;b.y=0<g.normal.y?c.max.y:c.min.y;a.z=0<g.normal.z?c.min.z:c.max.z;b.z=0<g.normal.z?c.max.z:c.min.z;var f=g.distanceToPoint(a),g=g.distanceToPoint(b);if(0>f&&0>g)return!1}return!0}}(),
containsPoint:function(a){for(var b=this.planes,c=0;6>c;c++)if(0>b[c].distanceToPoint(a))return!1;return!0},clone:function(){return(new THREE.Frustum).copy(this)}};THREE.Plane=function(a,b){this.normal=void 0!==a?a:new THREE.Vector3(1,0,0);this.constant=void 0!==b?b:0};
THREE.Plane.prototype={constructor:THREE.Plane,set:function(a,b){this.normal.copy(a);this.constant=b;return this},setComponents:function(a,b,c,d){this.normal.set(a,b,c);this.constant=d;return this},setFromNormalAndCoplanarPoint:function(a,b){this.normal.copy(a);this.constant=-b.dot(this.normal);return this},setFromCoplanarPoints:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c,d,e){d=a.subVectors(e,d).cross(b.subVectors(c,d)).normalize();this.setFromNormalAndCoplanarPoint(d,
c);return this}}(),copy:function(a){this.normal.copy(a.normal);this.constant=a.constant;return this},normalize:function(){var a=1/this.normal.length();this.normal.multiplyScalar(a);this.constant*=a;return this},negate:function(){this.constant*=-1;this.normal.negate();return this},distanceToPoint:function(a){return this.normal.dot(a)+this.constant},distanceToSphere:function(a){return this.distanceToPoint(a.center)-a.radius},projectPoint:function(a,b){return this.orthoPoint(a,b).sub(a).negate()},orthoPoint:function(a,
b){var c=this.distanceToPoint(a);return(b||new THREE.Vector3).copy(this.normal).multiplyScalar(c)},isIntersectionLine:function(a){var b=this.distanceToPoint(a.start);a=this.distanceToPoint(a.end);return 0>b&&0<a||0>a&&0<b},intersectLine:function(){var a=new THREE.Vector3;return function(b,c){var d=c||new THREE.Vector3,e=b.delta(a),g=this.normal.dot(e);if(0===g){if(0===this.distanceToPoint(b.start))return d.copy(b.start)}else return g=-(b.start.dot(this.normal)+this.constant)/g,0>g||1<g?void 0:d.copy(e).multiplyScalar(g).add(b.start)}}(),
coplanarPoint:function(a){return(a||new THREE.Vector3).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Matrix3;return function(d,e){var g=e||c.getNormalMatrix(d),g=a.copy(this.normal).applyMatrix3(g),f=this.coplanarPoint(b);f.applyMatrix4(d);this.setFromNormalAndCoplanarPoint(g,f);return this}}(),translate:function(a){this.constant-=a.dot(this.normal);return this},equals:function(a){return a.normal.equals(this.normal)&&
a.constant===this.constant},clone:function(){return(new THREE.Plane).copy(this)}};
THREE.Math={generateUUID:function(){var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),b=Array(36),c=0,d;return function(){for(var e=0;36>e;e++)8===e||13===e||18===e||23===e?b[e]="-":14===e?b[e]="4":(2>=c&&(c=33554432+16777216*Math.random()|0),d=c&15,c>>=4,b[e]=a[19===e?d&3|8:d]);return b.join("")}}(),clamp:function(a,b,c){return a<b?b:a>c?c:a},clampBottom:function(a,b){return a<b?b:a},euclideanModulo:function(a,b){return(a%b+b)%b},mapLinear:function(a,b,c,d,e){return d+
(a-b)*(e-d)/(c-b)},smoothstep:function(a,b,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*(3-2*a)},smootherstep:function(a,b,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*a*(a*(6*a-15)+10)},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(a,b){return a+Math.floor(Math.random()*(b-a+1))},randFloat:function(a,b){return a+Math.random()*(b-a)},randFloatSpread:function(a){return a*(.5-Math.random())},degToRad:function(){var a=Math.PI/
180;return function(b){return b*a}}(),radToDeg:function(){var a=180/Math.PI;return function(b){return b*a}}(),isPowerOfTwo:function(a){return 0===(a&a-1)&&0!==a},nextPowerOfTwo:function(a){a--;a|=a>>1;a|=a>>2;a|=a>>4;a|=a>>8;a|=a>>16;a++;return a}};
THREE.Spline=function(a){function b(a,b,c,d,e,g,f){a=.5*(c-a);d=.5*(d-b);return(2*(b-c)+a+d)*f+(-3*(b-c)-2*a-d)*g+a*e+b}this.points=a;var c=[],d={x:0,y:0,z:0},e,g,f,h,k,n,l,p,m;this.initFromArray=function(a){this.points=[];for(var b=0;b<a.length;b++)this.points[b]={x:a[b][0],y:a[b][1],z:a[b][2]}};this.getPoint=function(a){e=(this.points.length-1)*a;g=Math.floor(e);f=e-g;c[0]=0===g?g:g-1;c[1]=g;c[2]=g>this.points.length-2?this.points.length-1:g+1;c[3]=g>this.points.length-3?this.points.length-1:g+
2;n=this.points[c[0]];l=this.points[c[1]];p=this.points[c[2]];m=this.points[c[3]];h=f*f;k=f*h;d.x=b(n.x,l.x,p.x,m.x,f,h,k);d.y=b(n.y,l.y,p.y,m.y,f,h,k);d.z=b(n.z,l.z,p.z,m.z,f,h,k);return d};this.getControlPointsArray=function(){var a,b,c=this.points.length,d=[];for(a=0;a<c;a++)b=this.points[a],d[a]=[b.x,b.y,b.z];return d};this.getLength=function(a){var b,c,d,e=b=b=0,g=new THREE.Vector3,f=new THREE.Vector3,h=[],k=0;h[0]=0;a||(a=100);c=this.points.length*a;g.copy(this.points[0]);for(a=1;a<c;a++)b=
a/c,d=this.getPoint(b),f.copy(d),k+=f.distanceTo(g),g.copy(d),b*=this.points.length-1,b=Math.floor(b),b!==e&&(h[b]=k,e=b);h[h.length]=k;return{chunks:h,total:k}};this.reparametrizeByArcLength=function(a){var b,c,d,e,g,f,h=[],k=new THREE.Vector3,l=this.getLength();h.push(k.copy(this.points[0]).clone());for(b=1;b<this.points.length;b++){c=l.chunks[b]-l.chunks[b-1];f=Math.ceil(a*c/l.total);e=(b-1)/(this.points.length-1);g=b/(this.points.length-1);for(c=1;c<f-1;c++)d=e+1/f*c*(g-e),d=this.getPoint(d),
h.push(k.copy(d).clone());h.push(k.copy(this.points[b]).clone())}this.points=h}};THREE.Triangle=function(a,b,c){this.a=void 0!==a?a:new THREE.Vector3;this.b=void 0!==b?b:new THREE.Vector3;this.c=void 0!==c?c:new THREE.Vector3};THREE.Triangle.normal=function(){var a=new THREE.Vector3;return function(b,c,d,e){e=e||new THREE.Vector3;e.subVectors(d,c);a.subVectors(b,c);e.cross(a);b=e.lengthSq();return 0<b?e.multiplyScalar(1/Math.sqrt(b)):e.set(0,0,0)}}();
THREE.Triangle.barycoordFromPoint=function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3;return function(d,e,g,f,h){a.subVectors(f,e);b.subVectors(g,e);c.subVectors(d,e);d=a.dot(a);e=a.dot(b);g=a.dot(c);var k=b.dot(b);f=b.dot(c);var n=d*k-e*e;h=h||new THREE.Vector3;if(0===n)return h.set(-2,-1,-1);n=1/n;k=(k*g-e*f)*n;d=(d*f-e*g)*n;return h.set(1-k-d,d,k)}}();
THREE.Triangle.containsPoint=function(){var a=new THREE.Vector3;return function(b,c,d,e){b=THREE.Triangle.barycoordFromPoint(b,c,d,e,a);return 0<=b.x&&0<=b.y&&1>=b.x+b.y}}();
THREE.Triangle.prototype={constructor:THREE.Triangle,set:function(a,b,c){this.a.copy(a);this.b.copy(b);this.c.copy(c);return this},setFromPointsAndIndices:function(a,b,c,d){this.a.copy(a[b]);this.b.copy(a[c]);this.c.copy(a[d]);return this},copy:function(a){this.a.copy(a.a);this.b.copy(a.b);this.c.copy(a.c);return this},area:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(){a.subVectors(this.c,this.b);b.subVectors(this.a,this.b);return.5*a.cross(b).length()}}(),midpoint:function(a){return(a||
new THREE.Vector3).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(a){return THREE.Triangle.normal(this.a,this.b,this.c,a)},plane:function(a){return(a||new THREE.Plane).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(a,b){return THREE.Triangle.barycoordFromPoint(a,this.a,this.b,this.c,b)},containsPoint:function(a){return THREE.Triangle.containsPoint(a,this.a,this.b,this.c)},equals:function(a){return a.a.equals(this.a)&&a.b.equals(this.b)&&a.c.equals(this.c)},
clone:function(){return(new THREE.Triangle).copy(this)}};THREE.Clock=function(a){this.autoStart=void 0!==a?a:!0;this.elapsedTime=this.oldTime=this.startTime=0;this.running=!1};
THREE.Clock.prototype={constructor:THREE.Clock,start:function(){this.oldTime=this.startTime=void 0!==self.performance&&void 0!==self.performance.now?self.performance.now():Date.now();this.running=!0},stop:function(){this.getElapsedTime();this.running=!1},getElapsedTime:function(){this.getDelta();return this.elapsedTime},getDelta:function(){var a=0;this.autoStart&&!this.running&&this.start();if(this.running){var b=void 0!==self.performance&&void 0!==self.performance.now?self.performance.now():Date.now(),
a=.001*(b-this.oldTime);this.oldTime=b;this.elapsedTime+=a}return a}};THREE.EventDispatcher=function(){};
THREE.EventDispatcher.prototype={constructor:THREE.EventDispatcher,apply:function(a){a.addEventListener=THREE.EventDispatcher.prototype.addEventListener;a.hasEventListener=THREE.EventDispatcher.prototype.hasEventListener;a.removeEventListener=THREE.EventDispatcher.prototype.removeEventListener;a.dispatchEvent=THREE.EventDispatcher.prototype.dispatchEvent},addEventListener:function(a,b){void 0===this._listeners&&(this._listeners={});var c=this._listeners;void 0===c[a]&&(c[a]=[]);-1===c[a].indexOf(b)&&
c[a].push(b)},hasEventListener:function(a,b){if(void 0===this._listeners)return!1;var c=this._listeners;return void 0!==c[a]&&-1!==c[a].indexOf(b)?!0:!1},removeEventListener:function(a,b){if(void 0!==this._listeners){var c=this._listeners[a];if(void 0!==c){var d=c.indexOf(b);-1!==d&&c.splice(d,1)}}},dispatchEvent:function(a){if(void 0!==this._listeners){var b=this._listeners[a.type];if(void 0!==b){a.target=this;for(var c=[],d=b.length,e=0;e<d;e++)c[e]=b[e];for(e=0;e<d;e++)c[e].call(this,a)}}}};
(function(a){a.Raycaster=function(b,c,g,f){this.ray=new a.Ray(b,c);this.near=g||0;this.far=f||Infinity;this.params={Sprite:{},Mesh:{},PointCloud:{threshold:1},LOD:{},Line:{}}};var b=function(a,b){return a.distance-b.distance},c=function(a,b,g,f){if(!1!==a.visible&&(a.raycast(b,g),!0===f)){a=a.children;f=0;for(var h=a.length;f<h;f++)c(a[f],b,g,!0)}};a.Raycaster.prototype={constructor:a.Raycaster,linePrecision:1,set:function(a,b){this.ray.set(a,b)},setFromCamera:function(b,c){c instanceof a.PerspectiveCamera?
(this.ray.origin.setFromMatrixPosition(c.matrixWorld),this.ray.direction.set(b.x,b.y,.5).unproject(c).sub(this.ray.origin).normalize()):c instanceof a.OrthographicCamera?(this.ray.origin.set(b.x,b.y,-1).unproject(c),this.ray.direction.set(0,0,-1).transformDirection(c.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(a,e){var g=[];c(a,this,g,e);g.sort(b);return g},intersectObjects:function(a,e){var g=[];if(!1===Array.isArray(a))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),
g;for(var f=0,h=a.length;f<h;f++)c(a[f],this,g,e);g.sort(b);return g}}})(THREE);
THREE.Object3D=function(){Object.defineProperty(this,"id",{value:THREE.Object3DIdCount++});this.uuid=THREE.Math.generateUUID();this.name="";this.type="Object3D";this.parent=void 0;this.children=[];this.up=THREE.Object3D.DefaultUp.clone();var a=new THREE.Vector3,b=new THREE.Euler,c=new THREE.Quaternion,d=new THREE.Vector3(1,1,1);b.onChange(function(){c.setFromEuler(b,!1)});c.onChange(function(){b.setFromQuaternion(c,void 0,!1)});Object.defineProperties(this,{position:{enumerable:!0,value:a},rotation:{enumerable:!0,
value:b},quaternion:{enumerable:!0,value:c},scale:{enumerable:!0,value:d}});this.rotationAutoUpdate=!0;this.matrix=new THREE.Matrix4;this.matrixWorld=new THREE.Matrix4;this.matrixAutoUpdate=!0;this.matrixWorldNeedsUpdate=!1;this.visible=!0;this.receiveShadow=this.castShadow=!1;this.frustumCulled=!0;this.renderOrder=0;this.userData={}};THREE.Object3D.DefaultUp=new THREE.Vector3(0,1,0);
THREE.Object3D.prototype={constructor:THREE.Object3D,get eulerOrder(){console.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order.");return this.rotation.order},set eulerOrder(a){console.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order.");this.rotation.order=a},get useQuaternion(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set useQuaternion(a){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},
set renderDepth(a){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},applyMatrix:function(a){this.matrix.multiplyMatrices(a,this.matrix);this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(a,b){this.quaternion.setFromAxisAngle(a,b)},setRotationFromEuler:function(a){this.quaternion.setFromEuler(a,!0)},setRotationFromMatrix:function(a){this.quaternion.setFromRotationMatrix(a)},setRotationFromQuaternion:function(a){this.quaternion.copy(a)},
rotateOnAxis:function(){var a=new THREE.Quaternion;return function(b,c){a.setFromAxisAngle(b,c);this.quaternion.multiply(a);return this}}(),rotateX:function(){var a=new THREE.Vector3(1,0,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateY:function(){var a=new THREE.Vector3(0,1,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateZ:function(){var a=new THREE.Vector3(0,0,1);return function(b){return this.rotateOnAxis(a,b)}}(),translateOnAxis:function(){var a=new THREE.Vector3;return function(b,
c){a.copy(b).applyQuaternion(this.quaternion);this.position.add(a.multiplyScalar(c));return this}}(),translate:function(a,b){console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.");return this.translateOnAxis(b,a)},translateX:function(){var a=new THREE.Vector3(1,0,0);return function(b){return this.translateOnAxis(a,b)}}(),translateY:function(){var a=new THREE.Vector3(0,1,0);return function(b){return this.translateOnAxis(a,b)}}(),translateZ:function(){var a=
new THREE.Vector3(0,0,1);return function(b){return this.translateOnAxis(a,b)}}(),localToWorld:function(a){return a.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var a=new THREE.Matrix4;return function(b){return b.applyMatrix4(a.getInverse(this.matrixWorld))}}(),lookAt:function(){var a=new THREE.Matrix4;return function(b){a.lookAt(b,this.position,this.up);this.quaternion.setFromRotationMatrix(a)}}(),add:function(a){if(1<arguments.length){for(var b=0;b<arguments.length;b++)this.add(arguments[b]);
return this}if(a===this)return console.error("THREE.Object3D.add: object can't be added as a child of itself.",a),this;a instanceof THREE.Object3D?(void 0!==a.parent&&a.parent.remove(a),a.parent=this,a.dispatchEvent({type:"added"}),this.children.push(a)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",a);return this},remove:function(a){if(1<arguments.length)for(var b=0;b<arguments.length;b++)this.remove(arguments[b]);b=this.children.indexOf(a);-1!==b&&(a.parent=void 0,
a.dispatchEvent({type:"removed"}),this.children.splice(b,1))},getChildByName:function(a){console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().");return this.getObjectByName(a)},getObjectById:function(a){return this.getObjectByProperty("id",a)},getObjectByName:function(a){return this.getObjectByProperty("name",a)},getObjectByProperty:function(a,b){if(this[a]===b)return this;for(var c=0,d=this.children.length;c<d;c++){var e=this.children[c].getObjectByProperty(a,b);
if(void 0!==e)return e}},getWorldPosition:function(a){a=a||new THREE.Vector3;this.updateMatrixWorld(!0);return a.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c){c=c||new THREE.Quaternion;this.updateMatrixWorld(!0);this.matrixWorld.decompose(a,c,b);return c}}(),getWorldRotation:function(){var a=new THREE.Quaternion;return function(b){b=b||new THREE.Euler;this.getWorldQuaternion(a);return b.setFromQuaternion(a,this.rotation.order,
!1)}}(),getWorldScale:function(){var a=new THREE.Vector3,b=new THREE.Quaternion;return function(c){c=c||new THREE.Vector3;this.updateMatrixWorld(!0);this.matrixWorld.decompose(a,b,c);return c}}(),getWorldDirection:function(){var a=new THREE.Quaternion;return function(b){b=b||new THREE.Vector3;this.getWorldQuaternion(a);return b.set(0,0,1).applyQuaternion(a)}}(),raycast:function(){},traverse:function(a){a(this);for(var b=0,c=this.children.length;b<c;b++)this.children[b].traverse(a)},traverseVisible:function(a){if(!1!==
this.visible){a(this);for(var b=0,c=this.children.length;b<c;b++)this.children[b].traverseVisible(a)}},traverseAncestors:function(a){this.parent&&(a(this.parent),this.parent.traverseAncestors(a))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale);this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(a){!0===this.matrixAutoUpdate&&this.updateMatrix();if(!0===this.matrixWorldNeedsUpdate||!0===a)void 0===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,
this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0;for(var b=0,c=this.children.length;b<c;b++)this.children[b].updateMatrixWorld(a)},toJSON:function(a){function b(a){var b=[],c;for(c in a){var d=a[c];delete d.metadata;b.push(d)}return b}var c=void 0===a,d={};c&&(a={geometries:{},materials:{},textures:{},images:{}},d.metadata={version:4.4,type:"Object",generator:"Object3D.toJSON"});d.uuid=this.uuid;d.type=this.type;""!==this.name&&(d.name=this.name);"{}"!==JSON.stringify(this.userData)&&(d.userData=
this.userData);!0!==this.visible&&(d.visible=this.visible);d.matrix=this.matrix.toArray();if(0<this.children.length){d.children=[];for(var e=0;e<this.children.length;e++)d.children.push(this.children[e].toJSON(a).object)}e={};if(c){var c=b(a.geometries),g=b(a.materials),f=b(a.textures);a=b(a.images);0<c.length&&(e.geometries=c);0<g.length&&(e.materials=g);0<f.length&&(e.textures=f);0<a.length&&(e.images=a)}e.object=d;return e},clone:function(a){return(new THREE.Object3D).copy(this,a)},copy:function(a,
b){void 0===b&&(b=!0);this.name=a.name;this.up.copy(a.up);this.position.copy(a.position);this.quaternion.copy(a.quaternion);this.scale.copy(a.scale);this.rotationAutoUpdate=a.rotationAutoUpdate;this.matrix.copy(a.matrix);this.matrixWorld.copy(a.matrixWorld);this.matrixAutoUpdate=a.matrixAutoUpdate;this.matrixWorldNeedsUpdate=a.matrixWorldNeedsUpdate;this.visible=a.visible;this.castShadow=a.castShadow;this.receiveShadow=a.receiveShadow;this.frustumCulled=a.frustumCulled;this.renderOrder=a.renderOrder;
this.userData=JSON.parse(JSON.stringify(a.userData));if(!0===b)for(var c=0;c<a.children.length;c++)this.add(a.children[c].clone());return this}};THREE.EventDispatcher.prototype.apply(THREE.Object3D.prototype);THREE.Object3DIdCount=0;
THREE.Face3=function(a,b,c,d,e,g){this.a=a;this.b=b;this.c=c;this.normal=d instanceof THREE.Vector3?d:new THREE.Vector3;this.vertexNormals=Array.isArray(d)?d:[];this.color=e instanceof THREE.Color?e:new THREE.Color;this.vertexColors=Array.isArray(e)?e:[];this.vertexTangents=[];this.materialIndex=void 0!==g?g:0};
THREE.Face3.prototype={constructor:THREE.Face3,copy:function(a){this.a=a.a;this.b=a.b;this.c=a.c;this.normal.copy(a.normal);this.color.copy(a.color);this.materialIndex=a.materialIndex;for(var b=0,c=a.vertexNormals.length;b<c;b++)this.vertexNormals[b]=a.vertexNormals[b].clone();b=0;for(c=a.vertexColors.length;b<c;b++)this.vertexColors[b]=a.vertexColors[b].clone();b=0;for(c=a.vertexTangents.length;b<c;b++)this.vertexTangents[b]=a.vertexTangents[b].clone();return this},clone:function(){return(new THREE.Face3).copy(this)}};
THREE.Face4=function(a,b,c,d,e,g,f){console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead.");return new THREE.Face3(a,b,c,e,g,f)};THREE.BufferAttribute=function(a,b){this.uuid=THREE.Math.generateUUID();this.array=a;this.itemSize=b;this.version=0};
THREE.BufferAttribute.prototype={constructor:THREE.BufferAttribute,get length(){console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count.");return this.array.length},get count(){return this.array.length/this.itemSize},set needsUpdate(a){!0===a&&this.version++},copyAt:function(a,b,c){a*=this.itemSize;c*=b.itemSize;for(var d=0,e=this.itemSize;d<e;d++)this.array[a+d]=b.array[c+d];return this},copyArray:function(a){this.array.set(a);return this},copyColorsArray:function(a){for(var b=
this.array,c=0,d=0,e=a.length;d<e;d++){var g=a[d];void 0===g&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",d),g=new THREE.Color);b[c++]=g.r;b[c++]=g.g;b[c++]=g.b}return this},copyIndicesArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var g=a[d];b[c++]=g.a;b[c++]=g.b;b[c++]=g.c}return this},copyVector2sArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var g=a[d];void 0===g&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",
d),g=new THREE.Vector2);b[c++]=g.x;b[c++]=g.y}return this},copyVector3sArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var g=a[d];void 0===g&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",d),g=new THREE.Vector3);b[c++]=g.x;b[c++]=g.y;b[c++]=g.z}return this},copyVector4sArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var g=a[d];void 0===g&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",d),g=new THREE.Vector4);
b[c++]=g.x;b[c++]=g.y;b[c++]=g.z;b[c++]=g.w}return this},set:function(a,b){void 0===b&&(b=0);this.array.set(a,b);return this},getX:function(a){return this.array[a*this.itemSize]},setX:function(a,b){this.array[a*this.itemSize]=b;return this},getY:function(a){return this.array[a*this.itemSize+1]},setY:function(a,b){this.array[a*this.itemSize+1]=b;return this},getZ:function(a){return this.array[a*this.itemSize+2]},setZ:function(a,b){this.array[a*this.itemSize+2]=b;return this},getW:function(a){return this.array[a*
this.itemSize+3]},setW:function(a,b){this.array[a*this.itemSize+3]=b;return this},setXY:function(a,b,c){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=c;return this},setXYZ:function(a,b,c,d){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=c;this.array[a+2]=d;return this},setXYZW:function(a,b,c,d,e){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=c;this.array[a+2]=d;this.array[a+3]=e;return this},clone:function(){return new THREE.BufferAttribute(new this.array.constructor(this.array),this.itemSize)}};
THREE.Int8Attribute=function(a,b){return new THREE.BufferAttribute(new Int8Array(a),b)};THREE.Uint8Attribute=function(a,b){return new THREE.BufferAttribute(new Uint8Array(a),b)};THREE.Uint8ClampedAttribute=function(a,b){return new THREE.BufferAttribute(new Uint8ClampedArray(a),b)};THREE.Int16Attribute=function(a,b){return new THREE.BufferAttribute(new Int16Array(a),b)};THREE.Uint16Attribute=function(a,b){return new THREE.BufferAttribute(new Uint16Array(a),b)};
THREE.Int32Attribute=function(a,b){return new THREE.BufferAttribute(new Int32Array(a),b)};THREE.Uint32Attribute=function(a,b){return new THREE.BufferAttribute(new Uint32Array(a),b)};THREE.Float32Attribute=function(a,b){return new THREE.BufferAttribute(new Float32Array(a),b)};THREE.Float64Attribute=function(a,b){return new THREE.BufferAttribute(new Float64Array(a),b)};THREE.DynamicBufferAttribute=function(a,b){THREE.BufferAttribute.call(this,a,b);this.updateRange={offset:0,count:-1}};
THREE.DynamicBufferAttribute.prototype=Object.create(THREE.BufferAttribute.prototype);THREE.DynamicBufferAttribute.prototype.constructor=THREE.DynamicBufferAttribute;THREE.DynamicBufferAttribute.prototype.clone=function(){return new THREE.DynamicBufferAttribute(new this.array.constructor(this.array),this.itemSize)};THREE.InstancedBufferAttribute=function(a,b,c,d){THREE.DynamicBufferAttribute.call(this,a,b);this.dynamic=d||!1;this.meshPerAttribute=c||1};THREE.InstancedBufferAttribute.prototype=Object.create(THREE.DynamicBufferAttribute.prototype);
THREE.InstancedBufferAttribute.prototype.constructor=THREE.InstancedBufferAttribute;THREE.InstancedBufferAttribute.prototype.clone=function(){return new THREE.InstancedBufferAttribute(new this.array.constructor(this.array),this.itemSize,this.meshPerAttribute,this.dynamic)};THREE.InterleavedBuffer=function(a,b,c){this.uuid=THREE.Math.generateUUID();this.array=a;this.stride=b;this.version=0;this.dynamic=c||!1;this.updateRange={offset:0,count:-1}};
THREE.InterleavedBuffer.prototype={constructor:THREE.InterleavedBuffer,get length(){return this.array.length},get count(){return this.array.length/this.stride},set needsUpdate(a){!0===a&&this.version++},copyAt:function(a,b,c){a*=this.stride;c*=b.stride;for(var d=0,e=this.stride;d<e;d++)this.array[a+d]=b.array[c+d];return this},set:function(a,b){void 0===b&&(b=0);this.array.set(a,b);return this},clone:function(){return new THREE.InterleavedBuffer(new this.array.constructor(this.array),this.stride,
this.dynamic)}};THREE.InstancedInterleavedBuffer=function(a,b,c,d){THREE.InterleavedBuffer.call(this,a,b,c);this.meshPerAttribute=d||1};THREE.InstancedInterleavedBuffer.prototype=Object.create(THREE.InterleavedBuffer.prototype);THREE.InstancedInterleavedBuffer.prototype.constructor=THREE.InstancedInterleavedBuffer;THREE.InstancedInterleavedBuffer.prototype.clone=function(){return new THREE.InstancedInterleavedBuffer(new this.array.constructor(this.array),this.stride,this.dynamic,this.meshPerAttribute)};
THREE.InterleavedBufferAttribute=function(a,b,c){this.uuid=THREE.Math.generateUUID();this.data=a;this.itemSize=b;this.offset=c};
THREE.InterleavedBufferAttribute.prototype={constructor:THREE.InterleavedBufferAttribute,get length(){console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count.");return this.array.length},get count(){return this.data.array.length/this.data.stride},setX:function(a,b){this.data.array[a*this.data.stride+this.offset]=b;return this},setY:function(a,b){this.data.array[a*this.data.stride+this.offset+1]=b;return this},setZ:function(a,b){this.data.array[a*this.data.stride+this.offset+
2]=b;return this},setW:function(a,b){this.data.array[a*this.data.stride+this.offset+3]=b;return this},getX:function(a){return this.data.array[a*this.data.stride+this.offset]},getY:function(a){return this.data.array[a*this.data.stride+this.offset+1]},getZ:function(a){return this.data.array[a*this.data.stride+this.offset+2]},getW:function(a){return this.data.array[a*this.data.stride+this.offset+3]},setXY:function(a,b,c){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;
return this},setXYZ:function(a,b,c,d){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;this.data.array[a+2]=d;return this},setXYZW:function(a,b,c,d,e){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;this.data.array[a+2]=d;this.data.array[a+3]=e;return this}};
THREE.Geometry=function(){Object.defineProperty(this,"id",{value:THREE.GeometryIdCount++});this.uuid=THREE.Math.generateUUID();this.name="";this.type="Geometry";this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphColors=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.tangentsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=
this.elementsNeedUpdate=this.verticesNeedUpdate=this.hasTangents=!1};
THREE.Geometry.prototype={constructor:THREE.Geometry,applyMatrix:function(a){for(var b=(new THREE.Matrix3).getNormalMatrix(a),c=0,d=this.vertices.length;c<d;c++)this.vertices[c].applyMatrix4(a);c=0;for(d=this.faces.length;c<d;c++){a=this.faces[c];a.normal.applyMatrix3(b).normalize();for(var e=0,g=a.vertexNormals.length;e<g;e++)a.vertexNormals[e].applyMatrix3(b).normalize()}null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();this.normalsNeedUpdate=
this.verticesNeedUpdate=!0},fromBufferGeometry:function(a){var b=this,c=a.attributes,d=c.position.array,e=void 0!==c.index?c.index.array:void 0,g=void 0!==c.normal?c.normal.array:void 0,f=void 0!==c.color?c.color.array:void 0,h=void 0!==c.uv?c.uv.array:void 0,k=void 0!==c.uv2?c.uv2.array:void 0,n=void 0!==c.tangent?c.tangent.array:void 0;void 0!==k&&(this.faceVertexUvs[1]=[]);void 0!==n&&(this.hasTangents=!0);for(var l=[],p=[],m=[],q=[],r=c=0,t=0;c<d.length;c+=3,r+=2,t+=4)b.vertices.push(new THREE.Vector3(d[c],
d[c+1],d[c+2])),void 0!==g&&l.push(new THREE.Vector3(g[c],g[c+1],g[c+2])),void 0!==f&&b.colors.push(new THREE.Color(f[c],f[c+1],f[c+2])),void 0!==h&&p.push(new THREE.Vector2(h[r],h[r+1])),void 0!==k&&m.push(new THREE.Vector2(k[r],k[r+1])),void 0!==n&&q.push(new THREE.Vector4(n[t],n[t+1],n[t+2],n[t+3]));t=function(a,c,d){var e=void 0!==g?[l[a].clone(),l[c].clone(),l[d].clone()]:[],r=void 0!==f?[b.colors[a].clone(),b.colors[c].clone(),b.colors[d].clone()]:[],e=new THREE.Face3(a,c,d,e,r);b.faces.push(e);
void 0!==h&&b.faceVertexUvs[0].push([p[a].clone(),p[c].clone(),p[d].clone()]);void 0!==k&&b.faceVertexUvs[1].push([m[a].clone(),m[c].clone(),m[d].clone()]);void 0!==n&&e.vertexTangents.push(q[a].clone(),q[c].clone(),q[d].clone())};if(void 0!==e)if(d=a.drawcalls,0<d.length)for(c=0;c<d.length;c++)for(var r=d[c],u=r.start,y=r.count,w=r.index,r=u,u=u+y;r<u;r+=3)t(w+e[r],w+e[r+1],w+e[r+2]);else for(c=0;c<e.length;c+=3)t(e[c],e[c+1],e[c+2]);else for(c=0;c<d.length/3;c+=3)t(c,c+1,c+2);this.computeFaceNormals();
null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone());null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone());return this},center:function(){this.computeBoundingBox();var a=this.boundingBox.center().negate();this.applyMatrix((new THREE.Matrix4).setPosition(a));return a},normalize:function(){this.computeBoundingSphere();var a=this.boundingSphere.center,b=this.boundingSphere.radius,b=0===b?1:1/b,c=new THREE.Matrix4;c.set(b,0,0,-b*a.x,0,b,0,-b*a.y,0,0,b,-b*a.z,0,0,0,1);this.applyMatrix(c);
return this},computeFaceNormals:function(){for(var a=new THREE.Vector3,b=new THREE.Vector3,c=0,d=this.faces.length;c<d;c++){var e=this.faces[c],g=this.vertices[e.a],f=this.vertices[e.b];a.subVectors(this.vertices[e.c],f);b.subVectors(g,f);a.cross(b);a.normalize();e.normal.copy(a)}},computeVertexNormals:function(a){var b,c,d;d=Array(this.vertices.length);b=0;for(c=this.vertices.length;b<c;b++)d[b]=new THREE.Vector3;if(a){var e,g,f,h=new THREE.Vector3,k=new THREE.Vector3;a=0;for(b=this.faces.length;a<
b;a++)c=this.faces[a],e=this.vertices[c.a],g=this.vertices[c.b],f=this.vertices[c.c],h.subVectors(f,g),k.subVectors(e,g),h.cross(k),d[c.a].add(h),d[c.b].add(h),d[c.c].add(h)}else for(a=0,b=this.faces.length;a<b;a++)c=this.faces[a],d[c.a].add(c.normal),d[c.b].add(c.normal),d[c.c].add(c.normal);b=0;for(c=this.vertices.length;b<c;b++)d[b].normalize();a=0;for(b=this.faces.length;a<b;a++)c=this.faces[a],e=c.vertexNormals,3===e.length?(e[0].copy(d[c.a]),e[1].copy(d[c.b]),e[2].copy(d[c.c])):(e[0]=d[c.a].clone(),
e[1]=d[c.b].clone(),e[2]=d[c.c].clone())},computeMorphNormals:function(){var a,b,c,d,e;c=0;for(d=this.faces.length;c<d;c++)for(e=this.faces[c],e.__originalFaceNormal?e.__originalFaceNormal.copy(e.normal):e.__originalFaceNormal=e.normal.clone(),e.__originalVertexNormals||(e.__originalVertexNormals=[]),a=0,b=e.vertexNormals.length;a<b;a++)e.__originalVertexNormals[a]?e.__originalVertexNormals[a].copy(e.vertexNormals[a]):e.__originalVertexNormals[a]=e.vertexNormals[a].clone();var g=new THREE.Geometry;
g.faces=this.faces;a=0;for(b=this.morphTargets.length;a<b;a++){if(!this.morphNormals[a]){this.morphNormals[a]={};this.morphNormals[a].faceNormals=[];this.morphNormals[a].vertexNormals=[];e=this.morphNormals[a].faceNormals;var f=this.morphNormals[a].vertexNormals,h,k;c=0;for(d=this.faces.length;c<d;c++)h=new THREE.Vector3,k={a:new THREE.Vector3,b:new THREE.Vector3,c:new THREE.Vector3},e.push(h),f.push(k)}f=this.morphNormals[a];g.vertices=this.morphTargets[a].vertices;g.computeFaceNormals();g.computeVertexNormals();
c=0;for(d=this.faces.length;c<d;c++)e=this.faces[c],h=f.faceNormals[c],k=f.vertexNormals[c],h.copy(e.normal),k.a.copy(e.vertexNormals[0]),k.b.copy(e.vertexNormals[1]),k.c.copy(e.vertexNormals[2])}c=0;for(d=this.faces.length;c<d;c++)e=this.faces[c],e.normal=e.__originalFaceNormal,e.vertexNormals=e.__originalVertexNormals},computeTangents:function(){var a,b,c,d,e,g,f,h,k,n,l,p,m,q,r,t,u,y=[],w=[];c=new THREE.Vector3;var A=new THREE.Vector3,v=new THREE.Vector3,z=new THREE.Vector3,C=new THREE.Vector3;
a=0;for(b=this.vertices.length;a<b;a++)y[a]=new THREE.Vector3,w[a]=new THREE.Vector3;a=0;for(b=this.faces.length;a<b;a++)e=this.faces[a],g=this.faceVertexUvs[0][a],d=e.a,u=e.b,e=e.c,f=this.vertices[d],h=this.vertices[u],k=this.vertices[e],n=g[0],l=g[1],p=g[2],g=h.x-f.x,m=k.x-f.x,q=h.y-f.y,r=k.y-f.y,h=h.z-f.z,f=k.z-f.z,k=l.x-n.x,t=p.x-n.x,l=l.y-n.y,n=p.y-n.y,p=1/(k*n-t*l),c.set((n*g-l*m)*p,(n*q-l*r)*p,(n*h-l*f)*p),A.set((k*m-t*g)*p,(k*r-t*q)*p,(k*f-t*h)*p),y[d].add(c),y[u].add(c),y[e].add(c),w[d].add(A),
w[u].add(A),w[e].add(A);A=["a","b","c","d"];a=0;for(b=this.faces.length;a<b;a++)for(e=this.faces[a],c=0;c<Math.min(e.vertexNormals.length,3);c++)C.copy(e.vertexNormals[c]),d=e[A[c]],u=y[d],v.copy(u),v.sub(C.multiplyScalar(C.dot(u))).normalize(),z.crossVectors(e.vertexNormals[c],u),d=z.dot(w[d]),d=0>d?-1:1,e.vertexTangents[c]=new THREE.Vector4(v.x,v.y,v.z,d);this.hasTangents=!0},computeLineDistances:function(){for(var a=0,b=this.vertices,c=0,d=b.length;c<d;c++)0<c&&(a+=b[c].distanceTo(b[c-1])),this.lineDistances[c]=
a},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);this.boundingSphere.setFromPoints(this.vertices)},merge:function(a,b,c){if(!1===a instanceof THREE.Geometry)console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",a);else{var d,e=this.vertices.length,g=this.vertices,f=a.vertices,h=this.faces,
k=a.faces,n=this.faceVertexUvs[0];a=a.faceVertexUvs[0];void 0===c&&(c=0);void 0!==b&&(d=(new THREE.Matrix3).getNormalMatrix(b));for(var l=0,p=f.length;l<p;l++){var m=f[l].clone();void 0!==b&&m.applyMatrix4(b);g.push(m)}l=0;for(p=k.length;l<p;l++){var f=k[l],q,r=f.vertexNormals,t=f.vertexColors,m=new THREE.Face3(f.a+e,f.b+e,f.c+e);m.normal.copy(f.normal);void 0!==d&&m.normal.applyMatrix3(d).normalize();b=0;for(g=r.length;b<g;b++)q=r[b].clone(),void 0!==d&&q.applyMatrix3(d).normalize(),m.vertexNormals.push(q);
m.color.copy(f.color);b=0;for(g=t.length;b<g;b++)q=t[b],m.vertexColors.push(q.clone());m.materialIndex=f.materialIndex+c;h.push(m)}l=0;for(p=a.length;l<p;l++)if(c=a[l],d=[],void 0!==c){b=0;for(g=c.length;b<g;b++)d.push(c[b].clone());n.push(d)}}},mergeMesh:function(a){!1===a instanceof THREE.Mesh?console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",a):(a.matrixAutoUpdate&&a.updateMatrix(),this.merge(a.geometry,a.matrix))},mergeVertices:function(){var a={},b=[],c=[],d,e=Math.pow(10,
4),g,f;g=0;for(f=this.vertices.length;g<f;g++)d=this.vertices[g],d=Math.round(d.x*e)+"_"+Math.round(d.y*e)+"_"+Math.round(d.z*e),void 0===a[d]?(a[d]=g,b.push(this.vertices[g]),c[g]=b.length-1):c[g]=c[a[d]];a=[];g=0;for(f=this.faces.length;g<f;g++)for(e=this.faces[g],e.a=c[e.a],e.b=c[e.b],e.c=c[e.c],e=[e.a,e.b,e.c],d=0;3>d;d++)if(e[d]===e[(d+1)%3]){a.push(g);break}for(g=a.length-1;0<=g;g--)for(e=a[g],this.faces.splice(e,1),c=0,f=this.faceVertexUvs.length;c<f;c++)this.faceVertexUvs[c].splice(e,1);g=
this.vertices.length-b.length;this.vertices=b;return g},toJSON:function(){function a(a,b,c){return c?a|1<<b:a&~(1<<b)}function b(a){var b=a.x.toString()+a.y.toString()+a.z.toString();if(void 0!==n[b])return n[b];n[b]=k.length/3;k.push(a.x,a.y,a.z);return n[b]}function c(a){var b=a.r.toString()+a.g.toString()+a.b.toString();if(void 0!==p[b])return p[b];p[b]=l.length;l.push(a.getHex());return p[b]}function d(a){var b=a.x.toString()+a.y.toString();if(void 0!==q[b])return q[b];q[b]=m.length/2;m.push(a.x,
a.y);return q[b]}var e={metadata:{version:4.4,type:"Geometry",generator:"Geometry.toJSON"}};e.uuid=this.uuid;e.type=this.type;""!==this.name&&(e.name=this.name);if(void 0!==this.parameters){var g=this.parameters,f;for(f in g)void 0!==g[f]&&(e[f]=g[f]);return e}g=[];for(f=0;f<this.vertices.length;f++){var h=this.vertices[f];g.push(h.x,h.y,h.z)}var h=[],k=[],n={},l=[],p={},m=[],q={};for(f=0;f<this.faces.length;f++){var r=this.faces[f],t=void 0!==this.faceVertexUvs[0][f],u=0<r.normal.length(),y=0<r.vertexNormals.length,
w=1!==r.color.r||1!==r.color.g||1!==r.color.b,A=0<r.vertexColors.length,v=0,v=a(v,0,0),v=a(v,1,!1),v=a(v,2,!1),v=a(v,3,t),v=a(v,4,u),v=a(v,5,y),v=a(v,6,w),v=a(v,7,A);h.push(v);h.push(r.a,r.b,r.c);t&&(t=this.faceVertexUvs[0][f],h.push(d(t[0]),d(t[1]),d(t[2])));u&&h.push(b(r.normal));y&&(u=r.vertexNormals,h.push(b(u[0]),b(u[1]),b(u[2])));w&&h.push(c(r.color));A&&(r=r.vertexColors,h.push(c(r[0]),c(r[1]),c(r[2])))}e.data={};e.data.vertices=g;e.data.normals=k;0<l.length&&(e.data.colors=l);0<m.length&&
(e.data.uvs=[m]);e.data.faces=h;return e},clone:function(){return(new THREE.Geometry).copy(this)},copy:function(a){this.vertices=[];this.faces=[];this.faceVertexUvs=[[]];for(var b=a.vertices,c=0,d=b.length;c<d;c++)this.vertices.push(b[c].clone());b=a.faces;c=0;for(d=b.length;c<d;c++)this.faces.push(b[c].clone());c=0;for(d=a.faceVertexUvs.length;c<d;c++){b=a.faceVertexUvs[c];void 0===this.faceVertexUvs[c]&&(this.faceVertexUvs[c]=[]);for(var e=0,g=b.length;e<g;e++){for(var f=b[e],h=[],k=0,n=f.length;k<
n;k++)h.push(f[k].clone());this.faceVertexUvs[c].push(h)}}return this},dispose:function(){this.dispatchEvent({type:"dispose"})},set groupsNeedUpdate(a){!0===a&&this.dispose()}};THREE.EventDispatcher.prototype.apply(THREE.Geometry.prototype);THREE.GeometryIdCount=0;
THREE.DirectGeometry=function(){Object.defineProperty(this,"id",{value:THREE.GeometryIdCount++});this.uuid=THREE.Math.generateUUID();this.name="";this.type="DirectGeometry";this.indices=[];this.vertices=[];this.normals=[];this.colors=[];this.uvs=[];this.uvs2=[];this.tangents=[];this.morphTargets={};this.skinWeights=[];this.skinIndices=[];this.boundingSphere=this.boundingBox=null;this.tangentsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1};
THREE.DirectGeometry.prototype={constructor:THREE.DirectGeometry,computeBoundingBox:THREE.Geometry.prototype.computeBoundingBox,computeBoundingSphere:THREE.Geometry.prototype.computeBoundingSphere,computeFaceNormals:function(){console.warn("THREE.DirectGeometry: computeFaceNormals() is not a method of this type of geometry.");return this},computeVertexNormals:function(){console.warn("THREE.DirectGeometry: computeVertexNormals() is not a method of this type of geometry.");return this},computeTangents:function(){console.warn("THREE.DirectGeometry: computeTangents() is not a method of this type of geometry.");
return this},fromGeometry:function(a){var b=a.faces,c=a.vertices,d=a.faceVertexUvs,e=d[0]&&0<d[0].length,g=d[1]&&0<d[1].length,f=a.hasTangents,h=a.morphTargets,k=h.length;if(0<k){for(var n=[],l=0;l<k;l++)n[l]=[];this.morphTargets.position=n}var p=a.morphNormals,m=p.length;if(0<m){for(var q=[],l=0;l<m;l++)q[l]=[];this.morphTargets.normal=q}for(var r=a.skinIndices,t=a.skinWeights,u=r.length===c.length,y=t.length===c.length,l=0;l<b.length;l++){var w=b[l];this.vertices.push(c[w.a],c[w.b],c[w.c]);var A=
w.vertexNormals;3===A.length?this.normals.push(A[0],A[1],A[2]):(A=w.normal,this.normals.push(A,A,A));A=w.vertexColors;3===A.length?this.colors.push(A[0],A[1],A[2]):(A=w.color,this.colors.push(A,A,A));!0===e&&(A=d[0][l],void 0!==A?this.uvs.push(A[0],A[1],A[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",l),this.uvs.push(new THREE.Vector2,new THREE.Vector2,new THREE.Vector2)));!0===g&&(A=d[1][l],void 0!==A?this.uvs2.push(A[0],A[1],A[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",
l),this.uvs2.push(new THREE.Vector2,new THREE.Vector2,new THREE.Vector2)));!0===f&&(A=w.vertexTangents,3===A.length?this.tangents.push(A[0],A[1],A[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined tangents ",l),this.tangents.push(new THREE.Vector4,new THREE.Vector4,new THREE.Vector4)));for(A=0;A<k;A++){var v=h[A].vertices;n[A].push(v[w.a],v[w.b],v[w.c])}for(A=0;A<m;A++)v=p[A].vertexNormals[l],q[A].push(v.a,v.b,v.c);u&&this.skinIndices.push(r[w.a],r[w.b],r[w.c]);y&&this.skinWeights.push(t[w.a],
t[w.b],t[w.c])}this.verticesNeedUpdate=a.verticesNeedUpdate;this.normalsNeedUpdate=a.normalsNeedUpdate;this.colorsNeedUpdate=a.colorsNeedUpdate;this.uvsNeedUpdate=a.uvsNeedUpdate;this.tangentsNeedUpdate=a.tangentsNeedUpdate;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.DirectGeometry.prototype);
THREE.BufferGeometry=function(){Object.defineProperty(this,"id",{value:THREE.GeometryIdCount++});this.uuid=THREE.Math.generateUUID();this.name="";this.type="BufferGeometry";this.attributes={};this.morphAttributes={};this.drawcalls=[];this.boundingSphere=this.boundingBox=null};
THREE.BufferGeometry.prototype={constructor:THREE.BufferGeometry,addAttribute:function(a,b,c){!1===b instanceof THREE.BufferAttribute&&!1===b instanceof THREE.InterleavedBufferAttribute?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.attributes[a]={array:b,itemSize:c}):this.attributes[a]=b},getAttribute:function(a){return this.attributes[a]},removeAttribute:function(a){delete this.attributes[a]},get offsets(){console.warn("THREE.BufferGeometry: .offsets has been renamed to .drawcalls.");
return this.drawcalls},addDrawCall:function(a,b,c){this.drawcalls.push({start:a,count:b,index:void 0!==c?c:0})},clearDrawCalls:function(){this.drawcalls=[]},applyMatrix:function(a){var b=this.attributes.position;void 0!==b&&(a.applyToVector3Array(b.array),b.needsUpdate=!0);b=this.attributes.normal;void 0!==b&&((new THREE.Matrix3).getNormalMatrix(a).applyToVector3Array(b.array),b.needsUpdate=!0);null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere()},
center:function(){this.computeBoundingBox();var a=this.boundingBox.center().negate();this.applyMatrix((new THREE.Matrix4).setPosition(a));return a},setFromObject:function(a){var b=a.geometry;if(a instanceof THREE.PointCloud||a instanceof THREE.Line){a=new THREE.Float32Attribute(3*b.vertices.length,3);var c=new THREE.Float32Attribute(3*b.colors.length,3);this.addAttribute("position",a.copyVector3sArray(b.vertices));this.addAttribute("color",c.copyColorsArray(b.colors));b.lineDistances&&b.lineDistances.length===
b.vertices.length&&(a=new THREE.Float32Attribute(b.lineDistances.length,1),this.addAttribute("lineDistance",a.copyArray(b.lineDistances)));null!==b.boundingSphere&&(this.boundingSphere=b.boundingSphere.clone());null!==b.boundingBox&&(this.boundingBox=b.boundingBox.clone())}else a instanceof THREE.Mesh&&b instanceof THREE.Geometry&&this.fromGeometry(b);return this},updateFromObject:function(a){var b=a.geometry;if(a instanceof THREE.Mesh){a=b.__directGeometry;if(void 0===a)return this.fromGeometry(b);
a.verticesNeedUpdate=b.verticesNeedUpdate;a.normalsNeedUpdate=b.normalsNeedUpdate;a.colorsNeedUpdate=b.colorsNeedUpdate;a.uvsNeedUpdate=b.uvsNeedUpdate;a.tangentsNeedUpdate=b.tangentsNeedUpdate;b.verticesNeedUpdate=!1;b.normalsNeedUpdate=!1;b.colorsNeedUpdate=!1;b.uvsNeedUpdate=!1;b.tangentsNeedUpdate=!1;b=a}!0===b.verticesNeedUpdate&&(a=this.attributes.position,void 0!==a&&(a.copyVector3sArray(b.vertices),a.needsUpdate=!0),b.verticesNeedUpdate=!1);!0===b.normalsNeedUpdate&&(a=this.attributes.normal,
void 0!==a&&(a.copyVector3sArray(b.normals),a.needsUpdate=!0),b.normalsNeedUpdate=!1);!0===b.colorsNeedUpdate&&(a=this.attributes.color,void 0!==a&&(a.copyColorsArray(b.colors),a.needsUpdate=!0),b.colorsNeedUpdate=!1);!0===b.tangentsNeedUpdate&&(a=this.attributes.tangent,void 0!==a&&(a.copyVector4sArray(b.tangents),a.needsUpdate=!0),b.tangentsNeedUpdate=!1);b.lineDistancesNeedUpdate&&(a=this.attributes.lineDistance,void 0!==a&&(a.copyArray(b.lineDistances),a.needsUpdate=!0),b.lineDistancesNeedUpdate=
!1);return this},fromGeometry:function(a){a.__directGeometry=(new THREE.DirectGeometry).fromGeometry(a);return this.fromDirectGeometry(a.__directGeometry)},fromDirectGeometry:function(a){var b=new Float32Array(3*a.vertices.length);this.addAttribute("position",(new THREE.BufferAttribute(b,3)).copyVector3sArray(a.vertices));0<a.normals.length&&(b=new Float32Array(3*a.normals.length),this.addAttribute("normal",(new THREE.BufferAttribute(b,3)).copyVector3sArray(a.normals)));0<a.colors.length&&(b=new Float32Array(3*
a.colors.length),this.addAttribute("color",(new THREE.BufferAttribute(b,3)).copyColorsArray(a.colors)));0<a.uvs.length&&(b=new Float32Array(2*a.uvs.length),this.addAttribute("uv",(new THREE.BufferAttribute(b,2)).copyVector2sArray(a.uvs)));0<a.uvs2.length&&(b=new Float32Array(2*a.uvs2.length),this.addAttribute("uv2",(new THREE.BufferAttribute(b,2)).copyVector2sArray(a.uvs2)));0<a.tangents.length&&(b=new Float32Array(4*a.tangents.length),this.addAttribute("tangent",(new THREE.BufferAttribute(b,4)).copyVector4sArray(a.tangents)));
0<a.indices.length&&(b=new Uint16Array(3*a.indices.length),this.addAttribute("index",(new THREE.BufferAttribute(b,1)).copyIndicesArray(a.indices)));for(var c in a.morphTargets){for(var b=[],d=a.morphTargets[c],e=0,g=d.length;e<g;e++){var f=d[e],h=new THREE.Float32Attribute(3*f.length,3);b.push(h.copyVector3sArray(f))}this.morphAttributes[c]=b}0<a.skinIndices.length&&(c=new THREE.Float32Attribute(4*a.skinIndices.length,4),this.addAttribute("skinIndex",c.copyVector4sArray(a.skinIndices)));0<a.skinWeights.length&&
(c=new THREE.Float32Attribute(4*a.skinWeights.length,4),this.addAttribute("skinWeight",c.copyVector4sArray(a.skinWeights)));null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone());null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone());return this},computeBoundingBox:function(){var a=new THREE.Vector3;return function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);var b=this.attributes.position.array;if(b){var c=this.boundingBox;c.makeEmpty();for(var d=0,e=b.length;d<
e;d+=3)a.fromArray(b,d),c.expandByPoint(a)}if(void 0===b||0===b.length)this.boundingBox.min.set(0,0,0),this.boundingBox.max.set(0,0,0);(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}}(),computeBoundingSphere:function(){var a=new THREE.Box3,b=new THREE.Vector3;return function(){null===this.boundingSphere&&
(this.boundingSphere=new THREE.Sphere);var c=this.attributes.position.array;if(c){a.makeEmpty();for(var d=this.boundingSphere.center,e=0,g=c.length;e<g;e+=3)b.fromArray(c,e),a.expandByPoint(b);a.center(d);for(var f=0,e=0,g=c.length;e<g;e+=3)b.fromArray(c,e),f=Math.max(f,d.distanceToSquared(b));this.boundingSphere.radius=Math.sqrt(f);isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',
this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var a=this.attributes;if(a.position){var b=a.position.array;if(void 0===a.normal)this.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(b.length),3));else for(var c=a.normal.array,d=0,e=c.length;d<e;d++)c[d]=0;var c=a.normal.array,g,f,h,k=new THREE.Vector3,n=new THREE.Vector3,l=new THREE.Vector3,p=new THREE.Vector3,m=new THREE.Vector3;if(a.index){var q=a.index.array;0===this.drawcalls.length&&this.addDrawCall(0,
q.length);for(var r=0,t=this.drawcalls.length;r<t;++r){e=this.drawcalls[r].start;g=this.drawcalls[r].count;for(var u=this.drawcalls[r].index,d=e,e=e+g;d<e;d+=3)g=3*(u+q[d]),f=3*(u+q[d+1]),h=3*(u+q[d+2]),k.fromArray(b,g),n.fromArray(b,f),l.fromArray(b,h),p.subVectors(l,n),m.subVectors(k,n),p.cross(m),c[g]+=p.x,c[g+1]+=p.y,c[g+2]+=p.z,c[f]+=p.x,c[f+1]+=p.y,c[f+2]+=p.z,c[h]+=p.x,c[h+1]+=p.y,c[h+2]+=p.z}}else for(d=0,e=b.length;d<e;d+=9)k.fromArray(b,d),n.fromArray(b,d+3),l.fromArray(b,d+6),p.subVectors(l,
n),m.subVectors(k,n),p.cross(m),c[d]=p.x,c[d+1]=p.y,c[d+2]=p.z,c[d+3]=p.x,c[d+4]=p.y,c[d+5]=p.z,c[d+6]=p.x,c[d+7]=p.y,c[d+8]=p.z;this.normalizeNormals();a.normal.needsUpdate=!0}},computeTangents:function(){function a(a,b,c){p.fromArray(d,3*a);m.fromArray(d,3*b);q.fromArray(d,3*c);r.fromArray(g,2*a);t.fromArray(g,2*b);u.fromArray(g,2*c);y=m.x-p.x;w=q.x-p.x;A=m.y-p.y;v=q.y-p.y;z=m.z-p.z;C=q.z-p.z;B=t.x-r.x;x=u.x-r.x;J=t.y-r.y;G=u.y-r.y;F=1/(B*G-x*J);O.set((G*y-J*w)*F,(G*A-J*v)*F,(G*z-J*C)*F);D.set((B*
w-x*y)*F,(B*v-x*A)*F,(B*C-x*z)*F);k[a].add(O);k[b].add(O);k[c].add(O);n[a].add(D);n[b].add(D);n[c].add(D)}function b(a){Y.fromArray(e,3*a);V.copy(Y);ba=k[a];R.copy(ba);R.sub(Y.multiplyScalar(Y.dot(ba))).normalize();E.crossVectors(V,ba);fa=E.dot(n[a]);$=0>fa?-1:1;h[4*a]=R.x;h[4*a+1]=R.y;h[4*a+2]=R.z;h[4*a+3]=$}if(void 0===this.attributes.index||void 0===this.attributes.position||void 0===this.attributes.normal||void 0===this.attributes.uv)console.warn("THREE.BufferGeometry: Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");
else{var c=this.attributes.index.array,d=this.attributes.position.array,e=this.attributes.normal.array,g=this.attributes.uv.array,f=d.length/3;void 0===this.attributes.tangent&&this.addAttribute("tangent",new THREE.BufferAttribute(new Float32Array(4*f),4));for(var h=this.attributes.tangent.array,k=[],n=[],l=0;l<f;l++)k[l]=new THREE.Vector3,n[l]=new THREE.Vector3;var p=new THREE.Vector3,m=new THREE.Vector3,q=new THREE.Vector3,r=new THREE.Vector2,t=new THREE.Vector2,u=new THREE.Vector2,y,w,A,v,z,C,
B,x,J,G,F,O=new THREE.Vector3,D=new THREE.Vector3,K,I,H,N,L;0===this.drawcalls.length&&this.addDrawCall(0,c.length);var S=this.drawcalls,l=0;for(I=S.length;l<I;++l){K=S[l].start;H=S[l].count;var Q=S[l].index,f=K;for(K+=H;f<K;f+=3)H=Q+c[f],N=Q+c[f+1],L=Q+c[f+2],a(H,N,L)}var R=new THREE.Vector3,E=new THREE.Vector3,Y=new THREE.Vector3,V=new THREE.Vector3,$,ba,fa,l=0;for(I=S.length;l<I;++l)for(K=S[l].start,H=S[l].count,Q=S[l].index,f=K,K+=H;f<K;f+=3)H=Q+c[f],N=Q+c[f+1],L=Q+c[f+2],b(H),b(N),b(L)}},computeOffsets:function(a){void 0===
a&&(a=THREE.BufferGeometry.MaxIndex);for(var b=this.attributes.index.array,c=this.attributes.position.array,d=b.length/3,e=new (65535<c.length/3&&65535<THREE.BufferGeometry.MaxIndex?Uint32Array:Uint16Array)(b.length),g=0,f=0,h=[{start:0,count:0,index:0}],k=h[0],n=0,l=0,p=new Int32Array(6),m=new Int32Array(c.length),q=new Int32Array(c.length),r=0;r<c.length;r++)m[r]=-1,q[r]=-1;for(c=0;c<d;c++){for(var t=l=0;3>t;t++)r=b[3*c+t],-1===m[r]?(p[2*t]=r,p[2*t+1]=-1,l++):m[r]<k.index?(p[2*t]=r,p[2*t+1]=-1,
n++):(p[2*t]=r,p[2*t+1]=m[r]);if(f+l>k.index+a)for(k={start:g,count:0,index:f},h.push(k),l=0;6>l;l+=2)t=p[l+1],-1<t&&t<k.index&&(p[l+1]=-1);for(l=0;6>l;l+=2)r=p[l],t=p[l+1],-1===t&&(t=f++),m[r]=t,q[t]=r,e[g++]=t-k.index,k.count++}this.reorderBuffers(e,q,f);this.clearDrawCalls();for(a=0;a<h.length;a++)b=h[a],this.addDrawCall(b.start,b.count,b.index)},merge:function(a,b){if(!1===a instanceof THREE.BufferGeometry)console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",
a);else{void 0===b&&(b=0);var c=this.attributes,d;for(d in c)if(void 0!==a.attributes[d])for(var e=c[d].array,g=a.attributes[d],f=g.array,h=0,g=g.itemSize*b;h<f.length;h++,g++)e[g]=f[h];return this}},normalizeNormals:function(){for(var a=this.attributes.normal.array,b,c,d,e=0,g=a.length;e<g;e+=3)b=a[e],c=a[e+1],d=a[e+2],b=1/Math.sqrt(b*b+c*c+d*d),a[e]*=b,a[e+1]*=b,a[e+2]*=b},reorderBuffers:function(a,b,c){var d={},e;for(e in this.attributes)"index"!==e&&(d[e]=new this.attributes[e].array.constructor(this.attributes[e].itemSize*
c));for(var g=0;g<c;g++){var f=b[g];for(e in this.attributes)if("index"!==e)for(var h=this.attributes[e].array,k=this.attributes[e].itemSize,n=d[e],l=0;l<k;l++)n[g*k+l]=h[f*k+l]}this.attributes.index.array=a;for(e in this.attributes)"index"!==e&&(this.attributes[e].array=d[e],this.attributes[e].numItems=this.attributes[e].itemSize*c)},toJSON:function(){var a={metadata:{version:4.4,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};a.uuid=this.uuid;a.type=this.type;""!==this.name&&(a.name=this.name);
if(void 0!==this.parameters){var b=this.parameters,c;for(c in b)void 0!==b[c]&&(a[c]=b[c]);return a}a.data={attributes:{}};var b=this.attributes,d=this.drawcalls,e=this.boundingSphere;for(c in b){var g=b[c],f=Array.prototype.slice.call(g.array);a.data.attributes[c]={itemSize:g.itemSize,type:g.array.constructor.name,array:f}}0<d.length&&(a.data.drawcalls=JSON.parse(JSON.stringify(d)));null!==e&&(a.data.boundingSphere={center:e.center.toArray(),radius:e.radius});return a},clone:function(){return(new THREE.BufferGeometry).copy(this)},
copy:function(a){for(var b in a.attributes)this.addAttribute(b,a.attributes[b].clone());b=0;for(var c=a.drawcalls.length;b<c;b++){var d=a.drawcalls[b];this.addDrawCall(d.start,d.count,d.index)}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.BufferGeometry.prototype);THREE.BufferGeometry.MaxIndex=65535;
THREE.InstancedBufferGeometry=function(){THREE.BufferGeometry.call(this);this.type="InstancedBufferGeometry";this.maxInstancedCount=void 0};THREE.InstancedBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.InstancedBufferGeometry.prototype.constructor=THREE.InstancedBufferGeometry;THREE.InstancedBufferGeometry.prototype.addDrawCall=function(a,b,c,d){this.drawcalls.push({start:a,count:b,index:void 0!==c?c:0,instances:d})};
THREE.InstancedBufferGeometry.prototype.clone=function(){var a=new THREE.InstancedBufferGeometry,b;for(b in this.attributes)a.addAttribute(b,this.attributes[b].clone());b=0;for(var c=this.drawcalls.length;b<c;b++){var d=this.drawcalls[b];a.addDrawCall(d.start,d.count,d.index,d.instances)}return a};THREE.EventDispatcher.prototype.apply(THREE.InstancedBufferGeometry.prototype);
THREE.Camera=function(){THREE.Object3D.call(this);this.type="Camera";this.matrixWorldInverse=new THREE.Matrix4;this.projectionMatrix=new THREE.Matrix4};THREE.Camera.prototype=Object.create(THREE.Object3D.prototype);THREE.Camera.prototype.constructor=THREE.Camera;THREE.Camera.prototype.getWorldDirection=function(){var a=new THREE.Quaternion;return function(b){b=b||new THREE.Vector3;this.getWorldQuaternion(a);return b.set(0,0,-1).applyQuaternion(a)}}();
THREE.Camera.prototype.lookAt=function(){var a=new THREE.Matrix4;return function(b){a.lookAt(this.position,b,this.up);this.quaternion.setFromRotationMatrix(a)}}();THREE.Camera.prototype.clone=function(){return(new THREE.Camera).copy(this)};THREE.Camera.prototype.copy=function(a){THREE.Object3D.prototype.copy.call(this,a);this.matrixWorldInverse.copy(a.matrixWorldInverse);this.projectionMatrix.copy(a.projectionMatrix);return this};
THREE.CubeCamera=function(a,b,c){THREE.Object3D.call(this);this.type="CubeCamera";var d=new THREE.PerspectiveCamera(90,1,a,b);d.up.set(0,-1,0);d.lookAt(new THREE.Vector3(1,0,0));this.add(d);var e=new THREE.PerspectiveCamera(90,1,a,b);e.up.set(0,-1,0);e.lookAt(new THREE.Vector3(-1,0,0));this.add(e);var g=new THREE.PerspectiveCamera(90,1,a,b);g.up.set(0,0,1);g.lookAt(new THREE.Vector3(0,1,0));this.add(g);var f=new THREE.PerspectiveCamera(90,1,a,b);f.up.set(0,0,-1);f.lookAt(new THREE.Vector3(0,-1,0));
this.add(f);var h=new THREE.PerspectiveCamera(90,1,a,b);h.up.set(0,-1,0);h.lookAt(new THREE.Vector3(0,0,1));this.add(h);var k=new THREE.PerspectiveCamera(90,1,a,b);k.up.set(0,-1,0);k.lookAt(new THREE.Vector3(0,0,-1));this.add(k);this.renderTarget=new THREE.WebGLRenderTargetCube(c,c,{format:THREE.RGBFormat,magFilter:THREE.LinearFilter,minFilter:THREE.LinearFilter});this.updateCubeMap=function(a,b){void 0===this.parent&&this.updateMatrixWorld();var c=this.renderTarget,m=c.generateMipmaps;c.generateMipmaps=
!1;c.activeCubeFace=0;a.render(b,d,c);c.activeCubeFace=1;a.render(b,e,c);c.activeCubeFace=2;a.render(b,g,c);c.activeCubeFace=3;a.render(b,f,c);c.activeCubeFace=4;a.render(b,h,c);c.generateMipmaps=m;c.activeCubeFace=5;a.render(b,k,c);a.setRenderTarget(null)}};THREE.CubeCamera.prototype=Object.create(THREE.Object3D.prototype);THREE.CubeCamera.prototype.constructor=THREE.CubeCamera;
THREE.OrthographicCamera=function(a,b,c,d,e,g){THREE.Camera.call(this);this.type="OrthographicCamera";this.zoom=1;this.left=a;this.right=b;this.top=c;this.bottom=d;this.near=void 0!==e?e:.1;this.far=void 0!==g?g:2E3;this.updateProjectionMatrix()};THREE.OrthographicCamera.prototype=Object.create(THREE.Camera.prototype);THREE.OrthographicCamera.prototype.constructor=THREE.OrthographicCamera;
THREE.OrthographicCamera.prototype.updateProjectionMatrix=function(){var a=(this.right-this.left)/(2*this.zoom),b=(this.top-this.bottom)/(2*this.zoom),c=(this.right+this.left)/2,d=(this.top+this.bottom)/2;this.projectionMatrix.makeOrthographic(c-a,c+a,d+b,d-b,this.near,this.far)};
THREE.OrthographicCamera.prototype.clone=function(){var a=new THREE.OrthographicCamera;a.copy(this);a.zoom=this.zoom;a.left=this.left;a.right=this.right;a.top=this.top;a.bottom=this.bottom;a.near=this.near;a.far=this.far;return a};
THREE.OrthographicCamera.prototype.toJSON=function(a){a=THREE.Object3D.prototype.toJSON.call(this,a);a.object.zoom=this.zoom;a.object.left=this.left;a.object.right=this.right;a.object.top=this.top;a.object.bottom=this.bottom;a.object.near=this.near;a.object.far=this.far;return a};THREE.PerspectiveCamera=function(a,b,c,d){THREE.Camera.call(this);this.type="PerspectiveCamera";this.zoom=1;this.fov=void 0!==a?a:50;this.aspect=void 0!==b?b:1;this.near=void 0!==c?c:.1;this.far=void 0!==d?d:2E3;this.updateProjectionMatrix()};
THREE.PerspectiveCamera.prototype=Object.create(THREE.Camera.prototype);THREE.PerspectiveCamera.prototype.constructor=THREE.PerspectiveCamera;THREE.PerspectiveCamera.prototype.setLens=function(a,b){void 0===b&&(b=24);this.fov=2*THREE.Math.radToDeg(Math.atan(b/(2*a)));this.updateProjectionMatrix()};THREE.PerspectiveCamera.prototype.setViewOffset=function(a,b,c,d,e,g){this.fullWidth=a;this.fullHeight=b;this.x=c;this.y=d;this.width=e;this.height=g;this.updateProjectionMatrix()};
THREE.PerspectiveCamera.prototype.updateProjectionMatrix=function(){var a=THREE.Math.radToDeg(2*Math.atan(Math.tan(.5*THREE.Math.degToRad(this.fov))/this.zoom));if(this.fullWidth){var b=this.fullWidth/this.fullHeight,a=Math.tan(THREE.Math.degToRad(.5*a))*this.near,c=-a,d=b*c,b=Math.abs(b*a-d),c=Math.abs(a-c);this.projectionMatrix.makeFrustum(d+this.x*b/this.fullWidth,d+(this.x+this.width)*b/this.fullWidth,a-(this.y+this.height)*c/this.fullHeight,a-this.y*c/this.fullHeight,this.near,this.far)}else this.projectionMatrix.makePerspective(a,
this.aspect,this.near,this.far)};THREE.PerspectiveCamera.prototype.clone=function(){var a=new THREE.PerspectiveCamera;a.copy(this);a.zoom=this.zoom;a.fov=this.fov;a.aspect=this.aspect;a.near=this.near;a.far=this.far;return a};THREE.PerspectiveCamera.prototype.toJSON=function(a){a=THREE.Object3D.prototype.toJSON.call(this,a);a.object.zoom=this.zoom;a.object.fov=this.fov;a.object.aspect=this.aspect;a.object.near=this.near;a.object.far=this.far;return a};
THREE.Light=function(a){THREE.Object3D.call(this);this.type="Light";this.color=new THREE.Color(a)};THREE.Light.prototype=Object.create(THREE.Object3D.prototype);THREE.Light.prototype.constructor=THREE.Light;THREE.Light.prototype.clone=function(){return(new THREE.Light).copy(this)};THREE.Light.prototype.copy=function(a){THREE.Object3D.prototype.copy.call(this,a);this.color.copy(a.color);return this};THREE.AmbientLight=function(a){THREE.Light.call(this,a);this.type="AmbientLight"};
THREE.AmbientLight.prototype=Object.create(THREE.Light.prototype);THREE.AmbientLight.prototype.constructor=THREE.AmbientLight;THREE.AmbientLight.prototype.clone=function(){var a=new THREE.AmbientLight;a.copy(this);return a};THREE.AmbientLight.prototype.toJSON=function(a){a=THREE.Object3D.prototype.toJSON.call(this,a);a.object.color=this.color.getHex();return a};
THREE.AreaLight=function(a,b){THREE.Light.call(this,a);this.type="AreaLight";this.normal=new THREE.Vector3(0,-1,0);this.right=new THREE.Vector3(1,0,0);this.intensity=void 0!==b?b:1;this.height=this.width=1;this.constantAttenuation=1.5;this.linearAttenuation=.5;this.quadraticAttenuation=.1};THREE.AreaLight.prototype=Object.create(THREE.Light.prototype);THREE.AreaLight.prototype.constructor=THREE.AreaLight;
THREE.AreaLight.prototype.clone=function(){var a=new THREE.AreaLight;a.copy(this);a.normal.copy(this.normal);a.right.copy(this.right);a.intensity=this.intensity;a.width=this.width;a.height=this.height;a.constantAttenuation=this.constantAttenuation;a.linearAttenuation=this.linearAttenuation;a.quadraticAttenuation=this.quadraticAttenuation;return a};
THREE.AreaLight.prototype.toJSON=function(a){a=THREE.Object3D.prototype.toJSON.call(this,a);a.object.color=this.color.getHex();a.object.intensity=this.intensity;return a};
THREE.DirectionalLight=function(a,b){THREE.Light.call(this,a);this.type="DirectionalLight";this.position.set(0,1,0);this.target=new THREE.Object3D;this.intensity=void 0!==b?b:1;this.onlyShadow=this.castShadow=!1;this.shadowCameraNear=50;this.shadowCameraFar=5E3;this.shadowCameraLeft=-500;this.shadowCameraTop=this.shadowCameraRight=500;this.shadowCameraBottom=-500;this.shadowCameraVisible=!1;this.shadowBias=0;this.shadowDarkness=.5;this.shadowMapHeight=this.shadowMapWidth=512;this.shadowMatrix=this.shadowCamera=
this.shadowMapSize=this.shadowMap=null};THREE.DirectionalLight.prototype=Object.create(THREE.Light.prototype);THREE.DirectionalLight.prototype.constructor=THREE.DirectionalLight;
THREE.DirectionalLight.prototype.clone=function(){var a=new THREE.DirectionalLight;a.copy(this);a.target=this.target.clone();a.intensity=this.intensity;a.castShadow=this.castShadow;a.onlyShadow=this.onlyShadow;a.shadowCameraNear=this.shadowCameraNear;a.shadowCameraFar=this.shadowCameraFar;a.shadowCameraLeft=this.shadowCameraLeft;a.shadowCameraRight=this.shadowCameraRight;a.shadowCameraTop=this.shadowCameraTop;a.shadowCameraBottom=this.shadowCameraBottom;a.shadowCameraVisible=this.shadowCameraVisible;
a.shadowBias=this.shadowBias;a.shadowDarkness=this.shadowDarkness;a.shadowMapWidth=this.shadowMapWidth;a.shadowMapHeight=this.shadowMapHeight;return a};THREE.DirectionalLight.prototype.toJSON=function(a){a=THREE.Object3D.prototype.toJSON.call(this,a);a.object.color=this.color.getHex();a.object.intensity=this.intensity;return a};
THREE.HemisphereLight=function(a,b,c){THREE.Light.call(this,a);this.type="HemisphereLight";this.position.set(0,100,0);this.groundColor=new THREE.Color(b);this.intensity=void 0!==c?c:1};THREE.HemisphereLight.prototype=Object.create(THREE.Light.prototype);THREE.HemisphereLight.prototype.constructor=THREE.HemisphereLight;THREE.HemisphereLight.prototype.clone=function(){var a=new THREE.HemisphereLight;a.copy(this);a.groundColor.copy(this.groundColor);a.intensity=this.intensity;return a};
THREE.HemisphereLight.prototype.toJSON=function(a){a=THREE.Object3D.prototype.toJSON.call(this,a);a.object.color=this.color.getHex();a.object.groundColor=this.groundColor.getHex();return a};THREE.PointLight=function(a,b,c,d){THREE.Light.call(this,a);this.type="PointLight";this.intensity=void 0!==b?b:1;this.distance=void 0!==c?c:0;this.decay=void 0!==d?d:1};THREE.PointLight.prototype=Object.create(THREE.Light.prototype);THREE.PointLight.prototype.constructor=THREE.PointLight;
THREE.PointLight.prototype.clone=function(){var a=new THREE.PointLight;a.copy(this);a.intensity=this.intensity;a.distance=this.distance;a.decay=this.decay;return a};THREE.PointLight.prototype.toJSON=function(a){a=THREE.Object3D.prototype.toJSON.call(this,a);a.object.color=this.color.getHex();a.object.intensity=this.intensity;a.object.distance=this.distance;a.object.decay=this.decay;return a};
THREE.SpotLight=function(a,b,c,d,e,g){THREE.Light.call(this,a);this.type="SpotLight";this.position.set(0,1,0);this.target=new THREE.Object3D;this.intensity=void 0!==b?b:1;this.distance=void 0!==c?c:0;this.angle=void 0!==d?d:Math.PI/3;this.exponent=void 0!==e?e:10;this.decay=void 0!==g?g:1;this.onlyShadow=this.castShadow=!1;this.shadowCameraNear=50;this.shadowCameraFar=5E3;this.shadowCameraFov=50;this.shadowCameraVisible=!1;this.shadowBias=0;this.shadowDarkness=.5;this.shadowMapHeight=this.shadowMapWidth=
512;this.shadowMatrix=this.shadowCamera=this.shadowMapSize=this.shadowMap=null};THREE.SpotLight.prototype=Object.create(THREE.Light.prototype);THREE.SpotLight.prototype.constructor=THREE.SpotLight;
THREE.SpotLight.prototype.clone=function(){var a=new THREE.SpotLight;a.copy(this);a.target=this.target.clone();a.intensity=this.intensity;a.distance=this.distance;a.angle=this.angle;a.exponent=this.exponent;a.decay=this.decay;a.castShadow=this.castShadow;a.onlyShadow=this.onlyShadow;a.shadowCameraNear=this.shadowCameraNear;a.shadowCameraFar=this.shadowCameraFar;a.shadowCameraFov=this.shadowCameraFov;a.shadowCameraVisible=this.shadowCameraVisible;a.shadowBias=this.shadowBias;a.shadowDarkness=this.shadowDarkness;
a.shadowMapWidth=this.shadowMapWidth;a.shadowMapHeight=this.shadowMapHeight;return a};THREE.SpotLight.prototype.toJSON=function(a){a=THREE.Object3D.prototype.toJSON.call(this,a);a.object.color=this.color.getHex();a.object.intensity=this.intensity;a.object.distance=this.distance;a.object.angle=this.angle;a.object.exponent=this.exponent;a.object.decay=this.decay;return a};
THREE.Cache={enabled:!1,files:{},add:function(a,b){!1!==this.enabled&&(this.files[a]=b)},get:function(a){if(!1!==this.enabled)return this.files[a]},remove:function(a){delete this.files[a]},clear:function(){this.files={}}};THREE.Loader=function(){this.onLoadStart=function(){};this.onLoadProgress=function(){};this.onLoadComplete=function(){}};
THREE.Loader.prototype={constructor:THREE.Loader,crossOrigin:void 0,extractUrlBase:function(a){a=a.split("/");if(1===a.length)return"./";a.pop();return a.join("/")+"/"},initMaterials:function(a,b,c){for(var d=[],e=0;e<a.length;++e)d[e]=this.createMaterial(a[e],b,c);return d},needsTangents:function(a){for(var b=0,c=a.length;b<c;b++)if(a[b]instanceof THREE.ShaderMaterial)return!0;return!1},createMaterial:function(){var a;return function(b,c,d){function e(a){a=Math.log(a)/Math.LN2;return Math.pow(2,
Math.round(a))}function g(b,g,f,h,k,n,u){var y=c+f,w,A=THREE.Loader.Handlers.get(y);null!==A?w=A.load(y):(w=new THREE.Texture,A=a,A.setCrossOrigin(d),A.load(y,function(a){if(!1===THREE.Math.isPowerOfTwo(a.width)||!1===THREE.Math.isPowerOfTwo(a.height)){var b=e(a.width),c=e(a.height),d=document.createElement("canvas");d.width=b;d.height=c;d.getContext("2d").drawImage(a,0,0,b,c);w.image=d}else w.image=a;w.needsUpdate=!0}));w.sourceFile=f;h&&(w.repeat.set(h[0],h[1]),1!==h[0]&&(w.wrapS=THREE.RepeatWrapping),
1!==h[1]&&(w.wrapT=THREE.RepeatWrapping));k&&w.offset.set(k[0],k[1]);n&&(f={repeat:THREE.RepeatWrapping,mirror:THREE.MirroredRepeatWrapping},void 0!==f[n[0]]&&(w.wrapS=f[n[0]]),void 0!==f[n[1]]&&(w.wrapT=f[n[1]]));u&&(w.anisotropy=u);b[g]=w}function f(a){return(255*a[0]<<16)+(255*a[1]<<8)+255*a[2]}void 0===d&&void 0!==this.crossOrigin&&(d=this.crossOrigin);void 0===a&&(a=new THREE.ImageLoader);var h="MeshLambertMaterial",k={color:15658734,opacity:1,map:null,lightMap:null,normalMap:null,bumpMap:null,
wireframe:!1};if(b.shading){var n=b.shading.toLowerCase();"phong"===n?h="MeshPhongMaterial":"basic"===n&&(h="MeshBasicMaterial")}void 0!==b.blending&&void 0!==THREE[b.blending]&&(k.blending=THREE[b.blending]);void 0!==b.transparent&&(k.transparent=b.transparent);void 0!==b.opacity&&1>b.opacity&&(k.transparent=!0);void 0!==b.depthTest&&(k.depthTest=b.depthTest);void 0!==b.depthWrite&&(k.depthWrite=b.depthWrite);void 0!==b.visible&&(k.visible=b.visible);void 0!==b.flipSided&&(k.side=THREE.BackSide);
void 0!==b.doubleSided&&(k.side=THREE.DoubleSide);void 0!==b.wireframe&&(k.wireframe=b.wireframe);void 0!==b.vertexColors&&("face"===b.vertexColors?k.vertexColors=THREE.FaceColors:b.vertexColors&&(k.vertexColors=THREE.VertexColors));b.colorDiffuse?k.color=f(b.colorDiffuse):b.DbgColor&&(k.color=b.DbgColor);b.colorSpecular&&(k.specular=f(b.colorSpecular));b.colorEmissive&&(k.emissive=f(b.colorEmissive));void 0!==b.transparency&&(console.warn("THREE.Loader: transparency has been renamed to opacity"),
b.opacity=b.transparency);void 0!==b.opacity&&(k.opacity=b.opacity);b.specularCoef&&(k.shininess=b.specularCoef);b.mapDiffuse&&c&&g(k,"map",b.mapDiffuse,b.mapDiffuseRepeat,b.mapDiffuseOffset,b.mapDiffuseWrap,b.mapDiffuseAnisotropy);b.mapLight&&c&&g(k,"lightMap",b.mapLight,b.mapLightRepeat,b.mapLightOffset,b.mapLightWrap,b.mapLightAnisotropy);b.mapAO&&c&&g(k,"aoMap",b.mapAO,b.mapAORepeat,b.mapAOOffset,b.mapAOWrap,b.mapAOAnisotropy);b.mapBump&&c&&g(k,"bumpMap",b.mapBump,b.mapBumpRepeat,b.mapBumpOffset,
b.mapBumpWrap,b.mapBumpAnisotropy);b.mapNormal&&c&&g(k,"normalMap",b.mapNormal,b.mapNormalRepeat,b.mapNormalOffset,b.mapNormalWrap,b.mapNormalAnisotropy);b.mapSpecular&&c&&g(k,"specularMap",b.mapSpecular,b.mapSpecularRepeat,b.mapSpecularOffset,b.mapSpecularWrap,b.mapSpecularAnisotropy);b.mapAlpha&&c&&g(k,"alphaMap",b.mapAlpha,b.mapAlphaRepeat,b.mapAlphaOffset,b.mapAlphaWrap,b.mapAlphaAnisotropy);b.mapBumpScale&&(k.bumpScale=b.mapBumpScale);b.mapNormalFactor&&(k.normalScale=new THREE.Vector2(b.mapNormalFactor,
b.mapNormalFactor));h=new THREE[h](k);void 0!==b.DbgName&&(h.name=b.DbgName);return h}}()};THREE.Loader.Handlers={handlers:[],add:function(a,b){this.handlers.push(a,b)},get:function(a){for(var b=0,c=this.handlers.length;b<c;b+=2){var d=this.handlers[b+1];if(this.handlers[b].test(a))return d}return null}};THREE.XHRLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.XHRLoader.prototype={constructor:THREE.XHRLoader,load:function(a,b,c,d){var e=this,g=THREE.Cache.get(a);if(void 0!==g)return b&&setTimeout(function(){b(g)},0),g;var f=new XMLHttpRequest;f.open("GET",a,!0);f.addEventListener("load",function(c){THREE.Cache.add(a,this.response);b&&b(this.response);e.manager.itemEnd(a)},!1);void 0!==c&&f.addEventListener("progress",function(a){c(a)},!1);void 0!==d&&f.addEventListener("error",function(a){d(a)},!1);void 0!==this.crossOrigin&&(f.crossOrigin=this.crossOrigin);
void 0!==this.responseType&&(f.responseType=this.responseType);void 0!==this.withCredentials&&(f.withCredentials=this.withCredentials);f.send(null);e.manager.itemStart(a);return f},setResponseType:function(a){this.responseType=a},setCrossOrigin:function(a){this.crossOrigin=a},setWithCredentials:function(a){this.withCredentials=a}};THREE.ImageLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.ImageLoader.prototype={constructor:THREE.ImageLoader,load:function(a,b,c,d){var e=this,g=THREE.Cache.get(a);if(void 0!==g)return b&&setTimeout(function(){b(g)},0),g;var f=document.createElement("img");f.addEventListener("load",function(c){THREE.Cache.add(a,this);b&&b(this);e.manager.itemEnd(a)},!1);void 0!==c&&f.addEventListener("progress",function(a){c(a)},!1);void 0!==d&&f.addEventListener("error",function(a){d(a)},!1);void 0!==this.crossOrigin&&(f.crossOrigin=this.crossOrigin);e.manager.itemStart(a);
f.src=a;return f},setCrossOrigin:function(a){this.crossOrigin=a}};THREE.JSONLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager;this.withCredentials=!1};
THREE.JSONLoader.prototype={constructor:THREE.JSONLoader,load:function(a,b,c,d){var e=this,g=this.texturePath&&"string"===typeof this.texturePath?this.texturePath:THREE.Loader.prototype.extractUrlBase(a);c=new THREE.XHRLoader(this.manager);c.setCrossOrigin(this.crossOrigin);c.setWithCredentials(this.withCredentials);c.load(a,function(c){c=JSON.parse(c);var d=c.metadata;if(void 0!==d){if("object"===d.type){console.error("THREE.JSONLoader: "+a+" should be loaded with THREE.ObjectLoader instead.");return}if("scene"===
d.type){console.error("THREE.JSONLoader: "+a+" should be loaded with THREE.SceneLoader instead.");return}}c=e.parse(c,g);b(c.geometry,c.materials)})},setCrossOrigin:function(a){this.crossOrigin=a},setTexturePath:function(a){this.texturePath=a},parse:function(a,b){var c=new THREE.Geometry,d=void 0!==a.scale?1/a.scale:1;(function(b){var d,f,h,k,n,l,p,m,q,r,t,u,y,w=a.faces;l=a.vertices;var A=a.normals,v=a.colors,z=0;if(void 0!==a.uvs){for(d=0;d<a.uvs.length;d++)a.uvs[d].length&&z++;for(d=0;d<z;d++)c.faceVertexUvs[d]=
[]}k=0;for(n=l.length;k<n;)d=new THREE.Vector3,d.x=l[k++]*b,d.y=l[k++]*b,d.z=l[k++]*b,c.vertices.push(d);k=0;for(n=w.length;k<n;)if(b=w[k++],q=b&1,h=b&2,d=b&8,p=b&16,r=b&32,l=b&64,b&=128,q){q=new THREE.Face3;q.a=w[k];q.b=w[k+1];q.c=w[k+3];t=new THREE.Face3;t.a=w[k+1];t.b=w[k+2];t.c=w[k+3];k+=4;h&&(h=w[k++],q.materialIndex=h,t.materialIndex=h);h=c.faces.length;if(d)for(d=0;d<z;d++)for(u=a.uvs[d],c.faceVertexUvs[d][h]=[],c.faceVertexUvs[d][h+1]=[],f=0;4>f;f++)m=w[k++],y=u[2*m],m=u[2*m+1],y=new THREE.Vector2(y,
m),2!==f&&c.faceVertexUvs[d][h].push(y),0!==f&&c.faceVertexUvs[d][h+1].push(y);p&&(p=3*w[k++],q.normal.set(A[p++],A[p++],A[p]),t.normal.copy(q.normal));if(r)for(d=0;4>d;d++)p=3*w[k++],r=new THREE.Vector3(A[p++],A[p++],A[p]),2!==d&&q.vertexNormals.push(r),0!==d&&t.vertexNormals.push(r);l&&(l=w[k++],l=v[l],q.color.setHex(l),t.color.setHex(l));if(b)for(d=0;4>d;d++)l=w[k++],l=v[l],2!==d&&q.vertexColors.push(new THREE.Color(l)),0!==d&&t.vertexColors.push(new THREE.Color(l));c.faces.push(q);c.faces.push(t)}else{q=
new THREE.Face3;q.a=w[k++];q.b=w[k++];q.c=w[k++];h&&(h=w[k++],q.materialIndex=h);h=c.faces.length;if(d)for(d=0;d<z;d++)for(u=a.uvs[d],c.faceVertexUvs[d][h]=[],f=0;3>f;f++)m=w[k++],y=u[2*m],m=u[2*m+1],y=new THREE.Vector2(y,m),c.faceVertexUvs[d][h].push(y);p&&(p=3*w[k++],q.normal.set(A[p++],A[p++],A[p]));if(r)for(d=0;3>d;d++)p=3*w[k++],r=new THREE.Vector3(A[p++],A[p++],A[p]),q.vertexNormals.push(r);l&&(l=w[k++],q.color.setHex(v[l]));if(b)for(d=0;3>d;d++)l=w[k++],q.vertexColors.push(new THREE.Color(v[l]));
c.faces.push(q)}})(d);(function(){var b=void 0!==a.influencesPerVertex?a.influencesPerVertex:2;if(a.skinWeights)for(var d=0,f=a.skinWeights.length;d<f;d+=b)c.skinWeights.push(new THREE.Vector4(a.skinWeights[d],1<b?a.skinWeights[d+1]:0,2<b?a.skinWeights[d+2]:0,3<b?a.skinWeights[d+3]:0));if(a.skinIndices)for(d=0,f=a.skinIndices.length;d<f;d+=b)c.skinIndices.push(new THREE.Vector4(a.skinIndices[d],1<b?a.skinIndices[d+1]:0,2<b?a.skinIndices[d+2]:0,3<b?a.skinIndices[d+3]:0));c.bones=a.bones;c.bones&&0<
c.bones.length&&(c.skinWeights.length!==c.skinIndices.length||c.skinIndices.length!==c.vertices.length)&&console.warn("When skinning, number of vertices ("+c.vertices.length+"), skinIndices ("+c.skinIndices.length+"), and skinWeights ("+c.skinWeights.length+") should match.");c.animation=a.animation;c.animations=a.animations})();(function(b){if(void 0!==a.morphTargets){var d,f,h,k,n,l;d=0;for(f=a.morphTargets.length;d<f;d++)for(c.morphTargets[d]={},c.morphTargets[d].name=a.morphTargets[d].name,c.morphTargets[d].vertices=
[],n=c.morphTargets[d].vertices,l=a.morphTargets[d].vertices,h=0,k=l.length;h<k;h+=3){var p=new THREE.Vector3;p.x=l[h]*b;p.y=l[h+1]*b;p.z=l[h+2]*b;n.push(p)}}if(void 0!==a.morphColors)for(d=0,f=a.morphColors.length;d<f;d++)for(c.morphColors[d]={},c.morphColors[d].name=a.morphColors[d].name,c.morphColors[d].colors=[],k=c.morphColors[d].colors,n=a.morphColors[d].colors,b=0,h=n.length;b<h;b+=3)l=new THREE.Color(16755200),l.setRGB(n[b],n[b+1],n[b+2]),k.push(l)})(d);c.computeFaceNormals();c.computeBoundingSphere();
if(void 0===a.materials||0===a.materials.length)return{geometry:c};d=THREE.Loader.prototype.initMaterials(a.materials,b,this.crossOrigin);THREE.Loader.prototype.needsTangents(d)&&c.computeTangents();return{geometry:c,materials:d}}};
THREE.LoadingManager=function(a,b,c){var d=this,e=!1,g=0,f=0;this.onLoad=a;this.onProgress=b;this.onError=c;this.itemStart=function(a){f++;if(!1===e&&void 0!==d.onStart)d.onStart(a,g,f);e=!0};this.itemEnd=function(a){g++;if(void 0!==d.onProgress)d.onProgress(a,g,f);if(g===f&&(e=!1,void 0!==d.onLoad))d.onLoad()}};THREE.DefaultLoadingManager=new THREE.LoadingManager;THREE.BufferGeometryLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.BufferGeometryLoader.prototype={constructor:THREE.BufferGeometryLoader,load:function(a,b,c,d){var e=this,g=new THREE.XHRLoader(e.manager);g.setCrossOrigin(this.crossOrigin);g.load(a,function(a){b(e.parse(JSON.parse(a)))},c,d)},setCrossOrigin:function(a){this.crossOrigin=a},parse:function(a){var b=new THREE.BufferGeometry,c=a.data.attributes,d;for(d in c){var e=c[d],g=new self[e.type](e.array);b.addAttribute(d,new THREE.BufferAttribute(g,e.itemSize))}c=a.data.drawcalls||a.data.offsets;if(void 0!==
c)for(d=0,e=c.length;d!==e;++d)g=c[d],b.addDrawcall(g.start,g.count,g.index);a=a.data.boundingSphere;void 0!==a&&(c=new THREE.Vector3,void 0!==a.center&&c.fromArray(a.center),b.boundingSphere=new THREE.Sphere(c,a.radius));return b}};THREE.MaterialLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.MaterialLoader.prototype={constructor:THREE.MaterialLoader,load:function(a,b,c,d){var e=this,g=new THREE.XHRLoader(e.manager);g.setCrossOrigin(this.crossOrigin);g.load(a,function(a){b(e.parse(JSON.parse(a)))},c,d)},setCrossOrigin:function(a){this.crossOrigin=a},parse:function(a){var b=new THREE[a.type];void 0!==a.color&&b.color.setHex(a.color);void 0!==a.emissive&&b.emissive.setHex(a.emissive);void 0!==a.specular&&b.specular.setHex(a.specular);void 0!==a.shininess&&(b.shininess=a.shininess);
void 0!==a.uniforms&&(b.uniforms=a.uniforms);void 0!==a.attributes&&(b.attributes=a.attributes);void 0!==a.vertexShader&&(b.vertexShader=a.vertexShader);void 0!==a.fragmentShader&&(b.fragmentShader=a.fragmentShader);void 0!==a.vertexColors&&(b.vertexColors=a.vertexColors);void 0!==a.shading&&(b.shading=a.shading);void 0!==a.blending&&(b.blending=a.blending);void 0!==a.side&&(b.side=a.side);void 0!==a.opacity&&(b.opacity=a.opacity);void 0!==a.transparent&&(b.transparent=a.transparent);void 0!==a.wireframe&&
(b.wireframe=a.wireframe);void 0!==a.alphaTest&&(b.alphaTest=a.alphaTest);void 0!==a.size&&(b.size=a.size);void 0!==a.sizeAttenuation&&(b.sizeAttenuation=a.sizeAttenuation);if(void 0!==a.materials)for(var c=0,d=a.materials.length;c<d;c++)b.materials.push(this.parse(a.materials[c]));return b}};THREE.ObjectLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager;this.texturePath=""};
THREE.ObjectLoader.prototype={constructor:THREE.ObjectLoader,load:function(a,b,c,d){""===this.texturePath&&(this.texturePath=a.substring(0,a.lastIndexOf("/")+1));var e=this,g=new THREE.XHRLoader(e.manager);g.setCrossOrigin(this.crossOrigin);g.load(a,function(a){e.parse(JSON.parse(a),b)},c,d)},setTexturePath:function(a){this.texturePath=a},setCrossOrigin:function(a){this.crossOrigin=a},parse:function(a,b){var c=this.parseGeometries(a.geometries),d=this.parseImages(a.images,function(){void 0!==b&&b(e)}),
d=this.parseTextures(a.textures,d),d=this.parseMaterials(a.materials,d),e=this.parseObject(a.object,c,d);void 0!==a.images&&0!==a.images.length||void 0===b||b(e);return e},parseGeometries:function(a){var b={};if(void 0!==a)for(var c=new THREE.JSONLoader,d=new THREE.BufferGeometryLoader,e=0,g=a.length;e<g;e++){var f,h=a[e];switch(h.type){case "PlaneGeometry":case "PlaneBufferGeometry":f=new THREE[h.type](h.width,h.height,h.widthSegments,h.heightSegments);break;case "BoxGeometry":case "CubeGeometry":f=
new THREE.BoxGeometry(h.width,h.height,h.depth,h.widthSegments,h.heightSegments,h.depthSegments);break;case "CircleBufferGeometry":f=new THREE.CircleBufferGeometry(h.radius,h.segments,h.thetaStart,h.thetaLength);break;case "CircleGeometry":f=new THREE.CircleGeometry(h.radius,h.segments,h.thetaStart,h.thetaLength);break;case "CylinderGeometry":f=new THREE.CylinderGeometry(h.radiusTop,h.radiusBottom,h.height,h.radialSegments,h.heightSegments,h.openEnded,h.thetaStart,h.thetaLength);break;case "SphereGeometry":f=
new THREE.SphereGeometry(h.radius,h.widthSegments,h.heightSegments,h.phiStart,h.phiLength,h.thetaStart,h.thetaLength);break;case "SphereBufferGeometry":f=new THREE.SphereBufferGeometry(h.radius,h.widthSegments,h.heightSegments,h.phiStart,h.phiLength,h.thetaStart,h.thetaLength);break;case "DodecahedronGeometry":f=new THREE.DodecahedronGeometry(h.radius,h.detail);break;case "IcosahedronGeometry":f=new THREE.IcosahedronGeometry(h.radius,h.detail);break;case "OctahedronGeometry":f=new THREE.OctahedronGeometry(h.radius,
h.detail);break;case "TetrahedronGeometry":f=new THREE.TetrahedronGeometry(h.radius,h.detail);break;case "RingGeometry":f=new THREE.RingGeometry(h.innerRadius,h.outerRadius,h.thetaSegments,h.phiSegments,h.thetaStart,h.thetaLength);break;case "TorusGeometry":f=new THREE.TorusGeometry(h.radius,h.tube,h.radialSegments,h.tubularSegments,h.arc);break;case "TorusKnotGeometry":f=new THREE.TorusKnotGeometry(h.radius,h.tube,h.radialSegments,h.tubularSegments,h.p,h.q,h.heightScale);break;case "BufferGeometry":f=
d.parse(h);break;case "Geometry":f=c.parse(h.data,this.texturePath).geometry;break;case "TextGeometry":f=new THREE.TextGeometry(h.text,h.data)}f.uuid=h.uuid;void 0!==h.name&&(f.name=h.name);b[h.uuid]=f}return b},parseMaterials:function(a,b){var c={};if(void 0!==a)for(var d=function(a){void 0===b[a]&&console.warn("THREE.ObjectLoader: Undefined texture",a);return b[a]},e=new THREE.MaterialLoader,g=0,f=a.length;g<f;g++){var h=a[g],k=e.parse(h);k.uuid=h.uuid;void 0!==h.depthTest&&(k.depthTest=h.depthTest);
void 0!==h.depthWrite&&(k.depthWrite=h.depthWrite);void 0!==h.name&&(k.name=h.name);void 0!==h.map&&(k.map=d(h.map));void 0!==h.alphaMap&&(k.alphaMap=d(h.alphaMap),k.transparent=!0);void 0!==h.bumpMap&&(k.bumpMap=d(h.bumpMap));void 0!==h.bumpScale&&(k.bumpScale=h.bumpScale);void 0!==h.normalMap&&(k.normalMap=d(h.normalMap));h.normalScale&&(k.normalScale=new THREE.Vector2(h.normalScale,h.normalScale));void 0!==h.specularMap&&(k.specularMap=d(h.specularMap));void 0!==h.envMap&&(k.envMap=d(h.envMap),
k.combine=THREE.MultiplyOperation);h.reflectivity&&(k.reflectivity=h.reflectivity);void 0!==h.lightMap&&(k.lightMap=d(h.lightMap));void 0!==h.lightMapIntensity&&(k.lightMapIntensity=h.lightMapIntensity);void 0!==h.aoMap&&(k.aoMap=d(h.aoMap));void 0!==h.aoMapIntensity&&(k.aoMapIntensity=h.aoMapIntensity);c[h.uuid]=k}return c},parseImages:function(a,b){var c=this,d={};if(void 0!==a&&0<a.length){var e=new THREE.LoadingManager(b),g=new THREE.ImageLoader(e);g.setCrossOrigin(this.crossOrigin);for(var e=
function(a){a=c.texturePath+a;c.manager.itemStart(a);return g.load(a,function(){c.manager.itemEnd(a)})},f=0,h=a.length;f<h;f++){var k=a[f];d[k.uuid]=e(k.url)}}return d},parseTextures:function(a,b){function c(a){if("number"===typeof a)return a;console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",a);return THREE[a]}var d={};if(void 0!==a)for(var e=0,g=a.length;e<g;e++){var f=a[e];void 0===f.image&&console.warn('THREE.ObjectLoader: No "image" specified for',f.uuid);void 0===
b[f.image]&&console.warn("THREE.ObjectLoader: Undefined image",f.image);var h=new THREE.Texture(b[f.image]);h.needsUpdate=!0;h.uuid=f.uuid;void 0!==f.name&&(h.name=f.name);void 0!==f.mapping&&(h.mapping=c(f.mapping));void 0!==f.repeat&&(h.repeat=new THREE.Vector2(f.repeat[0],f.repeat[1]));void 0!==f.minFilter&&(h.minFilter=c(f.minFilter));void 0!==f.magFilter&&(h.magFilter=c(f.magFilter));void 0!==f.anisotropy&&(h.anisotropy=f.anisotropy);Array.isArray(f.wrap)&&(h.wrapS=c(f.wrap[0]),h.wrapT=c(f.wrap[1]));
d[f.uuid]=h}return d},parseObject:function(){var a=new THREE.Matrix4;return function(b,c,d){var e;e=function(a){void 0===c[a]&&console.warn("THREE.ObjectLoader: Undefined geometry",a);return c[a]};var g=function(a){void 0===d[a]&&console.warn("THREE.ObjectLoader: Undefined material",a);return d[a]};switch(b.type){case "Scene":e=new THREE.Scene;break;case "PerspectiveCamera":e=new THREE.PerspectiveCamera(b.fov,b.aspect,b.near,b.far);break;case "OrthographicCamera":e=new THREE.OrthographicCamera(b.left,
b.right,b.top,b.bottom,b.near,b.far);break;case "AmbientLight":e=new THREE.AmbientLight(b.color);break;case "DirectionalLight":e=new THREE.DirectionalLight(b.color,b.intensity);break;case "PointLight":e=new THREE.PointLight(b.color,b.intensity,b.distance,b.decay);break;case "SpotLight":e=new THREE.SpotLight(b.color,b.intensity,b.distance,b.angle,b.exponent,b.decay);break;case "HemisphereLight":e=new THREE.HemisphereLight(b.color,b.groundColor,b.intensity);break;case "Mesh":e=new THREE.Mesh(e(b.geometry),
g(b.material));break;case "Line":e=new THREE.Line(e(b.geometry),g(b.material),b.mode);break;case "PointCloud":e=new THREE.PointCloud(e(b.geometry),g(b.material));break;case "Sprite":e=new THREE.Sprite(g(b.material));break;case "Group":e=new THREE.Group;break;default:e=new THREE.Object3D}e.uuid=b.uuid;void 0!==b.name&&(e.name=b.name);void 0!==b.matrix?(a.fromArray(b.matrix),a.decompose(e.position,e.quaternion,e.scale)):(void 0!==b.position&&e.position.fromArray(b.position),void 0!==b.rotation&&e.rotation.fromArray(b.rotation),
void 0!==b.scale&&e.scale.fromArray(b.scale));void 0!==b.castShadow&&(e.castShadow=b.castShadow);void 0!==b.receiveShadow&&(e.receiveShadow=b.receiveShadow);void 0!==b.visible&&(e.visible=b.visible);void 0!==b.userData&&(e.userData=b.userData);if(void 0!==b.children)for(var f in b.children)e.add(this.parseObject(b.children[f],c,d));return e}}()};THREE.TextureLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.TextureLoader.prototype={constructor:THREE.TextureLoader,load:function(a,b,c,d){var e=new THREE.ImageLoader(this.manager);e.setCrossOrigin(this.crossOrigin);e.load(a,function(a){a=new THREE.Texture(a);a.needsUpdate=!0;void 0!==b&&b(a)},c,d)},setCrossOrigin:function(a){this.crossOrigin=a}};THREE.DataTextureLoader=THREE.BinaryTextureLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager;this._parser=null};
THREE.BinaryTextureLoader.prototype={constructor:THREE.BinaryTextureLoader,load:function(a,b,c,d){var e=this,g=new THREE.DataTexture,f=new THREE.XHRLoader(this.manager);f.setCrossOrigin(this.crossOrigin);f.setResponseType("arraybuffer");f.load(a,function(a){if(a=e._parser(a))void 0!==a.image?g.image=a.image:void 0!==a.data&&(g.image.width=a.width,g.image.height=a.height,g.image.data=a.data),g.wrapS=void 0!==a.wrapS?a.wrapS:THREE.ClampToEdgeWrapping,g.wrapT=void 0!==a.wrapT?a.wrapT:THREE.ClampToEdgeWrapping,
g.magFilter=void 0!==a.magFilter?a.magFilter:THREE.LinearFilter,g.minFilter=void 0!==a.minFilter?a.minFilter:THREE.LinearMipMapLinearFilter,g.anisotropy=void 0!==a.anisotropy?a.anisotropy:1,void 0!==a.format&&(g.format=a.format),void 0!==a.type&&(g.type=a.type),void 0!==a.mipmaps&&(g.mipmaps=a.mipmaps),1===a.mipmapCount&&(g.minFilter=THREE.LinearFilter),g.needsUpdate=!0,b&&b(g,a)},c,d);return g},setCrossOrigin:function(a){this.crossOrigin=a}};
THREE.CompressedTextureLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager;this._parser=null};
THREE.CompressedTextureLoader.prototype={constructor:THREE.CompressedTextureLoader,load:function(a,b,c,d){var e=this,g=[],f=new THREE.CompressedTexture;f.image=g;var h=new THREE.XHRLoader(this.manager);h.setCrossOrigin(this.crossOrigin);h.setResponseType("arraybuffer");if(Array.isArray(a))for(var k=0,n=function(l){h.load(a[l],function(a){a=e._parser(a,!0);g[l]={width:a.width,height:a.height,format:a.format,mipmaps:a.mipmaps};k+=1;6===k&&(1===a.mipmapCount&&(f.minFilter=THREE.LinearFilter),f.format=
a.format,f.needsUpdate=!0,b&&b(f))},c,d)},l=0,p=a.length;l<p;++l)n(l);else h.load(a,function(a){a=e._parser(a,!0);if(a.isCubemap)for(var c=a.mipmaps.length/a.mipmapCount,d=0;d<c;d++){g[d]={mipmaps:[]};for(var h=0;h<a.mipmapCount;h++)g[d].mipmaps.push(a.mipmaps[d*a.mipmapCount+h]),g[d].format=a.format,g[d].width=a.width,g[d].height=a.height}else f.image.width=a.width,f.image.height=a.height,f.mipmaps=a.mipmaps;1===a.mipmapCount&&(f.minFilter=THREE.LinearFilter);f.format=a.format;f.needsUpdate=!0;b&&
b(f)},c,d);return f},setCrossOrigin:function(a){this.crossOrigin=a}};
THREE.Material=function(){Object.defineProperty(this,"id",{value:THREE.MaterialIdCount++});this.uuid=THREE.Math.generateUUID();this.name="";this.type="Material";this.side=THREE.FrontSide;this.opacity=1;this.transparent=!1;this.blending=THREE.NormalBlending;this.blendSrc=THREE.SrcAlphaFactor;this.blendDst=THREE.OneMinusSrcAlphaFactor;this.blendEquation=THREE.AddEquation;this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null;this.depthFunc=THREE.LessEqualDepth;this.colorWrite=this.depthWrite=
this.depthTest=!0;this.polygonOffset=!1;this.overdraw=this.alphaTest=this.polygonOffsetUnits=this.polygonOffsetFactor=0;this._needsUpdate=this.visible=!0};
THREE.Material.prototype={constructor:THREE.Material,get needsUpdate(){return this._needsUpdate},set needsUpdate(a){!0===a&&this.update();this._needsUpdate=a},setValues:function(a){if(void 0!==a)for(var b in a){var c=a[b];if(void 0===c)console.warn("THREE.Material: '"+b+"' parameter is undefined.");else if(b in this){var d=this[b];d instanceof THREE.Color?d.set(c):d instanceof THREE.Vector3&&c instanceof THREE.Vector3?d.copy(c):this[b]="overdraw"===b?Number(c):c}}},toJSON:function(a){var b={metadata:{version:4.4,
type:"Material",generator:"Material.toJSON"}};b.uuid=this.uuid;b.type=this.type;""!==this.name&&(b.name=this.name);this.color instanceof THREE.Color&&(b.color=this.color.getHex());this.emissive instanceof THREE.Color&&(b.emissive=this.emissive.getHex());this.specular instanceof THREE.Color&&(b.specular=this.specular.getHex());void 0!==this.shininess&&(b.shininess=this.shininess);this.map instanceof THREE.Texture&&(b.map=this.map.toJSON(a).uuid);this.alphaMap instanceof THREE.Texture&&(b.alphaMap=
this.alphaMap.toJSON(a).uuid);this.lightMap instanceof THREE.Texture&&(b.lightMap=this.lightMap.toJSON(a).uuid);this.bumpMap instanceof THREE.Texture&&(b.bumpMap=this.bumpMap.toJSON(a).uuid,b.bumpScale=this.bumpScale);this.normalMap instanceof THREE.Texture&&(b.normalMap=this.normalMap.toJSON(a).uuid,b.normalScale=this.normalScale);this.specularMap instanceof THREE.Texture&&(b.specularMap=this.specularMap.toJSON(a).uuid);this.envMap instanceof THREE.Texture&&(b.envMap=this.envMap.toJSON(a).uuid,b.reflectivity=
this.reflectivity);void 0!==this.size&&(b.size=this.size);void 0!==this.sizeAttenuation&&(b.sizeAttenuation=this.sizeAttenuation);void 0!==this.vertexColors&&this.vertexColors!==THREE.NoColors&&(b.vertexColors=this.vertexColors);void 0!==this.shading&&this.shading!==THREE.SmoothShading&&(b.shading=this.shading);void 0!==this.blending&&this.blending!==THREE.NormalBlending&&(b.blending=this.blending);void 0!==this.side&&this.side!==THREE.FrontSide&&(b.side=this.side);1>this.opacity&&(b.opacity=this.opacity);
!0===this.transparent&&(b.transparent=this.transparent);!0===this.wireframe&&(b.wireframe=this.wireframe);return b},clone:function(){return(new THREE.Material).copy(this)},copy:function(a){this.name=a.name;this.side=a.side;this.opacity=a.opacity;this.transparent=a.transparent;this.blending=a.blending;this.blendSrc=a.blendSrc;this.blendDst=a.blendDst;this.blendEquation=a.blendEquation;this.blendSrcAlpha=a.blendSrcAlpha;this.blendDstAlpha=a.blendDstAlpha;this.blendEquationAlpha=a.blendEquationAlpha;
this.depthFunc=a.depthFunc;this.depthTest=a.depthTest;this.depthWrite=a.depthWrite;this.polygonOffset=a.polygonOffset;this.polygonOffsetFactor=a.polygonOffsetFactor;this.polygonOffsetUnits=a.polygonOffsetUnits;this.alphaTest=a.alphaTest;this.overdraw=a.overdraw;this.visible=a.visible;return this},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.Material.prototype);THREE.MaterialIdCount=0;
THREE.LineBasicMaterial=function(a){THREE.Material.call(this);this.type="LineBasicMaterial";this.color=new THREE.Color(16777215);this.linewidth=1;this.linejoin=this.linecap="round";this.vertexColors=THREE.NoColors;this.fog=!0;this.setValues(a)};THREE.LineBasicMaterial.prototype=Object.create(THREE.Material.prototype);THREE.LineBasicMaterial.prototype.constructor=THREE.LineBasicMaterial;
THREE.LineBasicMaterial.prototype.clone=function(){var a=new THREE.LineBasicMaterial;a.copy(this);a.color.copy(this.color);a.linewidth=this.linewidth;a.linecap=this.linecap;a.linejoin=this.linejoin;a.vertexColors=this.vertexColors;a.fog=this.fog;return a};THREE.LineDashedMaterial=function(a){THREE.Material.call(this);this.type="LineDashedMaterial";this.color=new THREE.Color(16777215);this.scale=this.linewidth=1;this.dashSize=3;this.gapSize=1;this.vertexColors=!1;this.fog=!0;this.setValues(a)};
THREE.LineDashedMaterial.prototype=Object.create(THREE.Material.prototype);THREE.LineDashedMaterial.prototype.constructor=THREE.LineDashedMaterial;THREE.LineDashedMaterial.prototype.clone=function(){var a=new THREE.LineDashedMaterial;a.copy(this);a.color.copy(this.color);a.linewidth=this.linewidth;a.scale=this.scale;a.dashSize=this.dashSize;a.gapSize=this.gapSize;a.vertexColors=this.vertexColors;a.fog=this.fog;return a};
THREE.MeshBasicMaterial=function(a){THREE.Material.call(this);this.type="MeshBasicMaterial";this.color=new THREE.Color(16777215);this.aoMap=this.map=null;this.aoMapIntensity=1;this.envMap=this.alphaMap=this.specularMap=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=.98;this.fog=!0;this.shading=THREE.SmoothShading;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.vertexColors=THREE.NoColors;this.morphTargets=this.skinning=
!1;this.setValues(a)};THREE.MeshBasicMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshBasicMaterial.prototype.constructor=THREE.MeshBasicMaterial;
THREE.MeshBasicMaterial.prototype.clone=function(){var a=new THREE.MeshBasicMaterial;a.copy(this);a.color.copy(this.color);a.map=this.map;a.aoMap=this.aoMap;a.aoMapIntensity=this.aoMapIntensity;a.specularMap=this.specularMap;a.alphaMap=this.alphaMap;a.envMap=this.envMap;a.combine=this.combine;a.reflectivity=this.reflectivity;a.refractionRatio=this.refractionRatio;a.fog=this.fog;a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;a.wireframeLinecap=this.wireframeLinecap;
a.wireframeLinejoin=this.wireframeLinejoin;a.vertexColors=this.vertexColors;a.skinning=this.skinning;a.morphTargets=this.morphTargets;return a};
THREE.MeshLambertMaterial=function(a){THREE.Material.call(this);this.type="MeshLambertMaterial";this.color=new THREE.Color(16777215);this.emissive=new THREE.Color(0);this.envMap=this.alphaMap=this.specularMap=this.map=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=.98;this.fog=!0;this.shading=THREE.SmoothShading;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.vertexColors=THREE.NoColors;this.morphNormals=this.morphTargets=
this.skinning=!1;this.setValues(a)};THREE.MeshLambertMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshLambertMaterial.prototype.constructor=THREE.MeshLambertMaterial;
THREE.MeshLambertMaterial.prototype.clone=function(){var a=new THREE.MeshLambertMaterial;a.copy(this);a.color.copy(this.color);a.emissive.copy(this.emissive);a.map=this.map;a.specularMap=this.specularMap;a.alphaMap=this.alphaMap;a.envMap=this.envMap;a.combine=this.combine;a.reflectivity=this.reflectivity;a.refractionRatio=this.refractionRatio;a.fog=this.fog;a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;a.wireframeLinecap=this.wireframeLinecap;a.wireframeLinejoin=
this.wireframeLinejoin;a.vertexColors=this.vertexColors;a.skinning=this.skinning;a.morphTargets=this.morphTargets;a.morphNormals=this.morphNormals;return a};
THREE.MeshPhongMaterial=function(a){THREE.Material.call(this);this.type="MeshPhongMaterial";this.color=new THREE.Color(16777215);this.emissive=new THREE.Color(0);this.specular=new THREE.Color(1118481);this.shininess=30;this.metal=!1;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new THREE.Vector2(1,1);this.envMap=this.alphaMap=this.specularMap=null;this.combine=THREE.MultiplyOperation;
this.reflectivity=1;this.refractionRatio=.98;this.fog=!0;this.shading=THREE.SmoothShading;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.vertexColors=THREE.NoColors;this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)};THREE.MeshPhongMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshPhongMaterial.prototype.constructor=THREE.MeshPhongMaterial;
THREE.MeshPhongMaterial.prototype.copy=function(a){THREE.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.emissive.copy(a.emissive);this.specular.copy(a.specular);this.shininess=a.shininess;this.metal=a.metal;this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissiveMap=a.emissiveMap;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalScale.copy(a.normalScale);
this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.fog=a.fog;this.shading=a.shading;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.vertexColors=a.vertexColors;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};
THREE.MeshPhongMaterial.prototype.clone=function(){return(new THREE.MeshPhongMaterial).copy(this)};THREE.MeshDepthMaterial=function(a){THREE.Material.call(this);this.type="MeshDepthMaterial";this.wireframe=this.morphTargets=!1;this.wireframeLinewidth=1;this.setValues(a)};THREE.MeshDepthMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshDepthMaterial.prototype.constructor=THREE.MeshDepthMaterial;
THREE.MeshDepthMaterial.prototype.clone=function(){var a=new THREE.MeshDepthMaterial;a.copy(this);a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;return a};THREE.MeshNormalMaterial=function(a){THREE.Material.call(this,a);this.type="MeshNormalMaterial";this.wireframe=!1;this.wireframeLinewidth=1;this.morphTargets=!1;this.setValues(a)};THREE.MeshNormalMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshNormalMaterial.prototype.constructor=THREE.MeshNormalMaterial;
THREE.MeshNormalMaterial.prototype.clone=function(){var a=new THREE.MeshNormalMaterial;a.copy(this);a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;return a};THREE.MeshFaceMaterial=function(a){this.uuid=THREE.Math.generateUUID();this.type="MeshFaceMaterial";this.materials=a instanceof Array?a:[]};
THREE.MeshFaceMaterial.prototype={constructor:THREE.MeshFaceMaterial,toJSON:function(){for(var a={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},b=0,c=this.materials.length;b<c;b++)a.materials.push(this.materials[b].toJSON());return a},clone:function(){for(var a=new THREE.MeshFaceMaterial,b=0;b<this.materials.length;b++)a.materials.push(this.materials[b].clone());return a}};
THREE.PointCloudMaterial=function(a){THREE.Material.call(this);this.type="PointCloudMaterial";this.color=new THREE.Color(16777215);this.map=null;this.size=1;this.sizeAttenuation=!0;this.vertexColors=THREE.NoColors;this.fog=!0;this.setValues(a)};THREE.PointCloudMaterial.prototype=Object.create(THREE.Material.prototype);THREE.PointCloudMaterial.prototype.constructor=THREE.PointCloudMaterial;
THREE.PointCloudMaterial.prototype.clone=function(){var a=new THREE.PointCloudMaterial;a.copy(this);a.color.copy(this.color);a.map=this.map;a.size=this.size;a.sizeAttenuation=this.sizeAttenuation;a.vertexColors=this.vertexColors;a.fog=this.fog;return a};THREE.ParticleBasicMaterial=function(a){console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointCloudMaterial.");return new THREE.PointCloudMaterial(a)};
THREE.ParticleSystemMaterial=function(a){console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointCloudMaterial.");return new THREE.PointCloudMaterial(a)};
THREE.ShaderMaterial=function(a){THREE.Material.call(this);this.type="ShaderMaterial";this.defines={};this.uniforms={};this.attributes=[];this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}";this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";this.shading=THREE.SmoothShading;this.linewidth=1;this.wireframe=!1;this.wireframeLinewidth=1;this.lights=this.fog=!1;this.vertexColors=THREE.NoColors;this.derivatives=
this.morphNormals=this.morphTargets=this.skinning=!1;this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};this.index0AttributeName=void 0;void 0!==a&&(void 0!==a.attributes&&!1===Array.isArray(a.attributes)&&(console.warn("THREE.ShaderMaterial: attributes should now be an array of attribute names."),a.attributes=Object.keys(a.attributes)),this.setValues(a))};THREE.ShaderMaterial.prototype=Object.create(THREE.Material.prototype);THREE.ShaderMaterial.prototype.constructor=THREE.ShaderMaterial;
THREE.ShaderMaterial.prototype.clone=function(){return(new THREE.ShaderMaterial).copy(this)};
THREE.ShaderMaterial.prototype.copy=function(a){THREE.Material.prototype.copy.call(this,a);this.fragmentShader=a.fragmentShader;this.vertexShader=a.vertexShader;this.uniforms=THREE.UniformsUtils.clone(a.uniforms);this.attributes=a.attributes;this.defines=a.defines;this.shading=a.shading;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.fog=a.fog;this.lights=a.lights;this.vertexColors=a.vertexColors;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=
a.morphNormals;return this};THREE.ShaderMaterial.prototype.toJSON=function(a){a=THREE.Material.prototype.toJSON.call(this,a);a.uniforms=this.uniforms;a.attributes=this.attributes;a.vertexShader=this.vertexShader;a.fragmentShader=this.fragmentShader;return a};THREE.RawShaderMaterial=function(a){THREE.ShaderMaterial.call(this,a);this.type="RawShaderMaterial"};THREE.RawShaderMaterial.prototype=Object.create(THREE.ShaderMaterial.prototype);THREE.RawShaderMaterial.prototype.constructor=THREE.RawShaderMaterial;
THREE.RawShaderMaterial.prototype.clone=function(){var a=new THREE.RawShaderMaterial;a.copy(this);return a};THREE.SpriteMaterial=function(a){THREE.Material.call(this);this.type="SpriteMaterial";this.color=new THREE.Color(16777215);this.map=null;this.rotation=0;this.fog=!1;this.setValues(a)};THREE.SpriteMaterial.prototype=Object.create(THREE.Material.prototype);THREE.SpriteMaterial.prototype.constructor=THREE.SpriteMaterial;
THREE.SpriteMaterial.prototype.clone=function(){var a=new THREE.SpriteMaterial;a.copy(this);a.color.copy(this.color);a.map=this.map;a.rotation=this.rotation;a.fog=this.fog;return a};
THREE.Texture=function(a,b,c,d,e,g,f,h,k){Object.defineProperty(this,"id",{value:THREE.TextureIdCount++});this.uuid=THREE.Math.generateUUID();this.sourceFile=this.name="";this.image=void 0!==a?a:THREE.Texture.DEFAULT_IMAGE;this.mipmaps=[];this.mapping=void 0!==b?b:THREE.Texture.DEFAULT_MAPPING;this.wrapS=void 0!==c?c:THREE.ClampToEdgeWrapping;this.wrapT=void 0!==d?d:THREE.ClampToEdgeWrapping;this.magFilter=void 0!==e?e:THREE.LinearFilter;this.minFilter=void 0!==g?g:THREE.LinearMipMapLinearFilter;
this.anisotropy=void 0!==k?k:1;this.format=void 0!==f?f:THREE.RGBAFormat;this.type=void 0!==h?h:THREE.UnsignedByteType;this.offset=new THREE.Vector2(0,0);this.repeat=new THREE.Vector2(1,1);this.generateMipmaps=!0;this.premultiplyAlpha=!1;this.flipY=!0;this.unpackAlignment=4;this.version=0;this.onUpdate=null};THREE.Texture.DEFAULT_IMAGE=void 0;THREE.Texture.DEFAULT_MAPPING=THREE.UVMapping;
THREE.Texture.prototype={constructor:THREE.Texture,set needsUpdate(a){!0===a&&this.version++},clone:function(){return(new THREE.Texture).copy(this)},copy:function(a){this.image=a.image;this.mipmaps=a.mipmaps.slice(0);this.mapping=a.mapping;this.wrapS=a.wrapS;this.wrapT=a.wrapT;this.magFilter=a.magFilter;this.minFilter=a.minFilter;this.anisotropy=a.anisotropy;this.format=a.format;this.type=a.type;this.offset.copy(a.offset);this.repeat.copy(a.repeat);this.generateMipmaps=a.generateMipmaps;this.premultiplyAlpha=
a.premultiplyAlpha;this.flipY=a.flipY;this.unpackAlignment=a.unpackAlignment;return this},toJSON:function(a){if(void 0!==a.textures[this.uuid])return a.textures[this.uuid];var b={metadata:{version:4.4,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy};if(void 0!==this.image){var c=
this.image;void 0===c.uuid&&(c.uuid=THREE.Math.generateUUID());if(void 0===a.images[c.uuid]){var d=a.images,e=c.uuid,g=c.uuid,f;void 0!==c.toDataURL?f=c:(f=document.createElement("canvas"),f.width=c.width,f.height=c.height,f.getContext("2d").drawImage(c,0,0,c.width,c.height));f=2048<f.width||2048<f.height?f.toDataURL("image/jpeg",.6):f.toDataURL("image/png");d[e]={uuid:g,url:f}}b.image=c.uuid}return a.textures[this.uuid]=b},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.Texture.prototype);
THREE.TextureIdCount=0;THREE.CubeTexture=function(a,b,c,d,e,g,f,h,k){b=void 0!==b?b:THREE.CubeReflectionMapping;THREE.Texture.call(this,a,b,c,d,e,g,f,h,k);this.images=a;this.flipY=!1};THREE.CubeTexture.prototype=Object.create(THREE.Texture.prototype);THREE.CubeTexture.prototype.constructor=THREE.CubeTexture;THREE.CubeTexture.clone=function(){var a=new THREE.CubeTexture;a.copy(this);a.images=this.images;return a};
THREE.CompressedTexture=function(a,b,c,d,e,g,f,h,k,n,l){THREE.Texture.call(this,null,g,f,h,k,n,d,e,l);this.image={width:b,height:c};this.mipmaps=a;this.generateMipmaps=this.flipY=!1};THREE.CompressedTexture.prototype=Object.create(THREE.Texture.prototype);THREE.CompressedTexture.prototype.constructor=THREE.CompressedTexture;THREE.CompressedTexture.prototype.clone=function(){var a=new THREE.CompressedTexture;a.copy(this);return a};
THREE.DataTexture=function(a,b,c,d,e,g,f,h,k,n,l){THREE.Texture.call(this,null,g,f,h,k,n,d,e,l);this.image={data:a,width:b,height:c}};THREE.DataTexture.prototype=Object.create(THREE.Texture.prototype);THREE.DataTexture.prototype.constructor=THREE.DataTexture;THREE.DataTexture.prototype.clone=function(){var a=new THREE.DataTexture;a.copy(this);return a};
THREE.VideoTexture=function(a,b,c,d,e,g,f,h,k){THREE.Texture.call(this,a,b,c,d,e,g,f,h,k);this.generateMipmaps=!1;var n=this,l=function(){requestAnimationFrame(l);a.readyState===a.HAVE_ENOUGH_DATA&&(n.needsUpdate=!0)};l()};THREE.VideoTexture.prototype=Object.create(THREE.Texture.prototype);THREE.VideoTexture.prototype.constructor=THREE.VideoTexture;THREE.Group=function(){THREE.Object3D.call(this);this.type="Group"};THREE.Group.prototype=Object.create(THREE.Object3D.prototype);
THREE.Group.prototype.constructor=THREE.Group;THREE.Group.prototype.clone=function(){return(new THREE.Group).copy(this)};THREE.Group.prototype.copy=function(a){THREE.Object3D.prototype.copy.call(this,a);return this};THREE.PointCloud=function(a,b){THREE.Object3D.call(this);this.type="PointCloud";this.geometry=void 0!==a?a:new THREE.Geometry;this.material=void 0!==b?b:new THREE.PointCloudMaterial({color:16777215*Math.random()})};THREE.PointCloud.prototype=Object.create(THREE.Object3D.prototype);
THREE.PointCloud.prototype.constructor=THREE.PointCloud;
THREE.PointCloud.prototype.raycast=function(){var a=new THREE.Matrix4,b=new THREE.Ray;return function(c,d){var e=this,g=e.geometry,f=c.params.PointCloud.threshold;a.getInverse(this.matrixWorld);b.copy(c.ray).applyMatrix4(a);if(null===g.boundingBox||!1!==b.isIntersectionBox(g.boundingBox)){var f=f/((this.scale.x+this.scale.y+this.scale.z)/3),h=f*f,k=new THREE.Vector3,f=function(a,g){var f=b.distanceSqToPoint(a);if(f<h){var k=b.closestPointToPoint(a);k.applyMatrix4(e.matrixWorld);var l=c.ray.origin.distanceTo(k);
l<c.near||l>c.far||d.push({distance:l,distanceToRay:Math.sqrt(f),point:k.clone(),index:g,face:null,object:e})}};if(g instanceof THREE.BufferGeometry){var n=g.attributes,l=n.position.array;if(void 0!==n.index){var n=n.index.array,p=g.drawcalls;0===p.length&&(p=[{start:0,count:n.length,index:0}]);for(var m=0,q=p.length;m<q;++m)for(var r=p[m],t=r.start,u=r.index,g=t,r=t+r.count;g<r;g++)t=u+n[g],k.fromArray(l,3*t),f(k,t)}else for(g=0,n=l.length/3;g<n;g++)k.fromArray(l,3*g),f(k,g)}else for(k=g.vertices,
g=0,n=k.length;g<n;g++)f(k[g],g)}}}();THREE.PointCloud.prototype.clone=function(){return(new THREE.PointCloud(this.geometry,this.material)).copy(this)};THREE.PointCloud.prototype.copy=function(a){THREE.Object3D.prototype.copy.call(this,a);return this};
THREE.PointCloud.prototype.toJSON=function(a){var b=THREE.Object3D.prototype.toJSON.call(this,a);void 0===a.geometries[this.geometry.uuid]&&(a.geometries[this.geometry.uuid]=this.geometry.toJSON());void 0===a.materials[this.material.uuid]&&(a.materials[this.material.uuid]=this.material.toJSON());b.object.geometry=this.geometry.uuid;b.object.material=this.material.uuid;return b};
THREE.ParticleSystem=function(a,b){console.warn("THREE.ParticleSystem has been renamed to THREE.PointCloud.");return new THREE.PointCloud(a,b)};THREE.Line=function(a,b,c){1===c&&console.error("THREE.Line: THREE.LinePieces mode has been removed. Use THREE.LineSegments instead.");THREE.Object3D.call(this);this.type="Line";this.geometry=void 0!==a?a:new THREE.Geometry;this.material=void 0!==b?b:new THREE.LineBasicMaterial({color:16777215*Math.random()})};THREE.Line.prototype=Object.create(THREE.Object3D.prototype);
THREE.Line.prototype.constructor=THREE.Line;
THREE.Line.prototype.raycast=function(){var a=new THREE.Matrix4,b=new THREE.Ray,c=new THREE.Sphere;return function(d,e){var g=d.linePrecision,g=g*g,f=this.geometry;null===f.boundingSphere&&f.computeBoundingSphere();c.copy(f.boundingSphere);c.applyMatrix4(this.matrixWorld);if(!1!==d.ray.isIntersectionSphere(c)){a.getInverse(this.matrixWorld);b.copy(d.ray).applyMatrix4(a);var h=new THREE.Vector3,k=new THREE.Vector3,n=new THREE.Vector3,l=new THREE.Vector3,p=this instanceof THREE.LineSegments?2:1;if(f instanceof
THREE.BufferGeometry){var m=f.attributes;if(void 0!==m.index){var q=m.index.array,m=m.position.array,r=f.drawcalls;0===r.length&&(r=[{start:0,count:q.length,index:0}]);for(var t=0;t<r.length;t++)for(var u=r[t].start,y=r[t].count,w=r[t].index,f=u;f<u+y-1;f+=p){var A=w+q[f+1];h.fromArray(m,3*(w+q[f]));k.fromArray(m,3*A);A=b.distanceSqToSegment(h,k,l,n);A>g||(A=b.origin.distanceTo(l),A<d.near||A>d.far||e.push({distance:A,point:n.clone().applyMatrix4(this.matrixWorld),index:f,offsetIndex:t,face:null,
faceIndex:null,object:this}))}}else for(m=m.position.array,f=0;f<m.length/3-1;f+=p)h.fromArray(m,3*f),k.fromArray(m,3*f+3),A=b.distanceSqToSegment(h,k,l,n),A>g||(A=b.origin.distanceTo(l),A<d.near||A>d.far||e.push({distance:A,point:n.clone().applyMatrix4(this.matrixWorld),index:f,face:null,faceIndex:null,object:this}))}else if(f instanceof THREE.Geometry)for(h=f.vertices,k=h.length,f=0;f<k-1;f+=p)A=b.distanceSqToSegment(h[f],h[f+1],l,n),A>g||(A=b.origin.distanceTo(l),A<d.near||A>d.far||e.push({distance:A,
point:n.clone().applyMatrix4(this.matrixWorld),index:f,face:null,faceIndex:null,object:this}))}}}();THREE.Line.prototype.clone=function(){return(new THREE.Line(this.geometry,this.material)).copy(this)};THREE.Line.prototype.copy=function(a){THREE.Object3D.prototype.copy.call(this,a);return this};
THREE.Line.prototype.toJSON=function(a){var b=THREE.Object3D.prototype.toJSON.call(this,a);void 0===a.geometries[this.geometry.uuid]&&(a.geometries[this.geometry.uuid]=this.geometry.toJSON());void 0===a.materials[this.material.uuid]&&(a.materials[this.material.uuid]=this.material.toJSON());b.object.geometry=this.geometry.uuid;b.object.material=this.material.uuid;return b};THREE.LineStrip=0;THREE.LinePieces=1;THREE.LineSegments=function(a,b){THREE.Line.call(this,a,b);this.type="LineSegments"};
THREE.LineSegments.prototype=Object.create(THREE.Line.prototype);THREE.LineSegments.prototype.constructor=THREE.LineSegments;THREE.LineSegments.prototype.clone=function(){var a=new THREE.LineSegments(this.geometry,this.material);a.copy(this);return a};THREE.Mesh=function(a,b){THREE.Object3D.call(this);this.type="Mesh";this.geometry=void 0!==a?a:new THREE.Geometry;this.material=void 0!==b?b:new THREE.MeshBasicMaterial({color:16777215*Math.random()});this.updateMorphTargets()};
THREE.Mesh.prototype=Object.create(THREE.Object3D.prototype);THREE.Mesh.prototype.constructor=THREE.Mesh;
THREE.Mesh.prototype.updateMorphTargets=function(){if(void 0!==this.geometry.morphTargets&&0<this.geometry.morphTargets.length){this.morphTargetBase=-1;this.morphTargetForcedOrder=[];this.morphTargetInfluences=[];this.morphTargetDictionary={};for(var a=0,b=this.geometry.morphTargets.length;a<b;a++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[a].name]=a}};
THREE.Mesh.prototype.getMorphTargetIndexByName=function(a){if(void 0!==this.morphTargetDictionary[a])return this.morphTargetDictionary[a];console.warn("THREE.Mesh.getMorphTargetIndexByName: morph target "+a+" does not exist. Returning 0.");return 0};
THREE.Mesh.prototype.raycast=function(){var a=new THREE.Matrix4,b=new THREE.Ray,c=new THREE.Sphere,d=new THREE.Vector3,e=new THREE.Vector3,g=new THREE.Vector3,f=new THREE.Vector3,h=new THREE.Vector3,k=new THREE.Vector3;return function(n,l){var p=this.geometry,m=this.material;if(void 0!==m&&(null===p.boundingSphere&&p.computeBoundingSphere(),c.copy(p.boundingSphere),c.applyMatrix4(this.matrixWorld),!1!==n.ray.isIntersectionSphere(c)&&(a.getInverse(this.matrixWorld),b.copy(n.ray).applyMatrix4(a),null===
p.boundingBox||!1!==b.isIntersectionBox(p.boundingBox)))){var q,r,t;if(p instanceof THREE.BufferGeometry)if(q=p.attributes,void 0!==q.index){var u=q.index.array,y=q.position.array,p=p.drawcalls;0===p.length&&(p=[{start:0,count:u.length,index:0}]);for(var w=0,A=p.length;w<A;++w){q=p[w].start;for(var v=p[w].index,z=q,C=q+p[w].count;z<C;z+=3){q=v+u[z];r=v+u[z+1];t=v+u[z+2];d.fromArray(y,3*q);e.fromArray(y,3*r);g.fromArray(y,3*t);var B=m.side===THREE.BackSide?b.intersectTriangle(g,e,d,!0):b.intersectTriangle(d,
e,g,m.side!==THREE.DoubleSide);if(null!==B){B.applyMatrix4(this.matrixWorld);var x=n.ray.origin.distanceTo(B);x<n.near||x>n.far||l.push({distance:x,point:B,face:new THREE.Face3(q,r,t,THREE.Triangle.normal(d,e,g)),faceIndex:Math.floor(z/3),object:this})}}}}else for(y=q.position.array,z=0,C=y.length;z<C;z+=9)d.fromArray(y,z),e.fromArray(y,z+3),g.fromArray(y,z+6),B=m.side===THREE.BackSide?b.intersectTriangle(g,e,d,!0):b.intersectTriangle(d,e,g,m.side!==THREE.DoubleSide),null!==B&&(B.applyMatrix4(this.matrixWorld),
x=n.ray.origin.distanceTo(B),x<n.near||x>n.far||(q=z/3,r=q+1,t=q+2,l.push({distance:x,point:B,face:new THREE.Face3(q,r,t,THREE.Triangle.normal(d,e,g)),index:q,object:this})));else if(p instanceof THREE.Geometry)for(u=m instanceof THREE.MeshFaceMaterial,y=!0===u?m.materials:null,w=p.vertices,A=p.faces,v=0,z=A.length;v<z;v++)if(C=A[v],B=!0===u?y[C.materialIndex]:m,void 0!==B){q=w[C.a];r=w[C.b];t=w[C.c];if(!0===B.morphTargets){var x=p.morphTargets,J=this.morphTargetInfluences;d.set(0,0,0);e.set(0,0,
0);g.set(0,0,0);for(var G=0,F=x.length;G<F;G++){var O=J[G];if(0!==O){var D=x[G].vertices;d.addScaledVector(f.subVectors(D[C.a],q),O);e.addScaledVector(h.subVectors(D[C.b],r),O);g.addScaledVector(k.subVectors(D[C.c],t),O)}}d.add(q);e.add(r);g.add(t);q=d;r=e;t=g}B=B.side===THREE.BackSide?b.intersectTriangle(t,r,q,!0):b.intersectTriangle(q,r,t,B.side!==THREE.DoubleSide);null!==B&&(B.applyMatrix4(this.matrixWorld),x=n.ray.origin.distanceTo(B),x<n.near||x>n.far||l.push({distance:x,point:B,face:C,faceIndex:v,
object:this}))}}}}();THREE.Mesh.prototype.clone=function(){return(new THREE.Mesh(this.geometry,this.material)).copy(this)};THREE.Mesh.prototype.copy=function(a){THREE.Object3D.prototype.copy.call(this,a);return this};
THREE.Mesh.prototype.toJSON=function(a){var b=THREE.Object3D.prototype.toJSON.call(this,a);void 0===a.geometries[this.geometry.uuid]&&(a.geometries[this.geometry.uuid]=this.geometry.toJSON(a));void 0===a.materials[this.material.uuid]&&(a.materials[this.material.uuid]=this.material.toJSON(a));b.object.geometry=this.geometry.uuid;b.object.material=this.material.uuid;return b};THREE.Bone=function(a){THREE.Object3D.call(this);this.type="Bone";this.skin=a};THREE.Bone.prototype=Object.create(THREE.Object3D.prototype);
THREE.Bone.prototype.constructor=THREE.Bone;THREE.Bone.prototype.clone=function(){return(new THREE.Bone(this.skin)).copy(this)};THREE.Bone.prototype.copy=function(a){THREE.Object3D.prototype.copy.call(this,a);this.skin=a.skin;return this};
THREE.Skeleton=function(a,b,c){this.useVertexTexture=void 0!==c?c:!0;this.identityMatrix=new THREE.Matrix4;a=a||[];this.bones=a.slice(0);this.useVertexTexture?(a=THREE.Math.nextPowerOfTwo(Math.sqrt(4*this.bones.length)),0===a&&(a=2),this.boneTextureHeight=this.boneTextureWidth=a,this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new THREE.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,THREE.RGBAFormat,THREE.FloatType),this.boneTexture.minFilter=
THREE.NearestFilter,this.boneTexture.magFilter=THREE.NearestFilter,this.boneTexture.generateMipmaps=!1,this.boneTexture.flipY=!1):this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===b)this.calculateInverses();else if(this.bones.length===b.length)this.boneInverses=b.slice(0);else for(console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[],b=0,a=this.bones.length;b<a;b++)this.boneInverses.push(new THREE.Matrix4)};
THREE.Skeleton.prototype.calculateInverses=function(){this.boneInverses=[];for(var a=0,b=this.bones.length;a<b;a++){var c=new THREE.Matrix4;this.bones[a]&&c.getInverse(this.bones[a].matrixWorld);this.boneInverses.push(c)}};
THREE.Skeleton.prototype.pose=function(){for(var a,b=0,c=this.bones.length;b<c;b++)(a=this.bones[b])&&a.matrixWorld.getInverse(this.boneInverses[b]);b=0;for(c=this.bones.length;b<c;b++)if(a=this.bones[b])a.parent?(a.matrix.getInverse(a.parent.matrixWorld),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale)};
THREE.Skeleton.prototype.update=function(){var a=new THREE.Matrix4;return function(){for(var b=0,c=this.bones.length;b<c;b++)a.multiplyMatrices(this.bones[b]?this.bones[b].matrixWorld:this.identityMatrix,this.boneInverses[b]),a.flattenToArrayOffset(this.boneMatrices,16*b);this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}();THREE.Skeleton.prototype.clone=function(){return new THREE.Skeleton(this.bones,this.boneInverses,this.useVertexTexture)};
THREE.SkinnedMesh=function(a,b,c){THREE.Mesh.call(this,a,b);this.type="SkinnedMesh";this.bindMode="attached";this.bindMatrix=new THREE.Matrix4;this.bindMatrixInverse=new THREE.Matrix4;a=[];if(this.geometry&&void 0!==this.geometry.bones){for(var d,e=0,g=this.geometry.bones.length;e<g;++e)d=this.geometry.bones[e],b=new THREE.Bone(this),a.push(b),b.name=d.name,b.position.fromArray(d.pos),b.quaternion.fromArray(d.rotq),void 0!==d.scl&&b.scale.fromArray(d.scl);e=0;for(g=this.geometry.bones.length;e<g;++e)d=
this.geometry.bones[e],-1!==d.parent?a[d.parent].add(a[e]):this.add(a[e])}this.normalizeSkinWeights();this.updateMatrixWorld(!0);this.bind(new THREE.Skeleton(a,void 0,c),this.matrixWorld)};THREE.SkinnedMesh.prototype=Object.create(THREE.Mesh.prototype);THREE.SkinnedMesh.prototype.constructor=THREE.SkinnedMesh;THREE.SkinnedMesh.prototype.bind=function(a,b){this.skeleton=a;void 0===b&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),b=this.matrixWorld);this.bindMatrix.copy(b);this.bindMatrixInverse.getInverse(b)};
THREE.SkinnedMesh.prototype.pose=function(){this.skeleton.pose()};THREE.SkinnedMesh.prototype.normalizeSkinWeights=function(){if(this.geometry instanceof THREE.Geometry)for(var a=0;a<this.geometry.skinIndices.length;a++){var b=this.geometry.skinWeights[a],c=1/b.lengthManhattan();Infinity!==c?b.multiplyScalar(c):b.set(1)}};
THREE.SkinnedMesh.prototype.updateMatrixWorld=function(a){THREE.Mesh.prototype.updateMatrixWorld.call(this,!0);"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unrecognized bindMode: "+this.bindMode)};THREE.SkinnedMesh.prototype.clone=function(){return(new THREE.SkinnedMesh(this.geometry,this.material,this.useVertexTexture)).copy(this)};
THREE.SkinnedMesh.prototype.copy=function(a){THREE.Mesh.prototype.copy.call(this,a);return this};THREE.MorphAnimMesh=function(a,b){THREE.Mesh.call(this,a,b);this.type="MorphAnimMesh";this.duration=1E3;this.mirroredLoop=!1;this.currentKeyframe=this.lastKeyframe=this.time=0;this.direction=1;this.directionBackwards=!1;this.setFrameRange(0,a.morphTargets.length-1)};THREE.MorphAnimMesh.prototype=Object.create(THREE.Mesh.prototype);THREE.MorphAnimMesh.prototype.constructor=THREE.MorphAnimMesh;
THREE.MorphAnimMesh.prototype.setFrameRange=function(a,b){this.startKeyframe=a;this.endKeyframe=b;this.length=this.endKeyframe-this.startKeyframe+1};THREE.MorphAnimMesh.prototype.setDirectionForward=function(){this.direction=1;this.directionBackwards=!1};THREE.MorphAnimMesh.prototype.setDirectionBackward=function(){this.direction=-1;this.directionBackwards=!0};
THREE.MorphAnimMesh.prototype.parseAnimations=function(){var a=this.geometry;a.animations||(a.animations={});for(var b,c=a.animations,d=/([a-z]+)_?(\d+)/,e=0,g=a.morphTargets.length;e<g;e++){var f=a.morphTargets[e].name.match(d);if(f&&1<f.length){f=f[1];c[f]||(c[f]={start:Infinity,end:-Infinity});var h=c[f];e<h.start&&(h.start=e);e>h.end&&(h.end=e);b||(b=f)}}a.firstAnimation=b};
THREE.MorphAnimMesh.prototype.setAnimationLabel=function(a,b,c){this.geometry.animations||(this.geometry.animations={});this.geometry.animations[a]={start:b,end:c}};THREE.MorphAnimMesh.prototype.playAnimation=function(a,b){var c=this.geometry.animations[a];c?(this.setFrameRange(c.start,c.end),this.duration=(c.end-c.start)/b*1E3,this.time=0):console.warn("THREE.MorphAnimMesh: animation["+a+"] undefined in .playAnimation()")};
THREE.MorphAnimMesh.prototype.updateAnimation=function(a){var b=this.duration/this.length;this.time+=this.direction*a;if(this.mirroredLoop){if(this.time>this.duration||0>this.time)this.direction*=-1,this.time>this.duration&&(this.time=this.duration,this.directionBackwards=!0),0>this.time&&(this.time=0,this.directionBackwards=!1)}else this.time%=this.duration,0>this.time&&(this.time+=this.duration);var c=this.startKeyframe+THREE.Math.clamp(Math.floor(this.time/b),0,this.length-1);a=this.morphTargetInfluences;
c!==this.currentKeyframe&&(a[this.lastKeyframe]=0,a[this.currentKeyframe]=1,a[c]=0,this.lastKeyframe=this.currentKeyframe,this.currentKeyframe=c);b=this.time%b/b;this.directionBackwards&&(b=1-b);a[this.currentKeyframe]=b;a[this.lastKeyframe]=1-b};THREE.MorphAnimMesh.prototype.interpolateTargets=function(a,b,c){for(var d=this.morphTargetInfluences,e=0,g=d.length;e<g;e++)d[e]=0;-1<a&&(d[a]=1-c);-1<b&&(d[b]=c)};
THREE.MorphAnimMesh.prototype.clone=function(){return(new THREE.MorphAnimMesh(this.geometry,this.material)).copy(this)};THREE.MorphAnimMesh.prototype.copy=function(a){this.duration=a.duration;this.mirroredLoop=a.mirroredLoop;this.time=a.time;this.lastKeyframe=a.lastKeyframe;this.currentKeyframe=a.currentKeyframe;this.direction=a.direction;this.directionBackwards=a.directionBackwards;THREE.Mesh.prototype.copy.call(this,a);return this};
THREE.LOD=function(){THREE.Object3D.call(this);Object.defineProperties(this,{levels:{enumerable:!0,value:[]},objects:{get:function(){console.warn("THREE.LOD: .objects has been renamed to .levels.");return this.levels}}})};THREE.LOD.prototype=Object.create(THREE.Object3D.prototype);THREE.LOD.prototype.constructor=THREE.LOD;THREE.LOD.prototype.addLevel=function(a,b){void 0===b&&(b=0);b=Math.abs(b);for(var c=this.levels,d=0;d<c.length&&!(b<c[d].distance);d++);c.splice(d,0,{distance:b,object:a});this.add(a)};
THREE.LOD.prototype.getObjectForDistance=function(a){for(var b=this.levels,c=1,d=b.length;c<d&&!(a<b[c].distance);c++);return b[c-1].object};THREE.LOD.prototype.raycast=function(){var a=new THREE.Vector3;return function(b,c){a.setFromMatrixPosition(this.matrixWorld);var d=b.ray.origin.distanceTo(a);this.getObjectForDistance(d).raycast(b,c)}}();
THREE.LOD.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c){var d=this.levels;if(1<d.length){a.setFromMatrixPosition(c.matrixWorld);b.setFromMatrixPosition(this.matrixWorld);c=a.distanceTo(b);d[0].object.visible=!0;for(var e=1,g=d.length;e<g;e++)if(c>=d[e].distance)d[e-1].object.visible=!1,d[e].object.visible=!0;else break;for(;e<g;e++)d[e].object.visible=!1}}}();THREE.LOD.prototype.clone=function(){return(new THREE.LOD).copy(this)};
THREE.LOD.prototype.copy=function(a){THREE.Object3D.prototype.copy.call(this,a,!1);a=a.levels;for(var b=0,c=a.length;b<c;b++){var d=a[b];this.addLevel(d.object.clone(),d.distance)}return this};
THREE.Sprite=function(){var a=new Uint16Array([0,1,2,0,2,3]),b=new Float32Array([-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0]),c=new Float32Array([0,0,1,0,1,1,0,1]),d=new THREE.BufferGeometry;d.addAttribute("index",new THREE.BufferAttribute(a,1));d.addAttribute("position",new THREE.BufferAttribute(b,3));d.addAttribute("uv",new THREE.BufferAttribute(c,2));return function(a){THREE.Object3D.call(this);this.type="Sprite";this.geometry=d;this.material=void 0!==a?a:new THREE.SpriteMaterial}}();
THREE.Sprite.prototype=Object.create(THREE.Object3D.prototype);THREE.Sprite.prototype.constructor=THREE.Sprite;THREE.Sprite.prototype.raycast=function(){var a=new THREE.Vector3;return function(b,c){a.setFromMatrixPosition(this.matrixWorld);var d=b.ray.distanceSqToPoint(a);d>this.scale.x*this.scale.y||c.push({distance:Math.sqrt(d),point:this.position,face:null,object:this})}}();THREE.Sprite.prototype.clone=function(){return(new THREE.Sprite(this.material)).copy(this)};
THREE.Sprite.prototype.copy=function(a){THREE.Object3D.prototype.copy.call(this,a);return this};THREE.Sprite.prototype.toJSON=function(a){var b=THREE.Object3D.prototype.toJSON.call(this,a);void 0===a.materials[this.material.uuid]&&(a.materials[this.material.uuid]=this.material.toJSON());b.object.material=this.material.uuid;return b};THREE.Particle=THREE.Sprite;
THREE.LensFlare=function(a,b,c,d,e){THREE.Object3D.call(this);this.lensFlares=[];this.positionScreen=new THREE.Vector3;this.customUpdateCallback=void 0;void 0!==a&&this.add(a,b,c,d,e)};THREE.LensFlare.prototype=Object.create(THREE.Object3D.prototype);THREE.LensFlare.prototype.constructor=THREE.LensFlare;
THREE.LensFlare.prototype.add=function(a,b,c,d,e,g){void 0===b&&(b=-1);void 0===c&&(c=0);void 0===g&&(g=1);void 0===e&&(e=new THREE.Color(16777215));void 0===d&&(d=THREE.NormalBlending);c=Math.min(c,Math.max(0,c));this.lensFlares.push({texture:a,size:b,distance:c,x:0,y:0,z:0,scale:1,rotation:0,opacity:g,color:e,blending:d})};
THREE.LensFlare.prototype.updateLensFlares=function(){var a,b=this.lensFlares.length,c,d=2*-this.positionScreen.x,e=2*-this.positionScreen.y;for(a=0;a<b;a++)c=this.lensFlares[a],c.x=this.positionScreen.x+d*c.distance,c.y=this.positionScreen.y+e*c.distance,c.wantedRotation=c.x*Math.PI*.25,c.rotation+=.25*(c.wantedRotation-c.rotation)};THREE.LensFlare.prototype.clone=function(){return(new THREE.LensFlare).copy(this)};
THREE.LensFlare.prototype.copy=function(a){THREE.Object3D.prototype.copy.call(this,a);this.positionScreen.copy(a.positionScreen);this.customUpdateCallback=a.customUpdateCallback;for(var b=0,c=a.lensFlares.length;b<c;b++)this.lensFlares.push(a.lensFlares[b]);return this};THREE.Scene=function(){THREE.Object3D.call(this);this.type="Scene";this.overrideMaterial=this.fog=null;this.autoUpdate=!0};THREE.Scene.prototype=Object.create(THREE.Object3D.prototype);THREE.Scene.prototype.constructor=THREE.Scene;
THREE.Scene.prototype.clone=function(){return(new THREE.Scene).copy(this)};THREE.Scene.prototype.copy=function(a){THREE.Object3D.prototype.copy.call(this,a);null!==a.fog&&(this.fog=a.fog.clone());null!==a.overrideMaterial&&(this.overrideMaterial=a.overrideMaterial.clone());this.autoUpdate=a.autoUpdate;this.matrixAutoUpdate=a.matrixAutoUpdate;return this};THREE.Fog=function(a,b,c){this.name="";this.color=new THREE.Color(a);this.near=void 0!==b?b:1;this.far=void 0!==c?c:1E3};
THREE.Fog.prototype.clone=function(){return new THREE.Fog(this.color.getHex(),this.near,this.far)};THREE.FogExp2=function(a,b){this.name="";this.color=new THREE.Color(a);this.density=void 0!==b?b:2.5E-4};THREE.FogExp2.prototype.clone=function(){return new THREE.FogExp2(this.color.getHex(),this.density)};THREE.ShaderChunk={};THREE.ShaderChunk.alphamap_fragment="#ifdef USE_ALPHAMAP\n\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n";THREE.ShaderChunk.alphamap_pars_fragment="#ifdef USE_ALPHAMAP\n\n\tuniform sampler2D alphaMap;\n\n#endif\n";
THREE.ShaderChunk.alphatest_fragment="#ifdef ALPHATEST\n\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n\n#endif\n";THREE.ShaderChunk.aomap_fragment="#ifdef USE_AOMAP\n\n\ttotalAmbientLight *= ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\n#endif\n";THREE.ShaderChunk.aomap_pars_fragment="#ifdef USE_AOMAP\n\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n\n#endif";THREE.ShaderChunk.bumpmap_pars_fragment="#ifdef USE_BUMPMAP\n\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\n\t// Derivative maps - bump mapping unparametrized surfaces by Morten Mikkelsen\n\t// http://mmikkelsen3d.blogspot.sk/2011/07/derivative-maps.html\n\n\t// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\n\n\tvec2 dHdxy_fwd() {\n\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n\t\treturn vec2( dBx, dBy );\n\n\t}\n\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\n\t\tvec3 vSigmaX = dFdx( surf_pos );\n\t\tvec3 vSigmaY = dFdy( surf_pos );\n\t\tvec3 vN = surf_norm;\t\t// normalized\n\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\n\t}\n\n#endif\n";
THREE.ShaderChunk.color_fragment="#ifdef USE_COLOR\n\n\tdiffuseColor.rgb *= vColor;\n\n#endif";THREE.ShaderChunk.color_pars_fragment="#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif\n";THREE.ShaderChunk.color_pars_vertex="#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif";THREE.ShaderChunk.color_vertex="#ifdef USE_COLOR\n\n\tvColor.xyz = color.xyz;\n\n#endif";THREE.ShaderChunk.common="#define PI 3.14159\n#define PI2 6.28318\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\n\nvec3 transformDirection( in vec3 normal, in mat4 matrix ) {\n\n\treturn normalize( ( matrix * vec4( normal, 0.0 ) ).xyz );\n\n}\n\n// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\nvec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {\n\n\treturn normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );\n\n}\n\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\n\treturn - distance * planeNormal + point;\n\n}\n\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n\n}\n\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n\n}\n\nfloat calcLightAttenuation( float lightDistance, float cutoffDistance, float decayExponent ) {\n\n\tif ( decayExponent > 0.0 ) {\n\n\t  return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\n\t}\n\n\treturn 1.0;\n\n}\n\nvec3 F_Schlick( in vec3 specularColor, in float dotLH ) {\n\n\treturn ( 1.0 - specularColor ) * pow( 1.0 - dotLH, 5.0 ) + specularColor;\n\n}\n\nfloat G_BlinnPhong_Implicit( /* in float dotNL, in float dotNV */ ) {\n\n\t// geometry term is (n\u22c5l)(n\u22c5v) / 4(n\u22c5l)(n\u22c5v)\n\n\treturn 0.25;\n\n}\n\nfloat D_BlinnPhong( in float shininess, in float dotNH ) {\n\n\t// factor of 1/PI in distribution term omitted\n\n\treturn ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n\n}\n\nvec3 BRDF_BlinnPhong( in vec3 specularColor, in float shininess, in vec3 normal, in vec3 lightDir, in vec3 viewDir ) {\n\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\n\t//float dotNL = saturate( dot( normal, lightDir ) );\n\t//float dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( lightDir, halfDir ) );\n\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\n\tfloat G = G_BlinnPhong_Implicit( /* dotNL, dotNV */ );\n\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\n\treturn F * G * D;\n\n}\n\nvec3 inputToLinear( in vec3 a ) {\n\n\t#ifdef GAMMA_INPUT\n\n\t\treturn pow( a, vec3( float( GAMMA_FACTOR ) ) );\n\n\t#else\n\n\t\treturn a;\n\n\t#endif\n\n}\n\nvec3 linearToOutput( in vec3 a ) {\n\n\t#ifdef GAMMA_OUTPUT\n\n\t\treturn pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );\n\n\t#else\n\n\t\treturn a;\n\n\t#endif\n\n}\n";
THREE.ShaderChunk.default_vertex="#ifdef USE_SKINNING\n\n\tvec4 mvPosition = modelViewMatrix * skinned;\n\n#elif defined( USE_MORPHTARGETS )\n\n\tvec4 mvPosition = modelViewMatrix * vec4( morphed, 1.0 );\n\n#else\n\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\n#endif\n\ngl_Position = projectionMatrix * mvPosition;\n";THREE.ShaderChunk.defaultnormal_vertex="#ifdef USE_SKINNING\n\n\tvec3 objectNormal = skinnedNormal.xyz;\n\n#elif defined( USE_MORPHNORMALS )\n\n\tvec3 objectNormal = morphedNormal;\n\n#else\n\n\tvec3 objectNormal = normal;\n\n#endif\n\n#ifdef FLIP_SIDED\n\n\tobjectNormal = -objectNormal;\n\n#endif\n\nvec3 transformedNormal = normalMatrix * objectNormal;\n";
THREE.ShaderChunk.emissivemap_fragment="#ifdef USE_EMISSIVEMAP\n\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\n\temissiveColor.rgb = inputToLinear( emissiveColor.rgb );\n\n\ttotalEmissiveLight *= emissiveColor.rgb;\n\n#endif\n";THREE.ShaderChunk.emissivemap_pars_fragment="#ifdef USE_EMISSIVEMAP\n\n\tuniform sampler2D emissiveMap;\n\n#endif\n";THREE.ShaderChunk.envmap_fragment="#ifdef USE_ENVMAP\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\n\t\t// Transforming Normal Vectors with the Inverse Transformation\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\n\t\t#else\n\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t\t#endif\n\n\t#else\n\n\t\tvec3 reflectVec = vReflect;\n\n\t#endif\n\n\t#ifdef DOUBLE_SIDED\n\t\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#else\n\t\tfloat flipNormal = 1.0;\n\t#endif\n\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\tvec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#endif\n\n\tenvColor.xyz = inputToLinear( envColor.xyz );\n\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\n\t#endif\n\n#endif\n";
THREE.ShaderChunk.envmap_pars_fragment="#ifdef USE_ENVMAP\n\n\tuniform float reflectivity;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n\t\tuniform float refractionRatio;\n\n\t#else\n\n\t\tvarying vec3 vReflect;\n\n\t#endif\n\n#endif\n";THREE.ShaderChunk.envmap_pars_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n\tvarying vec3 vReflect;\n\n\tuniform float refractionRatio;\n\n#endif\n";
THREE.ShaderChunk.envmap_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n\tvec3 worldNormal = transformDirection( objectNormal, modelMatrix );\n\n\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\n\t#else\n\n\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t#endif\n\n#endif\n";
THREE.ShaderChunk.fog_fragment="#ifdef USE_FOG\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\n\t#else\n\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\n\t#endif\n\n\t#ifdef FOG_EXP2\n\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\n\n\t#else\n\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n\n\t#endif\n\t\n\toutgoingLight = mix( outgoingLight, fogColor, fogFactor );\n\n#endif";
THREE.ShaderChunk.fog_pars_fragment="#ifdef USE_FOG\n\n\tuniform vec3 fogColor;\n\n\t#ifdef FOG_EXP2\n\n\t\tuniform float fogDensity;\n\n\t#else\n\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n\n#endif";THREE.ShaderChunk.lightmap_fragment="#ifdef USE_LIGHTMAP\n\n\ttotalAmbientLight += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\n#endif\n";THREE.ShaderChunk.lightmap_pars_fragment="#ifdef USE_LIGHTMAP\n\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n\n#endif";
THREE.ShaderChunk.lights_lambert_pars_vertex="uniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDecay[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightDecay[ MAX_SPOT_LIGHTS ];\n\n#endif\n";
THREE.ShaderChunk.lights_lambert_vertex="vLightFront = vec3( 0.0 );\n\n#ifdef DOUBLE_SIDED\n\n\tvLightBack = vec3( 0.0 );\n\n#endif\n\nvec3 normal = normalize( transformedNormal );\n\n#if MAX_POINT_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n\t\tvec3 lightColor = pointLightColor[ i ];\n\n\t\tvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n\t\tvec3 lVector = lPosition.xyz - mvPosition.xyz;\n\t\tvec3 lightDir = normalize( lVector );\n\n\t\t// attenuation\n\n\t\tfloat attenuation = calcLightAttenuation( length( lVector ), pointLightDistance[ i ], pointLightDecay[ i ] );\n\n\t\t// diffuse\n\n\t\tfloat dotProduct = dot( normal, lightDir );\n\n\t\tvLightFront += lightColor * attenuation * saturate( dotProduct );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += lightColor * attenuation * saturate( - dotProduct );\n\n\t\t#endif\n\n\t}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n\t\tvec3 lightColor = spotLightColor[ i ];\n\n\t\tvec3 lightPosition = spotLightPosition[ i ];\n\t\tvec4 lPosition = viewMatrix * vec4( lightPosition, 1.0 );\n\t\tvec3 lVector = lPosition.xyz - mvPosition.xyz;\n\t\tvec3 lightDir = normalize( lVector );\n\n\t\tfloat spotEffect = dot( spotLightDirection[ i ], normalize( lightPosition - worldPosition.xyz ) );\n\n\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\n\n\t\t\tspotEffect = saturate( pow( saturate( spotEffect ), spotLightExponent[ i ] ) );\n\n\t\t\t// attenuation\n\n\t\t\tfloat attenuation = calcLightAttenuation( length( lVector ), spotLightDistance[ i ], spotLightDecay[ i ] );\n\n\t\t\tattenuation *= spotEffect;\n\n\t\t\t// diffuse\n\n\t\t\tfloat dotProduct = dot( normal, lightDir );\n\n\t\t\tvLightFront += lightColor * attenuation * saturate( dotProduct );\n\n\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\tvLightBack += lightColor * attenuation * saturate( - dotProduct );\n\n\t\t\t#endif\n\n\t\t}\n\n\t}\n\n#endif\n\n#if MAX_DIR_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n\t\tvec3 lightColor = directionalLightColor[ i ];\n\n\t\tvec3 lightDir = transformDirection( directionalLightDirection[ i ], viewMatrix );\n\n\t\t// diffuse\n\n\t\tfloat dotProduct = dot( normal, lightDir );\n\n\t\tvLightFront += lightColor * saturate( dotProduct );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += lightColor * saturate( - dotProduct );\n\n\t\t#endif\n\n\t}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n\t\tvec3 lightDir = transformDirection( hemisphereLightDirection[ i ], viewMatrix );\n\n\t\t// diffuse\n\n\t\tfloat dotProduct = dot( normal, lightDir );\n\n\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\n\t\tvLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tfloat hemiDiffuseWeightBack = - 0.5 * dotProduct + 0.5;\n\n\t\t\tvLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\n\n\t\t#endif\n\n\t}\n\n#endif\n\nvLightFront += ambientLightColor;\n\n#ifdef DOUBLE_SIDED\n\n\tvLightBack += ambientLightColor;\n\n#endif\n";
THREE.ShaderChunk.lights_phong_fragment="#ifndef FLAT_SHADED\n\n\tvec3 normal = normalize( vNormal );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tnormal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n\n\t#endif\n\n#else\n\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n\n#endif\n\n#ifdef USE_NORMALMAP\n\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\n#elif defined( USE_BUMPMAP )\n\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n\n#endif\n\nvec3 viewDir = normalize( vViewPosition );\n\nvec3 totalDiffuseLight = vec3( 0.0 );\nvec3 totalSpecularLight = vec3( 0.0 );\n\n#if MAX_POINT_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n\t\tvec3 lightColor = pointLightColor[ i ];\n\n\t\tvec3 lightPosition = pointLightPosition[ i ];\n\t\tvec4 lPosition = viewMatrix * vec4( lightPosition, 1.0 );\n\t\tvec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\t\tvec3 lightDir = normalize( lVector );\n\n\t\t// attenuation\n\n\t\tfloat attenuation = calcLightAttenuation( length( lVector ), pointLightDistance[ i ], pointLightDecay[ i ] );\n\n\t\t// diffuse\n\n\t\tfloat cosineTerm = saturate( dot( normal, lightDir ) );\n\n\t\ttotalDiffuseLight += lightColor * attenuation * cosineTerm;\n\n\t\t// specular\n\n\t\tvec3 brdf = BRDF_BlinnPhong( specular, shininess, normal, lightDir, viewDir );\n\n\t\ttotalSpecularLight += brdf * specularStrength * lightColor * attenuation * cosineTerm;\n\n\n\t}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n\t\tvec3 lightColor = spotLightColor[ i ];\n\n\t\tvec3 lightPosition = spotLightPosition[ i ];\n\t\tvec4 lPosition = viewMatrix * vec4( lightPosition, 1.0 );\n\t\tvec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\t\tvec3 lightDir = normalize( lVector );\n\n\t\tfloat spotEffect = dot( spotLightDirection[ i ], normalize( lightPosition - vWorldPosition ) );\n\n\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\n\n\t\t\tspotEffect = saturate( pow( saturate( spotEffect ), spotLightExponent[ i ] ) );\n\n\t\t\t// attenuation\n\n\t\t\tfloat attenuation = calcLightAttenuation( length( lVector ), spotLightDistance[ i ], spotLightDecay[ i ] );\n\n\t\t\tattenuation *= spotEffect;\n\n\t\t\t// diffuse\n\n\t\t\tfloat cosineTerm = saturate( dot( normal, lightDir ) );\n\n\t\t\ttotalDiffuseLight += lightColor * attenuation * cosineTerm;\n\n\t\t\t// specular\n\n\t\t\tvec3 brdf = BRDF_BlinnPhong( specular, shininess, normal, lightDir, viewDir );\n\n\t\t\ttotalSpecularLight += brdf * specularStrength * lightColor * attenuation * cosineTerm;\n\n\t\t}\n\n\t}\n\n#endif\n\n#if MAX_DIR_LIGHTS > 0\n\n\tfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n\t\tvec3 lightColor = directionalLightColor[ i ];\n\n\t\tvec3 lightDir = transformDirection( directionalLightDirection[ i ], viewMatrix );\n\n\t\t// diffuse\n\n\t\tfloat cosineTerm = saturate( dot( normal, lightDir ) );\n\n\t\ttotalDiffuseLight += lightColor * cosineTerm;\n\n\t\t// specular\n\n\t\tvec3 brdf = BRDF_BlinnPhong( specular, shininess, normal, lightDir, viewDir );\n\n\t\ttotalSpecularLight += brdf * specularStrength * lightColor * cosineTerm;\n\n\t}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n\t\tvec3 lightDir = transformDirection( hemisphereLightDirection[ i ], viewMatrix );\n\n\t\t// diffuse\n\n\t\tfloat dotProduct = dot( normal, lightDir );\n\n\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\n\t\tvec3 lightColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n\t\ttotalDiffuseLight += lightColor;\n\n\t\t// specular (sky term only)\n\n\t\tvec3 brdf = BRDF_BlinnPhong( specular, shininess, normal, lightDir, viewDir );\n\n\t\ttotalSpecularLight += brdf * specularStrength * lightColor * max( dotProduct, 0.0 );\n\n\t}\n\n#endif\n\n#ifdef METAL\n\n\toutgoingLight += diffuseColor.rgb * ( totalDiffuseLight + totalAmbientLight ) * specular + totalSpecularLight + totalEmissiveLight;\n\n#else\n\n\toutgoingLight += diffuseColor.rgb * ( totalDiffuseLight + totalAmbientLight ) + totalSpecularLight + totalEmissiveLight;\n\n#endif\n";
THREE.ShaderChunk.lights_phong_pars_fragment="uniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDecay[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightDecay[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n\tvarying vec3 vWorldPosition;\n\n#endif\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n";
THREE.ShaderChunk.lights_phong_pars_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n\tvarying vec3 vWorldPosition;\n\n#endif\n";THREE.ShaderChunk.lights_phong_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n\tvWorldPosition = worldPosition.xyz;\n\n#endif";THREE.ShaderChunk.linear_to_gamma_fragment="\n\toutgoingLight = linearToOutput( outgoingLight );\n";THREE.ShaderChunk.logdepthbuf_fragment="#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n\n#endif";
THREE.ShaderChunk.logdepthbuf_pars_fragment="#ifdef USE_LOGDEPTHBUF\n\n\tuniform float logDepthBufFC;\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\t#extension GL_EXT_frag_depth : enable\n\t\tvarying float vFragDepth;\n\n\t#endif\n\n#endif";THREE.ShaderChunk.logdepthbuf_pars_vertex="#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvarying float vFragDepth;\n\n\t#endif\n\n\tuniform float logDepthBufFC;\n\n#endif";THREE.ShaderChunk.logdepthbuf_vertex="#ifdef USE_LOGDEPTHBUF\n\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\n#else\n\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\n\t#endif\n\n#endif";
THREE.ShaderChunk.map_fragment="#ifdef USE_MAP\n\n\tvec4 texelColor = texture2D( map, vUv );\n\n\ttexelColor.xyz = inputToLinear( texelColor.xyz );\n\n\tdiffuseColor *= texelColor;\n\n#endif\n";THREE.ShaderChunk.map_pars_fragment="#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif";THREE.ShaderChunk.map_particle_fragment="#ifdef USE_MAP\n\n\tdiffuseColor *= texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\n#endif\n";
THREE.ShaderChunk.map_particle_pars_fragment="#ifdef USE_MAP\n\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n\n#endif\n";THREE.ShaderChunk.morphnormal_vertex="#ifdef USE_MORPHNORMALS\n\n\tvec3 morphedNormal = vec3( 0.0 );\n\n\tmorphedNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tmorphedNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tmorphedNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tmorphedNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n\n\tmorphedNormal += normal;\n\n#endif";
THREE.ShaderChunk.morphtarget_pars_vertex="#ifdef USE_MORPHTARGETS\n\n\t#ifndef USE_MORPHNORMALS\n\n\tuniform float morphTargetInfluences[ 8 ];\n\n\t#else\n\n\tuniform float morphTargetInfluences[ 4 ];\n\n\t#endif\n\n#endif";THREE.ShaderChunk.morphtarget_vertex="#ifdef USE_MORPHTARGETS\n\n\tvec3 morphed = vec3( 0.0 );\n\tmorphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\tmorphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\tmorphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\tmorphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\n\t#ifndef USE_MORPHNORMALS\n\n\tmorphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\tmorphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\tmorphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\tmorphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\n\t#endif\n\n\tmorphed += position;\n\n#endif";
THREE.ShaderChunk.normalmap_pars_fragment="#ifdef USE_NORMALMAP\n\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\n\t// Per-Pixel Tangent Space Normal Mapping\n\t// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\n\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\n\t}\n\n#endif\n";
THREE.ShaderChunk.shadowmap_fragment="#ifdef USE_SHADOWMAP\n\n\t#ifdef SHADOWMAP_DEBUG\n\n\t\tvec3 frustumColors[3];\n\t\tfrustumColors[0] = vec3( 1.0, 0.5, 0.0 );\n\t\tfrustumColors[1] = vec3( 0.0, 1.0, 0.8 );\n\t\tfrustumColors[2] = vec3( 0.0, 0.5, 1.0 );\n\n\t#endif\n\n\tfloat fDepth;\n\tvec3 shadowColor = vec3( 1.0 );\n\n\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n\t\tvec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\n\n\t\t\t\t// if ( something && something ) breaks ATI OpenGL shader compiler\n\t\t\t\t// if ( all( something, something ) ) using this instead\n\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n\t\tbool frustumTest = all( frustumTestVec );\n\n\t\tif ( frustumTest ) {\n\n\t\t\tshadowCoord.z += shadowBias[ i ];\n\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\n\t\t\t\t\t\t// Percentage-close filtering\n\t\t\t\t\t\t// (9 pixel kernel)\n\t\t\t\t\t\t// http://fabiensanglard.net/shadowmappingPCF/\n\n\t\t\t\tfloat shadow = 0.0;\n\n\t\t/*\n\t\t\t\t\t\t// nested loops breaks shader compiler / validator on some ATI cards when using OpenGL\n\t\t\t\t\t\t// must enroll loop manually\n\n\t\t\t\tfor ( float y = -1.25; y <= 1.25; y += 1.25 )\n\t\t\t\t\tfor ( float x = -1.25; x <= 1.25; x += 1.25 ) {\n\n\t\t\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy );\n\n\t\t\t\t\t\t\t\t// doesn't seem to produce any noticeable visual difference compared to simple texture2D lookup\n\t\t\t\t\t\t\t\t//vec4 rgbaDepth = texture2DProj( shadowMap[ i ], vec4( vShadowCoord[ i ].w * ( vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy ), 0.05, vShadowCoord[ i ].w ) );\n\n\t\t\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\n\n\t\t\t\t\t\tif ( fDepth < shadowCoord.z )\n\t\t\t\t\t\t\tshadow += 1.0;\n\n\t\t\t\t}\n\n\t\t\t\tshadow /= 9.0;\n\n\t\t*/\n\n\t\t\t\tconst float shadowDelta = 1.0 / 9.0;\n\n\t\t\t\tfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n\t\t\t\tfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n\t\t\t\tfloat dx0 = -1.25 * xPixelOffset;\n\t\t\t\tfloat dy0 = -1.25 * yPixelOffset;\n\t\t\t\tfloat dx1 = 1.25 * xPixelOffset;\n\t\t\t\tfloat dy1 = 1.25 * yPixelOffset;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n\t\t\t\tshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n\t\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n\t\t\t\t\t\t// Percentage-close filtering\n\t\t\t\t\t\t// (9 pixel kernel)\n\t\t\t\t\t\t// http://fabiensanglard.net/shadowmappingPCF/\n\n\t\t\t\tfloat shadow = 0.0;\n\n\t\t\t\tfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n\t\t\t\tfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n\t\t\t\tfloat dx0 = -1.0 * xPixelOffset;\n\t\t\t\tfloat dy0 = -1.0 * yPixelOffset;\n\t\t\t\tfloat dx1 = 1.0 * xPixelOffset;\n\t\t\t\tfloat dy1 = 1.0 * yPixelOffset;\n\n\t\t\t\tmat3 shadowKernel;\n\t\t\t\tmat3 depthKernel;\n\n\t\t\t\tdepthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n\t\t\t\tdepthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n\t\t\t\tdepthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n\t\t\t\tdepthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n\t\t\t\tdepthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n\t\t\t\tdepthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n\t\t\t\tdepthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n\t\t\t\tdepthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n\t\t\t\tdepthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\n\t\t\t\tvec3 shadowZ = vec3( shadowCoord.z );\n\t\t\t\tshadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));\n\t\t\t\tshadowKernel[0] *= vec3(0.25);\n\n\t\t\t\tshadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));\n\t\t\t\tshadowKernel[1] *= vec3(0.25);\n\n\t\t\t\tshadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));\n\t\t\t\tshadowKernel[2] *= vec3(0.25);\n\n\t\t\t\tvec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );\n\n\t\t\t\tshadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );\n\t\t\t\tshadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );\n\n\t\t\t\tvec4 shadowValues;\n\t\t\t\tshadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );\n\t\t\t\tshadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );\n\t\t\t\tshadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );\n\t\t\t\tshadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );\n\n\t\t\t\tshadow = dot( shadowValues, vec4( 1.0 ) );\n\n\t\t\t\tshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n\t\t\t#else\n\n\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\n\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\n\n\t\t\t\tif ( fDepth < shadowCoord.z )\n\n\t\t// spot with multiple shadows is darker\n\n\t\t\t\t\tshadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );\n\n\t\t// spot with multiple shadows has the same color as single shadow spot\n\n\t\t// \t\t\t\t\tshadowColor = min( shadowColor, vec3( shadowDarkness[ i ] ) );\n\n\t\t\t#endif\n\n\t\t}\n\n\n\t\t#ifdef SHADOWMAP_DEBUG\n\n\t\t\tif ( inFrustum ) outgoingLight *= frustumColors[ i ];\n\n\t\t#endif\n\n\t}\n\n\toutgoingLight = outgoingLight * shadowColor;\n\n#endif\n";
THREE.ShaderChunk.shadowmap_pars_fragment="#ifdef USE_SHADOWMAP\n\n\tuniform sampler2D shadowMap[ MAX_SHADOWS ];\n\tuniform vec2 shadowMapSize[ MAX_SHADOWS ];\n\n\tuniform float shadowDarkness[ MAX_SHADOWS ];\n\tuniform float shadowBias[ MAX_SHADOWS ];\n\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\n\n\tfloat unpackDepth( const in vec4 rgba_depth ) {\n\n\t\tconst vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n\t\tfloat depth = dot( rgba_depth, bit_shift );\n\t\treturn depth;\n\n\t}\n\n#endif";
THREE.ShaderChunk.shadowmap_pars_vertex="#ifdef USE_SHADOWMAP\n\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\n\tuniform mat4 shadowMatrix[ MAX_SHADOWS ];\n\n#endif";THREE.ShaderChunk.shadowmap_vertex="#ifdef USE_SHADOWMAP\n\n\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n\t\tvShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n\n\t}\n\n#endif";THREE.ShaderChunk.skinbase_vertex="#ifdef USE_SKINNING\n\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif";
THREE.ShaderChunk.skinning_pars_vertex="#ifdef USE_SKINNING\n\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\n\t#ifdef BONE_TEXTURE\n\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\n\t\t\ty = dy * ( y + 0.5 );\n\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\n\t\t\treturn bone;\n\n\t\t}\n\n\t#else\n\n\t\tuniform mat4 boneGlobalMatrices[ MAX_BONES ];\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tmat4 bone = boneGlobalMatrices[ int(i) ];\n\t\t\treturn bone;\n\n\t\t}\n\n\t#endif\n\n#endif\n";
THREE.ShaderChunk.skinning_vertex="#ifdef USE_SKINNING\n\n\t#ifdef USE_MORPHTARGETS\n\n\tvec4 skinVertex = bindMatrix * vec4( morphed, 1.0 );\n\n\t#else\n\n\tvec4 skinVertex = bindMatrix * vec4( position, 1.0 );\n\n\t#endif\n\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n\n#endif\n";
THREE.ShaderChunk.skinnormal_vertex="#ifdef USE_SKINNING\n\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\n\t#ifdef USE_MORPHNORMALS\n\n\tvec4 skinnedNormal = skinMatrix * vec4( morphedNormal, 0.0 );\n\n\t#else\n\n\tvec4 skinnedNormal = skinMatrix * vec4( normal, 0.0 );\n\n\t#endif\n\n#endif\n";
THREE.ShaderChunk.specularmap_fragment="float specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n\n#else\n\n\tspecularStrength = 1.0;\n\n#endif";THREE.ShaderChunk.specularmap_pars_fragment="#ifdef USE_SPECULARMAP\n\n\tuniform sampler2D specularMap;\n\n#endif";THREE.ShaderChunk.uv2_pars_fragment="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tvarying vec2 vUv2;\n\n#endif";
THREE.ShaderChunk.uv2_pars_vertex="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\n#endif";THREE.ShaderChunk.uv2_vertex="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tvUv2 = uv2;\n\n#endif";THREE.ShaderChunk.uv_pars_fragment="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP )\n\n\tvarying vec2 vUv;\n\n#endif";
THREE.ShaderChunk.uv_pars_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP )\n\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n\n#endif\n";THREE.ShaderChunk.uv_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP )\n\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n\n#endif";
THREE.ShaderChunk.worldpos_vertex="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\n\t#ifdef USE_SKINNING\n\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\n\t#elif defined( USE_MORPHTARGETS )\n\n\t\tvec4 worldPosition = modelMatrix * vec4( morphed, 1.0 );\n\n\t#else\n\n\t\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\n\t#endif\n\n#endif\n";
THREE.UniformsUtils={merge:function(a){for(var b={},c=0;c<a.length;c++){var d=this.clone(a[c]),e;for(e in d)b[e]=d[e]}return b},clone:function(a){var b={},c;for(c in a){b[c]={};for(var d in a[c]){var e=a[c][d];e instanceof THREE.Color||e instanceof THREE.Vector2||e instanceof THREE.Vector3||e instanceof THREE.Vector4||e instanceof THREE.Matrix3||e instanceof THREE.Matrix4||e instanceof THREE.Texture?b[c][d]=e.clone():Array.isArray(e)?b[c][d]=e.slice():b[c][d]=e}}return b}};
THREE.UniformsLib={common:{diffuse:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new THREE.Vector4(0,0,1,1)},specularMap:{type:"t",value:null},alphaMap:{type:"t",value:null},envMap:{type:"t",value:null},flipEnvMap:{type:"f",value:-1},reflectivity:{type:"f",value:1},refractionRatio:{type:"f",value:.98}},aomap:{aoMap:{type:"t",value:null},aoMapIntensity:{type:"f",value:1}},lightmap:{lightMap:{type:"t",value:null},lightMapIntensity:{type:"f",
value:1}},emissivemap:{emissiveMap:{type:"t",value:null}},bump:{bumpMap:{type:"t",value:null},bumpScale:{type:"f",value:1}},normalmap:{normalMap:{type:"t",value:null},normalScale:{type:"v2",value:new THREE.Vector2(1,1)}},fog:{fogDensity:{type:"f",value:2.5E-4},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3},fogColor:{type:"c",value:new THREE.Color(16777215)}},lights:{ambientLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]},directionalLightColor:{type:"fv",value:[]},
hemisphereLightDirection:{type:"fv",value:[]},hemisphereLightSkyColor:{type:"fv",value:[]},hemisphereLightGroundColor:{type:"fv",value:[]},pointLightColor:{type:"fv",value:[]},pointLightPosition:{type:"fv",value:[]},pointLightDistance:{type:"fv1",value:[]},pointLightDecay:{type:"fv1",value:[]},spotLightColor:{type:"fv",value:[]},spotLightPosition:{type:"fv",value:[]},spotLightDirection:{type:"fv",value:[]},spotLightDistance:{type:"fv1",value:[]},spotLightAngleCos:{type:"fv1",value:[]},spotLightExponent:{type:"fv1",
value:[]},spotLightDecay:{type:"fv1",value:[]}},particle:{psColor:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},size:{type:"f",value:1},scale:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new THREE.Vector4(0,0,1,1)},fogDensity:{type:"f",value:2.5E-4},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3},fogColor:{type:"c",value:new THREE.Color(16777215)}},shadowmap:{shadowMap:{type:"tv",value:[]},shadowMapSize:{type:"v2v",value:[]},shadowBias:{type:"fv1",
value:[]},shadowDarkness:{type:"fv1",value:[]},shadowMatrix:{type:"m4v",value:[]}}};
THREE.ShaderLib={basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.aomap,THREE.UniformsLib.fog,THREE.UniformsLib.shadowmap]),vertexShader:[THREE.ShaderChunk.common,THREE.ShaderChunk.uv_pars_vertex,THREE.ShaderChunk.uv2_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,
"void main() {",THREE.ShaderChunk.uv_vertex,THREE.ShaderChunk.uv2_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.skinbase_vertex,"\t#ifdef USE_ENVMAP",THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"\t#endif",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.shadowmap_vertex,
"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.uv_pars_fragment,THREE.ShaderChunk.uv2_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.aomap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,
"void main() {\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tvec3 totalAmbientLight = vec3( 1.0 );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.aomap_fragment,"\toutgoingLight = diffuseColor.rgb * totalAmbientLight;",THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,
THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n}"].join("\n")},lambert:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{emissive:{type:"c",value:new THREE.Color(0)}}]),vertexShader:["#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif",THREE.ShaderChunk.common,THREE.ShaderChunk.uv_pars_vertex,
THREE.ShaderChunk.uv2_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_lambert_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.uv_vertex,THREE.ShaderChunk.uv2_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,
THREE.ShaderChunk.defaultnormal_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_lambert_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif",
THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.uv_pars_fragment,THREE.ShaderChunk.uv2_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );",
THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,"\t#ifdef DOUBLE_SIDED\n\t\tif ( gl_FrontFacing )\n\t\t\toutgoingLight += diffuseColor.rgb * vLightFront + emissive;\n\t\telse\n\t\t\toutgoingLight += diffuseColor.rgb * vLightBack + emissive;\n\t#else\n\t\toutgoingLight += diffuseColor.rgb * vLightFront + emissive;\n\t#endif",THREE.ShaderChunk.envmap_fragment,
THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n}"].join("\n")},phong:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.aomap,THREE.UniformsLib.lightmap,THREE.UniformsLib.emissivemap,THREE.UniformsLib.bump,THREE.UniformsLib.normalmap,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{emissive:{type:"c",value:new THREE.Color(0)},
specular:{type:"c",value:new THREE.Color(1118481)},shininess:{type:"f",value:30}}]),vertexShader:["#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif",THREE.ShaderChunk.common,THREE.ShaderChunk.uv_pars_vertex,THREE.ShaderChunk.uv2_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_phong_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,
THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.uv_vertex,THREE.ShaderChunk.uv2_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,
"\tvViewPosition = - mvPosition.xyz;",THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_phong_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.uv_pars_fragment,THREE.ShaderChunk.uv2_pars_fragment,THREE.ShaderChunk.map_pars_fragment,
THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.aomap_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.emissivemap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.lights_phong_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.bumpmap_pars_fragment,THREE.ShaderChunk.normalmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tvec3 totalAmbientLight = ambientLightColor;\n\tvec3 totalEmissiveLight = emissive;",
THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.aomap_fragment,THREE.ShaderChunk.emissivemap_fragment,THREE.ShaderChunk.lights_phong_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,
"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n}"].join("\n")},particle_basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.particle,THREE.UniformsLib.shadowmap]),vertexShader:["uniform float size;\nuniform float scale;",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / length( mvPosition.xyz ) );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\tgl_Position = projectionMatrix * mvPosition;",
THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 psColor;\nuniform float opacity;",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_particle_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( psColor, opacity );",
THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_particle_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.alphatest_fragment,"\toutgoingLight = diffuseColor.rgb;",THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.fog_fragment,"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n}"].join("\n")},dashed:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,{scale:{type:"f",value:1},dashSize:{type:"f",value:1},totalSize:{type:"f",value:2}}]),
vertexShader:["uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;",
THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.color_fragment,"\toutgoingLight = diffuseColor.rgb;",THREE.ShaderChunk.fog_fragment,"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n}"].join("\n")},
depth:{uniforms:{mNear:{type:"f",value:1},mFar:{type:"f",value:2E3},opacity:{type:"f",value:1}},vertexShader:[THREE.ShaderChunk.common,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float mNear;\nuniform float mFar;\nuniform float opacity;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_fragment,
"void main() {",THREE.ShaderChunk.logdepthbuf_fragment,"\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\t#else\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\t#endif\n\tfloat color = 1.0 - smoothstep( mNear, mFar, depth );\n\tgl_FragColor = vec4( vec3( color ), opacity );\n}"].join("\n")},normal:{uniforms:{opacity:{type:"f",value:1}},vertexShader:["varying vec3 vNormal;",THREE.ShaderChunk.common,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,
"void main() {\n\tvNormal = normalize( normalMatrix * normal );",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;\nvarying vec3 vNormal;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tgl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},cube:{uniforms:{tCube:{type:"t",value:null},
tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform samplerCube tCube;\nuniform float tFlip;\nvarying vec3 vWorldPosition;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_fragment,
"void main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );",THREE.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},equirect:{uniforms:{tEquirect:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",
THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\nvec3 direction = normalize( vWorldPosition );\nvec2 sampleUV;\nsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\nsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\ngl_FragColor = texture2D( tEquirect, sampleUV );",THREE.ShaderChunk.logdepthbuf_fragment,
"}"].join("\n")},depthRGBA:{uniforms:{},vertexShader:[THREE.ShaderChunk.common,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:[THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_fragment,"vec4 pack_depth( const in float depth ) {\n\tconst vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\n\tconst vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\n\tvec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );\n\tres -= res.xxyz * bit_mask;\n\treturn res;\n}\nvoid main() {",
THREE.ShaderChunk.logdepthbuf_fragment,"\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tgl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );\n\t#else\n\t\tgl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );\n\t#endif\n}"].join("\n")}};
THREE.WebGLRenderer=function(a){function b(a,b,c,d){!0===S&&(a*=d,b*=d,c*=d);s.clearColor(a,b,c,d)}function c(){M.init();s.viewport(ka,la,ma,na);b(E.r,E.g,E.b,Y)}function d(){ga=Da=null;ha="";ia=-1;oa=!0;M.reset()}function e(a){a=a.target;a.removeEventListener("dispose",e);a:{var b=U.get(a);if(a.image&&b.__image__webglTextureCube)s.deleteTexture(b.__image__webglTextureCube);else{if(void 0===b.__webglInit)break a;s.deleteTexture(b.__webglTexture)}U.delete(a)}ea.textures--}function g(a){a=a.target;
a.removeEventListener("dispose",g);var b=U.get(a);if(a&&void 0!==b.__webglTexture){s.deleteTexture(b.__webglTexture);if(a instanceof THREE.WebGLRenderTargetCube)for(var c=0;6>c;c++)s.deleteFramebuffer(b.__webglFramebuffer[c]),s.deleteRenderbuffer(b.__webglRenderbuffer[c]);else s.deleteFramebuffer(b.__webglFramebuffer),s.deleteRenderbuffer(b.__webglRenderbuffer);U.delete(a)}ea.textures--}function f(a){a=a.target;a.removeEventListener("dispose",f);h(a);U.delete(a)}function h(a){var b=U.get(a).program.program;
if(void 0!==b){a.program=void 0;a=0;for(var c=da.length;a!==c;++a){var d=da[a];if(d.program===b){0===--d.usedTimes&&(--c,da[a]=da[c],da.pop(),s.deleteProgram(b),ea.programs=c);break}}}}function k(a,b,c,d){var e;if(c instanceof THREE.InstancedBufferGeometry&&(e=T.get("ANGLE_instanced_arrays"),null===e)){console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}M.initAttributes();var g=c.attributes;
b=b.getAttributes();a=a.defaultAttributeValues;for(var f in b){var h=b[f];if(0<=h){var k=g[f];if(void 0!==k){M.enableAttribute(h);var l=k.itemSize,n=ca.getAttributeBuffer(k);if(k instanceof THREE.InterleavedBufferAttribute){var m=k.data,p=m.stride,k=k.offset;s.bindBuffer(s.ARRAY_BUFFER,n);s.vertexAttribPointer(h,l,s.FLOAT,!1,p*m.array.BYTES_PER_ELEMENT,(d*p+k)*m.array.BYTES_PER_ELEMENT);if(m instanceof THREE.InstancedInterleavedBuffer){if(null===e){console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferAttribute but hardware does not support extension ANGLE_instanced_arrays.");
return}e.vertexAttribDivisorANGLE(h,m.meshPerAttribute);void 0===c.maxInstancedCount&&(c.maxInstancedCount=m.meshPerAttribute*m.count)}}else if(s.bindBuffer(s.ARRAY_BUFFER,n),s.vertexAttribPointer(h,l,s.FLOAT,!1,0,d*l*4),k instanceof THREE.InstancedBufferAttribute){if(null===e){console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferAttribute but hardware does not support extension ANGLE_instanced_arrays.");return}e.vertexAttribDivisorANGLE(h,k.meshPerAttribute);void 0===
c.maxInstancedCount&&(c.maxInstancedCount=k.meshPerAttribute*k.count)}}else if(void 0!==a&&(l=a[f],void 0!==l))switch(l.length){case 2:s.vertexAttrib2fv(h,l);break;case 3:s.vertexAttrib3fv(h,l);break;case 4:s.vertexAttrib4fv(h,l);break;default:s.vertexAttrib1fv(h,l)}}}M.disableUnusedAttributes()}function n(a,b){return b[0]-a[0]}function l(a,b){return a.object.renderOrder!==b.object.renderOrder?a.object.renderOrder-b.object.renderOrder:a.object.material.id!==b.object.material.id?a.object.material.id-
b.object.material.id:a.z!==b.z?a.z-b.z:a.id-b.id}function p(a,b){return a.object.renderOrder!==b.object.renderOrder?a.object.renderOrder-b.object.renderOrder:a.z!==b.z?b.z-a.z:a.id-b.id}function m(a){if(!0===a.visible){if(!(a instanceof THREE.Scene||a instanceof THREE.Group))if(a instanceof THREE.SkinnedMesh&&a.skeleton.update(),ca.init(a),a instanceof THREE.Light)V.push(a);else if(a instanceof THREE.Sprite)Ca.push(a);else if(a instanceof THREE.LensFlare)Ea.push(a);else if(a instanceof THREE.ImmediateRenderObject){var b=
a.material;b.transparent?ja.push(a):fa.push(a)}else{var c=ca.objects[a.id];!c||!1!==a.frustumCulled&&!0!==Ja.intersectsObject(a)||(b=a.material,U.get(b)&&(b.program=U.get(b).program),b.transparent?ba.push(c):$.push(c),!0===X.sortObjects&&(Z.setFromMatrixPosition(a.matrixWorld),Z.applyProjection(Fa),c.z=Z.z))}b=0;for(c=a.children.length;b<c;b++)m(a.children[b])}}function q(a,b,c,d,e){for(var g=e,f=0,h=a.length;f<h;f++){var k=a[f].object,l=k;l._modelViewMatrix.multiplyMatrices(b.matrixWorldInverse,
l.matrixWorld);l._normalMatrix.getNormalMatrix(l._modelViewMatrix);null===e&&(g=k.material);X.renderBufferDirect(b,c,d,g,k)}}function r(a,b,c,d,e){for(var g=e,f=0,h=a.length;f<h;f++){var k=a[f],l=k;l._modelViewMatrix.multiplyMatrices(b.matrixWorldInverse,l.matrixWorld);l._normalMatrix.getNormalMatrix(l._modelViewMatrix);!0===k.visible&&(null===e&&(g=k.material),X.renderImmediateObject(b,c,d,g,k))}}function t(a){a.side!==THREE.DoubleSide?M.enable(s.CULL_FACE):M.disable(s.CULL_FACE);M.setFlipSided(a.side===
THREE.BackSide);!0===a.transparent?M.setBlending(a.blending,a.blendEquation,a.blendSrc,a.blendDst,a.blendEquationAlpha,a.blendSrcAlpha,a.blendDstAlpha):M.setBlending(THREE.NoBlending);M.setDepthFunc(a.depthFunc);M.setDepthTest(a.depthTest);M.setDepthWrite(a.depthWrite);M.setColorWrite(a.colorWrite);M.setPolygonOffset(a.polygonOffset,a.polygonOffsetFactor,a.polygonOffsetUnits)}function u(a,b){a.ambientLightColor.needsUpdate=b;a.directionalLightColor.needsUpdate=b;a.directionalLightDirection.needsUpdate=
b;a.pointLightColor.needsUpdate=b;a.pointLightPosition.needsUpdate=b;a.pointLightDistance.needsUpdate=b;a.pointLightDecay.needsUpdate=b;a.spotLightColor.needsUpdate=b;a.spotLightPosition.needsUpdate=b;a.spotLightDistance.needsUpdate=b;a.spotLightDirection.needsUpdate=b;a.spotLightAngleCos.needsUpdate=b;a.spotLightExponent.needsUpdate=b;a.spotLightDecay.needsUpdate=b;a.hemisphereLightSkyColor.needsUpdate=b;a.hemisphereLightGroundColor.needsUpdate=b;a.hemisphereLightDirection.needsUpdate=b}function y(){var a=
pa;a>=Ka&&console.warn("WebGLRenderer: trying to use "+a+" texture units while this GPU supports only "+Ka);pa+=1;return a}function w(a,b,c,d){a[b+0]=c.r*d;a[b+1]=c.g*d;a[b+2]=c.b*d}function A(a,b,c){c?(s.texParameteri(a,s.TEXTURE_WRAP_S,x(b.wrapS)),s.texParameteri(a,s.TEXTURE_WRAP_T,x(b.wrapT)),s.texParameteri(a,s.TEXTURE_MAG_FILTER,x(b.magFilter)),s.texParameteri(a,s.TEXTURE_MIN_FILTER,x(b.minFilter))):(s.texParameteri(a,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(a,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE),
b.wrapS===THREE.ClampToEdgeWrapping&&b.wrapT===THREE.ClampToEdgeWrapping||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping. ( "+b.sourceFile+" )"),s.texParameteri(a,s.TEXTURE_MAG_FILTER,B(b.magFilter)),s.texParameteri(a,s.TEXTURE_MIN_FILTER,B(b.minFilter)),b.minFilter!==THREE.NearestFilter&&b.minFilter!==THREE.LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter. ( "+
b.sourceFile+" )"));(c=T.get("EXT_texture_filter_anisotropic"))&&b.type!==THREE.FloatType&&b.type!==THREE.HalfFloatType&&(1<b.anisotropy||U.get(b).__currentAnisotropy)&&(s.texParameterf(a,c.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(b.anisotropy,X.getMaxAnisotropy())),U.get(b).__currentAnisotropy=b.anisotropy)}function v(a,b){if(a.width>b||a.height>b){var c=b/Math.max(a.width,a.height),d=document.createElement("canvas");d.width=Math.floor(a.width*c);d.height=Math.floor(a.height*c);d.getContext("2d").drawImage(a,
0,0,a.width,a.height,0,0,d.width,d.height);console.warn("THREE.WebGLRenderer: image is too big ("+a.width+"x"+a.height+"). Resized to "+d.width+"x"+d.height,a);return d}return a}function z(a,b,c){s.bindFramebuffer(s.FRAMEBUFFER,a);s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,c,U.get(b).__webglTexture,0)}function C(a,b){s.bindRenderbuffer(s.RENDERBUFFER,a);b.depthBuffer&&!b.stencilBuffer?(s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_COMPONENT16,b.width,b.height),s.framebufferRenderbuffer(s.FRAMEBUFFER,
s.DEPTH_ATTACHMENT,s.RENDERBUFFER,a)):b.depthBuffer&&b.stencilBuffer?(s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,b.width,b.height),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,a)):s.renderbufferStorage(s.RENDERBUFFER,s.RGBA4,b.width,b.height)}function B(a){return a===THREE.NearestFilter||a===THREE.NearestMipMapNearestFilter||a===THREE.NearestMipMapLinearFilter?s.NEAREST:s.LINEAR}function x(a){var b;if(a===THREE.RepeatWrapping)return s.REPEAT;if(a===THREE.ClampToEdgeWrapping)return s.CLAMP_TO_EDGE;
if(a===THREE.MirroredRepeatWrapping)return s.MIRRORED_REPEAT;if(a===THREE.NearestFilter)return s.NEAREST;if(a===THREE.NearestMipMapNearestFilter)return s.NEAREST_MIPMAP_NEAREST;if(a===THREE.NearestMipMapLinearFilter)return s.NEAREST_MIPMAP_LINEAR;if(a===THREE.LinearFilter)return s.LINEAR;if(a===THREE.LinearMipMapNearestFilter)return s.LINEAR_MIPMAP_NEAREST;if(a===THREE.LinearMipMapLinearFilter)return s.LINEAR_MIPMAP_LINEAR;if(a===THREE.UnsignedByteType)return s.UNSIGNED_BYTE;if(a===THREE.UnsignedShort4444Type)return s.UNSIGNED_SHORT_4_4_4_4;
if(a===THREE.UnsignedShort5551Type)return s.UNSIGNED_SHORT_5_5_5_1;if(a===THREE.UnsignedShort565Type)return s.UNSIGNED_SHORT_5_6_5;if(a===THREE.ByteType)return s.BYTE;if(a===THREE.ShortType)return s.SHORT;if(a===THREE.UnsignedShortType)return s.UNSIGNED_SHORT;if(a===THREE.IntType)return s.INT;if(a===THREE.UnsignedIntType)return s.UNSIGNED_INT;if(a===THREE.FloatType)return s.FLOAT;b=T.get("OES_texture_half_float");if(null!==b&&a===THREE.HalfFloatType)return b.HALF_FLOAT_OES;if(a===THREE.AlphaFormat)return s.ALPHA;
if(a===THREE.RGBFormat)return s.RGB;if(a===THREE.RGBAFormat)return s.RGBA;if(a===THREE.LuminanceFormat)return s.LUMINANCE;if(a===THREE.LuminanceAlphaFormat)return s.LUMINANCE_ALPHA;if(a===THREE.AddEquation)return s.FUNC_ADD;if(a===THREE.SubtractEquation)return s.FUNC_SUBTRACT;if(a===THREE.ReverseSubtractEquation)return s.FUNC_REVERSE_SUBTRACT;if(a===THREE.ZeroFactor)return s.ZERO;if(a===THREE.OneFactor)return s.ONE;if(a===THREE.SrcColorFactor)return s.SRC_COLOR;if(a===THREE.OneMinusSrcColorFactor)return s.ONE_MINUS_SRC_COLOR;
if(a===THREE.SrcAlphaFactor)return s.SRC_ALPHA;if(a===THREE.OneMinusSrcAlphaFactor)return s.ONE_MINUS_SRC_ALPHA;if(a===THREE.DstAlphaFactor)return s.DST_ALPHA;if(a===THREE.OneMinusDstAlphaFactor)return s.ONE_MINUS_DST_ALPHA;if(a===THREE.DstColorFactor)return s.DST_COLOR;if(a===THREE.OneMinusDstColorFactor)return s.ONE_MINUS_DST_COLOR;if(a===THREE.SrcAlphaSaturateFactor)return s.SRC_ALPHA_SATURATE;b=T.get("WEBGL_compressed_texture_s3tc");if(null!==b){if(a===THREE.RGB_S3TC_DXT1_Format)return b.COMPRESSED_RGB_S3TC_DXT1_EXT;
if(a===THREE.RGBA_S3TC_DXT1_Format)return b.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(a===THREE.RGBA_S3TC_DXT3_Format)return b.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(a===THREE.RGBA_S3TC_DXT5_Format)return b.COMPRESSED_RGBA_S3TC_DXT5_EXT}b=T.get("WEBGL_compressed_texture_pvrtc");if(null!==b){if(a===THREE.RGB_PVRTC_4BPPV1_Format)return b.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(a===THREE.RGB_PVRTC_2BPPV1_Format)return b.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(a===THREE.RGBA_PVRTC_4BPPV1_Format)return b.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;
if(a===THREE.RGBA_PVRTC_2BPPV1_Format)return b.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}b=T.get("EXT_blend_minmax");if(null!==b){if(a===THREE.MinEquation)return b.MIN_EXT;if(a===THREE.MaxEquation)return b.MAX_EXT}return 0}console.log("THREE.WebGLRenderer",THREE.REVISION);a=a||{};var J=void 0!==a.canvas?a.canvas:document.createElement("canvas"),G=void 0!==a.context?a.context:null,F=J.width,O=J.height,D=1,K=void 0!==a.precision?a.precision:"highp",I=void 0!==a.alpha?a.alpha:!1,H=void 0!==a.depth?a.depth:!0,
N=void 0!==a.stencil?a.stencil:!0,L=void 0!==a.antialias?a.antialias:!1,S=void 0!==a.premultipliedAlpha?a.premultipliedAlpha:!0,Q=void 0!==a.preserveDrawingBuffer?a.preserveDrawingBuffer:!1,R=void 0!==a.logarithmicDepthBuffer?a.logarithmicDepthBuffer:!1,E=new THREE.Color(0),Y=0,V=[],$=[],ba=[],fa=[],ja=[],Ia=new Float32Array(8),Ca=[],Ea=[];this.domElement=J;this.context=null;this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0;this.gammaFactor=2;this.gammaOutput=
this.gammaInput=!1;this.maxMorphTargets=8;this.maxMorphNormals=4;this.autoScaleCubemaps=!0;var X=this,da=[],Da=null,qa=null,ia=-1,ha="",ga=null,pa=0,ka=0,la=0,ma=J.width,na=J.height,La=0,Ma=0,Ja=new THREE.Frustum,Fa=new THREE.Matrix4,Z=new THREE.Vector3,W=new THREE.Vector3,oa=!0,ra=[0,0,0],sa=[],ta=[],ua=[],va=[],Na=[],Oa=[],wa=[],xa=[],Pa=[],ya=[],Qa=[],Ra=[],Sa=[],za=[],Aa=[],Ba=[],ea={programs:0,geometries:0,textures:0},P={calls:0,vertices:0,faces:0,points:0};this.info={render:P,memory:ea,programs:da};
var s;try{var Ta={alpha:I,depth:H,stencil:N,antialias:L,premultipliedAlpha:S,preserveDrawingBuffer:Q};s=G||J.getContext("webgl",Ta)||J.getContext("experimental-webgl",Ta);if(null===s){if(null!==J.getContext("webgl"))throw"Error creating WebGL context with your selected attributes.";throw"Error creating WebGL context.";}J.addEventListener("webglcontextlost",function(a){a.preventDefault();d();c();ca.clear();U.clear()},!1)}catch(Wa){console.error("THREE.WebGLRenderer: "+Wa)}var M=new THREE.WebGLState(s,
x);void 0===s.getShaderPrecisionFormat&&(s.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}});var U=new THREE.WebGLProperties;this.properties=U;var ca=new THREE.WebGLObjects(s,U,this.info),T=new THREE.WebGLExtensions(s);T.get("OES_texture_float");T.get("OES_texture_float_linear");T.get("OES_texture_half_float");T.get("OES_texture_half_float_linear");T.get("OES_standard_derivatives");T.get("ANGLE_instanced_arrays");T.get("OES_element_index_uint")&&(THREE.BufferGeometry.MaxIndex=
4294967296);R&&T.get("EXT_frag_depth");c();this.context=s;this.extensions=T;this.state=M;var aa=new THREE.WebGLShadowMap(this,V,ca);this.shadowMap=aa;var Ka=s.getParameter(s.MAX_TEXTURE_IMAGE_UNITS),Xa=s.getParameter(s.MAX_VERTEX_TEXTURE_IMAGE_UNITS),Ya=s.getParameter(s.MAX_TEXTURE_SIZE),Za=s.getParameter(s.MAX_CUBE_MAP_TEXTURE_SIZE),Ga=0<Xa,Ha=Ga&&T.get("OES_texture_float"),$a=T.get("ANGLE_instanced_arrays"),ab=s.getShaderPrecisionFormat(s.VERTEX_SHADER,s.HIGH_FLOAT),bb=s.getShaderPrecisionFormat(s.VERTEX_SHADER,
s.MEDIUM_FLOAT),cb=s.getShaderPrecisionFormat(s.FRAGMENT_SHADER,s.HIGH_FLOAT),db=s.getShaderPrecisionFormat(s.FRAGMENT_SHADER,s.MEDIUM_FLOAT),Ua=function(){var a;return function(){if(void 0!==a)return a;a=[];if(T.get("WEBGL_compressed_texture_pvrtc")||T.get("WEBGL_compressed_texture_s3tc"))for(var b=s.getParameter(s.COMPRESSED_TEXTURE_FORMATS),c=0;c<b.length;c++)a.push(b[c]);return a}}(),eb=0<ab.precision&&0<cb.precision,Va=0<bb.precision&&0<db.precision;"highp"!==K||eb||(Va?(K="mediump",console.warn("THREE.WebGLRenderer: highp not supported, using mediump.")):
(K="lowp",console.warn("THREE.WebGLRenderer: highp and mediump not supported, using lowp.")));"mediump"!==K||Va||(K="lowp",console.warn("THREE.WebGLRenderer: mediump not supported, using lowp."));var fb=new THREE.SpritePlugin(this,Ca),gb=new THREE.LensFlarePlugin(this,Ea);this.getContext=function(){return s};this.getContextAttributes=function(){return s.getContextAttributes()};this.forceContextLoss=function(){T.get("WEBGL_lose_context").loseContext()};this.supportsVertexTextures=function(){return Ga};
this.supportsInstancedArrays=function(){return $a};this.supportsFloatTextures=function(){return T.get("OES_texture_float")};this.supportsHalfFloatTextures=function(){return T.get("OES_texture_half_float")};this.supportsStandardDerivatives=function(){return T.get("OES_standard_derivatives")};this.supportsCompressedTextureS3TC=function(){return T.get("WEBGL_compressed_texture_s3tc")};this.supportsCompressedTexturePVRTC=function(){return T.get("WEBGL_compressed_texture_pvrtc")};this.supportsBlendMinMax=
function(){return T.get("EXT_blend_minmax")};this.getMaxAnisotropy=function(){var a;return function(){if(void 0!==a)return a;var b=T.get("EXT_texture_filter_anisotropic");return a=null!==b?s.getParameter(b.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}}();this.getPrecision=function(){return K};this.getPixelRatio=function(){return D};this.setPixelRatio=function(a){void 0!==a&&(D=a)};this.getSize=function(){return{width:F,height:O}};this.setSize=function(a,b,c){F=a;O=b;J.width=a*D;J.height=b*D;!1!==c&&(J.style.width=
a+"px",J.style.height=b+"px");this.setViewport(0,0,a,b)};this.setViewport=function(a,b,c,d){ka=a*D;la=b*D;ma=c*D;na=d*D;s.viewport(ka,la,ma,na)};this.setScissor=function(a,b,c,d){s.scissor(a*D,b*D,c*D,d*D)};this.enableScissorTest=function(a){M.setScissorTest(a)};this.getClearColor=function(){return E};this.setClearColor=function(a,c){E.set(a);Y=void 0!==c?c:1;b(E.r,E.g,E.b,Y)};this.getClearAlpha=function(){return Y};this.setClearAlpha=function(a){Y=a;b(E.r,E.g,E.b,Y)};this.clear=function(a,b,c){var d=
0;if(void 0===a||a)d|=s.COLOR_BUFFER_BIT;if(void 0===b||b)d|=s.DEPTH_BUFFER_BIT;if(void 0===c||c)d|=s.STENCIL_BUFFER_BIT;s.clear(d)};this.clearColor=function(){s.clear(s.COLOR_BUFFER_BIT)};this.clearDepth=function(){s.clear(s.DEPTH_BUFFER_BIT)};this.clearStencil=function(){s.clear(s.STENCIL_BUFFER_BIT)};this.clearTarget=function(a,b,c,d){this.setRenderTarget(a);this.clear(b,c,d)};this.resetGLState=d;this.renderBufferImmediate=function(a,b,c){M.initAttributes();var d=U.get(a);a.hasPositions&&!d.__webglVertexBuffer&&
(d.__webglVertexBuffer=s.createBuffer());a.hasNormals&&!d.__webglNormalBuffer&&(d.__webglNormalBuffer=s.createBuffer());a.hasUvs&&!d.__webglUvBuffer&&(d.__webglUvBuffer=s.createBuffer());a.hasColors&&!d.__webglColorBuffer&&(d.__webglColorBuffer=s.createBuffer());b=b.getAttributes();a.hasPositions&&(s.bindBuffer(s.ARRAY_BUFFER,d.__webglVertexBuffer),s.bufferData(s.ARRAY_BUFFER,a.positionArray,s.DYNAMIC_DRAW),M.enableAttribute(b.position),s.vertexAttribPointer(b.position,3,s.FLOAT,!1,0,0));if(a.hasNormals){s.bindBuffer(s.ARRAY_BUFFER,
d.__webglNormalBuffer);if(!1===c instanceof THREE.MeshPhongMaterial&&c.shading===THREE.FlatShading){var e,g,f,h,k,l,m,n,p,q,r,t=3*a.count;for(r=0;r<t;r+=9)q=a.normalArray,e=q[r],g=q[r+1],f=q[r+2],h=q[r+3],l=q[r+4],n=q[r+5],k=q[r+6],m=q[r+7],p=q[r+8],e=(e+h+k)/3,g=(g+l+m)/3,f=(f+n+p)/3,q[r]=e,q[r+1]=g,q[r+2]=f,q[r+3]=e,q[r+4]=g,q[r+5]=f,q[r+6]=e,q[r+7]=g,q[r+8]=f}s.bufferData(s.ARRAY_BUFFER,a.normalArray,s.DYNAMIC_DRAW);M.enableAttribute(b.normal);s.vertexAttribPointer(b.normal,3,s.FLOAT,!1,0,0)}a.hasUvs&&
c.map&&(s.bindBuffer(s.ARRAY_BUFFER,d.__webglUvBuffer),s.bufferData(s.ARRAY_BUFFER,a.uvArray,s.DYNAMIC_DRAW),M.enableAttribute(b.uv),s.vertexAttribPointer(b.uv,2,s.FLOAT,!1,0,0));a.hasColors&&c.vertexColors!==THREE.NoColors&&(s.bindBuffer(s.ARRAY_BUFFER,d.__webglColorBuffer),s.bufferData(s.ARRAY_BUFFER,a.colorArray,s.DYNAMIC_DRAW),M.enableAttribute(b.color),s.vertexAttribPointer(b.color,3,s.FLOAT,!1,0,0));M.disableUnusedAttributes();s.drawArrays(s.TRIANGLES,0,a.count);a.count=0};this.renderBufferDirect=
function(a,b,c,d,e){if(d instanceof THREE.MeshFaceMaterial){var g=d.materials,f=0;for(d=g.length;f<d;f++)X.renderBufferDirect(a,b,c,g[f],e)}else if(!1!==d.visible){t(d);g=ca.geometries.get(e);a=X.setProgram(a,b,c,d,e);f=!1;b=g.id+"_"+a.id+"_"+(d.wireframe?1:0);b!==ha&&(ha=b,f=!0);var h=e.morphTargetInfluences;if(void 0!==h){b=[];f=0;for(c=h.length;f<c;f++){var l=h[f];b.push([l,f])}b.sort(n);8<b.length&&(b.length=8);h=g.morphAttributes;f=0;for(c=b.length;f<c;f++)l=b[f],Ia[f]=l[0],0!==l[0]?(l=l[1],
!0===d.morphTargets&&g.addAttribute("morphTarget"+f,h.position[l]),!0===d.morphNormals&&g.addAttribute("morphNormal"+f,h.normal[l])):(!0===d.morphTargets&&g.removeAttribute("morphTarget"+f),!0===d.morphNormals&&g.removeAttribute("morphNormal"+f));f=a.getUniforms();null!==f.morphTargetInfluences&&s.uniform1fv(f.morphTargetInfluences,Ia);f=!0}if(e instanceof THREE.Mesh)a:{e=s.TRIANGLES;!0===d.wireframe&&(e=s.LINES,M.setLineWidth(d.wireframeLinewidth*D));var m=g.attributes.index;if(m)if(h=ca.getAttributeBuffer(m),
m.array instanceof Uint32Array&&T.get("OES_element_index_uint")?(b=s.UNSIGNED_INT,c=4):(b=s.UNSIGNED_SHORT,c=2),l=g.drawcalls,0===l.length){f&&(k(d,a,g,0),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,h));if(g instanceof THREE.InstancedBufferGeometry&&0<g.maxInstancedCount){var p=T.get("ANGLE_instanced_arrays");if(null===p){console.error("THREE.WebGLRenderer.renderMesh: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");break a}p.drawElementsInstancedANGLE(e,
m.array.length,b,0,g.maxInstancedCount)}else s.drawElements(e,m.array.length,b,0);P.calls++;P.vertices+=m.array.length;P.faces+=m.array.length/3}else for(var f=!0,m=0,q=l.length;m<q;m++){p=l[m].index;f&&(k(d,a,g,p),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,h));if(g instanceof THREE.InstancedBufferGeometry&&0<l[m].instances){p=T.get("ANGLE_instanced_arrays");if(null===p){console.error("THREE.WebGLRenderer.renderMesh: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");
break a}p.drawElementsInstancedANGLE(e,l[m].count,b,l[m].start*c,l[m].count,b,l[m].instances)}else s.drawElements(e,l[m].count,b,l[m].start*c);P.calls++;P.vertices+=l[m].count;P.faces+=l[m].count/3}else if(l=g.drawcalls,0===l.length){f&&k(d,a,g,0);d=g.attributes.position;if(g instanceof THREE.InstancedBufferGeometry&&0<g.maxInstancedCount){p=T.get("ANGLE_instanced_arrays");if(null===p){console.error("THREE.WebGLRenderer.renderMesh: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");
break a}d instanceof THREE.InterleavedBufferAttribute?p.drawArraysInstancedANGLE(e,0,d.data.count,g.maxInstancedCount):p.drawArraysInstancedANGLE(e,0,d.count,g.maxInstancedCount)}else d instanceof THREE.InterleavedBufferAttribute?s.drawArrays(e,0,d.data.count):s.drawArrays(e,0,d.count);P.calls++;P.vertices+=d.count;P.faces+=d.array.length/3}else for(f&&k(d,a,g,0),m=0,q=l.length;m<q;m++){if(g instanceof THREE.InstancedBufferGeometry){console.error("THREE.WebGLRenderer.renderMesh: cannot use drawCalls with THREE.InstancedBufferGeometry.");
break a}else s.drawArrays(e,l[m].start,l[m].count);P.calls++;P.vertices+=l[m].count;P.faces+=l[m].count/3}}else if(e instanceof THREE.Line)if(e=e instanceof THREE.LineSegments?s.LINES:s.LINE_STRIP,M.setLineWidth((void 0!==d.linewidth?d.linewidth:1)*D),p=g.attributes.index)if(l=ca.getAttributeBuffer(p),p.array instanceof Uint32Array&&T.get("OES_element_index_uint")?(c=s.UNSIGNED_INT,h=4):(c=s.UNSIGNED_SHORT,h=2),b=g.drawcalls,0===b.length)f&&(k(d,a,g,0),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,l)),s.drawElements(e,
p.array.length,c,0),P.calls++,P.vertices+=p.array.length;else for(1<b.length&&(f=!0),p=0,m=b.length;p<m;p++)q=b[p].index,f&&(k(d,a,g,q),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,l)),s.drawElements(e,b[p].count,c,b[p].start*h),P.calls++,P.vertices+=b[p].count;else if(f&&k(d,a,g,0),d=g.attributes.position,b=g.drawcalls,0===b.length)s.drawArrays(e,0,d.array.length/3),P.calls++,P.vertices+=d.array.length/3;else for(p=0,m=b.length;p<m;p++)s.drawArrays(e,b[p].index,b[p].count),P.calls++,P.vertices+=b[p].count;
else if(e instanceof THREE.PointCloud)if(b=f,e=s.POINTS,p=g.attributes.index)if(l=ca.getAttributeBuffer(p),p.array instanceof Uint32Array&&T.get("OES_element_index_uint")?(c=s.UNSIGNED_INT,h=4):(c=s.UNSIGNED_SHORT,h=2),f=g.drawcalls,0===f.length)b&&(k(d,a,g,0),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,l)),s.drawElements(e,p.array.length,c,0),P.calls++,P.points+=p.array.length;else for(1<f.length&&(b=!0),p=0,m=f.length;p<m;p++)q=f[p].index,b&&(k(d,a,g,q),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,l)),s.drawElements(e,
f[p].count,c,f[p].start*h),P.calls++,P.points+=f[p].count;else if(b&&k(d,a,g,0),d=g.attributes.position,f=g.drawcalls,0===f.length)s.drawArrays(e,0,d.array.length/3),P.calls++,P.points+=d.array.length/3;else for(p=0,m=f.length;p<m;p++)s.drawArrays(e,f[p].index,f[p].count),P.calls++,P.points+=f[p].count}};this.render=function(a,b,c,d){if(!1===b instanceof THREE.Camera)console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");else{var e=a.fog;ha="";ia=-1;ga=null;oa=!0;
!0===a.autoUpdate&&a.updateMatrixWorld();void 0===b.parent&&b.updateMatrixWorld();b.matrixWorldInverse.getInverse(b.matrixWorld);Fa.multiplyMatrices(b.projectionMatrix,b.matrixWorldInverse);Ja.setFromMatrix(Fa);V.length=0;$.length=0;ba.length=0;fa.length=0;ja.length=0;Ca.length=0;Ea.length=0;m(a);!0===X.sortObjects&&($.sort(l),ba.sort(p));ca.update($);ca.update(ba);aa.render(a,b);P.calls=0;P.vertices=0;P.faces=0;P.points=0;this.setRenderTarget(c);(this.autoClear||d)&&this.clear(this.autoClearColor,
this.autoClearDepth,this.autoClearStencil);a.overrideMaterial?(d=a.overrideMaterial,q($,b,V,e,d),q(ba,b,V,e,d),r(fa,b,V,e,d),r(ja,b,V,e,d)):(M.setBlending(THREE.NoBlending),q($,b,V,e,null),r(fa,b,V,e,null),q(ba,b,V,e,null),r(ja,b,V,e,null));fb.render(a,b);gb.render(a,b,La,Ma);c&&c.generateMipmaps&&c.minFilter!==THREE.NearestFilter&&c.minFilter!==THREE.LinearFilter&&(c instanceof THREE.WebGLRenderTargetCube?(M.bindTexture(s.TEXTURE_CUBE_MAP,U.get(c).__webglTexture),s.generateMipmap(s.TEXTURE_CUBE_MAP),
M.bindTexture(s.TEXTURE_CUBE_MAP,null)):(M.bindTexture(s.TEXTURE_2D,U.get(c).__webglTexture),s.generateMipmap(s.TEXTURE_2D),M.bindTexture(s.TEXTURE_2D,null)));M.setDepthTest(!0);M.setDepthWrite(!0);M.setColorWrite(!0)}};this.renderImmediateObject=function(a,b,c,d,e){t(d);var g=X.setProgram(a,b,c,d,e);ha="";e.render(function(a){X.renderBufferImmediate(a,g,d)})};var hb={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",
LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointCloudMaterial:"particle_basic"};this.setProgram=function(a,b,c,d,e){var g,k,l,m;pa=0;var n=U.get(d);if(d.needsUpdate||!n.program){a:{for(var p=U.get(d),q=hb[d.type],r=m=l=k=g=0,t=b.length;r<t;r++){var B=b[r];B.onlyShadow||!1===B.visible||(B instanceof THREE.DirectionalLight&&g++,B instanceof THREE.PointLight&&k++,B instanceof THREE.SpotLight&&l++,B instanceof THREE.HemisphereLight&&m++)}t=r=0;for(B=b.length;t<B;t++){var v=b[t];v.castShadow&&
(v instanceof THREE.SpotLight&&r++,v instanceof THREE.DirectionalLight&&r++)}Ha&&e&&e.skeleton&&e.skeleton.useVertexTexture?t=1024:(t=s.getParameter(s.MAX_VERTEX_UNIFORM_VECTORS),t=Math.floor((t-20)/4),void 0!==e&&e instanceof THREE.SkinnedMesh&&(t=Math.min(e.skeleton.bones.length,t),t<e.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+e.skeleton.bones.length+", this GPU supports just "+t+" (try OpenGL instead of ANGLE)")));g={precision:K,supportsVertexTextures:Ga,map:!!d.map,
envMap:!!d.envMap,envMapMode:d.envMap&&d.envMap.mapping,lightMap:!!d.lightMap,aoMap:!!d.aoMap,emissiveMap:!!d.emissiveMap,bumpMap:!!d.bumpMap,normalMap:!!d.normalMap,specularMap:!!d.specularMap,alphaMap:!!d.alphaMap,combine:d.combine,vertexColors:d.vertexColors,fog:c,useFog:d.fog,fogExp:c instanceof THREE.FogExp2,flatShading:d.shading===THREE.FlatShading,sizeAttenuation:d.sizeAttenuation,logarithmicDepthBuffer:R,skinning:d.skinning,maxBones:t,useVertexTexture:Ha&&e&&e.skeleton&&e.skeleton.useVertexTexture,
morphTargets:d.morphTargets,morphNormals:d.morphNormals,maxMorphTargets:X.maxMorphTargets,maxMorphNormals:X.maxMorphNormals,maxDirLights:g,maxPointLights:k,maxSpotLights:l,maxHemiLights:m,maxShadows:r,shadowMapEnabled:aa.enabled&&e.receiveShadow&&0<r,shadowMapType:aa.type,shadowMapDebug:aa.debug,alphaTest:d.alphaTest,metal:d.metal,doubleSided:d.side===THREE.DoubleSide,flipSided:d.side===THREE.BackSide};k=[];q?k.push(q):(k.push(d.fragmentShader),k.push(d.vertexShader));if(void 0!==d.defines)for(var A in d.defines)k.push(A),
k.push(d.defines[A]);for(A in g)k.push(A),k.push(g[A]);A=k.join();k=!0;if(p.program)if(p.program.code!==A)h(d);else if(void 0!==q)break a;else k=!1;else d.addEventListener("dispose",f);q?(q=THREE.ShaderLib[q],p.__webglShader={name:d.type,uniforms:THREE.UniformsUtils.clone(q.uniforms),vertexShader:q.vertexShader,fragmentShader:q.fragmentShader}):p.__webglShader={name:d.type,uniforms:d.uniforms,vertexShader:d.vertexShader,fragmentShader:d.fragmentShader};var x,q=0;for(l=da.length;q<l;q++)if(m=da[q],
m.code===A){x=m;k&&x.usedTimes++;break}void 0===x&&(d.__webglShader=p.__webglShader,x=new THREE.WebGLProgram(X,A,d,g),da.push(x),ea.programs=da.length);p.program=x;x=x.getAttributes();if(d.morphTargets)for(q=d.numSupportedMorphTargets=0;q<X.maxMorphTargets;q++)0<=x["morphTarget"+q]&&d.numSupportedMorphTargets++;if(d.morphNormals)for(q=d.numSupportedMorphNormals=0;q<X.maxMorphNormals;q++)0<=x["morphNormal"+q]&&d.numSupportedMorphNormals++;p.uniformsList=[];x=p.program.getUniforms();for(var D in p.__webglShader.uniforms)(q=
x[D])&&p.uniformsList.push([p.__webglShader.uniforms[D],q])}d.needsUpdate=!1}q=A=g=!1;p=n.program;D=p.getUniforms();x=n.__webglShader.uniforms;p.id!==Da&&(s.useProgram(p.program),Da=p.id,q=A=g=!0);d.id!==ia&&(-1===ia&&(q=!0),ia=d.id,A=!0);if(g||a!==ga)s.uniformMatrix4fv(D.projectionMatrix,!1,a.projectionMatrix.elements),R&&s.uniform1f(D.logDepthBufFC,2/(Math.log(a.far+1)/Math.LN2)),a!==ga&&(ga=a),(d instanceof THREE.ShaderMaterial||d instanceof THREE.MeshPhongMaterial||d.envMap)&&void 0!==D.cameraPosition&&
(Z.setFromMatrixPosition(a.matrixWorld),s.uniform3f(D.cameraPosition,Z.x,Z.y,Z.z)),(d instanceof THREE.MeshPhongMaterial||d instanceof THREE.MeshLambertMaterial||d instanceof THREE.MeshBasicMaterial||d instanceof THREE.ShaderMaterial||d.skinning)&&void 0!==D.viewMatrix&&s.uniformMatrix4fv(D.viewMatrix,!1,a.matrixWorldInverse.elements);d.skinning&&(e.bindMatrix&&void 0!==D.bindMatrix&&s.uniformMatrix4fv(D.bindMatrix,!1,e.bindMatrix.elements),e.bindMatrixInverse&&void 0!==D.bindMatrixInverse&&s.uniformMatrix4fv(D.bindMatrixInverse,
!1,e.bindMatrixInverse.elements),Ha&&e.skeleton&&e.skeleton.useVertexTexture?(void 0!==D.boneTexture&&(g=y(),s.uniform1i(D.boneTexture,g),X.setTexture(e.skeleton.boneTexture,g)),void 0!==D.boneTextureWidth&&s.uniform1i(D.boneTextureWidth,e.skeleton.boneTextureWidth),void 0!==D.boneTextureHeight&&s.uniform1i(D.boneTextureHeight,e.skeleton.boneTextureHeight)):e.skeleton&&e.skeleton.boneMatrices&&void 0!==D.boneGlobalMatrices&&s.uniformMatrix4fv(D.boneGlobalMatrices,!1,e.skeleton.boneMatrices));if(A){c&&
d.fog&&(x.fogColor.value=c.color,c instanceof THREE.Fog?(x.fogNear.value=c.near,x.fogFar.value=c.far):c instanceof THREE.FogExp2&&(x.fogDensity.value=c.density));if(d instanceof THREE.MeshPhongMaterial||d instanceof THREE.MeshLambertMaterial||d.lights){if(oa){var q=!0,z;l=k=g=0;var C,G,I=v=B=t=r=0,F=0,H=0,N=0,L=z=0;c=G=L=0;for(A=b.length;c<A;c++)z=b[c],z.onlyShadow||(C=z.color,m=z.intensity,G=z.distance,z instanceof THREE.AmbientLight?z.visible&&(g+=C.r,k+=C.g,l+=C.b):z instanceof THREE.DirectionalLight?
(I+=1,z.visible&&(W.setFromMatrixPosition(z.matrixWorld),Z.setFromMatrixPosition(z.target.matrixWorld),W.sub(Z),W.normalize(),z=3*r,ta[z+0]=W.x,ta[z+1]=W.y,ta[z+2]=W.z,w(sa,z,C,m),r+=1)):z instanceof THREE.PointLight?(F+=1,z.visible&&(L=3*t,w(ua,L,C,m),Z.setFromMatrixPosition(z.matrixWorld),va[L+0]=Z.x,va[L+1]=Z.y,va[L+2]=Z.z,Na[t]=G,Oa[t]=0===z.distance?0:z.decay,t+=1)):z instanceof THREE.SpotLight?(H+=1,z.visible&&(L=3*B,w(wa,L,C,m),W.setFromMatrixPosition(z.matrixWorld),xa[L+0]=W.x,xa[L+1]=W.y,
xa[L+2]=W.z,Pa[B]=G,Z.setFromMatrixPosition(z.target.matrixWorld),W.sub(Z),W.normalize(),ya[L+0]=W.x,ya[L+1]=W.y,ya[L+2]=W.z,Qa[B]=Math.cos(z.angle),Ra[B]=z.exponent,Sa[B]=0===z.distance?0:z.decay,B+=1)):z instanceof THREE.HemisphereLight&&(N+=1,z.visible&&(W.setFromMatrixPosition(z.matrixWorld),W.normalize(),G=3*v,Ba[G+0]=W.x,Ba[G+1]=W.y,Ba[G+2]=W.z,C=z.color,z=z.groundColor,w(za,G,C,m),w(Aa,G,z,m),v+=1)));c=3*r;for(A=Math.max(sa.length,3*I);c<A;c++)sa[c]=0;c=3*t;for(A=Math.max(ua.length,3*F);c<
A;c++)ua[c]=0;c=3*B;for(A=Math.max(wa.length,3*H);c<A;c++)wa[c]=0;c=3*v;for(A=Math.max(za.length,3*N);c<A;c++)za[c]=0;c=3*v;for(A=Math.max(Aa.length,3*N);c<A;c++)Aa[c]=0;ra[0]=g;ra[1]=k;ra[2]=l;oa=!1}q?(x.ambientLightColor.value=ra,x.directionalLightColor.value=sa,x.directionalLightDirection.value=ta,x.pointLightColor.value=ua,x.pointLightPosition.value=va,x.pointLightDistance.value=Na,x.pointLightDecay.value=Oa,x.spotLightColor.value=wa,x.spotLightPosition.value=xa,x.spotLightDistance.value=Pa,x.spotLightDirection.value=
ya,x.spotLightAngleCos.value=Qa,x.spotLightExponent.value=Ra,x.spotLightDecay.value=Sa,x.hemisphereLightSkyColor.value=za,x.hemisphereLightGroundColor.value=Aa,x.hemisphereLightDirection.value=Ba,u(x,!0)):u(x,!1)}if(d instanceof THREE.MeshBasicMaterial||d instanceof THREE.MeshLambertMaterial||d instanceof THREE.MeshPhongMaterial){x.opacity.value=d.opacity;x.diffuse.value=d.color;x.map.value=d.map;x.specularMap.value=d.specularMap;x.alphaMap.value=d.alphaMap;d.bumpMap&&(x.bumpMap.value=d.bumpMap,x.bumpScale.value=
d.bumpScale);d.normalMap&&(x.normalMap.value=d.normalMap,x.normalScale.value.copy(d.normalScale));var E;d.map?E=d.map:d.specularMap?E=d.specularMap:d.normalMap?E=d.normalMap:d.bumpMap?E=d.bumpMap:d.alphaMap?E=d.alphaMap:d.emissiveMap&&(E=d.emissiveMap);void 0!==E&&(c=E.offset,E=E.repeat,x.offsetRepeat.value.set(c.x,c.y,E.x,E.y));x.envMap.value=d.envMap;x.flipEnvMap.value=d.envMap instanceof THREE.WebGLRenderTargetCube?1:-1;x.reflectivity.value=d.reflectivity;x.refractionRatio.value=d.refractionRatio}d instanceof
THREE.LineBasicMaterial?(x.diffuse.value=d.color,x.opacity.value=d.opacity):d instanceof THREE.LineDashedMaterial?(x.diffuse.value=d.color,x.opacity.value=d.opacity,x.dashSize.value=d.dashSize,x.totalSize.value=d.dashSize+d.gapSize,x.scale.value=d.scale):d instanceof THREE.PointCloudMaterial?(x.psColor.value=d.color,x.opacity.value=d.opacity,x.size.value=d.size,x.scale.value=J.height/2,x.map.value=d.map,null!==d.map&&(a=d.map.offset,E=d.map.repeat,x.offsetRepeat.value.set(a.x,a.y,E.x,E.y))):d instanceof
THREE.MeshPhongMaterial?(x.shininess.value=d.shininess,x.emissive.value=d.emissive,x.specular.value=d.specular,x.lightMap.value=d.lightMap,x.lightMapIntensity.value=d.lightMapIntensity,x.aoMap.value=d.aoMap,x.aoMapIntensity.value=d.aoMapIntensity,x.emissiveMap.value=d.emissiveMap):d instanceof THREE.MeshLambertMaterial?x.emissive.value=d.emissive:d instanceof THREE.MeshBasicMaterial?(x.aoMap.value=d.aoMap,x.aoMapIntensity.value=d.aoMapIntensity):d instanceof THREE.MeshDepthMaterial?(x.mNear.value=
a.near,x.mFar.value=a.far,x.opacity.value=d.opacity):d instanceof THREE.MeshNormalMaterial&&(x.opacity.value=d.opacity);if(e.receiveShadow&&!d._shadowPass&&x.shadowMatrix)for(a=d=0,E=b.length;a<E;a++)c=b[a],c.castShadow&&(c instanceof THREE.SpotLight||c instanceof THREE.DirectionalLight)&&(x.shadowMap.value[d]=c.shadowMap,x.shadowMapSize.value[d]=c.shadowMapSize,x.shadowMatrix.value[d]=c.shadowMatrix,x.shadowDarkness.value[d]=c.shadowDarkness,x.shadowBias.value[d]=c.shadowBias,d++);X.loadUniformsGeneric(n.uniformsList)}s.uniformMatrix4fv(D.modelViewMatrix,
!1,e._modelViewMatrix.elements);D.normalMatrix&&s.uniformMatrix3fv(D.normalMatrix,!1,e._normalMatrix.elements);void 0!==D.modelMatrix&&s.uniformMatrix4fv(D.modelMatrix,!1,e.matrixWorld.elements);return p};this.loadUniformsGeneric=function(a){for(var b,c,d=0,g=a.length;d<g;d++){var f=a[d][0];if(!1!==f.needsUpdate){var h=f.type;c=f.value;var k=a[d][1];switch(h){case "1i":s.uniform1i(k,c);break;case "1f":s.uniform1f(k,c);break;case "2f":s.uniform2f(k,c[0],c[1]);break;case "3f":s.uniform3f(k,c[0],c[1],
c[2]);break;case "4f":s.uniform4f(k,c[0],c[1],c[2],c[3]);break;case "1iv":s.uniform1iv(k,c);break;case "3iv":s.uniform3iv(k,c);break;case "1fv":s.uniform1fv(k,c);break;case "2fv":s.uniform2fv(k,c);break;case "3fv":s.uniform3fv(k,c);break;case "4fv":s.uniform4fv(k,c);break;case "Matrix3fv":s.uniformMatrix3fv(k,!1,c);break;case "Matrix4fv":s.uniformMatrix4fv(k,!1,c);break;case "i":s.uniform1i(k,c);break;case "f":s.uniform1f(k,c);break;case "v2":s.uniform2f(k,c.x,c.y);break;case "v3":s.uniform3f(k,c.x,
c.y,c.z);break;case "v4":s.uniform4f(k,c.x,c.y,c.z,c.w);break;case "c":s.uniform3f(k,c.r,c.g,c.b);break;case "iv1":s.uniform1iv(k,c);break;case "iv":s.uniform3iv(k,c);break;case "fv1":s.uniform1fv(k,c);break;case "fv":s.uniform3fv(k,c);break;case "v2v":void 0===f._array&&(f._array=new Float32Array(2*c.length));for(var h=0,l=c.length;h<l;h++)b=2*h,f._array[b+0]=c[h].x,f._array[b+1]=c[h].y;s.uniform2fv(k,f._array);break;case "v3v":void 0===f._array&&(f._array=new Float32Array(3*c.length));h=0;for(l=
c.length;h<l;h++)b=3*h,f._array[b+0]=c[h].x,f._array[b+1]=c[h].y,f._array[b+2]=c[h].z;s.uniform3fv(k,f._array);break;case "v4v":void 0===f._array&&(f._array=new Float32Array(4*c.length));h=0;for(l=c.length;h<l;h++)b=4*h,f._array[b+0]=c[h].x,f._array[b+1]=c[h].y,f._array[b+2]=c[h].z,f._array[b+3]=c[h].w;s.uniform4fv(k,f._array);break;case "m3":s.uniformMatrix3fv(k,!1,c.elements);break;case "m3v":void 0===f._array&&(f._array=new Float32Array(9*c.length));h=0;for(l=c.length;h<l;h++)c[h].flattenToArrayOffset(f._array,
9*h);s.uniformMatrix3fv(k,!1,f._array);break;case "m4":s.uniformMatrix4fv(k,!1,c.elements);break;case "m4v":void 0===f._array&&(f._array=new Float32Array(16*c.length));h=0;for(l=c.length;h<l;h++)c[h].flattenToArrayOffset(f._array,16*h);s.uniformMatrix4fv(k,!1,f._array);break;case "t":b=c;c=y();s.uniform1i(k,c);if(!b)continue;if(b instanceof THREE.CubeTexture||Array.isArray(b.image)&&6===b.image.length){if(f=b,k=U.get(f),6===f.image.length)if(0<f.version&&k.__version!==f.version){k.__image__webglTextureCube||
(f.addEventListener("dispose",e),k.__image__webglTextureCube=s.createTexture(),ea.textures++);M.activeTexture(s.TEXTURE0+c);M.bindTexture(s.TEXTURE_CUBE_MAP,k.__image__webglTextureCube);s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,f.flipY);c=f instanceof THREE.CompressedTexture;h=f.image[0]instanceof THREE.DataTexture;l=[];for(b=0;6>b;b++)l[b]=!X.autoScaleCubemaps||c||h?h?f.image[b].image:f.image[b]:v(f.image[b],Za);b=l[0];var m=THREE.Math.isPowerOfTwo(b.width)&&THREE.Math.isPowerOfTwo(b.height),n=x(f.format),
p=x(f.type);A(s.TEXTURE_CUBE_MAP,f,m);for(b=0;6>b;b++)if(c)for(var q,r=l[b].mipmaps,t=0,u=r.length;t<u;t++)q=r[t],f.format!==THREE.RGBAFormat&&f.format!==THREE.RGBFormat?-1<Ua().indexOf(n)?M.compressedTexImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+b,t,n,q.width,q.height,0,q.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setCubeTexture()"):M.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+b,t,n,q.width,q.height,0,n,p,q.data);else h?M.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+
b,0,n,l[b].width,l[b].height,0,n,p,l[b].data):M.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+b,0,n,n,p,l[b]);f.generateMipmaps&&m&&s.generateMipmap(s.TEXTURE_CUBE_MAP);k.__version=f.version;if(f.onUpdate)f.onUpdate(f)}else M.activeTexture(s.TEXTURE0+c),M.bindTexture(s.TEXTURE_CUBE_MAP,k.__image__webglTextureCube)}else b instanceof THREE.WebGLRenderTargetCube?(f=b,M.activeTexture(s.TEXTURE0+c),M.bindTexture(s.TEXTURE_CUBE_MAP,U.get(f).__webglTexture)):X.setTexture(b,c);break;case "tv":void 0===f._array&&
(f._array=[]);h=0;for(l=f.value.length;h<l;h++)f._array[h]=y();s.uniform1iv(k,f._array);h=0;for(l=f.value.length;h<l;h++)b=f.value[h],c=f._array[h],b&&X.setTexture(b,c);break;default:console.warn("THREE.WebGLRenderer: Unknown uniform type: "+h)}}}};this.setFaceCulling=function(a,b){a===THREE.CullFaceNone?M.disable(s.CULL_FACE):(b===THREE.FrontFaceDirectionCW?s.frontFace(s.CW):s.frontFace(s.CCW),a===THREE.CullFaceBack?s.cullFace(s.BACK):a===THREE.CullFaceFront?s.cullFace(s.FRONT):s.cullFace(s.FRONT_AND_BACK),
M.enable(s.CULL_FACE))};this.setTexture=function(a,b){var c=U.get(a);if(0<a.version&&c.__version!==a.version){var d=a.image;if(void 0===d)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",a);else if(!1===d.complete)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",a);else{void 0===c.__webglInit&&(c.__webglInit=!0,a.__webglInit=!0,a.addEventListener("dispose",e),c.__webglTexture=s.createTexture(),ea.textures++);M.activeTexture(s.TEXTURE0+
b);M.bindTexture(s.TEXTURE_2D,c.__webglTexture);s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,a.flipY);s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultiplyAlpha);s.pixelStorei(s.UNPACK_ALIGNMENT,a.unpackAlignment);a.image=v(a.image,Ya);var f=a.image,d=THREE.Math.isPowerOfTwo(f.width)&&THREE.Math.isPowerOfTwo(f.height),g=x(a.format),h=x(a.type);A(s.TEXTURE_2D,a,d);var k=a.mipmaps;if(a instanceof THREE.DataTexture)if(0<k.length&&d){for(var l=0,m=k.length;l<m;l++)f=k[l],M.texImage2D(s.TEXTURE_2D,l,g,f.width,
f.height,0,g,h,f.data);a.generateMipmaps=!1}else M.texImage2D(s.TEXTURE_2D,0,g,f.width,f.height,0,g,h,f.data);else if(a instanceof THREE.CompressedTexture)for(l=0,m=k.length;l<m;l++)f=k[l],a.format!==THREE.RGBAFormat&&a.format!==THREE.RGBFormat?-1<Ua().indexOf(g)?M.compressedTexImage2D(s.TEXTURE_2D,l,g,f.width,f.height,0,f.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):M.texImage2D(s.TEXTURE_2D,l,g,f.width,f.height,0,g,h,f.data);
else if(0<k.length&&d){l=0;for(m=k.length;l<m;l++)f=k[l],M.texImage2D(s.TEXTURE_2D,l,g,g,h,f);a.generateMipmaps=!1}else M.texImage2D(s.TEXTURE_2D,0,g,g,h,a.image);a.generateMipmaps&&d&&s.generateMipmap(s.TEXTURE_2D);c.__version=a.version;if(a.onUpdate)a.onUpdate(a)}}else M.activeTexture(s.TEXTURE0+b),M.bindTexture(s.TEXTURE_2D,c.__webglTexture)};this.setRenderTarget=function(a){var b=a instanceof THREE.WebGLRenderTargetCube;if(a&&void 0===U.get(a).__webglFramebuffer){var c=U.get(a);void 0===a.depthBuffer&&
(a.depthBuffer=!0);void 0===a.stencilBuffer&&(a.stencilBuffer=!0);a.addEventListener("dispose",g);c.__webglTexture=s.createTexture();ea.textures++;var d=THREE.Math.isPowerOfTwo(a.width)&&THREE.Math.isPowerOfTwo(a.height),e=x(a.format),f=x(a.type);if(b){c.__webglFramebuffer=[];c.__webglRenderbuffer=[];M.bindTexture(s.TEXTURE_CUBE_MAP,c.__webglTexture);A(s.TEXTURE_CUBE_MAP,a,d);for(var h=0;6>h;h++)c.__webglFramebuffer[h]=s.createFramebuffer(),c.__webglRenderbuffer[h]=s.createRenderbuffer(),M.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+
h,0,e,a.width,a.height,0,e,f,null),z(c.__webglFramebuffer[h],a,s.TEXTURE_CUBE_MAP_POSITIVE_X+h),C(c.__webglRenderbuffer[h],a);a.generateMipmaps&&d&&s.generateMipmap(s.TEXTURE_CUBE_MAP)}else c.__webglFramebuffer=s.createFramebuffer(),c.__webglRenderbuffer=a.shareDepthFrom?a.shareDepthFrom.__webglRenderbuffer:s.createRenderbuffer(),M.bindTexture(s.TEXTURE_2D,c.__webglTexture),A(s.TEXTURE_2D,a,d),M.texImage2D(s.TEXTURE_2D,0,e,a.width,a.height,0,e,f,null),z(c.__webglFramebuffer,a,s.TEXTURE_2D),a.shareDepthFrom?
a.depthBuffer&&!a.stencilBuffer?s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.RENDERBUFFER,c.__webglRenderbuffer):a.depthBuffer&&a.stencilBuffer&&s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,c.__webglRenderbuffer):C(c.__webglRenderbuffer,a),a.generateMipmaps&&d&&s.generateMipmap(s.TEXTURE_2D);b?M.bindTexture(s.TEXTURE_CUBE_MAP,null):M.bindTexture(s.TEXTURE_2D,null);s.bindRenderbuffer(s.RENDERBUFFER,null);s.bindFramebuffer(s.FRAMEBUFFER,null)}a?(c=
U.get(a),b=b?c.__webglFramebuffer[a.activeCubeFace]:c.__webglFramebuffer,c=a.width,a=a.height,e=d=0):(b=null,c=ma,a=na,d=ka,e=la);b!==qa&&(s.bindFramebuffer(s.FRAMEBUFFER,b),s.viewport(d,e,c,a),qa=b);La=c;Ma=a};this.readRenderTargetPixels=function(a,b,c,d,e,f){if(!(a instanceof THREE.WebGLRenderTarget))console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");else if(U.get(a).__webglFramebuffer)if(a.format!==THREE.RGBAFormat)console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA format. readPixels can read only RGBA format.");
else{var g=!1;U.get(a).__webglFramebuffer!==qa&&(s.bindFramebuffer(s.FRAMEBUFFER,U.get(a).__webglFramebuffer),g=!0);s.checkFramebufferStatus(s.FRAMEBUFFER)===s.FRAMEBUFFER_COMPLETE?s.readPixels(b,c,d,e,s.RGBA,s.UNSIGNED_BYTE,f):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.");g&&s.bindFramebuffer(s.FRAMEBUFFER,qa)}};this.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")};this.addPrePlugin=
function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")};this.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")};this.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")};Object.defineProperties(this,{shadowMapEnabled:{get:function(){return aa.enabled},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.");aa.enabled=a}},shadowMapType:{get:function(){return aa.type},
set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.");aa.type=a}},shadowMapCullFace:{get:function(){return aa.cullFace},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace.");aa.cullFace=a}},shadowMapDebug:{get:function(){return aa.debug},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapDebug is now .shadowMap.debug.");aa.debug=a}}})};
THREE.WebGLRenderTarget=function(a,b,c){this.uuid=THREE.Math.generateUUID();this.width=a;this.height=b;c=c||{};this.wrapS=void 0!==c.wrapS?c.wrapS:THREE.ClampToEdgeWrapping;this.wrapT=void 0!==c.wrapT?c.wrapT:THREE.ClampToEdgeWrapping;this.magFilter=void 0!==c.magFilter?c.magFilter:THREE.LinearFilter;this.minFilter=void 0!==c.minFilter?c.minFilter:THREE.LinearMipMapLinearFilter;this.anisotropy=void 0!==c.anisotropy?c.anisotropy:1;this.offset=new THREE.Vector2(0,0);this.repeat=new THREE.Vector2(1,
1);this.format=void 0!==c.format?c.format:THREE.RGBAFormat;this.type=void 0!==c.type?c.type:THREE.UnsignedByteType;this.depthBuffer=void 0!==c.depthBuffer?c.depthBuffer:!0;this.stencilBuffer=void 0!==c.stencilBuffer?c.stencilBuffer:!0;this.generateMipmaps=!0;this.shareDepthFrom=void 0!==c.shareDepthFrom?c.shareDepthFrom:null};
THREE.WebGLRenderTarget.prototype={constructor:THREE.WebGLRenderTarget,setSize:function(a,b){if(this.width!==a||this.height!==b)this.width=a,this.height=b,this.dispose()},copy:function(a){this.width=a.width;this.height=a.height;this.wrapS=a.wrapS;this.wrapT=a.wrapT;this.magFilter=a.magFilter;this.minFilter=a.minFilter;this.anisotropy=a.anisotropy;this.offset.copy(a.offset);this.repeat.copy(a.repeat);this.format=a.format;this.type=a.type;this.depthBuffer=a.depthBuffer;this.stencilBuffer=a.stencilBuffer;
this.generateMipmaps=a.generateMipmaps;this.shareDepthFrom=a.shareDepthFrom;return this},clone:function(){return(new THREE.WebGLRenderTarget).copy(this)},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.WebGLRenderTarget.prototype);THREE.WebGLRenderTargetCube=function(a,b,c){THREE.WebGLRenderTarget.call(this,a,b,c);this.activeCubeFace=0};THREE.WebGLRenderTargetCube.prototype=Object.create(THREE.WebGLRenderTarget.prototype);
THREE.WebGLRenderTargetCube.prototype.constructor=THREE.WebGLRenderTargetCube;
THREE.WebGLExtensions=function(a){var b={};this.get=function(c){if(void 0!==b[c])return b[c];var d;switch(c){case "EXT_texture_filter_anisotropic":d=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case "WEBGL_compressed_texture_s3tc":d=a.getExtension("WEBGL_compressed_texture_s3tc")||a.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");
break;case "WEBGL_compressed_texture_pvrtc":d=a.getExtension("WEBGL_compressed_texture_pvrtc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:d=a.getExtension(c)}null===d&&console.warn("THREE.WebGLRenderer: "+c+" extension not supported.");return b[c]=d}};
THREE.WebGLGeometries=function(a,b,c){function d(g){g=g.target;var f=e[g.id],h;for(h in f.attributes){var k=f.attributes[h],n;n=k;n=n instanceof THREE.InterleavedBufferAttribute?b.get(n.data).__webglBuffer:b.get(n).__webglBuffer;void 0!==n&&(a.deleteBuffer(n),k instanceof THREE.InterleavedBufferAttribute?b.delete(k.data):b.delete(k))}g.removeEventListener("dispose",d);delete e[g.id];c.memory.geometries--}var e={};this.get=function(a){var b=a.geometry;if(void 0!==e[b.id])return e[b.id];b.addEventListener("dispose",
d);b instanceof THREE.BufferGeometry?e[b.id]=b:b instanceof THREE.Geometry&&(void 0===b._bufferGeometry&&(b._bufferGeometry=(new THREE.BufferGeometry).setFromObject(a)),e[b.id]=b._bufferGeometry);c.memory.geometries++;return e[b.id]}};
THREE.WebGLObjects=function(a,b,c){function d(a){a.target.traverse(function(a){a.removeEventListener("remove",d);(a instanceof THREE.Mesh||a instanceof THREE.PointCloud||a instanceof THREE.Line)&&delete g[a.id];delete a._modelViewMatrix;delete a._normalMatrix;b.delete(a)})}function e(c,d){var e="index"===d?a.ELEMENT_ARRAY_BUFFER:a.ARRAY_BUFFER,f=c instanceof THREE.InterleavedBufferAttribute?c.data:c,g=b.get(f);if(void 0===g.__webglBuffer){g.__webglBuffer=a.createBuffer();a.bindBuffer(e,g.__webglBuffer);
var m=a.STATIC_DRAW;if(f instanceof THREE.DynamicBufferAttribute||f instanceof THREE.InstancedBufferAttribute&&!0===f.dynamic||f instanceof THREE.InterleavedBuffer&&!0===f.dynamic)m=a.DYNAMIC_DRAW;a.bufferData(e,f.array,m);g.version=f.version}else g.version!==f.version&&(a.bindBuffer(e,g.__webglBuffer),void 0===f.updateRange||-1===f.updateRange.count?a.bufferSubData(e,0,f.array):0===f.updateRange.count?console.error("THREE.WebGLObjects.updateBuffer: using updateRange for THREE.DynamicBufferAttribute and marked as needsUpdate but count is 0, ensure you are using set methods or updating manually."):
(a.bufferSubData(e,f.updateRange.offset*f.array.BYTES_PER_ELEMENT,f.array.subarray(f.updateRange.offset,f.updateRange.offset+f.updateRange.count)),f.updateRange.count=0),g.version=f.version)}var g={},f=new THREE.WebGLGeometries(a,b,c);this.objects=g;this.geometries=f;this.init=function(a){var c=b.get(a);void 0===c.__webglInit&&(c.__webglInit=!0,a._modelViewMatrix=new THREE.Matrix4,a._normalMatrix=new THREE.Matrix3,a.addEventListener("removed",d));void 0===c.__webglActive&&(c.__webglActive=!0,a instanceof
THREE.Mesh||a instanceof THREE.Line||a instanceof THREE.PointCloud)&&(g[a.id]={id:a.id,object:a,z:0})};this.getAttributeBuffer=function(a){return a instanceof THREE.InterleavedBufferAttribute?b.get(a.data).__webglBuffer:b.get(a).__webglBuffer};this.update=function(a){for(var b=0,c=a.length;b<c;b++){var d=a[b].object;if(!1!==d.material.visible){var g=f.get(d);d.geometry instanceof THREE.Geometry&&g.updateFromObject(d);var m=g.attributes,d=void 0;for(d in m)e(m[d],d);g=g.morphAttributes;for(d in g)for(var m=
g[d],q=0,r=m.length;q<r;q++)e(m[q],q)}}};this.clear=function(){g={}}};
THREE.WebGLProgram=function(){function a(a){var b=[],c;for(c in a){var f=a[c];!1!==f&&b.push("#define "+c+" "+f)}return b.join("\n")}function b(a){return""!==a}var c=0;return function(d,e,g,f){var h=d.context,k=g.defines,n=g.__webglShader.vertexShader,l=g.__webglShader.fragmentShader,p="SHADOWMAP_TYPE_BASIC";f.shadowMapType===THREE.PCFShadowMap?p="SHADOWMAP_TYPE_PCF":f.shadowMapType===THREE.PCFSoftShadowMap&&(p="SHADOWMAP_TYPE_PCF_SOFT");var m="ENVMAP_TYPE_CUBE",q="ENVMAP_MODE_REFLECTION",r="ENVMAP_BLENDING_MULTIPLY";
if(f.envMap){switch(g.envMap.mapping){case THREE.CubeReflectionMapping:case THREE.CubeRefractionMapping:m="ENVMAP_TYPE_CUBE";break;case THREE.EquirectangularReflectionMapping:case THREE.EquirectangularRefractionMapping:m="ENVMAP_TYPE_EQUIREC";break;case THREE.SphericalReflectionMapping:m="ENVMAP_TYPE_SPHERE"}switch(g.envMap.mapping){case THREE.CubeRefractionMapping:case THREE.EquirectangularRefractionMapping:q="ENVMAP_MODE_REFRACTION"}switch(g.combine){case THREE.MultiplyOperation:r="ENVMAP_BLENDING_MULTIPLY";
break;case THREE.MixOperation:r="ENVMAP_BLENDING_MIX";break;case THREE.AddOperation:r="ENVMAP_BLENDING_ADD"}}var t=0<d.gammaFactor?d.gammaFactor:1,u=a(k),y=h.createProgram();g instanceof THREE.RawShaderMaterial?d=k="":(k=["precision "+f.precision+" float;","precision "+f.precision+" int;","#define SHADER_NAME "+g.__webglShader.name,u,f.supportsVertexTextures?"#define VERTEX_TEXTURES":"",d.gammaInput?"#define GAMMA_INPUT":"",d.gammaOutput?"#define GAMMA_OUTPUT":"","#define GAMMA_FACTOR "+t,"#define MAX_DIR_LIGHTS "+
f.maxDirLights,"#define MAX_POINT_LIGHTS "+f.maxPointLights,"#define MAX_SPOT_LIGHTS "+f.maxSpotLights,"#define MAX_HEMI_LIGHTS "+f.maxHemiLights,"#define MAX_SHADOWS "+f.maxShadows,"#define MAX_BONES "+f.maxBones,f.map?"#define USE_MAP":"",f.envMap?"#define USE_ENVMAP":"",f.envMap?"#define "+q:"",f.lightMap?"#define USE_LIGHTMAP":"",f.aoMap?"#define USE_AOMAP":"",f.emissiveMap?"#define USE_EMISSIVEMAP":"",f.bumpMap?"#define USE_BUMPMAP":"",f.normalMap?"#define USE_NORMALMAP":"",f.specularMap?"#define USE_SPECULARMAP":
"",f.alphaMap?"#define USE_ALPHAMAP":"",f.vertexColors?"#define USE_COLOR":"",f.flatShading?"#define FLAT_SHADED":"",f.skinning?"#define USE_SKINNING":"",f.useVertexTexture?"#define BONE_TEXTURE":"",f.morphTargets?"#define USE_MORPHTARGETS":"",f.morphNormals&&!1===f.flatShading?"#define USE_MORPHNORMALS":"",f.doubleSided?"#define DOUBLE_SIDED":"",f.flipSided?"#define FLIP_SIDED":"",f.shadowMapEnabled?"#define USE_SHADOWMAP":"",f.shadowMapEnabled?"#define "+p:"",f.shadowMapDebug?"#define SHADOWMAP_DEBUG":
"",f.sizeAttenuation?"#define USE_SIZEATTENUATION":"",f.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",f.logarithmicDepthBuffer&&d.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif",
"#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING",
"\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(b).join("\n"),d=[f.bumpMap||f.normalMap||f.flatShading||g.derivatives?"#extension GL_OES_standard_derivatives : enable":"","precision "+f.precision+" float;","precision "+f.precision+" int;","#define SHADER_NAME "+g.__webglShader.name,u,"#define MAX_DIR_LIGHTS "+f.maxDirLights,"#define MAX_POINT_LIGHTS "+f.maxPointLights,"#define MAX_SPOT_LIGHTS "+f.maxSpotLights,"#define MAX_HEMI_LIGHTS "+f.maxHemiLights,"#define MAX_SHADOWS "+
f.maxShadows,f.alphaTest?"#define ALPHATEST "+f.alphaTest:"",d.gammaInput?"#define GAMMA_INPUT":"",d.gammaOutput?"#define GAMMA_OUTPUT":"","#define GAMMA_FACTOR "+t,f.useFog&&f.fog?"#define USE_FOG":"",f.useFog&&f.fogExp?"#define FOG_EXP2":"",f.map?"#define USE_MAP":"",f.envMap?"#define USE_ENVMAP":"",f.envMap?"#define "+m:"",f.envMap?"#define "+q:"",f.envMap?"#define "+r:"",f.lightMap?"#define USE_LIGHTMAP":"",f.aoMap?"#define USE_AOMAP":"",f.emissiveMap?"#define USE_EMISSIVEMAP":"",f.bumpMap?"#define USE_BUMPMAP":
"",f.normalMap?"#define USE_NORMALMAP":"",f.specularMap?"#define USE_SPECULARMAP":"",f.alphaMap?"#define USE_ALPHAMAP":"",f.vertexColors?"#define USE_COLOR":"",f.flatShading?"#define FLAT_SHADED":"",f.metal?"#define METAL":"",f.doubleSided?"#define DOUBLE_SIDED":"",f.flipSided?"#define FLIP_SIDED":"",f.shadowMapEnabled?"#define USE_SHADOWMAP":"",f.shadowMapEnabled?"#define "+p:"",f.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",f.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",f.logarithmicDepthBuffer&&
d.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","\n"].filter(b).join("\n"));l=d+l;n=THREE.WebGLShader(h,h.VERTEX_SHADER,k+n);l=THREE.WebGLShader(h,h.FRAGMENT_SHADER,l);h.attachShader(y,n);h.attachShader(y,l);void 0!==g.index0AttributeName?h.bindAttribLocation(y,0,g.index0AttributeName):!0===f.morphTargets&&h.bindAttribLocation(y,0,"position");h.linkProgram(y);f=h.getProgramInfoLog(y);p=h.getShaderInfoLog(n);m=h.getShaderInfoLog(l);
r=q=!0;if(!1===h.getProgramParameter(y,h.LINK_STATUS))q=!1,console.error("THREE.WebGLProgram: shader error: ",h.getError(),"gl.VALIDATE_STATUS",h.getProgramParameter(y,h.VALIDATE_STATUS),"gl.getProgramInfoLog",f,p,m);else if(""!==f)console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",f);else if(""===p||""===m)r=!1;r&&(this.diagnostics={runnable:q,material:g,programLog:f,vertexShader:{log:p,prefix:k},fragmentShader:{log:m,prefix:d}});h.deleteShader(n);h.deleteShader(l);var w;this.getUniforms=
function(){if(void 0===w){for(var a={},b=h.getProgramParameter(y,h.ACTIVE_UNIFORMS),c=0;c<b;c++){var d=h.getActiveUniform(y,c).name,e=h.getUniformLocation(y,d),f=d.lastIndexOf("[0]");-1!==f&&f===d.length-3&&(a[d.substr(0,f)]=e);a[d]=e}w=a}return w};var A;this.getAttributes=function(){if(void 0===A){for(var a={},b=h.getProgramParameter(y,h.ACTIVE_ATTRIBUTES),c=0;c<b;c++){var d=h.getActiveAttrib(y,c).name;a[d]=h.getAttribLocation(y,d)}A=a}return A};Object.defineProperties(this,{uniforms:{get:function(){console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms().");
return this.getUniforms()}},attributes:{get:function(){console.warn("THREE.WebGLProgram: .attributes is now .getAttributes().");return this.getAttributes()}}});this.id=c++;this.code=e;this.usedTimes=1;this.program=y;this.vertexShader=n;this.fragmentShader=l;return this}}();THREE.WebGLProperties=function(){var a={};this.get=function(b){b=b.uuid;var c=a[b];void 0===c&&(c={},a[b]=c);return c};this.delete=function(b){delete a[b.uuid]};this.clear=function(){a={}}};
THREE.WebGLShader=function(){var a=function(a){a=a.split("\n");for(var c=0;c<a.length;c++)a[c]=c+1+": "+a[c];return a.join("\n")};return function(b,c,d){var e=b.createShader(c);b.shaderSource(e,d);b.compileShader(e);!1===b.getShaderParameter(e,b.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile.");""!==b.getShaderInfoLog(e)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",c===b.VERTEX_SHADER?"vertex":"fragment",b.getShaderInfoLog(e),a(d));return e}}();
THREE.WebGLShadowMap=function(a,b,c){function d(a,b){if(!0===a.visible){var e=c.objects[a.id];e&&a.castShadow&&(!1===a.frustumCulled||!0===f.intersectsObject(a))&&(a._modelViewMatrix.multiplyMatrices(b.matrixWorldInverse,a.matrixWorld),n.push(e));for(var e=0,g=a.children.length;e<g;e++)d(a.children[e],b)}}var e=a.context,g=a.state,f=new THREE.Frustum,h=new THREE.Matrix4;new THREE.Vector3;new THREE.Vector3;var k=new THREE.Vector3,n=[],l=THREE.ShaderLib.depthRGBA,p=THREE.UniformsUtils.clone(l.uniforms),
m=new THREE.ShaderMaterial({uniforms:p,vertexShader:l.vertexShader,fragmentShader:l.fragmentShader}),q=new THREE.ShaderMaterial({uniforms:p,vertexShader:l.vertexShader,fragmentShader:l.fragmentShader,morphTargets:!0}),r=new THREE.ShaderMaterial({uniforms:p,vertexShader:l.vertexShader,fragmentShader:l.fragmentShader,skinning:!0}),t=new THREE.ShaderMaterial({uniforms:p,vertexShader:l.vertexShader,fragmentShader:l.fragmentShader,morphTargets:!0,skinning:!0});m._shadowPass=!0;q._shadowPass=!0;r._shadowPass=
!0;t._shadowPass=!0;var u=this;this.enabled=!1;this.autoUpdate=!0;this.needsUpdate=!1;this.type=THREE.PCFShadowMap;this.cullFace=THREE.CullFaceFront;this.render=function(c,l){if(!1!==u.enabled&&(!1!==u.autoUpdate||!1!==u.needsUpdate)){e.clearColor(1,1,1,1);g.disable(e.BLEND);g.enable(e.CULL_FACE);e.frontFace(e.CCW);u.cullFace===THREE.CullFaceFront?e.cullFace(e.FRONT):e.cullFace(e.BACK);g.setDepthTest(!0);for(var p=0,v=b.length;p<v;p++){var z=b[p];if(z.castShadow){if(!z.shadowMap){var C=THREE.LinearFilter;
u.type===THREE.PCFSoftShadowMap&&(C=THREE.NearestFilter);z.shadowMap=new THREE.WebGLRenderTarget(z.shadowMapWidth,z.shadowMapHeight,{minFilter:C,magFilter:C,format:THREE.RGBAFormat});z.shadowMapSize=new THREE.Vector2(z.shadowMapWidth,z.shadowMapHeight);z.shadowMatrix=new THREE.Matrix4}if(!z.shadowCamera){if(z instanceof THREE.SpotLight)z.shadowCamera=new THREE.PerspectiveCamera(z.shadowCameraFov,z.shadowMapWidth/z.shadowMapHeight,z.shadowCameraNear,z.shadowCameraFar);else if(z instanceof THREE.DirectionalLight)z.shadowCamera=
new THREE.OrthographicCamera(z.shadowCameraLeft,z.shadowCameraRight,z.shadowCameraTop,z.shadowCameraBottom,z.shadowCameraNear,z.shadowCameraFar);else{console.error("THREE.ShadowMapPlugin: Unsupported light type for shadow",z);continue}c.add(z.shadowCamera);!0===c.autoUpdate&&c.updateMatrixWorld()}z.shadowCameraVisible&&!z.cameraHelper&&(z.cameraHelper=new THREE.CameraHelper(z.shadowCamera),c.add(z.cameraHelper));var B=z.shadowMap,x=z.shadowMatrix,C=z.shadowCamera;C.position.setFromMatrixPosition(z.matrixWorld);
k.setFromMatrixPosition(z.target.matrixWorld);C.lookAt(k);C.updateMatrixWorld();C.matrixWorldInverse.getInverse(C.matrixWorld);z.cameraHelper&&(z.cameraHelper.visible=z.shadowCameraVisible);z.shadowCameraVisible&&z.cameraHelper.update();x.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1);x.multiply(C.projectionMatrix);x.multiply(C.matrixWorldInverse);h.multiplyMatrices(C.projectionMatrix,C.matrixWorldInverse);f.setFromMatrix(h);a.setRenderTarget(B);a.clear();n.length=0;d(c,C);for(var J,G,z=0,B=n.length;z<
B;z++)x=n[z],x=x.object,G=x.material instanceof THREE.MeshFaceMaterial?x.material.materials[0]:x.material,J=void 0!==x.geometry.morphTargets&&0<x.geometry.morphTargets.length&&G.morphTargets,G=x instanceof THREE.SkinnedMesh&&G.skinning,J=x.customDepthMaterial?x.customDepthMaterial:G?J?t:r:J?q:m,a.renderBufferDirect(C,b,null,J,x)}}p=a.getClearColor();v=a.getClearAlpha();e.clearColor(p.r,p.g,p.b,v);g.enable(e.BLEND);u.cullFace===THREE.CullFaceFront&&e.cullFace(e.BACK);a.resetGLState();u.needsUpdate=
!1}}};
THREE.WebGLState=function(a,b){var c=this,d=new Uint8Array(16),e=new Uint8Array(16),g={},f=null,h=null,k=null,n=null,l=null,p=null,m=null,q=null,r=null,t=null,u=null,y=null,w=null,A=null,v=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),z=void 0,C={};this.init=function(){a.clearColor(0,0,0,1);a.clearDepth(1);a.clearStencil(0);this.enable(a.DEPTH_TEST);a.depthFunc(a.LEQUAL);a.frontFace(a.CCW);a.cullFace(a.BACK);this.enable(a.CULL_FACE);this.enable(a.BLEND);a.blendEquation(a.FUNC_ADD);a.blendFunc(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA)};
this.initAttributes=function(){for(var a=0,b=d.length;a<b;a++)d[a]=0};this.enableAttribute=function(b){d[b]=1;0===e[b]&&(a.enableVertexAttribArray(b),e[b]=1)};this.disableUnusedAttributes=function(){for(var b=0,c=e.length;b<c;b++)e[b]!==d[b]&&(a.disableVertexAttribArray(b),e[b]=0)};this.enable=function(b){!0!==g[b]&&(a.enable(b),g[b]=!0)};this.disable=function(b){!1!==g[b]&&(a.disable(b),g[b]=!1)};this.setBlending=function(c,d,e,g,q,r,t){c!==f&&(c===THREE.NoBlending?this.disable(a.BLEND):c===THREE.AdditiveBlending?
(this.enable(a.BLEND),a.blendEquation(a.FUNC_ADD),a.blendFunc(a.SRC_ALPHA,a.ONE)):c===THREE.SubtractiveBlending?(this.enable(a.BLEND),a.blendEquation(a.FUNC_ADD),a.blendFunc(a.ZERO,a.ONE_MINUS_SRC_COLOR)):c===THREE.MultiplyBlending?(this.enable(a.BLEND),a.blendEquation(a.FUNC_ADD),a.blendFunc(a.ZERO,a.SRC_COLOR)):c===THREE.CustomBlending?this.enable(a.BLEND):(this.enable(a.BLEND),a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA)),
f=c);if(c===THREE.CustomBlending){q=q||d;r=r||e;t=t||g;if(d!==h||q!==l)a.blendEquationSeparate(b(d),b(q)),h=d,l=q;if(e!==k||g!==n||r!==p||t!==m)a.blendFuncSeparate(b(e),b(g),b(r),b(t)),k=e,n=g,p=r,m=t}else m=p=l=n=k=h=null};this.setDepthFunc=function(b){if(q!==b){if(b)switch(b){case THREE.NeverDepth:a.depthFunc(a.NEVER);break;case THREE.AlwaysDepth:a.depthFunc(a.ALWAYS);break;case THREE.LessDepth:a.depthFunc(a.LESS);break;case THREE.LessEqualDepth:a.depthFunc(a.LEQUAL);break;case THREE.EqualDepth:a.depthFunc(a.EQUAL);
break;case THREE.GreaterEqualDepth:a.depthFunc(a.GEQUAL);break;case THREE.GreaterDepth:a.depthFunc(a.GREATER);break;case THREE.NotEqualDepth:a.depthFunc(a.NOTEQUAL);break;default:a.depthFunc(a.LEQUAL)}else a.depthFunc(a.LEQUAL);q=b}};this.setDepthTest=function(b){b?this.enable(a.DEPTH_TEST):this.disable(a.DEPTH_TEST)};this.setDepthWrite=function(b){r!==b&&(a.depthMask(b),r=b)};this.setColorWrite=function(b){t!==b&&(a.colorMask(b,b,b,b),t=b)};this.setFlipSided=function(b){u!==b&&(b?a.frontFace(a.CW):
a.frontFace(a.CCW),u=b)};this.setLineWidth=function(b){b!==y&&(a.lineWidth(b),y=b)};this.setPolygonOffset=function(b,c,d){b?this.enable(a.POLYGON_OFFSET_FILL):this.disable(a.POLYGON_OFFSET_FILL);!b||w===c&&A===d||(a.polygonOffset(c,d),w=c,A=d)};this.setScissorTest=function(b){b?this.enable(a.SCISSOR_TEST):this.disable(a.SCISSOR_TEST)};this.activeTexture=function(b){void 0===b&&(b=a.TEXTURE0+v-1);z!==b&&(a.activeTexture(b),z=b)};this.bindTexture=function(b,d){void 0===z&&c.activeTexture();var e=C[z];
void 0===e&&(e={type:void 0,texture:void 0},C[z]=e);if(e.type!==b||e.texture!==d)a.bindTexture(b,d),e.type=b,e.texture=d};this.compressedTexImage2D=function(){try{a.compressedTexImage2D.apply(a,arguments)}catch(b){console.error(b)}};this.texImage2D=function(){try{a.texImage2D.apply(a,arguments)}catch(b){console.error(b)}};this.reset=function(){for(var b=0;b<e.length;b++)1===e[b]&&(a.disableVertexAttribArray(b),e[b]=0);g={};u=t=r=f=null}};
THREE.LensFlarePlugin=function(a,b){var c,d,e,g,f,h,k,n,l,p,m=a.context,q=a.state,r,t,u,y,w,A;this.render=function(v,z,C,B){if(0!==b.length){v=new THREE.Vector3;var x=B/C,J=.5*C,G=.5*B,F=16/B,O=new THREE.Vector2(F*x,F),D=new THREE.Vector3(1,1,0),K=new THREE.Vector2(1,1);if(void 0===u){var F=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),I=new Uint16Array([0,1,2,0,2,3]);r=m.createBuffer();t=m.createBuffer();m.bindBuffer(m.ARRAY_BUFFER,r);m.bufferData(m.ARRAY_BUFFER,F,m.STATIC_DRAW);m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,
t);m.bufferData(m.ELEMENT_ARRAY_BUFFER,I,m.STATIC_DRAW);w=m.createTexture();A=m.createTexture();q.bindTexture(m.TEXTURE_2D,w);m.texImage2D(m.TEXTURE_2D,0,m.RGB,16,16,0,m.RGB,m.UNSIGNED_BYTE,null);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.CLAMP_TO_EDGE);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.CLAMP_TO_EDGE);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.NEAREST);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.NEAREST);q.bindTexture(m.TEXTURE_2D,A);m.texImage2D(m.TEXTURE_2D,0,
m.RGBA,16,16,0,m.RGBA,m.UNSIGNED_BYTE,null);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.CLAMP_TO_EDGE);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.CLAMP_TO_EDGE);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.NEAREST);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.NEAREST);var F=(y=0<m.getParameter(m.MAX_VERTEX_TEXTURE_IMAGE_UNITS))?{vertexShader:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nuniform sampler2D occlusionMap;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif( renderType == 2 ) {\nvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\nvVisibility =        visibility.r / 9.0;\nvVisibility *= 1.0 - visibility.g / 9.0;\nvVisibility *=       visibility.b / 9.0;\nvVisibility *= 1.0 - visibility.a / 9.0;\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",
fragmentShader:"uniform lowp int renderType;\nuniform sampler2D map;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nif( renderType == 0 ) {\ngl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\n} else if( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * vVisibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"}:{vertexShader:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif( renderType == 2 ) {\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",
fragmentShader:"precision mediump float;\nuniform lowp int renderType;\nuniform sampler2D map;\nuniform sampler2D occlusionMap;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvoid main() {\nif( renderType == 0 ) {\ngl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );\n} else if( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nfloat visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;\nvisibility = ( 1.0 - visibility / 4.0 );\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * visibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"},
I=m.createProgram(),H=m.createShader(m.FRAGMENT_SHADER),N=m.createShader(m.VERTEX_SHADER),L="precision "+a.getPrecision()+" float;\n";m.shaderSource(H,L+F.fragmentShader);m.shaderSource(N,L+F.vertexShader);m.compileShader(H);m.compileShader(N);m.attachShader(I,H);m.attachShader(I,N);m.linkProgram(I);u=I;l=m.getAttribLocation(u,"position");p=m.getAttribLocation(u,"uv");c=m.getUniformLocation(u,"renderType");d=m.getUniformLocation(u,"map");e=m.getUniformLocation(u,"occlusionMap");g=m.getUniformLocation(u,
"opacity");f=m.getUniformLocation(u,"color");h=m.getUniformLocation(u,"scale");k=m.getUniformLocation(u,"rotation");n=m.getUniformLocation(u,"screenPosition")}m.useProgram(u);q.initAttributes();q.enableAttribute(l);q.enableAttribute(p);q.disableUnusedAttributes();m.uniform1i(e,0);m.uniform1i(d,1);m.bindBuffer(m.ARRAY_BUFFER,r);m.vertexAttribPointer(l,2,m.FLOAT,!1,16,0);m.vertexAttribPointer(p,2,m.FLOAT,!1,16,8);m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,t);q.disable(m.CULL_FACE);m.depthMask(!1);I=0;for(H=
b.length;I<H;I++)if(F=16/B,O.set(F*x,F),N=b[I],v.set(N.matrixWorld.elements[12],N.matrixWorld.elements[13],N.matrixWorld.elements[14]),v.applyMatrix4(z.matrixWorldInverse),v.applyProjection(z.projectionMatrix),D.copy(v),K.x=D.x*J+J,K.y=D.y*G+G,y||0<K.x&&K.x<C&&0<K.y&&K.y<B){q.activeTexture(m.TEXTURE0);q.bindTexture(m.TEXTURE_2D,null);q.activeTexture(m.TEXTURE1);q.bindTexture(m.TEXTURE_2D,w);m.copyTexImage2D(m.TEXTURE_2D,0,m.RGB,K.x-8,K.y-8,16,16,0);m.uniform1i(c,0);m.uniform2f(h,O.x,O.y);m.uniform3f(n,
D.x,D.y,D.z);q.disable(m.BLEND);q.enable(m.DEPTH_TEST);m.drawElements(m.TRIANGLES,6,m.UNSIGNED_SHORT,0);q.activeTexture(m.TEXTURE0);q.bindTexture(m.TEXTURE_2D,A);m.copyTexImage2D(m.TEXTURE_2D,0,m.RGBA,K.x-8,K.y-8,16,16,0);m.uniform1i(c,1);q.disable(m.DEPTH_TEST);q.activeTexture(m.TEXTURE1);q.bindTexture(m.TEXTURE_2D,w);m.drawElements(m.TRIANGLES,6,m.UNSIGNED_SHORT,0);N.positionScreen.copy(D);N.customUpdateCallback?N.customUpdateCallback(N):N.updateLensFlares();m.uniform1i(c,2);q.enable(m.BLEND);for(var L=
0,S=N.lensFlares.length;L<S;L++){var Q=N.lensFlares[L];.001<Q.opacity&&.001<Q.scale&&(D.x=Q.x,D.y=Q.y,D.z=Q.z,F=Q.size*Q.scale/B,O.x=F*x,O.y=F,m.uniform3f(n,D.x,D.y,D.z),m.uniform2f(h,O.x,O.y),m.uniform1f(k,Q.rotation),m.uniform1f(g,Q.opacity),m.uniform3f(f,Q.color.r,Q.color.g,Q.color.b),q.setBlending(Q.blending,Q.blendEquation,Q.blendSrc,Q.blendDst),a.setTexture(Q.texture,1),m.drawElements(m.TRIANGLES,6,m.UNSIGNED_SHORT,0))}}q.enable(m.CULL_FACE);q.enable(m.DEPTH_TEST);m.depthMask(!0);a.resetGLState()}}};
THREE.SpritePlugin=function(a,b){var c,d,e,g,f,h,k,n,l,p,m,q,r,t,u,y,w;function A(a,b){return a.z!==b.z?b.z-a.z:b.id-a.id}var v=a.context,z=a.state,C,B,x,J,G=new THREE.Vector3,F=new THREE.Quaternion,O=new THREE.Vector3;this.render=function(D,K){if(0!==b.length){if(void 0===x){var I=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),H=new Uint16Array([0,1,2,0,2,3]);C=v.createBuffer();B=v.createBuffer();v.bindBuffer(v.ARRAY_BUFFER,C);v.bufferData(v.ARRAY_BUFFER,I,v.STATIC_DRAW);v.bindBuffer(v.ELEMENT_ARRAY_BUFFER,
B);v.bufferData(v.ELEMENT_ARRAY_BUFFER,H,v.STATIC_DRAW);var I=v.createProgram(),H=v.createShader(v.VERTEX_SHADER),N=v.createShader(v.FRAGMENT_SHADER);v.shaderSource(H,["precision "+a.getPrecision()+" float;","uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 scale;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uvOffset + uv * uvScale;\nvec2 alignedPosition = position * scale;\nvec2 rotatedPosition;\nrotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\nrotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\nvec4 finalPosition;\nfinalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\nfinalPosition.xy += rotatedPosition;\nfinalPosition = projectionMatrix * finalPosition;\ngl_Position = finalPosition;\n}"].join("\n"));
v.shaderSource(N,["precision "+a.getPrecision()+" float;","uniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nuniform int fogType;\nuniform vec3 fogColor;\nuniform float fogDensity;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alphaTest;\nvarying vec2 vUV;\nvoid main() {\nvec4 texture = texture2D( map, vUV );\nif ( texture.a < alphaTest ) discard;\ngl_FragColor = vec4( color * texture.xyz, texture.a * opacity );\nif ( fogType > 0 ) {\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\nfloat fogFactor = 0.0;\nif ( fogType == 1 ) {\nfogFactor = smoothstep( fogNear, fogFar, depth );\n} else {\nconst float LOG2 = 1.442695;\nfogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n}\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}\n}"].join("\n"));
v.compileShader(H);v.compileShader(N);v.attachShader(I,H);v.attachShader(I,N);v.linkProgram(I);x=I;y=v.getAttribLocation(x,"position");w=v.getAttribLocation(x,"uv");c=v.getUniformLocation(x,"uvOffset");d=v.getUniformLocation(x,"uvScale");e=v.getUniformLocation(x,"rotation");g=v.getUniformLocation(x,"scale");f=v.getUniformLocation(x,"color");h=v.getUniformLocation(x,"map");k=v.getUniformLocation(x,"opacity");n=v.getUniformLocation(x,"modelViewMatrix");l=v.getUniformLocation(x,"projectionMatrix");p=
v.getUniformLocation(x,"fogType");m=v.getUniformLocation(x,"fogDensity");q=v.getUniformLocation(x,"fogNear");r=v.getUniformLocation(x,"fogFar");t=v.getUniformLocation(x,"fogColor");u=v.getUniformLocation(x,"alphaTest");I=document.createElement("canvas");I.width=8;I.height=8;H=I.getContext("2d");H.fillStyle="white";H.fillRect(0,0,8,8);J=new THREE.Texture(I);J.needsUpdate=!0}v.useProgram(x);z.initAttributes();z.enableAttribute(y);z.enableAttribute(w);z.disableUnusedAttributes();z.disable(v.CULL_FACE);
z.enable(v.BLEND);v.bindBuffer(v.ARRAY_BUFFER,C);v.vertexAttribPointer(y,2,v.FLOAT,!1,16,0);v.vertexAttribPointer(w,2,v.FLOAT,!1,16,8);v.bindBuffer(v.ELEMENT_ARRAY_BUFFER,B);v.uniformMatrix4fv(l,!1,K.projectionMatrix.elements);z.activeTexture(v.TEXTURE0);v.uniform1i(h,0);H=I=0;(N=D.fog)?(v.uniform3f(t,N.color.r,N.color.g,N.color.b),N instanceof THREE.Fog?(v.uniform1f(q,N.near),v.uniform1f(r,N.far),v.uniform1i(p,1),H=I=1):N instanceof THREE.FogExp2&&(v.uniform1f(m,N.density),v.uniform1i(p,2),H=I=2)):
(v.uniform1i(p,0),H=I=0);for(var N=0,L=b.length;N<L;N++){var S=b[N];S._modelViewMatrix.multiplyMatrices(K.matrixWorldInverse,S.matrixWorld);S.z=-S._modelViewMatrix.elements[14]}b.sort(A);for(var Q=[],N=0,L=b.length;N<L;N++){var S=b[N],R=S.material;v.uniform1f(u,R.alphaTest);v.uniformMatrix4fv(n,!1,S._modelViewMatrix.elements);S.matrixWorld.decompose(G,F,O);Q[0]=O.x;Q[1]=O.y;S=0;D.fog&&R.fog&&(S=H);I!==S&&(v.uniform1i(p,S),I=S);null!==R.map?(v.uniform2f(c,R.map.offset.x,R.map.offset.y),v.uniform2f(d,
R.map.repeat.x,R.map.repeat.y)):(v.uniform2f(c,0,0),v.uniform2f(d,1,1));v.uniform1f(k,R.opacity);v.uniform3f(f,R.color.r,R.color.g,R.color.b);v.uniform1f(e,R.rotation);v.uniform2fv(g,Q);z.setBlending(R.blending,R.blendEquation,R.blendSrc,R.blendDst);z.setDepthTest(R.depthTest);z.setDepthWrite(R.depthWrite);R.map&&R.map.image&&R.map.image.width?a.setTexture(R.map,0):a.setTexture(J,0);v.drawElements(v.TRIANGLES,6,v.UNSIGNED_SHORT,0)}z.enable(v.CULL_FACE);a.resetGLState()}}};
THREE.GeometryUtils={merge:function(a,b,c){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var d;b instanceof THREE.Mesh&&(b.matrixAutoUpdate&&b.updateMatrix(),d=b.matrix,b=b.geometry);a.merge(b,d,c)},center:function(a){console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.");return a.center()}};
THREE.ImageUtils={crossOrigin:void 0,loadTexture:function(a,b,c,d){var e=new THREE.ImageLoader;e.crossOrigin=this.crossOrigin;var g=new THREE.Texture(void 0,b);e.load(a,function(a){g.image=a;g.needsUpdate=!0;c&&c(g)},void 0,function(a){d&&d(a)});g.sourceFile=a;return g},loadTextureCube:function(a,b,c,d){var e=new THREE.ImageLoader;e.crossOrigin=this.crossOrigin;var g=new THREE.CubeTexture([],b),f=0;b=function(b){e.load(a[b],function(a){g.images[b]=a;f+=1;6===f&&(g.needsUpdate=!0,c&&c(g))},void 0,
d)};for(var h=0,k=a.length;h<k;++h)b(h);return g},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},getNormalMap:function(a,b){var c=function(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);return[a[0]/b,a[1]/b,a[2]/b]};b|=1;var d=a.width,e=a.height,g=document.createElement("canvas");
g.width=d;g.height=e;var f=g.getContext("2d");f.drawImage(a,0,0);for(var h=f.getImageData(0,0,d,e).data,k=f.createImageData(d,e),n=k.data,l=0;l<d;l++)for(var p=0;p<e;p++){var m=0>p-1?0:p-1,q=p+1>e-1?e-1:p+1,r=0>l-1?0:l-1,t=l+1>d-1?d-1:l+1,u=[],y=[0,0,h[4*(p*d+l)]/255*b];u.push([-1,0,h[4*(p*d+r)]/255*b]);u.push([-1,-1,h[4*(m*d+r)]/255*b]);u.push([0,-1,h[4*(m*d+l)]/255*b]);u.push([1,-1,h[4*(m*d+t)]/255*b]);u.push([1,0,h[4*(p*d+t)]/255*b]);u.push([1,1,h[4*(q*d+t)]/255*b]);u.push([0,1,h[4*(q*d+l)]/255*
b]);u.push([-1,1,h[4*(q*d+r)]/255*b]);m=[];r=u.length;for(q=0;q<r;q++){var t=u[q],w=u[(q+1)%r],t=[t[0]-y[0],t[1]-y[1],t[2]-y[2]],w=[w[0]-y[0],w[1]-y[1],w[2]-y[2]];m.push(c([t[1]*w[2]-t[2]*w[1],t[2]*w[0]-t[0]*w[2],t[0]*w[1]-t[1]*w[0]]))}u=[0,0,0];for(q=0;q<m.length;q++)u[0]+=m[q][0],u[1]+=m[q][1],u[2]+=m[q][2];u[0]/=m.length;u[1]/=m.length;u[2]/=m.length;y=4*(p*d+l);n[y]=(u[0]+1)/2*255|0;n[y+1]=(u[1]+1)/2*255|0;n[y+2]=255*u[2]|0;n[y+3]=255}f.putImageData(k,0,0);return g},generateDataTexture:function(a,
b,c){var d=a*b,e=new Uint8Array(3*d),g=Math.floor(255*c.r),f=Math.floor(255*c.g);c=Math.floor(255*c.b);for(var h=0;h<d;h++)e[3*h]=g,e[3*h+1]=f,e[3*h+2]=c;a=new THREE.DataTexture(e,a,b,THREE.RGBFormat);a.needsUpdate=!0;return a}};
THREE.SceneUtils={createMultiMaterialObject:function(a,b){for(var c=new THREE.Object3D,d=0,e=b.length;d<e;d++)c.add(new THREE.Mesh(a,b[d]));return c},detach:function(a,b,c){a.applyMatrix(b.matrixWorld);b.remove(a);c.add(a)},attach:function(a,b,c){var d=new THREE.Matrix4;d.getInverse(c.matrixWorld);a.applyMatrix(d);b.remove(a);c.add(a)}};
THREE.FontUtils={faces:{},face:"helvetiker",weight:"normal",style:"normal",size:150,divisions:10,getFace:function(){try{return this.faces[this.face.toLowerCase()][this.weight][this.style]}catch(a){throw"The font "+this.face+" with "+this.weight+" weight and "+this.style+" style is missing.";}},loadFace:function(a){var b=a.familyName.toLowerCase();this.faces[b]=this.faces[b]||{};this.faces[b][a.cssFontWeight]=this.faces[b][a.cssFontWeight]||{};this.faces[b][a.cssFontWeight][a.cssFontStyle]=a;return this.faces[b][a.cssFontWeight][a.cssFontStyle]=
a},drawText:function(a){var b=this.getFace(),c=this.size/b.resolution,d=0,e=String(a).split(""),g=e.length,f=[];for(a=0;a<g;a++){var h=new THREE.Path,h=this.extractGlyphPoints(e[a],b,c,d,h),d=d+h.offset;f.push(h.path)}return{paths:f,offset:d/2}},extractGlyphPoints:function(a,b,c,d,e){var g=[],f,h,k,n,l,p,m,q,r,t,u,y=b.glyphs[a]||b.glyphs["?"];if(y){if(y.o)for(b=y._cachedOutline||(y._cachedOutline=y.o.split(" ")),n=b.length,a=0;a<n;)switch(k=b[a++],k){case "m":k=b[a++]*c+d;l=b[a++]*c;e.moveTo(k,l);
break;case "l":k=b[a++]*c+d;l=b[a++]*c;e.lineTo(k,l);break;case "q":k=b[a++]*c+d;l=b[a++]*c;q=b[a++]*c+d;r=b[a++]*c;e.quadraticCurveTo(q,r,k,l);if(f=g[g.length-1])for(p=f.x,m=f.y,f=1,h=this.divisions;f<=h;f++){var w=f/h;THREE.Shape.Utils.b2(w,p,q,k);THREE.Shape.Utils.b2(w,m,r,l)}break;case "b":if(k=b[a++]*c+d,l=b[a++]*c,q=b[a++]*c+d,r=b[a++]*c,t=b[a++]*c+d,u=b[a++]*c,e.bezierCurveTo(q,r,t,u,k,l),f=g[g.length-1])for(p=f.x,m=f.y,f=1,h=this.divisions;f<=h;f++)w=f/h,THREE.Shape.Utils.b3(w,p,q,t,k),THREE.Shape.Utils.b3(w,
m,r,u,l)}return{offset:y.ha*c,path:e}}}};
THREE.FontUtils.generateShapes=function(a,b){b=b||{};var c=void 0!==b.curveSegments?b.curveSegments:4,d=void 0!==b.font?b.font:"helvetiker",e=void 0!==b.weight?b.weight:"normal",g=void 0!==b.style?b.style:"normal";THREE.FontUtils.size=void 0!==b.size?b.size:100;THREE.FontUtils.divisions=c;THREE.FontUtils.face=d;THREE.FontUtils.weight=e;THREE.FontUtils.style=g;c=THREE.FontUtils.drawText(a).paths;d=[];e=0;for(g=c.length;e<g;e++)Array.prototype.push.apply(d,c[e].toShapes());return d};
(function(a){var b=function(a){for(var b=a.length,e=0,g=b-1,f=0;f<b;g=f++)e+=a[g].x*a[f].y-a[f].x*a[g].y;return.5*e};a.Triangulate=function(a,d){var e=a.length;if(3>e)return null;var g=[],f=[],h=[],k,n,l;if(0<b(a))for(n=0;n<e;n++)f[n]=n;else for(n=0;n<e;n++)f[n]=e-1-n;var p=2*e;for(n=e-1;2<e;){if(0>=p--){console.warn("THREE.FontUtils: Warning, unable to triangulate polygon! in Triangulate.process()");break}k=n;e<=k&&(k=0);n=k+1;e<=n&&(n=0);l=n+1;e<=l&&(l=0);var m;a:{var q=m=void 0,r=void 0,t=void 0,
u=void 0,y=void 0,w=void 0,A=void 0,v=void 0,q=a[f[k]].x,r=a[f[k]].y,t=a[f[n]].x,u=a[f[n]].y,y=a[f[l]].x,w=a[f[l]].y;if(1E-10>(t-q)*(w-r)-(u-r)*(y-q))m=!1;else{var z=void 0,C=void 0,B=void 0,x=void 0,J=void 0,G=void 0,F=void 0,O=void 0,D=void 0,K=void 0,D=O=F=v=A=void 0,z=y-t,C=w-u,B=q-y,x=r-w,J=t-q,G=u-r;for(m=0;m<e;m++)if(A=a[f[m]].x,v=a[f[m]].y,!(A===q&&v===r||A===t&&v===u||A===y&&v===w)&&(F=A-q,O=v-r,D=A-t,K=v-u,A-=y,v-=w,D=z*K-C*D,F=J*O-G*F,O=B*v-x*A,-1E-10<=D&&-1E-10<=O&&-1E-10<=F)){m=!1;break a}m=
!0}}if(m){g.push([a[f[k]],a[f[n]],a[f[l]]]);h.push([f[k],f[n],f[l]]);k=n;for(l=n+1;l<e;k++,l++)f[k]=f[l];e--;p=2*e}}return d?h:g};a.Triangulate.area=b;return a})(THREE.FontUtils);THREE.typeface_js={faces:THREE.FontUtils.faces,loadFace:THREE.FontUtils.loadFace};"undefined"!==typeof self&&(self._typeface_js=THREE.typeface_js);
THREE.Audio=function(a){THREE.Object3D.call(this);this.type="Audio";this.context=a.context;this.source=this.context.createBufferSource();this.source.onended=this.onEnded.bind(this);this.gain=this.context.createGain();this.gain.connect(this.context.destination);this.panner=this.context.createPanner();this.panner.connect(this.gain);this.autoplay=!1;this.startTime=0;this.playbackRate=1;this.isPlaying=!1};THREE.Audio.prototype=Object.create(THREE.Object3D.prototype);
THREE.Audio.prototype.constructor=THREE.Audio;THREE.Audio.prototype.load=function(a){var b=this,c=new XMLHttpRequest;c.open("GET",a,!0);c.responseType="arraybuffer";c.onload=function(a){b.context.decodeAudioData(this.response,function(a){b.source.buffer=a;b.autoplay&&b.play()})};c.send();return this};
THREE.Audio.prototype.play=function(){if(!0===this.isPlaying)console.warn("THREE.Audio: Audio is already playing.");else{var a=this.context.createBufferSource();a.buffer=this.source.buffer;a.loop=this.source.loop;a.onended=this.source.onended;a.start(0,this.startTime);a.playbackRate.value=this.playbackRate;this.isPlaying=!0;this.source=a;this.connect()}};THREE.Audio.prototype.pause=function(){this.source.stop();this.startTime=this.context.currentTime};
THREE.Audio.prototype.stop=function(){this.source.stop();this.startTime=0};THREE.Audio.prototype.connect=function(){void 0!==this.filter?(this.source.connect(this.filter),this.filter.connect(this.panner)):this.source.connect(this.panner)};THREE.Audio.prototype.disconnect=function(){void 0!==this.filter?(this.source.disconnect(this.filter),this.filter.disconnect(this.panner)):this.source.disconnect(this.panner)};
THREE.Audio.prototype.setFilter=function(a){!0===this.isPlaying?(this.disconnect(),this.filter=a,this.connect()):this.filter=a};THREE.Audio.prototype.getFilter=function(){return this.filter};THREE.Audio.prototype.setPlaybackRate=function(a){this.playbackRate=a;!0===this.isPlaying&&(this.source.playbackRate.value=this.playbackRate)};THREE.Audio.prototype.getPlaybackRate=function(){return this.playbackRate};THREE.Audio.prototype.onEnded=function(){this.isPlaying=!1};
THREE.Audio.prototype.setLoop=function(a){this.source.loop=a};THREE.Audio.prototype.getLoop=function(){return this.source.loop};THREE.Audio.prototype.setRefDistance=function(a){this.panner.refDistance=a};THREE.Audio.prototype.getRefDistance=function(){return this.panner.refDistance};THREE.Audio.prototype.setRolloffFactor=function(a){this.panner.rolloffFactor=a};THREE.Audio.prototype.getRolloffFactor=function(){return this.panner.rolloffFactor};
THREE.Audio.prototype.setVolume=function(a){this.gain.gain.value=a};THREE.Audio.prototype.getVolume=function(){return this.gain.gain.value};THREE.Audio.prototype.updateMatrixWorld=function(){var a=new THREE.Vector3;return function(b){THREE.Object3D.prototype.updateMatrixWorld.call(this,b);a.setFromMatrixPosition(this.matrixWorld);this.panner.setPosition(a.x,a.y,a.z)}}();THREE.AudioListener=function(){THREE.Object3D.call(this);this.type="AudioListener";this.context=new (window.AudioContext||window.webkitAudioContext)};
THREE.AudioListener.prototype=Object.create(THREE.Object3D.prototype);THREE.AudioListener.prototype.constructor=THREE.AudioListener;
THREE.AudioListener.prototype.updateMatrixWorld=function(){var a=new THREE.Vector3,b=new THREE.Quaternion,c=new THREE.Vector3,d=new THREE.Vector3;return function(e){THREE.Object3D.prototype.updateMatrixWorld.call(this,e);e=this.context.listener;var g=this.up;this.matrixWorld.decompose(a,b,c);d.set(0,0,-1).applyQuaternion(b);e.setPosition(a.x,a.y,a.z);e.setOrientation(d.x,d.y,d.z,g.x,g.y,g.z)}}();THREE.Curve=function(){};
THREE.Curve.prototype.getPoint=function(a){console.warn("THREE.Curve: Warning, getPoint() not implemented!");return null};THREE.Curve.prototype.getPointAt=function(a){a=this.getUtoTmapping(a);return this.getPoint(a)};THREE.Curve.prototype.getPoints=function(a){a||(a=5);var b,c=[];for(b=0;b<=a;b++)c.push(this.getPoint(b/a));return c};THREE.Curve.prototype.getSpacedPoints=function(a){a||(a=5);var b,c=[];for(b=0;b<=a;b++)c.push(this.getPointAt(b/a));return c};
THREE.Curve.prototype.getLength=function(){var a=this.getLengths();return a[a.length-1]};THREE.Curve.prototype.getLengths=function(a){a||(a=this.__arcLengthDivisions?this.__arcLengthDivisions:200);if(this.cacheArcLengths&&this.cacheArcLengths.length===a+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var b=[],c,d=this.getPoint(0),e,g=0;b.push(0);for(e=1;e<=a;e++)c=this.getPoint(e/a),g+=c.distanceTo(d),b.push(g),d=c;return this.cacheArcLengths=b};
THREE.Curve.prototype.updateArcLengths=function(){this.needsUpdate=!0;this.getLengths()};THREE.Curve.prototype.getUtoTmapping=function(a,b){var c=this.getLengths(),d=0,e=c.length,g;g=b?b:a*c[e-1];for(var f=0,h=e-1,k;f<=h;)if(d=Math.floor(f+(h-f)/2),k=c[d]-g,0>k)f=d+1;else if(0<k)h=d-1;else{h=d;break}d=h;if(c[d]===g)return d/(e-1);f=c[d];return c=(d+(g-f)/(c[d+1]-f))/(e-1)};THREE.Curve.prototype.getTangent=function(a){var b=a-1E-4;a+=1E-4;0>b&&(b=0);1<a&&(a=1);b=this.getPoint(b);return this.getPoint(a).clone().sub(b).normalize()};
THREE.Curve.prototype.getTangentAt=function(a){a=this.getUtoTmapping(a);return this.getTangent(a)};
THREE.Curve.Utils={tangentQuadraticBezier:function(a,b,c,d){return 2*(1-a)*(c-b)+2*a*(d-c)},tangentCubicBezier:function(a,b,c,d,e){return-3*b*(1-a)*(1-a)+3*c*(1-a)*(1-a)-6*a*c*(1-a)+6*a*d*(1-a)-3*a*a*d+3*a*a*e},tangentSpline:function(a,b,c,d,e){return 6*a*a-6*a+(3*a*a-4*a+1)+(-6*a*a+6*a)+(3*a*a-2*a)},interpolate:function(a,b,c,d,e){a=.5*(c-a);d=.5*(d-b);var g=e*e;return(2*b-2*c+a+d)*e*g+(-3*b+3*c-2*a-d)*g+a*e+b}};
THREE.Curve.create=function(a,b){a.prototype=Object.create(THREE.Curve.prototype);a.prototype.constructor=a;a.prototype.getPoint=b;return a};THREE.CurvePath=function(){this.curves=[];this.bends=[];this.autoClose=!1};THREE.CurvePath.prototype=Object.create(THREE.Curve.prototype);THREE.CurvePath.prototype.constructor=THREE.CurvePath;THREE.CurvePath.prototype.add=function(a){this.curves.push(a)};THREE.CurvePath.prototype.checkConnection=function(){};
THREE.CurvePath.prototype.closePath=function(){var a=this.curves[0].getPoint(0),b=this.curves[this.curves.length-1].getPoint(1);a.equals(b)||this.curves.push(new THREE.LineCurve(b,a))};THREE.CurvePath.prototype.getPoint=function(a){var b=a*this.getLength(),c=this.getCurveLengths();for(a=0;a<c.length;){if(c[a]>=b)return b=c[a]-b,a=this.curves[a],b=1-b/a.getLength(),a.getPointAt(b);a++}return null};THREE.CurvePath.prototype.getLength=function(){var a=this.getCurveLengths();return a[a.length-1]};
THREE.CurvePath.prototype.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;var a=[],b=0,c,d=this.curves.length;for(c=0;c<d;c++)b+=this.curves[c].getLength(),a.push(b);return this.cacheLengths=a};
THREE.CurvePath.prototype.getBoundingBox=function(){var a=this.getPoints(),b,c,d,e,g,f;b=c=Number.NEGATIVE_INFINITY;e=g=Number.POSITIVE_INFINITY;var h,k,n,l,p=a[0]instanceof THREE.Vector3;l=p?new THREE.Vector3:new THREE.Vector2;k=0;for(n=a.length;k<n;k++)h=a[k],h.x>b?b=h.x:h.x<e&&(e=h.x),h.y>c?c=h.y:h.y<g&&(g=h.y),p&&(h.z>d?d=h.z:h.z<f&&(f=h.z)),l.add(h);a={minX:e,minY:g,maxX:b,maxY:c};p&&(a.maxZ=d,a.minZ=f);return a};
THREE.CurvePath.prototype.createPointsGeometry=function(a){a=this.getPoints(a,!0);return this.createGeometry(a)};THREE.CurvePath.prototype.createSpacedPointsGeometry=function(a){a=this.getSpacedPoints(a,!0);return this.createGeometry(a)};THREE.CurvePath.prototype.createGeometry=function(a){for(var b=new THREE.Geometry,c=0;c<a.length;c++)b.vertices.push(new THREE.Vector3(a[c].x,a[c].y,a[c].z||0));return b};THREE.CurvePath.prototype.addWrapPath=function(a){this.bends.push(a)};
THREE.CurvePath.prototype.getTransformedPoints=function(a,b){var c=this.getPoints(a),d,e;b||(b=this.bends);d=0;for(e=b.length;d<e;d++)c=this.getWrapPoints(c,b[d]);return c};THREE.CurvePath.prototype.getTransformedSpacedPoints=function(a,b){var c=this.getSpacedPoints(a),d,e;b||(b=this.bends);d=0;for(e=b.length;d<e;d++)c=this.getWrapPoints(c,b[d]);return c};
THREE.CurvePath.prototype.getWrapPoints=function(a,b){var c=this.getBoundingBox(),d,e,g,f,h,k;d=0;for(e=a.length;d<e;d++)g=a[d],f=g.x,h=g.y,k=f/c.maxX,k=b.getUtoTmapping(k,f),f=b.getPoint(k),k=b.getTangent(k),k.set(-k.y,k.x).multiplyScalar(h),g.x=f.x+k.x,g.y=f.y+k.y;return a};THREE.Path=function(a){THREE.CurvePath.call(this);this.actions=[];a&&this.fromPoints(a)};THREE.Path.prototype=Object.create(THREE.CurvePath.prototype);THREE.Path.prototype.constructor=THREE.Path;
THREE.PathActions={MOVE_TO:"moveTo",LINE_TO:"lineTo",QUADRATIC_CURVE_TO:"quadraticCurveTo",BEZIER_CURVE_TO:"bezierCurveTo",CSPLINE_THRU:"splineThru",ARC:"arc",ELLIPSE:"ellipse"};THREE.Path.prototype.fromPoints=function(a){this.moveTo(a[0].x,a[0].y);for(var b=1,c=a.length;b<c;b++)this.lineTo(a[b].x,a[b].y)};THREE.Path.prototype.moveTo=function(a,b){var c=Array.prototype.slice.call(arguments);this.actions.push({action:THREE.PathActions.MOVE_TO,args:c})};
THREE.Path.prototype.lineTo=function(a,b){var c=Array.prototype.slice.call(arguments),d=this.actions[this.actions.length-1].args,d=new THREE.LineCurve(new THREE.Vector2(d[d.length-2],d[d.length-1]),new THREE.Vector2(a,b));this.curves.push(d);this.actions.push({action:THREE.PathActions.LINE_TO,args:c})};
THREE.Path.prototype.quadraticCurveTo=function(a,b,c,d){var e=Array.prototype.slice.call(arguments),g=this.actions[this.actions.length-1].args,g=new THREE.QuadraticBezierCurve(new THREE.Vector2(g[g.length-2],g[g.length-1]),new THREE.Vector2(a,b),new THREE.Vector2(c,d));this.curves.push(g);this.actions.push({action:THREE.PathActions.QUADRATIC_CURVE_TO,args:e})};
THREE.Path.prototype.bezierCurveTo=function(a,b,c,d,e,g){var f=Array.prototype.slice.call(arguments),h=this.actions[this.actions.length-1].args,h=new THREE.CubicBezierCurve(new THREE.Vector2(h[h.length-2],h[h.length-1]),new THREE.Vector2(a,b),new THREE.Vector2(c,d),new THREE.Vector2(e,g));this.curves.push(h);this.actions.push({action:THREE.PathActions.BEZIER_CURVE_TO,args:f})};
THREE.Path.prototype.splineThru=function(a){var b=Array.prototype.slice.call(arguments),c=this.actions[this.actions.length-1].args,c=[new THREE.Vector2(c[c.length-2],c[c.length-1])];Array.prototype.push.apply(c,a);c=new THREE.SplineCurve(c);this.curves.push(c);this.actions.push({action:THREE.PathActions.CSPLINE_THRU,args:b})};THREE.Path.prototype.arc=function(a,b,c,d,e,g){var f=this.actions[this.actions.length-1].args;this.absarc(a+f[f.length-2],b+f[f.length-1],c,d,e,g)};
THREE.Path.prototype.absarc=function(a,b,c,d,e,g){this.absellipse(a,b,c,c,d,e,g)};THREE.Path.prototype.ellipse=function(a,b,c,d,e,g,f){var h=this.actions[this.actions.length-1].args;this.absellipse(a+h[h.length-2],b+h[h.length-1],c,d,e,g,f)};THREE.Path.prototype.absellipse=function(a,b,c,d,e,g,f){var h=Array.prototype.slice.call(arguments),k=new THREE.EllipseCurve(a,b,c,d,e,g,f);this.curves.push(k);k=k.getPoint(1);h.push(k.x);h.push(k.y);this.actions.push({action:THREE.PathActions.ELLIPSE,args:h})};
THREE.Path.prototype.getSpacedPoints=function(a,b){a||(a=40);for(var c=[],d=0;d<a;d++)c.push(this.getPoint(d/a));return c};
THREE.Path.prototype.getPoints=function(a,b){if(this.useSpacedPoints)return this.getSpacedPoints(a,b);a=a||12;var c=[],d,e,g,f,h,k,n,l,p,m,q,r,t;d=0;for(e=this.actions.length;d<e;d++)switch(g=this.actions[d],f=g.action,g=g.args,f){case THREE.PathActions.MOVE_TO:c.push(new THREE.Vector2(g[0],g[1]));break;case THREE.PathActions.LINE_TO:c.push(new THREE.Vector2(g[0],g[1]));break;case THREE.PathActions.QUADRATIC_CURVE_TO:h=g[2];k=g[3];p=g[0];m=g[1];0<c.length?(f=c[c.length-1],q=f.x,r=f.y):(f=this.actions[d-
1].args,q=f[f.length-2],r=f[f.length-1]);for(g=1;g<=a;g++)t=g/a,f=THREE.Shape.Utils.b2(t,q,p,h),t=THREE.Shape.Utils.b2(t,r,m,k),c.push(new THREE.Vector2(f,t));break;case THREE.PathActions.BEZIER_CURVE_TO:h=g[4];k=g[5];p=g[0];m=g[1];n=g[2];l=g[3];0<c.length?(f=c[c.length-1],q=f.x,r=f.y):(f=this.actions[d-1].args,q=f[f.length-2],r=f[f.length-1]);for(g=1;g<=a;g++)t=g/a,f=THREE.Shape.Utils.b3(t,q,p,n,h),t=THREE.Shape.Utils.b3(t,r,m,l,k),c.push(new THREE.Vector2(f,t));break;case THREE.PathActions.CSPLINE_THRU:f=
this.actions[d-1].args;t=[new THREE.Vector2(f[f.length-2],f[f.length-1])];f=a*g[0].length;t=t.concat(g[0]);t=new THREE.SplineCurve(t);for(g=1;g<=f;g++)c.push(t.getPointAt(g/f));break;case THREE.PathActions.ARC:h=g[0];k=g[1];m=g[2];n=g[3];f=g[4];p=!!g[5];q=f-n;r=2*a;for(g=1;g<=r;g++)t=g/r,p||(t=1-t),t=n+t*q,f=h+m*Math.cos(t),t=k+m*Math.sin(t),c.push(new THREE.Vector2(f,t));break;case THREE.PathActions.ELLIPSE:for(h=g[0],k=g[1],m=g[2],l=g[3],n=g[4],f=g[5],p=!!g[6],q=f-n,r=2*a,g=1;g<=r;g++)t=g/r,p||
(t=1-t),t=n+t*q,f=h+m*Math.cos(t),t=k+l*Math.sin(t),c.push(new THREE.Vector2(f,t))}d=c[c.length-1];1E-10>Math.abs(d.x-c[0].x)&&1E-10>Math.abs(d.y-c[0].y)&&c.splice(c.length-1,1);b&&c.push(c[0]);return c};
THREE.Path.prototype.toShapes=function(a,b){function c(a){for(var b=[],c=0,d=a.length;c<d;c++){var e=a[c],f=new THREE.Shape;f.actions=e.actions;f.curves=e.curves;b.push(f)}return b}function d(a,b){for(var c=b.length,d=!1,e=c-1,f=0;f<c;e=f++){var g=b[e],h=b[f],k=h.x-g.x,l=h.y-g.y;if(1E-10<Math.abs(l)){if(0>l&&(g=b[f],k=-k,h=b[e],l=-l),!(a.y<g.y||a.y>h.y))if(a.y===g.y){if(a.x===g.x)return!0}else{e=l*(a.x-g.x)-k*(a.y-g.y);if(0===e)return!0;0>e||(d=!d)}}else if(a.y===g.y&&(h.x<=a.x&&a.x<=g.x||g.x<=a.x&&
a.x<=h.x))return!0}return d}var e=function(a){var b,c,d,e,f=[],g=new THREE.Path;b=0;for(c=a.length;b<c;b++)d=a[b],e=d.args,d=d.action,d===THREE.PathActions.MOVE_TO&&0!==g.actions.length&&(f.push(g),g=new THREE.Path),g[d].apply(g,e);0!==g.actions.length&&f.push(g);return f}(this.actions);if(0===e.length)return[];if(!0===b)return c(e);var g,f,h,k=[];if(1===e.length)return f=e[0],h=new THREE.Shape,h.actions=f.actions,h.curves=f.curves,k.push(h),k;var n=!THREE.Shape.Utils.isClockWise(e[0].getPoints()),
n=a?!n:n;h=[];var l=[],p=[],m=0,q;l[m]=void 0;p[m]=[];var r,t;r=0;for(t=e.length;r<t;r++)f=e[r],q=f.getPoints(),g=THREE.Shape.Utils.isClockWise(q),(g=a?!g:g)?(!n&&l[m]&&m++,l[m]={s:new THREE.Shape,p:q},l[m].s.actions=f.actions,l[m].s.curves=f.curves,n&&m++,p[m]=[]):p[m].push({h:f,p:q[0]});if(!l[0])return c(e);if(1<l.length){r=!1;t=[];f=0;for(e=l.length;f<e;f++)h[f]=[];f=0;for(e=l.length;f<e;f++)for(g=p[f],n=0;n<g.length;n++){m=g[n];q=!0;for(var u=0;u<l.length;u++)d(m.p,l[u].p)&&(f!==u&&t.push({froms:f,
tos:u,hole:n}),q?(q=!1,h[u].push(m)):r=!0);q&&h[f].push(m)}0<t.length&&(r||(p=h))}r=0;for(t=l.length;r<t;r++)for(h=l[r].s,k.push(h),f=p[r],e=0,g=f.length;e<g;e++)h.holes.push(f[e].h);return k};THREE.Shape=function(){THREE.Path.apply(this,arguments);this.holes=[]};THREE.Shape.prototype=Object.create(THREE.Path.prototype);THREE.Shape.prototype.constructor=THREE.Shape;THREE.Shape.prototype.extrude=function(a){return new THREE.ExtrudeGeometry(this,a)};
THREE.Shape.prototype.makeGeometry=function(a){return new THREE.ShapeGeometry(this,a)};THREE.Shape.prototype.getPointsHoles=function(a){var b,c=this.holes.length,d=[];for(b=0;b<c;b++)d[b]=this.holes[b].getTransformedPoints(a,this.bends);return d};THREE.Shape.prototype.getSpacedPointsHoles=function(a){var b,c=this.holes.length,d=[];for(b=0;b<c;b++)d[b]=this.holes[b].getTransformedSpacedPoints(a,this.bends);return d};
THREE.Shape.prototype.extractAllPoints=function(a){return{shape:this.getTransformedPoints(a),holes:this.getPointsHoles(a)}};THREE.Shape.prototype.extractPoints=function(a){return this.useSpacedPoints?this.extractAllSpacedPoints(a):this.extractAllPoints(a)};THREE.Shape.prototype.extractAllSpacedPoints=function(a){return{shape:this.getTransformedSpacedPoints(a),holes:this.getSpacedPointsHoles(a)}};
THREE.Shape.Utils={triangulateShape:function(a,b){function c(a,b,c){return a.x!==b.x?a.x<b.x?a.x<=c.x&&c.x<=b.x:b.x<=c.x&&c.x<=a.x:a.y<b.y?a.y<=c.y&&c.y<=b.y:b.y<=c.y&&c.y<=a.y}function d(a,b,d,e,f){var g=b.x-a.x,h=b.y-a.y,k=e.x-d.x,l=e.y-d.y,n=a.x-d.x,p=a.y-d.y,B=h*k-g*l,x=h*n-g*p;if(1E-10<Math.abs(B)){if(0<B){if(0>x||x>B)return[];k=l*n-k*p;if(0>k||k>B)return[]}else{if(0<x||x<B)return[];k=l*n-k*p;if(0<k||k<B)return[]}if(0===k)return!f||0!==x&&x!==B?[a]:[];if(k===B)return!f||0!==x&&x!==B?[b]:[];if(0===
x)return[d];if(x===B)return[e];f=k/B;return[{x:a.x+f*g,y:a.y+f*h}]}if(0!==x||l*n!==k*p)return[];h=0===g&&0===h;k=0===k&&0===l;if(h&&k)return a.x!==d.x||a.y!==d.y?[]:[a];if(h)return c(d,e,a)?[a]:[];if(k)return c(a,b,d)?[d]:[];0!==g?(a.x<b.x?(g=a,k=a.x,h=b,a=b.x):(g=b,k=b.x,h=a,a=a.x),d.x<e.x?(b=d,B=d.x,l=e,d=e.x):(b=e,B=e.x,l=d,d=d.x)):(a.y<b.y?(g=a,k=a.y,h=b,a=b.y):(g=b,k=b.y,h=a,a=a.y),d.y<e.y?(b=d,B=d.y,l=e,d=e.y):(b=e,B=e.y,l=d,d=d.y));return k<=B?a<B?[]:a===B?f?[]:[b]:a<=d?[b,h]:[b,l]:k>d?[]:
k===d?f?[]:[g]:a<=d?[g,h]:[g,l]}function e(a,b,c,d){var e=b.x-a.x,f=b.y-a.y;b=c.x-a.x;c=c.y-a.y;var g=d.x-a.x;d=d.y-a.y;a=e*c-f*b;e=e*d-f*g;return 1E-10<Math.abs(a)?(b=g*c-d*b,0<a?0<=e&&0<=b:0<=e||0<=b):0<e}var g,f,h,k,n,l={};h=a.concat();g=0;for(f=b.length;g<f;g++)Array.prototype.push.apply(h,b[g]);g=0;for(f=h.length;g<f;g++)n=h[g].x+":"+h[g].y,void 0!==l[n]&&console.warn("THREE.Shape: Duplicate point",n),l[n]=g;g=function(a,b){function c(a,b){var d=h.length-1,f=a-1;0>f&&(f=d);var g=a+1;g>d&&(g=
0);d=e(h[a],h[f],h[g],k[b]);if(!d)return!1;d=k.length-1;f=b-1;0>f&&(f=d);g=b+1;g>d&&(g=0);return(d=e(k[b],k[f],k[g],h[a]))?!0:!1}function f(a,b){var c,e;for(c=0;c<h.length;c++)if(e=c+1,e%=h.length,e=d(a,b,h[c],h[e],!0),0<e.length)return!0;return!1}function g(a,c){var e,f,h,k;for(e=0;e<l.length;e++)for(f=b[l[e]],h=0;h<f.length;h++)if(k=h+1,k%=f.length,k=d(a,c,f[h],f[k],!0),0<k.length)return!0;return!1}var h=a.concat(),k,l=[],n,p,C,B,x,J=[],G,F,O,D=0;for(n=b.length;D<n;D++)l.push(D);G=0;for(var K=2*
l.length;0<l.length;){K--;if(0>K){console.log("Infinite Loop! Holes left:"+l.length+", Probably Hole outside Shape!");break}for(p=G;p<h.length;p++){C=h[p];n=-1;for(D=0;D<l.length;D++)if(B=l[D],x=C.x+":"+C.y+":"+B,void 0===J[x]){k=b[B];for(F=0;F<k.length;F++)if(B=k[F],c(p,F)&&!f(C,B)&&!g(C,B)){n=F;l.splice(D,1);G=h.slice(0,p+1);B=h.slice(p);F=k.slice(n);O=k.slice(0,n+1);h=G.concat(F).concat(O).concat(B);G=p;break}if(0<=n)break;J[x]=!0}if(0<=n)break}}return h}(a,b);var p=THREE.FontUtils.Triangulate(g,
!1);g=0;for(f=p.length;g<f;g++)for(k=p[g],h=0;3>h;h++)n=k[h].x+":"+k[h].y,n=l[n],void 0!==n&&(k[h]=n);return p.concat()},isClockWise:function(a){return 0>THREE.FontUtils.Triangulate.area(a)},b2p0:function(a,b){var c=1-a;return c*c*b},b2p1:function(a,b){return 2*(1-a)*a*b},b2p2:function(a,b){return a*a*b},b2:function(a,b,c,d){return this.b2p0(a,b)+this.b2p1(a,c)+this.b2p2(a,d)},b3p0:function(a,b){var c=1-a;return c*c*c*b},b3p1:function(a,b){var c=1-a;return 3*c*c*a*b},b3p2:function(a,b){return 3*(1-
a)*a*a*b},b3p3:function(a,b){return a*a*a*b},b3:function(a,b,c,d,e){return this.b3p0(a,b)+this.b3p1(a,c)+this.b3p2(a,d)+this.b3p3(a,e)}};THREE.LineCurve=function(a,b){this.v1=a;this.v2=b};THREE.LineCurve.prototype=Object.create(THREE.Curve.prototype);THREE.LineCurve.prototype.constructor=THREE.LineCurve;THREE.LineCurve.prototype.getPoint=function(a){var b=this.v2.clone().sub(this.v1);b.multiplyScalar(a).add(this.v1);return b};THREE.LineCurve.prototype.getPointAt=function(a){return this.getPoint(a)};
THREE.LineCurve.prototype.getTangent=function(a){return this.v2.clone().sub(this.v1).normalize()};THREE.QuadraticBezierCurve=function(a,b,c){this.v0=a;this.v1=b;this.v2=c};THREE.QuadraticBezierCurve.prototype=Object.create(THREE.Curve.prototype);THREE.QuadraticBezierCurve.prototype.constructor=THREE.QuadraticBezierCurve;
THREE.QuadraticBezierCurve.prototype.getPoint=function(a){var b=new THREE.Vector2;b.x=THREE.Shape.Utils.b2(a,this.v0.x,this.v1.x,this.v2.x);b.y=THREE.Shape.Utils.b2(a,this.v0.y,this.v1.y,this.v2.y);return b};THREE.QuadraticBezierCurve.prototype.getTangent=function(a){var b=new THREE.Vector2;b.x=THREE.Curve.Utils.tangentQuadraticBezier(a,this.v0.x,this.v1.x,this.v2.x);b.y=THREE.Curve.Utils.tangentQuadraticBezier(a,this.v0.y,this.v1.y,this.v2.y);return b.normalize()};
THREE.CubicBezierCurve=function(a,b,c,d){this.v0=a;this.v1=b;this.v2=c;this.v3=d};THREE.CubicBezierCurve.prototype=Object.create(THREE.Curve.prototype);THREE.CubicBezierCurve.prototype.constructor=THREE.CubicBezierCurve;THREE.CubicBezierCurve.prototype.getPoint=function(a){var b;b=THREE.Shape.Utils.b3(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x);a=THREE.Shape.Utils.b3(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y);return new THREE.Vector2(b,a)};
THREE.CubicBezierCurve.prototype.getTangent=function(a){var b;b=THREE.Curve.Utils.tangentCubicBezier(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x);a=THREE.Curve.Utils.tangentCubicBezier(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y);b=new THREE.Vector2(b,a);b.normalize();return b};THREE.SplineCurve=function(a){this.points=void 0==a?[]:a};THREE.SplineCurve.prototype=Object.create(THREE.Curve.prototype);THREE.SplineCurve.prototype.constructor=THREE.SplineCurve;
THREE.SplineCurve.prototype.getPoint=function(a){var b=this.points;a*=b.length-1;var c=Math.floor(a);a-=c;var d=b[0===c?c:c-1],e=b[c],g=b[c>b.length-2?b.length-1:c+1],b=b[c>b.length-3?b.length-1:c+2],c=new THREE.Vector2;c.x=THREE.Curve.Utils.interpolate(d.x,e.x,g.x,b.x,a);c.y=THREE.Curve.Utils.interpolate(d.y,e.y,g.y,b.y,a);return c};THREE.EllipseCurve=function(a,b,c,d,e,g,f){this.aX=a;this.aY=b;this.xRadius=c;this.yRadius=d;this.aStartAngle=e;this.aEndAngle=g;this.aClockwise=f};
THREE.EllipseCurve.prototype=Object.create(THREE.Curve.prototype);THREE.EllipseCurve.prototype.constructor=THREE.EllipseCurve;THREE.EllipseCurve.prototype.getPoint=function(a){var b=this.aEndAngle-this.aStartAngle;0>b&&(b+=2*Math.PI);b>2*Math.PI&&(b-=2*Math.PI);a=!0===this.aClockwise?this.aEndAngle+(1-a)*(2*Math.PI-b):this.aStartAngle+a*b;b=new THREE.Vector2;b.x=this.aX+this.xRadius*Math.cos(a);b.y=this.aY+this.yRadius*Math.sin(a);return b};
THREE.ArcCurve=function(a,b,c,d,e,g){THREE.EllipseCurve.call(this,a,b,c,c,d,e,g)};THREE.ArcCurve.prototype=Object.create(THREE.EllipseCurve.prototype);THREE.ArcCurve.prototype.constructor=THREE.ArcCurve;THREE.LineCurve3=THREE.Curve.create(function(a,b){this.v1=a;this.v2=b},function(a){var b=new THREE.Vector3;b.subVectors(this.v2,this.v1);b.multiplyScalar(a);b.add(this.v1);return b});
THREE.QuadraticBezierCurve3=THREE.Curve.create(function(a,b,c){this.v0=a;this.v1=b;this.v2=c},function(a){var b=new THREE.Vector3;b.x=THREE.Shape.Utils.b2(a,this.v0.x,this.v1.x,this.v2.x);b.y=THREE.Shape.Utils.b2(a,this.v0.y,this.v1.y,this.v2.y);b.z=THREE.Shape.Utils.b2(a,this.v0.z,this.v1.z,this.v2.z);return b});
THREE.CubicBezierCurve3=THREE.Curve.create(function(a,b,c,d){this.v0=a;this.v1=b;this.v2=c;this.v3=d},function(a){var b=new THREE.Vector3;b.x=THREE.Shape.Utils.b3(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x);b.y=THREE.Shape.Utils.b3(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y);b.z=THREE.Shape.Utils.b3(a,this.v0.z,this.v1.z,this.v2.z,this.v3.z);return b});
THREE.SplineCurve3=THREE.Curve.create(function(a){console.warn("THREE.SplineCurve3 will be deprecated. Please use THREE.CatmullRomCurve3");this.points=void 0==a?[]:a},function(a){var b=this.points;a*=b.length-1;var c=Math.floor(a);a-=c;var d=b[0==c?c:c-1],e=b[c],g=b[c>b.length-2?b.length-1:c+1],b=b[c>b.length-3?b.length-1:c+2],c=new THREE.Vector3;c.x=THREE.Curve.Utils.interpolate(d.x,e.x,g.x,b.x,a);c.y=THREE.Curve.Utils.interpolate(d.y,e.y,g.y,b.y,a);c.z=THREE.Curve.Utils.interpolate(d.z,e.z,g.z,
b.z,a);return c});
THREE.CatmullRomCurve3=function(){function a(){}var b=new THREE.Vector3,c=new a,d=new a,e=new a;a.prototype.init=function(a,b,c,d){this.c0=a;this.c1=c;this.c2=-3*a+3*b-2*c-d;this.c3=2*a-2*b+c+d};a.prototype.initNonuniformCatmullRom=function(a,b,c,d,e,l,p){a=((b-a)/e-(c-a)/(e+l)+(c-b)/l)*l;d=((c-b)/l-(d-b)/(l+p)+(d-c)/p)*l;this.init(b,c,a,d)};a.prototype.initCatmullRom=function(a,b,c,d,e){this.init(b,c,e*(c-a),e*(d-b))};a.prototype.calc=function(a){var b=a*a;return this.c0+this.c1*a+this.c2*b+this.c3*
b*a};return THREE.Curve.create(function(a){this.points=a||[]},function(a){var f=this.points,h,k;k=f.length;2>k&&console.log("duh, you need at least 2 points");a*=k-1;h=Math.floor(a);a-=h;0===a&&h===k-1&&(h=k-2,a=1);var n,l,p;0===h?(b.subVectors(f[0],f[1]).add(f[0]),n=b):n=f[h-1];l=f[h];p=f[h+1];h+2<k?f=f[h+2]:(b.subVectors(f[k-1],f[k-2]).add(f[k-2]),f=b);if(void 0===this.type||"centripetal"===this.type||"chordal"===this.type){var m="chordal"===this.type?.5:.25;k=Math.pow(n.distanceToSquared(l),m);
h=Math.pow(l.distanceToSquared(p),m);m=Math.pow(p.distanceToSquared(f),m);1E-4>h&&(h=1);1E-4>k&&(k=h);1E-4>m&&(m=h);c.initNonuniformCatmullRom(n.x,l.x,p.x,f.x,k,h,m);d.initNonuniformCatmullRom(n.y,l.y,p.y,f.y,k,h,m);e.initNonuniformCatmullRom(n.z,l.z,p.z,f.z,k,h,m)}else"catmullrom"===this.type&&(k=void 0!==this.tension?this.tension:.5,c.initCatmullRom(n.x,l.x,p.x,f.x,k),d.initCatmullRom(n.y,l.y,p.y,f.y,k),e.initCatmullRom(n.z,l.z,p.z,f.z,k));return new THREE.Vector3(c.calc(a),d.calc(a),e.calc(a))})}();
THREE.ClosedSplineCurve3=THREE.Curve.create(function(a){this.points=void 0==a?[]:a},function(a){var b=this.points;a*=b.length-0;var c=Math.floor(a);a-=c;var c=c+(0<c?0:(Math.floor(Math.abs(c)/b.length)+1)*b.length),d=b[(c-1)%b.length],e=b[c%b.length],g=b[(c+1)%b.length],b=b[(c+2)%b.length],c=new THREE.Vector3;c.x=THREE.Curve.Utils.interpolate(d.x,e.x,g.x,b.x,a);c.y=THREE.Curve.Utils.interpolate(d.y,e.y,g.y,b.y,a);c.z=THREE.Curve.Utils.interpolate(d.z,e.z,g.z,b.z,a);return c});
THREE.AnimationHandler={LINEAR:0,CATMULLROM:1,CATMULLROM_FORWARD:2,add:function(){console.warn("THREE.AnimationHandler.add() has been deprecated.")},get:function(){console.warn("THREE.AnimationHandler.get() has been deprecated.")},remove:function(){console.warn("THREE.AnimationHandler.remove() has been deprecated.")},animations:[],init:function(a){if(!0===a.initialized)return a;for(var b=0;b<a.hierarchy.length;b++){for(var c=0;c<a.hierarchy[b].keys.length;c++)if(0>a.hierarchy[b].keys[c].time&&(a.hierarchy[b].keys[c].time=
0),void 0!==a.hierarchy[b].keys[c].rot&&!(a.hierarchy[b].keys[c].rot instanceof THREE.Quaternion)){var d=a.hierarchy[b].keys[c].rot;a.hierarchy[b].keys[c].rot=(new THREE.Quaternion).fromArray(d)}if(a.hierarchy[b].keys.length&&void 0!==a.hierarchy[b].keys[0].morphTargets){d={};for(c=0;c<a.hierarchy[b].keys.length;c++)for(var e=0;e<a.hierarchy[b].keys[c].morphTargets.length;e++){var g=a.hierarchy[b].keys[c].morphTargets[e];d[g]=-1}a.hierarchy[b].usedMorphTargets=d;for(c=0;c<a.hierarchy[b].keys.length;c++){var f=
{};for(g in d){for(e=0;e<a.hierarchy[b].keys[c].morphTargets.length;e++)if(a.hierarchy[b].keys[c].morphTargets[e]===g){f[g]=a.hierarchy[b].keys[c].morphTargetsInfluences[e];break}e===a.hierarchy[b].keys[c].morphTargets.length&&(f[g]=0)}a.hierarchy[b].keys[c].morphTargetsInfluences=f}}for(c=1;c<a.hierarchy[b].keys.length;c++)a.hierarchy[b].keys[c].time===a.hierarchy[b].keys[c-1].time&&(a.hierarchy[b].keys.splice(c,1),c--);for(c=0;c<a.hierarchy[b].keys.length;c++)a.hierarchy[b].keys[c].index=c}a.initialized=
!0;return a},parse:function(a){var b=function(a,c){c.push(a);for(var d=0;d<a.children.length;d++)b(a.children[d],c)},c=[];if(a instanceof THREE.SkinnedMesh)for(var d=0;d<a.skeleton.bones.length;d++)c.push(a.skeleton.bones[d]);else b(a,c);return c},play:function(a){-1===this.animations.indexOf(a)&&this.animations.push(a)},stop:function(a){a=this.animations.indexOf(a);-1!==a&&this.animations.splice(a,1)},update:function(a){for(var b=0;b<this.animations.length;b++)this.animations[b].resetBlendWeights();
for(b=0;b<this.animations.length;b++)this.animations[b].update(a)}};THREE.Animation=function(a,b){this.root=a;this.data=THREE.AnimationHandler.init(b);this.hierarchy=THREE.AnimationHandler.parse(a);this.currentTime=0;this.timeScale=1;this.isPlaying=!1;this.loop=!0;this.weight=0;this.interpolationType=THREE.AnimationHandler.LINEAR};
THREE.Animation.prototype={constructor:THREE.Animation,keyTypes:["pos","rot","scl"],play:function(a,b){this.currentTime=void 0!==a?a:0;this.weight=void 0!==b?b:1;this.isPlaying=!0;this.reset();THREE.AnimationHandler.play(this)},stop:function(){this.isPlaying=!1;THREE.AnimationHandler.stop(this)},reset:function(){for(var a=0,b=this.hierarchy.length;a<b;a++){var c=this.hierarchy[a];void 0===c.animationCache&&(c.animationCache={animations:{},blending:{positionWeight:0,quaternionWeight:0,scaleWeight:0}});
var d=this.data.name,e=c.animationCache.animations,g=e[d];void 0===g&&(g={prevKey:{pos:0,rot:0,scl:0},nextKey:{pos:0,rot:0,scl:0},originalMatrix:c.matrix},e[d]=g);for(c=0;3>c;c++){for(var d=this.keyTypes[c],e=this.data.hierarchy[a].keys[0],f=this.getNextKeyWith(d,a,1);f.time<this.currentTime&&f.index>e.index;)e=f,f=this.getNextKeyWith(d,a,f.index+1);g.prevKey[d]=e;g.nextKey[d]=f}}},resetBlendWeights:function(){for(var a=0,b=this.hierarchy.length;a<b;a++){var c=this.hierarchy[a].animationCache;void 0!==
c&&(c=c.blending,c.positionWeight=0,c.quaternionWeight=0,c.scaleWeight=0)}},update:function(){var a=[],b=new THREE.Vector3,c=new THREE.Vector3,d=new THREE.Quaternion,e=function(a,b){var c=[],d=[],e,p,m,q,r,t;e=(a.length-1)*b;p=Math.floor(e);e-=p;c[0]=0===p?p:p-1;c[1]=p;c[2]=p>a.length-2?p:p+1;c[3]=p>a.length-3?p:p+2;p=a[c[0]];q=a[c[1]];r=a[c[2]];t=a[c[3]];c=e*e;m=e*c;d[0]=g(p[0],q[0],r[0],t[0],e,c,m);d[1]=g(p[1],q[1],r[1],t[1],e,c,m);d[2]=g(p[2],q[2],r[2],t[2],e,c,m);return d},g=function(a,b,c,d,
e,g,m){a=.5*(c-a);d=.5*(d-b);return(2*(b-c)+a+d)*m+(-3*(b-c)-2*a-d)*g+a*e+b};return function(f){if(!1!==this.isPlaying&&(this.currentTime+=f*this.timeScale,0!==this.weight)){f=this.data.length;if(this.currentTime>f||0>this.currentTime)this.loop?(this.currentTime%=f,0>this.currentTime&&(this.currentTime+=f),this.reset()):this.stop();f=0;for(var g=this.hierarchy.length;f<g;f++)for(var k=this.hierarchy[f],n=k.animationCache.animations[this.data.name],l=k.animationCache.blending,p=0;3>p;p++){var m=this.keyTypes[p],
q=n.prevKey[m],r=n.nextKey[m];if(0<this.timeScale&&r.time<=this.currentTime||0>this.timeScale&&q.time>=this.currentTime){q=this.data.hierarchy[f].keys[0];for(r=this.getNextKeyWith(m,f,1);r.time<this.currentTime&&r.index>q.index;)q=r,r=this.getNextKeyWith(m,f,r.index+1);n.prevKey[m]=q;n.nextKey[m]=r}var t=(this.currentTime-q.time)/(r.time-q.time),u=q[m],y=r[m];0>t&&(t=0);1<t&&(t=1);if("pos"===m)if(this.interpolationType===THREE.AnimationHandler.LINEAR)c.x=u[0]+(y[0]-u[0])*t,c.y=u[1]+(y[1]-u[1])*t,
c.z=u[2]+(y[2]-u[2])*t,q=this.weight/(this.weight+l.positionWeight),k.position.lerp(c,q),l.positionWeight+=this.weight;else{if(this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD)a[0]=this.getPrevKeyWith("pos",f,q.index-1).pos,a[1]=u,a[2]=y,a[3]=this.getNextKeyWith("pos",f,r.index+1).pos,t=.33*t+.33,r=e(a,t),q=this.weight/(this.weight+l.positionWeight),l.positionWeight+=this.weight,m=k.position,m.x+=(r[0]-m.x)*q,m.y+=(r[1]-
m.y)*q,m.z+=(r[2]-m.z)*q,this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD&&(t=e(a,1.01*t),b.set(t[0],t[1],t[2]),b.sub(m),b.y=0,b.normalize(),t=Math.atan2(b.x,b.z),k.rotation.set(0,t,0))}else"rot"===m?(THREE.Quaternion.slerp(u,y,d,t),0===l.quaternionWeight?(k.quaternion.copy(d),l.quaternionWeight=this.weight):(q=this.weight/(this.weight+l.quaternionWeight),THREE.Quaternion.slerp(k.quaternion,d,k.quaternion,q),l.quaternionWeight+=this.weight)):"scl"===m&&(c.x=u[0]+(y[0]-u[0])*t,c.y=
u[1]+(y[1]-u[1])*t,c.z=u[2]+(y[2]-u[2])*t,q=this.weight/(this.weight+l.scaleWeight),k.scale.lerp(c,q),l.scaleWeight+=this.weight)}return!0}}}(),getNextKeyWith:function(a,b,c){var d=this.data.hierarchy[b].keys;for(c=this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD?c<d.length-1?c:d.length-1:c%d.length;c<d.length;c++)if(void 0!==d[c][a])return d[c];return this.data.hierarchy[b].keys[0]},getPrevKeyWith:function(a,b,c){var d=
this.data.hierarchy[b].keys;for(c=this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD?0<c?c:0:0<=c?c:c+d.length;0<=c;c--)if(void 0!==d[c][a])return d[c];return this.data.hierarchy[b].keys[d.length-1]}};
THREE.KeyFrameAnimation=function(a){this.root=a.node;this.data=THREE.AnimationHandler.init(a);this.hierarchy=THREE.AnimationHandler.parse(this.root);this.currentTime=0;this.timeScale=.001;this.isPlaying=!1;this.loop=this.isPaused=!0;a=0;for(var b=this.hierarchy.length;a<b;a++){var c=this.data.hierarchy[a].sids,d=this.hierarchy[a];if(this.data.hierarchy[a].keys.length&&c){for(var e=0;e<c.length;e++){var g=c[e],f=this.getNextKeyWith(g,a,0);f&&f.apply(g)}d.matrixAutoUpdate=!1;this.data.hierarchy[a].node.updateMatrix();
d.matrixWorldNeedsUpdate=!0}}};
THREE.KeyFrameAnimation.prototype={constructor:THREE.KeyFrameAnimation,play:function(a){this.currentTime=void 0!==a?a:0;if(!1===this.isPlaying){this.isPlaying=!0;var b=this.hierarchy.length,c,d;for(a=0;a<b;a++)c=this.hierarchy[a],d=this.data.hierarchy[a],void 0===d.animationCache&&(d.animationCache={},d.animationCache.prevKey=null,d.animationCache.nextKey=null,d.animationCache.originalMatrix=c.matrix),c=this.data.hierarchy[a].keys,c.length&&(d.animationCache.prevKey=c[0],d.animationCache.nextKey=
c[1],this.startTime=Math.min(c[0].time,this.startTime),this.endTime=Math.max(c[c.length-1].time,this.endTime));this.update(0)}this.isPaused=!1;THREE.AnimationHandler.play(this)},stop:function(){this.isPaused=this.isPlaying=!1;THREE.AnimationHandler.stop(this);for(var a=0;a<this.data.hierarchy.length;a++){var b=this.hierarchy[a],c=this.data.hierarchy[a];if(void 0!==c.animationCache){var d=c.animationCache.originalMatrix;d.copy(b.matrix);b.matrix=d;delete c.animationCache}}},update:function(a){if(!1!==
this.isPlaying){this.currentTime+=a*this.timeScale;a=this.data.length;!0===this.loop&&this.currentTime>a&&(this.currentTime%=a);this.currentTime=Math.min(this.currentTime,a);a=0;for(var b=this.hierarchy.length;a<b;a++){var c=this.hierarchy[a],d=this.data.hierarchy[a],e=d.keys,d=d.animationCache;if(e.length){var g=d.prevKey,f=d.nextKey;if(f.time<=this.currentTime){for(;f.time<this.currentTime&&f.index>g.index;)g=f,f=e[g.index+1];d.prevKey=g;d.nextKey=f}f.time>=this.currentTime?g.interpolate(f,this.currentTime):
g.interpolate(f,f.time);this.data.hierarchy[a].node.updateMatrix();c.matrixWorldNeedsUpdate=!0}}}},getNextKeyWith:function(a,b,c){b=this.data.hierarchy[b].keys;for(c%=b.length;c<b.length;c++)if(b[c].hasTarget(a))return b[c];return b[0]},getPrevKeyWith:function(a,b,c){b=this.data.hierarchy[b].keys;for(c=0<=c?c:c+b.length;0<=c;c--)if(b[c].hasTarget(a))return b[c];return b[b.length-1]}};
THREE.MorphAnimation=function(a){this.mesh=a;this.frames=a.morphTargetInfluences.length;this.currentTime=0;this.duration=1E3;this.loop=!0;this.currentFrame=this.lastFrame=0;this.isPlaying=!1};
THREE.MorphAnimation.prototype={constructor:THREE.MorphAnimation,play:function(){this.isPlaying=!0},pause:function(){this.isPlaying=!1},update:function(a){if(!1!==this.isPlaying){this.currentTime+=a;!0===this.loop&&this.currentTime>this.duration&&(this.currentTime%=this.duration);this.currentTime=Math.min(this.currentTime,this.duration);var b=this.duration/this.frames;a=Math.floor(this.currentTime/b);var c=this.mesh.morphTargetInfluences;a!==this.currentFrame&&(c[this.lastFrame]=0,c[this.currentFrame]=
1,c[a]=0,this.lastFrame=this.currentFrame,this.currentFrame=a);b=this.currentTime%b/b;c[a]=b;c[this.lastFrame]=1-b}}};
THREE.BoxGeometry=function(a,b,c,d,e,g){function f(a,b,c,d,e,f,g,t){var u,y=h.widthSegments,w=h.heightSegments,A=e/2,v=f/2,z=h.vertices.length;if("x"===a&&"y"===b||"y"===a&&"x"===b)u="z";else if("x"===a&&"z"===b||"z"===a&&"x"===b)u="y",w=h.depthSegments;else if("z"===a&&"y"===b||"y"===a&&"z"===b)u="x",y=h.depthSegments;var C=y+1,B=w+1,x=e/y,J=f/w,G=new THREE.Vector3;G[u]=0<g?1:-1;for(e=0;e<B;e++)for(f=0;f<C;f++){var F=new THREE.Vector3;F[a]=(f*x-A)*c;F[b]=(e*J-v)*d;F[u]=g;h.vertices.push(F)}for(e=
0;e<w;e++)for(f=0;f<y;f++)v=f+C*e,a=f+C*(e+1),b=f+1+C*(e+1),c=f+1+C*e,d=new THREE.Vector2(f/y,1-e/w),g=new THREE.Vector2(f/y,1-(e+1)/w),u=new THREE.Vector2((f+1)/y,1-(e+1)/w),A=new THREE.Vector2((f+1)/y,1-e/w),v=new THREE.Face3(v+z,a+z,c+z),v.normal.copy(G),v.vertexNormals.push(G.clone(),G.clone(),G.clone()),v.materialIndex=t,h.faces.push(v),h.faceVertexUvs[0].push([d,g,A]),v=new THREE.Face3(a+z,b+z,c+z),v.normal.copy(G),v.vertexNormals.push(G.clone(),G.clone(),G.clone()),v.materialIndex=t,h.faces.push(v),
h.faceVertexUvs[0].push([g.clone(),u,A.clone()])}THREE.Geometry.call(this);this.type="BoxGeometry";this.parameters={width:a,height:b,depth:c,widthSegments:d,heightSegments:e,depthSegments:g};this.widthSegments=d||1;this.heightSegments=e||1;this.depthSegments=g||1;var h=this;d=a/2;e=b/2;g=c/2;f("z","y",-1,-1,c,b,d,0);f("z","y",1,-1,c,b,-d,1);f("x","z",1,1,a,c,e,2);f("x","z",1,-1,a,c,-e,3);f("x","y",1,-1,a,b,g,4);f("x","y",-1,-1,a,b,-g,5);this.mergeVertices()};THREE.BoxGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.BoxGeometry.prototype.constructor=THREE.BoxGeometry;THREE.BoxGeometry.prototype.clone=function(){return new THREE.BoxGeometry(this.parameters.width,this.parameters.height,this.parameters.depth,this.parameters.widthSegments,this.parameters.heightSegments,this.parameters.depthSegments)};THREE.CubeGeometry=THREE.BoxGeometry;
THREE.CircleGeometry=function(a,b,c,d){THREE.Geometry.call(this);this.type="CircleGeometry";this.parameters={radius:a,segments:b,thetaStart:c,thetaLength:d};a=a||50;b=void 0!==b?Math.max(3,b):8;c=void 0!==c?c:0;d=void 0!==d?d:2*Math.PI;var e,g=[];e=new THREE.Vector3;var f=new THREE.Vector2(.5,.5);this.vertices.push(e);g.push(f);for(e=0;e<=b;e++){var h=new THREE.Vector3,k=c+e/b*d;h.x=a*Math.cos(k);h.y=a*Math.sin(k);this.vertices.push(h);g.push(new THREE.Vector2((h.x/a+1)/2,(h.y/a+1)/2))}c=new THREE.Vector3(0,
0,1);for(e=1;e<=b;e++)this.faces.push(new THREE.Face3(e,e+1,0,[c.clone(),c.clone(),c.clone()])),this.faceVertexUvs[0].push([g[e].clone(),g[e+1].clone(),f.clone()]);this.computeFaceNormals();this.boundingSphere=new THREE.Sphere(new THREE.Vector3,a)};THREE.CircleGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.CircleGeometry.prototype.constructor=THREE.CircleGeometry;
THREE.CircleGeometry.prototype.clone=function(){return new THREE.CircleGeometry(this.parameters.radius,this.parameters.segments,this.parameters.thetaStart,this.parameters.thetaLength)};
THREE.CircleBufferGeometry=function(a,b,c,d){THREE.BufferGeometry.call(this);this.type="CircleBufferGeometry";this.parameters={radius:a,segments:b,thetaStart:c,thetaLength:d};a=a||50;b=void 0!==b?Math.max(3,b):8;c=void 0!==c?c:0;d=void 0!==d?d:2*Math.PI;var e=b+2,g=new Float32Array(3*e),f=new Float32Array(3*e),e=new Float32Array(2*e);f[3]=1;e[0]=.5;e[1]=.5;for(var h=0,k=3,n=2;h<=b;h++,k+=3,n+=2){var l=c+h/b*d;g[k]=a*Math.cos(l);g[k+1]=a*Math.sin(l);f[k+2]=1;e[n]=(g[k]/a+1)/2;e[n+1]=(g[k+1]/a+1)/2}c=
[];for(k=1;k<=b;k++)c.push(k),c.push(k+1),c.push(0);this.addAttribute("index",new THREE.BufferAttribute(new Uint16Array(c),1));this.addAttribute("position",new THREE.BufferAttribute(g,3));this.addAttribute("normal",new THREE.BufferAttribute(f,3));this.addAttribute("uv",new THREE.BufferAttribute(e,2));this.boundingSphere=new THREE.Sphere(new THREE.Vector3,a)};THREE.CircleBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.CircleBufferGeometry.prototype.constructor=THREE.CircleBufferGeometry;
THREE.CircleBufferGeometry.prototype.clone=function(){var a=new THREE.CircleBufferGeometry(this.parameters.radius,this.parameters.segments,this.parameters.thetaStart,this.parameters.thetaLength);a.copy(this);return a};
THREE.CylinderGeometry=function(a,b,c,d,e,g,f,h){THREE.Geometry.call(this);this.type="CylinderGeometry";this.parameters={radiusTop:a,radiusBottom:b,height:c,radialSegments:d,heightSegments:e,openEnded:g,thetaStart:f,thetaLength:h};a=void 0!==a?a:20;b=void 0!==b?b:20;c=void 0!==c?c:100;d=d||8;e=e||1;g=void 0!==g?g:!1;f=void 0!==f?f:0;h=void 0!==h?h:2*Math.PI;var k=c/2,n,l,p=[],m=[];for(l=0;l<=e;l++){var q=[],r=[],t=l/e,u=t*(b-a)+a;for(n=0;n<=d;n++){var y=n/d,w=new THREE.Vector3;w.x=u*Math.sin(y*h+
f);w.y=-t*c+k;w.z=u*Math.cos(y*h+f);this.vertices.push(w);q.push(this.vertices.length-1);r.push(new THREE.Vector2(y,1-t))}p.push(q);m.push(r)}c=(b-a)/c;for(n=0;n<d;n++)for(0!==a?(f=this.vertices[p[0][n]].clone(),h=this.vertices[p[0][n+1]].clone()):(f=this.vertices[p[1][n]].clone(),h=this.vertices[p[1][n+1]].clone()),f.setY(Math.sqrt(f.x*f.x+f.z*f.z)*c).normalize(),h.setY(Math.sqrt(h.x*h.x+h.z*h.z)*c).normalize(),l=0;l<e;l++){var q=p[l][n],r=p[l+1][n],t=p[l+1][n+1],u=p[l][n+1],y=f.clone(),w=f.clone(),
A=h.clone(),v=h.clone(),z=m[l][n].clone(),C=m[l+1][n].clone(),B=m[l+1][n+1].clone(),x=m[l][n+1].clone();this.faces.push(new THREE.Face3(q,r,u,[y,w,v]));this.faceVertexUvs[0].push([z,C,x]);this.faces.push(new THREE.Face3(r,t,u,[w.clone(),A,v.clone()]));this.faceVertexUvs[0].push([C.clone(),B,x.clone()])}if(!1===g&&0<a)for(this.vertices.push(new THREE.Vector3(0,k,0)),n=0;n<d;n++)q=p[0][n],r=p[0][n+1],t=this.vertices.length-1,y=new THREE.Vector3(0,1,0),w=new THREE.Vector3(0,1,0),A=new THREE.Vector3(0,
1,0),z=m[0][n].clone(),C=m[0][n+1].clone(),B=new THREE.Vector2(C.x,0),this.faces.push(new THREE.Face3(q,r,t,[y,w,A])),this.faceVertexUvs[0].push([z,C,B]);if(!1===g&&0<b)for(this.vertices.push(new THREE.Vector3(0,-k,0)),n=0;n<d;n++)q=p[e][n+1],r=p[e][n],t=this.vertices.length-1,y=new THREE.Vector3(0,-1,0),w=new THREE.Vector3(0,-1,0),A=new THREE.Vector3(0,-1,0),z=m[e][n+1].clone(),C=m[e][n].clone(),B=new THREE.Vector2(C.x,1),this.faces.push(new THREE.Face3(q,r,t,[y,w,A])),this.faceVertexUvs[0].push([z,
C,B]);this.computeFaceNormals()};THREE.CylinderGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.CylinderGeometry.prototype.constructor=THREE.CylinderGeometry;THREE.CylinderGeometry.prototype.clone=function(){return new THREE.CylinderGeometry(this.parameters.radiusTop,this.parameters.radiusBottom,this.parameters.height,this.parameters.radialSegments,this.parameters.heightSegments,this.parameters.openEnded,this.parameters.thetaStart,this.parameters.thetaLength)};
THREE.EdgesGeometry=function(a,b){THREE.BufferGeometry.call(this);var c=Math.cos(THREE.Math.degToRad(void 0!==b?b:1)),d=[0,0],e={},g=function(a,b){return a-b},f=["a","b","c"],h;a instanceof THREE.BufferGeometry?(h=new THREE.Geometry,h.fromBufferGeometry(a)):h=a.clone();h.mergeVertices();h.computeFaceNormals();var k=h.vertices;h=h.faces;for(var n=0,l=h.length;n<l;n++)for(var p=h[n],m=0;3>m;m++){d[0]=p[f[m]];d[1]=p[f[(m+1)%3]];d.sort(g);var q=d.toString();void 0===e[q]?e[q]={vert1:d[0],vert2:d[1],face1:n,
face2:void 0}:e[q].face2=n}d=[];for(q in e)if(g=e[q],void 0===g.face2||h[g.face1].normal.dot(h[g.face2].normal)<=c)f=k[g.vert1],d.push(f.x),d.push(f.y),d.push(f.z),f=k[g.vert2],d.push(f.x),d.push(f.y),d.push(f.z);this.addAttribute("position",new THREE.BufferAttribute(new Float32Array(d),3))};THREE.EdgesGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.EdgesGeometry.prototype.constructor=THREE.EdgesGeometry;
THREE.ExtrudeGeometry=function(a,b){"undefined"!==typeof a&&(THREE.Geometry.call(this),this.type="ExtrudeGeometry",a=Array.isArray(a)?a:[a],this.addShapeList(a,b),this.computeFaceNormals())};THREE.ExtrudeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ExtrudeGeometry.prototype.constructor=THREE.ExtrudeGeometry;THREE.ExtrudeGeometry.prototype.addShapeList=function(a,b){for(var c=a.length,d=0;d<c;d++)this.addShape(a[d],b)};
THREE.ExtrudeGeometry.prototype.addShape=function(a,b){function c(a,b,c){b||console.error("THREE.ExtrudeGeometry: vec does not exist");return b.clone().multiplyScalar(c).add(a)}function d(a,b,c){var d=1,d=a.x-b.x,e=a.y-b.y,f=c.x-a.x,g=c.y-a.y,h=d*d+e*e;if(1E-10<Math.abs(d*g-e*f)){var k=Math.sqrt(h),l=Math.sqrt(f*f+g*g),h=b.x-e/k;b=b.y+d/k;f=((c.x-g/l-h)*g-(c.y+f/l-b)*f)/(d*g-e*f);c=h+d*f-a.x;a=b+e*f-a.y;d=c*c+a*a;if(2>=d)return new THREE.Vector2(c,a);d=Math.sqrt(d/2)}else a=!1,1E-10<d?1E-10<f&&(a=
!0):-1E-10>d?-1E-10>f&&(a=!0):Math.sign(e)===Math.sign(g)&&(a=!0),a?(c=-e,a=d,d=Math.sqrt(h)):(c=d,a=e,d=Math.sqrt(h/2));return new THREE.Vector2(c/d,a/d)}function e(a,b){var c,d;for(E=a.length;0<=--E;){c=E;d=E-1;0>d&&(d=a.length-1);for(var e=0,f=q+2*l,e=0;e<f;e++){var g=S*e,h=S*(e+1),k=b+c+g,g=b+d+g,n=b+d+h,h=b+c+h,k=k+G,g=g+G,n=n+G,h=h+G;J.faces.push(new THREE.Face3(k,g,h));J.faces.push(new THREE.Face3(g,n,h));k=y.generateSideWallUV(J,k,g,n,h);J.faceVertexUvs[0].push([k[0],k[1],k[3]]);J.faceVertexUvs[0].push([k[1],
k[2],k[3]])}}}function g(a,b,c){J.vertices.push(new THREE.Vector3(a,b,c))}function f(a,b,c){a+=G;b+=G;c+=G;J.faces.push(new THREE.Face3(a,b,c));a=y.generateTopUV(J,a,b,c);J.faceVertexUvs[0].push(a)}var h=void 0!==b.amount?b.amount:100,k=void 0!==b.bevelThickness?b.bevelThickness:6,n=void 0!==b.bevelSize?b.bevelSize:k-2,l=void 0!==b.bevelSegments?b.bevelSegments:3,p=void 0!==b.bevelEnabled?b.bevelEnabled:!0,m=void 0!==b.curveSegments?b.curveSegments:12,q=void 0!==b.steps?b.steps:1,r=b.extrudePath,
t,u=!1,y=void 0!==b.UVGenerator?b.UVGenerator:THREE.ExtrudeGeometry.WorldUVGenerator,w,A,v,z;r&&(t=r.getSpacedPoints(q),u=!0,p=!1,w=void 0!==b.frames?b.frames:new THREE.TubeGeometry.FrenetFrames(r,q,!1),A=new THREE.Vector3,v=new THREE.Vector3,z=new THREE.Vector3);p||(n=k=l=0);var C,B,x,J=this,G=this.vertices.length,r=a.extractPoints(m),m=r.shape,F=r.holes;if(r=!THREE.Shape.Utils.isClockWise(m)){m=m.reverse();B=0;for(x=F.length;B<x;B++)C=F[B],THREE.Shape.Utils.isClockWise(C)&&(F[B]=C.reverse());r=
!1}var O=THREE.Shape.Utils.triangulateShape(m,F),D=m;B=0;for(x=F.length;B<x;B++)C=F[B],m=m.concat(C);var K,I,H,N,L,S=m.length,Q,R=O.length,r=[],E=0;H=D.length;K=H-1;for(I=E+1;E<H;E++,K++,I++)K===H&&(K=0),I===H&&(I=0),r[E]=d(D[E],D[K],D[I]);var Y=[],V,$=r.concat();B=0;for(x=F.length;B<x;B++){C=F[B];V=[];E=0;H=C.length;K=H-1;for(I=E+1;E<H;E++,K++,I++)K===H&&(K=0),I===H&&(I=0),V[E]=d(C[E],C[K],C[I]);Y.push(V);$=$.concat(V)}for(K=0;K<l;K++){H=K/l;N=k*(1-H);I=n*Math.sin(H*Math.PI/2);E=0;for(H=D.length;E<
H;E++)L=c(D[E],r[E],I),g(L.x,L.y,-N);B=0;for(x=F.length;B<x;B++)for(C=F[B],V=Y[B],E=0,H=C.length;E<H;E++)L=c(C[E],V[E],I),g(L.x,L.y,-N)}I=n;for(E=0;E<S;E++)L=p?c(m[E],$[E],I):m[E],u?(v.copy(w.normals[0]).multiplyScalar(L.x),A.copy(w.binormals[0]).multiplyScalar(L.y),z.copy(t[0]).add(v).add(A),g(z.x,z.y,z.z)):g(L.x,L.y,0);for(H=1;H<=q;H++)for(E=0;E<S;E++)L=p?c(m[E],$[E],I):m[E],u?(v.copy(w.normals[H]).multiplyScalar(L.x),A.copy(w.binormals[H]).multiplyScalar(L.y),z.copy(t[H]).add(v).add(A),g(z.x,z.y,
z.z)):g(L.x,L.y,h/q*H);for(K=l-1;0<=K;K--){H=K/l;N=k*(1-H);I=n*Math.sin(H*Math.PI/2);E=0;for(H=D.length;E<H;E++)L=c(D[E],r[E],I),g(L.x,L.y,h+N);B=0;for(x=F.length;B<x;B++)for(C=F[B],V=Y[B],E=0,H=C.length;E<H;E++)L=c(C[E],V[E],I),u?g(L.x,L.y+t[q-1].y,t[q-1].x+N):g(L.x,L.y,h+N)}(function(){if(p){var a;a=0*S;for(E=0;E<R;E++)Q=O[E],f(Q[2]+a,Q[1]+a,Q[0]+a);a=q+2*l;a*=S;for(E=0;E<R;E++)Q=O[E],f(Q[0]+a,Q[1]+a,Q[2]+a)}else{for(E=0;E<R;E++)Q=O[E],f(Q[2],Q[1],Q[0]);for(E=0;E<R;E++)Q=O[E],f(Q[0]+S*q,Q[1]+S*
q,Q[2]+S*q)}})();(function(){var a=0;e(D,a);a+=D.length;B=0;for(x=F.length;B<x;B++)C=F[B],e(C,a),a+=C.length})()};
THREE.ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(a,b,c,d){a=a.vertices;b=a[b];c=a[c];d=a[d];return[new THREE.Vector2(b.x,b.y),new THREE.Vector2(c.x,c.y),new THREE.Vector2(d.x,d.y)]},generateSideWallUV:function(a,b,c,d,e){a=a.vertices;b=a[b];c=a[c];d=a[d];e=a[e];return.01>Math.abs(b.y-c.y)?[new THREE.Vector2(b.x,1-b.z),new THREE.Vector2(c.x,1-c.z),new THREE.Vector2(d.x,1-d.z),new THREE.Vector2(e.x,1-e.z)]:[new THREE.Vector2(b.y,1-b.z),new THREE.Vector2(c.y,1-c.z),new THREE.Vector2(d.y,
1-d.z),new THREE.Vector2(e.y,1-e.z)]}};THREE.ShapeGeometry=function(a,b){THREE.Geometry.call(this);this.type="ShapeGeometry";!1===Array.isArray(a)&&(a=[a]);this.addShapeList(a,b);this.computeFaceNormals()};THREE.ShapeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ShapeGeometry.prototype.constructor=THREE.ShapeGeometry;THREE.ShapeGeometry.prototype.addShapeList=function(a,b){for(var c=0,d=a.length;c<d;c++)this.addShape(a[c],b);return this};
THREE.ShapeGeometry.prototype.addShape=function(a,b){void 0===b&&(b={});var c=b.material,d=void 0===b.UVGenerator?THREE.ExtrudeGeometry.WorldUVGenerator:b.UVGenerator,e,g,f,h=this.vertices.length;e=a.extractPoints(void 0!==b.curveSegments?b.curveSegments:12);var k=e.shape,n=e.holes;if(!THREE.Shape.Utils.isClockWise(k))for(k=k.reverse(),e=0,g=n.length;e<g;e++)f=n[e],THREE.Shape.Utils.isClockWise(f)&&(n[e]=f.reverse());var l=THREE.Shape.Utils.triangulateShape(k,n);e=0;for(g=n.length;e<g;e++)f=n[e],
k=k.concat(f);n=k.length;g=l.length;for(e=0;e<n;e++)f=k[e],this.vertices.push(new THREE.Vector3(f.x,f.y,0));for(e=0;e<g;e++)n=l[e],k=n[0]+h,f=n[1]+h,n=n[2]+h,this.faces.push(new THREE.Face3(k,f,n,null,null,c)),this.faceVertexUvs[0].push(d.generateTopUV(this,k,f,n))};
THREE.LatheGeometry=function(a,b,c,d){THREE.Geometry.call(this);this.type="LatheGeometry";this.parameters={points:a,segments:b,phiStart:c,phiLength:d};b=b||12;c=c||0;d=d||2*Math.PI;for(var e=1/(a.length-1),g=1/b,f=0,h=b;f<=h;f++)for(var k=c+f*g*d,n=Math.cos(k),l=Math.sin(k),k=0,p=a.length;k<p;k++){var m=a[k],q=new THREE.Vector3;q.x=n*m.x-l*m.y;q.y=l*m.x+n*m.y;q.z=m.z;this.vertices.push(q)}c=a.length;f=0;for(h=b;f<h;f++)for(k=0,p=a.length-1;k<p;k++){b=l=k+c*f;d=l+c;var n=l+1+c,l=l+1,m=f*g,q=k*e,r=
m+g,t=q+e;this.faces.push(new THREE.Face3(b,d,l));this.faceVertexUvs[0].push([new THREE.Vector2(m,q),new THREE.Vector2(r,q),new THREE.Vector2(m,t)]);this.faces.push(new THREE.Face3(d,n,l));this.faceVertexUvs[0].push([new THREE.Vector2(r,q),new THREE.Vector2(r,t),new THREE.Vector2(m,t)])}this.mergeVertices();this.computeFaceNormals();this.computeVertexNormals()};THREE.LatheGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.LatheGeometry.prototype.constructor=THREE.LatheGeometry;
THREE.PlaneGeometry=function(a,b,c,d){THREE.Geometry.call(this);this.type="PlaneGeometry";this.parameters={width:a,height:b,widthSegments:c,heightSegments:d};this.fromBufferGeometry(new THREE.PlaneBufferGeometry(a,b,c,d))};THREE.PlaneGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.PlaneGeometry.prototype.constructor=THREE.PlaneGeometry;
THREE.PlaneGeometry.prototype.clone=function(){return new THREE.PlaneGeometry(this.parameters.width,this.parameters.height,this.parameters.widthSegments,this.parameters.heightSegments)};
THREE.PlaneBufferGeometry=function(a,b,c,d){THREE.BufferGeometry.call(this);this.type="PlaneBufferGeometry";this.parameters={width:a,height:b,widthSegments:c,heightSegments:d};var e=a/2,g=b/2;c=Math.floor(c)||1;d=Math.floor(d)||1;var f=c+1,h=d+1,k=a/c,n=b/d;b=new Float32Array(f*h*3);a=new Float32Array(f*h*3);for(var l=new Float32Array(f*h*2),p=0,m=0,q=0;q<h;q++)for(var r=q*n-g,t=0;t<f;t++)b[p]=t*k-e,b[p+1]=-r,a[p+2]=1,l[m]=t/c,l[m+1]=1-q/d,p+=3,m+=2;p=0;e=new (65535<b.length/3?Uint32Array:Uint16Array)(c*
d*6);for(q=0;q<d;q++)for(t=0;t<c;t++)g=t+f*(q+1),h=t+1+f*(q+1),k=t+1+f*q,e[p]=t+f*q,e[p+1]=g,e[p+2]=k,e[p+3]=g,e[p+4]=h,e[p+5]=k,p+=6;this.addAttribute("index",new THREE.BufferAttribute(e,1));this.addAttribute("position",new THREE.BufferAttribute(b,3));this.addAttribute("normal",new THREE.BufferAttribute(a,3));this.addAttribute("uv",new THREE.BufferAttribute(l,2))};THREE.PlaneBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.PlaneBufferGeometry.prototype.constructor=THREE.PlaneBufferGeometry;
THREE.PlaneBufferGeometry.prototype.clone=function(){var a=new THREE.PlaneBufferGeometry(this.parameters.width,this.parameters.height,this.parameters.widthSegments,this.parameters.heightSegments);a.copy(this);return a};
THREE.RingGeometry=function(a,b,c,d,e,g){THREE.Geometry.call(this);this.type="RingGeometry";this.parameters={innerRadius:a,outerRadius:b,thetaSegments:c,phiSegments:d,thetaStart:e,thetaLength:g};a=a||0;b=b||50;e=void 0!==e?e:0;g=void 0!==g?g:2*Math.PI;c=void 0!==c?Math.max(3,c):8;d=void 0!==d?Math.max(1,d):8;var f,h=[],k=a,n=(b-a)/d;for(a=0;a<d+1;a++){for(f=0;f<c+1;f++){var l=new THREE.Vector3,p=e+f/c*g;l.x=k*Math.cos(p);l.y=k*Math.sin(p);this.vertices.push(l);h.push(new THREE.Vector2((l.x/b+1)/2,
(l.y/b+1)/2))}k+=n}b=new THREE.Vector3(0,0,1);for(a=0;a<d;a++)for(e=a*(c+1),f=0;f<c;f++)g=p=f+e,n=p+c+1,l=p+c+2,this.faces.push(new THREE.Face3(g,n,l,[b.clone(),b.clone(),b.clone()])),this.faceVertexUvs[0].push([h[g].clone(),h[n].clone(),h[l].clone()]),g=p,n=p+c+2,l=p+1,this.faces.push(new THREE.Face3(g,n,l,[b.clone(),b.clone(),b.clone()])),this.faceVertexUvs[0].push([h[g].clone(),h[n].clone(),h[l].clone()]);this.computeFaceNormals();this.boundingSphere=new THREE.Sphere(new THREE.Vector3,k)};
THREE.RingGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.RingGeometry.prototype.constructor=THREE.RingGeometry;THREE.RingGeometry.prototype.clone=function(){return new THREE.RingGeometry(this.parameters.innerRadius,this.parameters.outerRadius,this.parameters.thetaSegments,this.parameters.phiSegments,this.parameters.thetaStart,this.parameters.thetaLength)};
THREE.SphereGeometry=function(a,b,c,d,e,g,f){console.log("THREE.SphereGeometry: Consider using THREE.SphereBufferGeometry for lower memory footprint.");THREE.Geometry.call(this);this.type="SphereGeometry";this.parameters={radius:a,widthSegments:b,heightSegments:c,phiStart:d,phiLength:e,thetaStart:g,thetaLength:f};a=a||50;b=Math.max(3,Math.floor(b)||8);c=Math.max(2,Math.floor(c)||6);d=void 0!==d?d:0;e=void 0!==e?e:2*Math.PI;g=void 0!==g?g:0;f=void 0!==f?f:Math.PI;var h,k,n=[],l=[];for(k=0;k<=c;k++){var p=
[],m=[];for(h=0;h<=b;h++){var q=h/b,r=k/c,t=new THREE.Vector3;t.x=-a*Math.cos(d+q*e)*Math.sin(g+r*f);t.y=a*Math.cos(g+r*f);t.z=a*Math.sin(d+q*e)*Math.sin(g+r*f);this.vertices.push(t);p.push(this.vertices.length-1);m.push(new THREE.Vector2(q,1-r))}n.push(p);l.push(m)}for(k=0;k<c;k++)for(h=0;h<b;h++){d=n[k][h+1];e=n[k][h];g=n[k+1][h];f=n[k+1][h+1];var p=this.vertices[d].clone().normalize(),m=this.vertices[e].clone().normalize(),q=this.vertices[g].clone().normalize(),r=this.vertices[f].clone().normalize(),
t=l[k][h+1].clone(),u=l[k][h].clone(),y=l[k+1][h].clone(),w=l[k+1][h+1].clone();Math.abs(this.vertices[d].y)===a?(t.x=(t.x+u.x)/2,this.faces.push(new THREE.Face3(d,g,f,[p,q,r])),this.faceVertexUvs[0].push([t,y,w])):Math.abs(this.vertices[g].y)===a?(y.x=(y.x+w.x)/2,this.faces.push(new THREE.Face3(d,e,g,[p,m,q])),this.faceVertexUvs[0].push([t,u,y])):(this.faces.push(new THREE.Face3(d,e,f,[p,m,r])),this.faceVertexUvs[0].push([t,u,w]),this.faces.push(new THREE.Face3(e,g,f,[m.clone(),q,r.clone()])),this.faceVertexUvs[0].push([u.clone(),
y,w.clone()]))}this.computeFaceNormals();this.boundingSphere=new THREE.Sphere(new THREE.Vector3,a)};THREE.SphereGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.SphereGeometry.prototype.constructor=THREE.SphereGeometry;THREE.SphereGeometry.prototype.clone=function(){return new THREE.SphereGeometry(this.parameters.radius,this.parameters.widthSegments,this.parameters.heightSegments,this.parameters.phiStart,this.parameters.phiLength,this.parameters.thetaStart,this.parameters.thetaLength)};
THREE.SphereBufferGeometry=function(a,b,c,d,e,g,f){THREE.BufferGeometry.call(this);this.type="SphereBufferGeometry";this.parameters={radius:a,widthSegments:b,heightSegments:c,phiStart:d,phiLength:e,thetaStart:g,thetaLength:f};a=a||50;b=Math.max(3,Math.floor(b)||8);c=Math.max(2,Math.floor(c)||6);d=void 0!==d?d:0;e=void 0!==e?e:2*Math.PI;g=void 0!==g?g:0;f=void 0!==f?f:Math.PI;for(var h=g+f,k=(b+1)*(c+1),n=new THREE.BufferAttribute(new Float32Array(3*k),3),l=new THREE.BufferAttribute(new Float32Array(3*
k),3),k=new THREE.BufferAttribute(new Float32Array(2*k),2),p=0,m=[],q=new THREE.Vector3,r=0;r<=c;r++){for(var t=[],u=r/c,y=0;y<=b;y++){var w=y/b,A=-a*Math.cos(d+w*e)*Math.sin(g+u*f),v=a*Math.cos(g+u*f),z=a*Math.sin(d+w*e)*Math.sin(g+u*f);q.set(A,v,z).normalize();n.setXYZ(p,A,v,z);l.setXYZ(p,q.x,q.y,q.z);k.setXY(p,w,1-u);t.push(p);p++}m.push(t)}d=[];for(r=0;r<c;r++)for(y=0;y<b;y++)e=m[r][y+1],f=m[r][y],p=m[r+1][y],q=m[r+1][y+1],(0!==r||0<g)&&d.push(e,f,q),(r!==c-1||h<Math.PI)&&d.push(f,p,q);this.addAttribute("index",
new THREE.BufferAttribute(new Uint16Array(d),1));this.addAttribute("position",n);this.addAttribute("normal",l);this.addAttribute("uv",k);this.boundingSphere=new THREE.Sphere(new THREE.Vector3,a)};THREE.SphereBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.SphereBufferGeometry.prototype.constructor=THREE.SphereBufferGeometry;
THREE.SphereBufferGeometry.prototype.clone=function(){var a=new THREE.SphereBufferGeometry(this.parameters.radius,this.parameters.widthSegments,this.parameters.heightSegments,this.parameters.phiStart,this.parameters.phiLength,this.parameters.thetaStart,this.parameters.thetaLength);a.copy(this);return a};
THREE.TextGeometry=function(a,b){b=b||{};var c=THREE.FontUtils.generateShapes(a,b);b.amount=void 0!==b.height?b.height:50;void 0===b.bevelThickness&&(b.bevelThickness=10);void 0===b.bevelSize&&(b.bevelSize=8);void 0===b.bevelEnabled&&(b.bevelEnabled=!1);THREE.ExtrudeGeometry.call(this,c,b);this.type="TextGeometry"};THREE.TextGeometry.prototype=Object.create(THREE.ExtrudeGeometry.prototype);THREE.TextGeometry.prototype.constructor=THREE.TextGeometry;
THREE.TorusGeometry=function(a,b,c,d,e){THREE.Geometry.call(this);this.type="TorusGeometry";this.parameters={radius:a,tube:b,radialSegments:c,tubularSegments:d,arc:e};a=a||100;b=b||40;c=c||8;d=d||6;e=e||2*Math.PI;for(var g=new THREE.Vector3,f=[],h=[],k=0;k<=c;k++)for(var n=0;n<=d;n++){var l=n/d*e,p=k/c*Math.PI*2;g.x=a*Math.cos(l);g.y=a*Math.sin(l);var m=new THREE.Vector3;m.x=(a+b*Math.cos(p))*Math.cos(l);m.y=(a+b*Math.cos(p))*Math.sin(l);m.z=b*Math.sin(p);this.vertices.push(m);f.push(new THREE.Vector2(n/
d,k/c));h.push(m.clone().sub(g).normalize())}for(k=1;k<=c;k++)for(n=1;n<=d;n++)a=(d+1)*k+n-1,b=(d+1)*(k-1)+n-1,e=(d+1)*(k-1)+n,g=(d+1)*k+n,l=new THREE.Face3(a,b,g,[h[a].clone(),h[b].clone(),h[g].clone()]),this.faces.push(l),this.faceVertexUvs[0].push([f[a].clone(),f[b].clone(),f[g].clone()]),l=new THREE.Face3(b,e,g,[h[b].clone(),h[e].clone(),h[g].clone()]),this.faces.push(l),this.faceVertexUvs[0].push([f[b].clone(),f[e].clone(),f[g].clone()]);this.computeFaceNormals()};
THREE.TorusGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.TorusGeometry.prototype.constructor=THREE.TorusGeometry;THREE.TorusGeometry.prototype.clone=function(){return new THREE.TorusGeometry(this.parameters.radius,this.parameters.tube,this.parameters.radialSegments,this.parameters.tubularSegments,this.parameters.arc)};
THREE.TorusKnotGeometry=function(a,b,c,d,e,g,f){function h(a,b,c,d,e){var f=Math.cos(a),g=Math.sin(a);a*=b/c;b=Math.cos(a);f*=d*(2+b)*.5;g=d*(2+b)*g*.5;d=e*d*Math.sin(a)*.5;return new THREE.Vector3(f,g,d)}THREE.Geometry.call(this);this.type="TorusKnotGeometry";this.parameters={radius:a,tube:b,radialSegments:c,tubularSegments:d,p:e,q:g,heightScale:f};a=a||100;b=b||40;c=c||64;d=d||8;e=e||2;g=g||3;f=f||1;for(var k=Array(c),n=new THREE.Vector3,l=new THREE.Vector3,p=new THREE.Vector3,m=0;m<c;++m){k[m]=
Array(d);var q=m/c*2*e*Math.PI,r=h(q,g,e,a,f),q=h(q+.01,g,e,a,f);n.subVectors(q,r);l.addVectors(q,r);p.crossVectors(n,l);l.crossVectors(p,n);p.normalize();l.normalize();for(q=0;q<d;++q){var t=q/d*2*Math.PI,u=-b*Math.cos(t),t=b*Math.sin(t),y=new THREE.Vector3;y.x=r.x+u*l.x+t*p.x;y.y=r.y+u*l.y+t*p.y;y.z=r.z+u*l.z+t*p.z;k[m][q]=this.vertices.push(y)-1}}for(m=0;m<c;++m)for(q=0;q<d;++q)e=(m+1)%c,g=(q+1)%d,a=k[m][q],b=k[e][q],e=k[e][g],g=k[m][g],f=new THREE.Vector2(m/c,q/d),n=new THREE.Vector2((m+1)/c,
q/d),l=new THREE.Vector2((m+1)/c,(q+1)/d),p=new THREE.Vector2(m/c,(q+1)/d),this.faces.push(new THREE.Face3(a,b,g)),this.faceVertexUvs[0].push([f,n,p]),this.faces.push(new THREE.Face3(b,e,g)),this.faceVertexUvs[0].push([n.clone(),l,p.clone()]);this.computeFaceNormals();this.computeVertexNormals()};THREE.TorusKnotGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.TorusKnotGeometry.prototype.constructor=THREE.TorusKnotGeometry;
THREE.TorusKnotGeometry.prototype.clone=function(){return new THREE.TorusKnotGeometry(this.parameters.radius,this.parameters.tube,this.parameters.radialSegments,this.parameters.tubularSegments,this.parameters.p,this.parameters.q,this.parameters.heightScale)};
THREE.TubeGeometry=function(a,b,c,d,e,g){THREE.Geometry.call(this);this.type="TubeGeometry";this.parameters={path:a,segments:b,radius:c,radialSegments:d,closed:e};b=b||64;c=c||1;d=d||8;e=e||!1;g=g||THREE.TubeGeometry.NoTaper;var f=[],h,k,n=b+1,l,p,m,q,r,t=new THREE.Vector3,u,y,w;u=new THREE.TubeGeometry.FrenetFrames(a,b,e);y=u.normals;w=u.binormals;this.tangents=u.tangents;this.normals=y;this.binormals=w;for(u=0;u<n;u++)for(f[u]=[],l=u/(n-1),r=a.getPointAt(l),h=y[u],k=w[u],m=c*g(l),l=0;l<d;l++)p=
l/d*2*Math.PI,q=-m*Math.cos(p),p=m*Math.sin(p),t.copy(r),t.x+=q*h.x+p*k.x,t.y+=q*h.y+p*k.y,t.z+=q*h.z+p*k.z,f[u][l]=this.vertices.push(new THREE.Vector3(t.x,t.y,t.z))-1;for(u=0;u<b;u++)for(l=0;l<d;l++)g=e?(u+1)%b:u+1,n=(l+1)%d,a=f[u][l],c=f[g][l],g=f[g][n],n=f[u][n],t=new THREE.Vector2(u/b,l/d),y=new THREE.Vector2((u+1)/b,l/d),w=new THREE.Vector2((u+1)/b,(l+1)/d),h=new THREE.Vector2(u/b,(l+1)/d),this.faces.push(new THREE.Face3(a,c,n)),this.faceVertexUvs[0].push([t,y,h]),this.faces.push(new THREE.Face3(c,
g,n)),this.faceVertexUvs[0].push([y.clone(),w,h.clone()]);this.computeFaceNormals();this.computeVertexNormals()};THREE.TubeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.TubeGeometry.prototype.constructor=THREE.TubeGeometry;THREE.TubeGeometry.NoTaper=function(a){return 1};THREE.TubeGeometry.SinusoidalTaper=function(a){return Math.sin(Math.PI*a)};
THREE.TubeGeometry.FrenetFrames=function(a,b,c){var d=new THREE.Vector3,e=[],g=[],f=[],h=new THREE.Vector3,k=new THREE.Matrix4;b+=1;var n,l,p;this.tangents=e;this.normals=g;this.binormals=f;for(n=0;n<b;n++)l=n/(b-1),e[n]=a.getTangentAt(l),e[n].normalize();g[0]=new THREE.Vector3;f[0]=new THREE.Vector3;a=Number.MAX_VALUE;n=Math.abs(e[0].x);l=Math.abs(e[0].y);p=Math.abs(e[0].z);n<=a&&(a=n,d.set(1,0,0));l<=a&&(a=l,d.set(0,1,0));p<=a&&d.set(0,0,1);h.crossVectors(e[0],d).normalize();g[0].crossVectors(e[0],
h);f[0].crossVectors(e[0],g[0]);for(n=1;n<b;n++)g[n]=g[n-1].clone(),f[n]=f[n-1].clone(),h.crossVectors(e[n-1],e[n]),1E-4<h.length()&&(h.normalize(),d=Math.acos(THREE.Math.clamp(e[n-1].dot(e[n]),-1,1)),g[n].applyMatrix4(k.makeRotationAxis(h,d))),f[n].crossVectors(e[n],g[n]);if(c)for(d=Math.acos(THREE.Math.clamp(g[0].dot(g[b-1]),-1,1)),d/=b-1,0<e[0].dot(h.crossVectors(g[0],g[b-1]))&&(d=-d),n=1;n<b;n++)g[n].applyMatrix4(k.makeRotationAxis(e[n],d*n)),f[n].crossVectors(e[n],g[n])};
THREE.PolyhedronGeometry=function(a,b,c,d){function e(a){var b=a.normalize().clone();b.index=k.vertices.push(b)-1;var c=Math.atan2(a.z,-a.x)/2/Math.PI+.5;a=Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))/Math.PI+.5;b.uv=new THREE.Vector2(c,1-a);return b}function g(a,b,c){var d=new THREE.Face3(a.index,b.index,c.index,[a.clone(),b.clone(),c.clone()]);k.faces.push(d);u.copy(a).add(b).add(c).divideScalar(3);d=Math.atan2(u.z,-u.x);k.faceVertexUvs[0].push([h(a.uv,a,d),h(b.uv,b,d),h(c.uv,c,d)])}function f(a,
b){for(var c=Math.pow(2,b),d=e(k.vertices[a.a]),f=e(k.vertices[a.b]),h=e(k.vertices[a.c]),l=[],n=0;n<=c;n++){l[n]=[];for(var m=e(d.clone().lerp(h,n/c)),p=e(f.clone().lerp(h,n/c)),q=c-n,r=0;r<=q;r++)l[n][r]=0===r&&n===c?m:e(m.clone().lerp(p,r/q))}for(n=0;n<c;n++)for(r=0;r<2*(c-n)-1;r++)d=Math.floor(r/2),0===r%2?g(l[n][d+1],l[n+1][d],l[n][d]):g(l[n][d+1],l[n+1][d+1],l[n+1][d])}function h(a,b,c){0>c&&1===a.x&&(a=new THREE.Vector2(a.x-1,a.y));0===b.x&&0===b.z&&(a=new THREE.Vector2(c/2/Math.PI+.5,a.y));
return a.clone()}THREE.Geometry.call(this);this.type="PolyhedronGeometry";this.parameters={vertices:a,indices:b,radius:c,detail:d};c=c||1;d=d||0;for(var k=this,n=0,l=a.length;n<l;n+=3)e(new THREE.Vector3(a[n],a[n+1],a[n+2]));a=this.vertices;for(var p=[],m=n=0,l=b.length;n<l;n+=3,m++){var q=a[b[n]],r=a[b[n+1]],t=a[b[n+2]];p[m]=new THREE.Face3(q.index,r.index,t.index,[q.clone(),r.clone(),t.clone()])}for(var u=new THREE.Vector3,n=0,l=p.length;n<l;n++)f(p[n],d);n=0;for(l=this.faceVertexUvs[0].length;n<
l;n++)b=this.faceVertexUvs[0][n],d=b[0].x,a=b[1].x,p=b[2].x,m=Math.max(d,Math.max(a,p)),q=Math.min(d,Math.min(a,p)),.9<m&&.1>q&&(.2>d&&(b[0].x+=1),.2>a&&(b[1].x+=1),.2>p&&(b[2].x+=1));n=0;for(l=this.vertices.length;n<l;n++)this.vertices[n].multiplyScalar(c);this.mergeVertices();this.computeFaceNormals();this.boundingSphere=new THREE.Sphere(new THREE.Vector3,c)};THREE.PolyhedronGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.PolyhedronGeometry.prototype.constructor=THREE.PolyhedronGeometry;
THREE.PolyhedronGeometry.prototype.clone=function(){return(new THREE.PolyhedronGeometry(this.parameters.vertices,this.parameters.indices,this.parameters.radius,this.parameters.detail)).copy(this)};THREE.PolyhedronGeometry.prototype.copy=function(a){THREE.Geometry.prototype.copy.call(this,a);return this};
THREE.DodecahedronGeometry=function(a,b){var c=(1+Math.sqrt(5))/2,d=1/c;THREE.PolyhedronGeometry.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-d,-c,0,-d,c,0,d,-c,0,d,c,-d,-c,0,-d,c,0,d,-c,0,d,c,0,-c,0,-d,c,0,-d,-c,0,d,c,0,d],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,
12,14,1,14,5,1,5,9],a,b);this.type="DodecahedronGeometry";this.parameters={radius:a,detail:b}};THREE.DodecahedronGeometry.prototype=Object.create(THREE.PolyhedronGeometry.prototype);THREE.DodecahedronGeometry.prototype.constructor=THREE.DodecahedronGeometry;THREE.DodecahedronGeometry.prototype.clone=function(){var a=new THREE.DodecahedronGeometry(this.parameters.radius,this.parameters.detail);a.copy(this);return a};
THREE.IcosahedronGeometry=function(a,b){var c=(1+Math.sqrt(5))/2;THREE.PolyhedronGeometry.call(this,[-1,c,0,1,c,0,-1,-c,0,1,-c,0,0,-1,c,0,1,c,0,-1,-c,0,1,-c,c,0,-1,c,0,1,-c,0,-1,-c,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],a,b);this.type="IcosahedronGeometry";this.parameters={radius:a,detail:b}};THREE.IcosahedronGeometry.prototype=Object.create(THREE.PolyhedronGeometry.prototype);
THREE.IcosahedronGeometry.prototype.constructor=THREE.IcosahedronGeometry;THREE.IcosahedronGeometry.prototype.clone=function(){var a=new THREE.IcosahedronGeometry(this.parameters.radius,this.parameters.detail);a.copy(this);return a};THREE.OctahedronGeometry=function(a,b){THREE.PolyhedronGeometry.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],a,b);this.type="OctahedronGeometry";this.parameters={radius:a,detail:b}};
THREE.OctahedronGeometry.prototype=Object.create(THREE.PolyhedronGeometry.prototype);THREE.OctahedronGeometry.prototype.constructor=THREE.OctahedronGeometry;THREE.OctahedronGeometry.prototype.clone=function(){var a=new THREE.OctahedronGeometry(this.parameters.radius,this.parameters.detail);a.copy(this);return a};
THREE.TetrahedronGeometry=function(a,b){THREE.PolyhedronGeometry.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],a,b);this.type="TetrahedronGeometry";this.parameters={radius:a,detail:b}};THREE.TetrahedronGeometry.prototype=Object.create(THREE.PolyhedronGeometry.prototype);THREE.TetrahedronGeometry.prototype.constructor=THREE.TetrahedronGeometry;
THREE.TetrahedronGeometry.prototype.clone=function(){var a=new THREE.TetrahedronGeometry(this.parameters.radius,this.parameters.detail);a.copy(this);return a};
THREE.ParametricGeometry=function(a,b,c){THREE.Geometry.call(this);this.type="ParametricGeometry";this.parameters={func:a,slices:b,stacks:c};var d=this.vertices,e=this.faces,g=this.faceVertexUvs[0],f,h,k,n,l=b+1;for(f=0;f<=c;f++)for(n=f/c,h=0;h<=b;h++)k=h/b,k=a(k,n),d.push(k);var p,m,q,r;for(f=0;f<c;f++)for(h=0;h<b;h++)a=f*l+h,d=f*l+h+1,n=(f+1)*l+h+1,k=(f+1)*l+h,p=new THREE.Vector2(h/b,f/c),m=new THREE.Vector2((h+1)/b,f/c),q=new THREE.Vector2((h+1)/b,(f+1)/c),r=new THREE.Vector2(h/b,(f+1)/c),e.push(new THREE.Face3(a,
d,k)),g.push([p,m,r]),e.push(new THREE.Face3(d,n,k)),g.push([m.clone(),q,r.clone()]);this.computeFaceNormals();this.computeVertexNormals()};THREE.ParametricGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ParametricGeometry.prototype.constructor=THREE.ParametricGeometry;
THREE.WireframeGeometry=function(a){THREE.BufferGeometry.call(this);var b=[0,0],c={},d=function(a,b){return a-b},e=["a","b","c"];if(a instanceof THREE.Geometry){var g=a.vertices,f=a.faces,h=0,k=new Uint32Array(6*f.length);a=0;for(var n=f.length;a<n;a++)for(var l=f[a],p=0;3>p;p++){b[0]=l[e[p]];b[1]=l[e[(p+1)%3]];b.sort(d);var m=b.toString();void 0===c[m]&&(k[2*h]=b[0],k[2*h+1]=b[1],c[m]=!0,h++)}b=new Float32Array(6*h);a=0;for(n=h;a<n;a++)for(p=0;2>p;p++)h=g[k[2*a+p]],e=6*a+3*p,b[e+0]=h.x,b[e+1]=h.y,
b[e+2]=h.z;this.addAttribute("position",new THREE.BufferAttribute(b,3))}else if(a instanceof THREE.BufferGeometry){if(void 0!==a.attributes.index){g=a.attributes.position;n=a.attributes.index.array;f=a.drawcalls;h=0;0===f.length&&(f=[{count:n.length,index:0,start:0}]);for(var k=new Uint32Array(2*n.length),l=0,q=f.length;l<q;++l){p=f[l].start;m=f[l].count;e=f[l].index;a=p;for(var r=p+m;a<r;a+=3)for(p=0;3>p;p++)b[0]=e+n[a+p],b[1]=e+n[a+(p+1)%3],b.sort(d),m=b.toString(),void 0===c[m]&&(k[2*h]=b[0],k[2*
h+1]=b[1],c[m]=!0,h++)}b=new Float32Array(6*h);a=0;for(n=h;a<n;a++)for(p=0;2>p;p++)e=6*a+3*p,h=k[2*a+p],b[e+0]=g.getX(h),b[e+1]=g.getY(h),b[e+2]=g.getZ(h)}else for(g=a.attributes.position.array,h=g.length/3,k=h/3,b=new Float32Array(6*h),a=0,n=k;a<n;a++)for(p=0;3>p;p++)e=18*a+6*p,k=9*a+3*p,b[e+0]=g[k],b[e+1]=g[k+1],b[e+2]=g[k+2],h=9*a+(p+1)%3*3,b[e+3]=g[h],b[e+4]=g[h+1],b[e+5]=g[h+2];this.addAttribute("position",new THREE.BufferAttribute(b,3))}};THREE.WireframeGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);
THREE.WireframeGeometry.prototype.constructor=THREE.WireframeGeometry;THREE.AxisHelper=function(a){a=a||1;var b=new Float32Array([0,0,0,a,0,0,0,0,0,0,a,0,0,0,0,0,0,a]),c=new Float32Array([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1]);a=new THREE.BufferGeometry;a.addAttribute("position",new THREE.BufferAttribute(b,3));a.addAttribute("color",new THREE.BufferAttribute(c,3));b=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});THREE.LineSegments.call(this,a,b)};THREE.AxisHelper.prototype=Object.create(THREE.LineSegments.prototype);
THREE.AxisHelper.prototype.constructor=THREE.AxisHelper;
THREE.ArrowHelper=function(){var a=new THREE.Geometry;a.vertices.push(new THREE.Vector3(0,0,0),new THREE.Vector3(0,1,0));var b=new THREE.CylinderGeometry(0,.5,1,5,1);b.applyMatrix((new THREE.Matrix4).makeTranslation(0,-.5,0));return function(c,d,e,g,f,h){THREE.Object3D.call(this);void 0===g&&(g=16776960);void 0===e&&(e=1);void 0===f&&(f=.2*e);void 0===h&&(h=.2*f);this.position.copy(d);this.line=new THREE.Line(a,new THREE.LineBasicMaterial({color:g}));this.line.matrixAutoUpdate=!1;this.add(this.line);
this.cone=new THREE.Mesh(b,new THREE.MeshBasicMaterial({color:g}));this.cone.matrixAutoUpdate=!1;this.add(this.cone);this.setDirection(c);this.setLength(e,f,h)}}();THREE.ArrowHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.ArrowHelper.prototype.constructor=THREE.ArrowHelper;
THREE.ArrowHelper.prototype.setDirection=function(){var a=new THREE.Vector3,b;return function(c){.99999<c.y?this.quaternion.set(0,0,0,1):-.99999>c.y?this.quaternion.set(1,0,0,0):(a.set(c.z,0,-c.x).normalize(),b=Math.acos(c.y),this.quaternion.setFromAxisAngle(a,b))}}();THREE.ArrowHelper.prototype.setLength=function(a,b,c){void 0===b&&(b=.2*a);void 0===c&&(c=.2*b);this.line.scale.set(1,a-b,1);this.line.updateMatrix();this.cone.scale.set(c,b,c);this.cone.position.y=a;this.cone.updateMatrix()};
THREE.ArrowHelper.prototype.setColor=function(a){this.line.material.color.set(a);this.cone.material.color.set(a)};THREE.BoxHelper=function(a){var b=new THREE.BufferGeometry;b.addAttribute("position",new THREE.BufferAttribute(new Float32Array(72),3));THREE.LineSegments.call(this,b,new THREE.LineBasicMaterial({color:16776960}));void 0!==a&&this.update(a)};THREE.BoxHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.BoxHelper.prototype.constructor=THREE.BoxHelper;
THREE.BoxHelper.prototype.update=function(){var a=new THREE.Box3;return function(b){a.setFromObject(b);if(!a.empty()){b=a.min;var c=a.max,d=this.geometry.attributes.position.array;d[0]=c.x;d[1]=c.y;d[2]=c.z;d[3]=b.x;d[4]=c.y;d[5]=c.z;d[6]=b.x;d[7]=c.y;d[8]=c.z;d[9]=b.x;d[10]=b.y;d[11]=c.z;d[12]=b.x;d[13]=b.y;d[14]=c.z;d[15]=c.x;d[16]=b.y;d[17]=c.z;d[18]=c.x;d[19]=b.y;d[20]=c.z;d[21]=c.x;d[22]=c.y;d[23]=c.z;d[24]=c.x;d[25]=c.y;d[26]=b.z;d[27]=b.x;d[28]=c.y;d[29]=b.z;d[30]=b.x;d[31]=c.y;d[32]=b.z;d[33]=
b.x;d[34]=b.y;d[35]=b.z;d[36]=b.x;d[37]=b.y;d[38]=b.z;d[39]=c.x;d[40]=b.y;d[41]=b.z;d[42]=c.x;d[43]=b.y;d[44]=b.z;d[45]=c.x;d[46]=c.y;d[47]=b.z;d[48]=c.x;d[49]=c.y;d[50]=c.z;d[51]=c.x;d[52]=c.y;d[53]=b.z;d[54]=b.x;d[55]=c.y;d[56]=c.z;d[57]=b.x;d[58]=c.y;d[59]=b.z;d[60]=b.x;d[61]=b.y;d[62]=c.z;d[63]=b.x;d[64]=b.y;d[65]=b.z;d[66]=c.x;d[67]=b.y;d[68]=c.z;d[69]=c.x;d[70]=b.y;d[71]=b.z;this.geometry.attributes.position.needsUpdate=!0;this.geometry.computeBoundingSphere()}}}();
THREE.BoundingBoxHelper=function(a,b){var c=void 0!==b?b:8947848;this.object=a;this.box=new THREE.Box3;THREE.Mesh.call(this,new THREE.BoxGeometry(1,1,1),new THREE.MeshBasicMaterial({color:c,wireframe:!0}))};THREE.BoundingBoxHelper.prototype=Object.create(THREE.Mesh.prototype);THREE.BoundingBoxHelper.prototype.constructor=THREE.BoundingBoxHelper;THREE.BoundingBoxHelper.prototype.update=function(){this.box.setFromObject(this.object);this.box.size(this.scale);this.box.center(this.position)};
THREE.CameraHelper=function(a){function b(a,b,d){c(a,d);c(b,d)}function c(a,b){d.vertices.push(new THREE.Vector3);d.colors.push(new THREE.Color(b));void 0===g[a]&&(g[a]=[]);g[a].push(d.vertices.length-1)}var d=new THREE.Geometry,e=new THREE.LineBasicMaterial({color:16777215,vertexColors:THREE.FaceColors}),g={};b("n1","n2",16755200);b("n2","n4",16755200);b("n4","n3",16755200);b("n3","n1",16755200);b("f1","f2",16755200);b("f2","f4",16755200);b("f4","f3",16755200);b("f3","f1",16755200);b("n1","f1",16755200);
b("n2","f2",16755200);b("n3","f3",16755200);b("n4","f4",16755200);b("p","n1",16711680);b("p","n2",16711680);b("p","n3",16711680);b("p","n4",16711680);b("u1","u2",43775);b("u2","u3",43775);b("u3","u1",43775);b("c","t",16777215);b("p","c",3355443);b("cn1","cn2",3355443);b("cn3","cn4",3355443);b("cf1","cf2",3355443);b("cf3","cf4",3355443);THREE.LineSegments.call(this,d,e);this.camera=a;this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.pointMap=g;this.update()};THREE.CameraHelper.prototype=Object.create(THREE.LineSegments.prototype);
THREE.CameraHelper.prototype.constructor=THREE.CameraHelper;
THREE.CameraHelper.prototype.update=function(){var a,b,c=new THREE.Vector3,d=new THREE.Camera,e=function(e,f,h,k){c.set(f,h,k).unproject(d);e=b[e];if(void 0!==e)for(f=0,h=e.length;f<h;f++)a.vertices[e[f]].copy(c)};return function(){a=this.geometry;b=this.pointMap;d.projectionMatrix.copy(this.camera.projectionMatrix);e("c",0,0,-1);e("t",0,0,1);e("n1",-1,-1,-1);e("n2",1,-1,-1);e("n3",-1,1,-1);e("n4",1,1,-1);e("f1",-1,-1,1);e("f2",1,-1,1);e("f3",-1,1,1);e("f4",1,1,1);e("u1",.7,1.1,-1);e("u2",-.7,1.1,
-1);e("u3",0,2,-1);e("cf1",-1,0,1);e("cf2",1,0,1);e("cf3",0,-1,1);e("cf4",0,1,1);e("cn1",-1,0,-1);e("cn2",1,0,-1);e("cn3",0,-1,-1);e("cn4",0,1,-1);a.verticesNeedUpdate=!0}}();
THREE.DirectionalLightHelper=function(a,b){THREE.Object3D.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;b=b||1;var c=new THREE.Geometry;c.vertices.push(new THREE.Vector3(-b,b,0),new THREE.Vector3(b,b,0),new THREE.Vector3(b,-b,0),new THREE.Vector3(-b,-b,0),new THREE.Vector3(-b,b,0));var d=new THREE.LineBasicMaterial({fog:!1});d.color.copy(this.light.color).multiplyScalar(this.light.intensity);this.lightPlane=new THREE.Line(c,d);this.add(this.lightPlane);
c=new THREE.Geometry;c.vertices.push(new THREE.Vector3,new THREE.Vector3);d=new THREE.LineBasicMaterial({fog:!1});d.color.copy(this.light.color).multiplyScalar(this.light.intensity);this.targetLine=new THREE.Line(c,d);this.add(this.targetLine);this.update()};THREE.DirectionalLightHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.DirectionalLightHelper.prototype.constructor=THREE.DirectionalLightHelper;
THREE.DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose();this.lightPlane.material.dispose();this.targetLine.geometry.dispose();this.targetLine.material.dispose()};
THREE.DirectionalLightHelper.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3;return function(){a.setFromMatrixPosition(this.light.matrixWorld);b.setFromMatrixPosition(this.light.target.matrixWorld);c.subVectors(b,a);this.lightPlane.lookAt(c);this.lightPlane.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);this.targetLine.geometry.vertices[1].copy(c);this.targetLine.geometry.verticesNeedUpdate=!0;this.targetLine.material.color.copy(this.lightPlane.material.color)}}();
THREE.EdgesHelper=function(a,b,c){b=void 0!==b?b:16777215;THREE.LineSegments.call(this,new THREE.EdgesGeometry(a.geometry,c),new THREE.LineBasicMaterial({color:b}));this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1};THREE.EdgesHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.EdgesHelper.prototype.constructor=THREE.EdgesHelper;
THREE.FaceNormalsHelper=function(a,b,c,d){this.object=a;this.size=void 0!==b?b:1;a=void 0!==c?c:16776960;d=void 0!==d?d:1;b=0;c=this.object.geometry;c instanceof THREE.Geometry?b=c.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");c=new THREE.BufferGeometry;b=new THREE.Float32Attribute(6*b,3);c.addAttribute("position",b);THREE.LineSegments.call(this,c,new THREE.LineBasicMaterial({color:a,linewidth:d}));this.matrixAutoUpdate=
!1;this.normalMatrix=new THREE.Matrix3;this.update()};THREE.FaceNormalsHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.FaceNormalsHelper.prototype.constructor=THREE.FaceNormalsHelper;
THREE.FaceNormalsHelper.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(){this.object.updateMatrixWorld(!0);this.normalMatrix.getNormalMatrix(this.object.matrixWorld);for(var c=this.object.matrixWorld,d=this.geometry.attributes.position,e=this.object.geometry,g=e.vertices,e=e.faces,f=0,h=0,k=e.length;h<k;h++){var n=e[h],l=n.normal;a.copy(g[n.a]).add(g[n.b]).add(g[n.c]).divideScalar(3).applyMatrix4(c);b.copy(l).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size).add(a);
d.setXYZ(f,a.x,a.y,a.z);f+=1;d.setXYZ(f,b.x,b.y,b.z);f+=1}d.needsUpdate=!0;return this}}();
THREE.GridHelper=function(a,b){var c=new THREE.Geometry,d=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});this.color1=new THREE.Color(4473924);this.color2=new THREE.Color(8947848);for(var e=-a;e<=a;e+=b){c.vertices.push(new THREE.Vector3(-a,0,e),new THREE.Vector3(a,0,e),new THREE.Vector3(e,0,-a),new THREE.Vector3(e,0,a));var g=0===e?this.color1:this.color2;c.colors.push(g,g,g,g)}THREE.LineSegments.call(this,c,d)};THREE.GridHelper.prototype=Object.create(THREE.LineSegments.prototype);
THREE.GridHelper.prototype.constructor=THREE.GridHelper;THREE.GridHelper.prototype.setColors=function(a,b){this.color1.set(a);this.color2.set(b);this.geometry.colorsNeedUpdate=!0};
THREE.HemisphereLightHelper=function(a,b){THREE.Object3D.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.colors=[new THREE.Color,new THREE.Color];var c=new THREE.SphereGeometry(b,4,2);c.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI/2));for(var d=0;8>d;d++)c.faces[d].color=this.colors[4>d?0:1];d=new THREE.MeshBasicMaterial({vertexColors:THREE.FaceColors,wireframe:!0});this.lightSphere=new THREE.Mesh(c,d);this.add(this.lightSphere);
this.update()};THREE.HemisphereLightHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.HemisphereLightHelper.prototype.constructor=THREE.HemisphereLightHelper;THREE.HemisphereLightHelper.prototype.dispose=function(){this.lightSphere.geometry.dispose();this.lightSphere.material.dispose()};
THREE.HemisphereLightHelper.prototype.update=function(){var a=new THREE.Vector3;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity);this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity);this.lightSphere.lookAt(a.setFromMatrixPosition(this.light.matrixWorld).negate());this.lightSphere.geometry.colorsNeedUpdate=!0}}();
THREE.PointLightHelper=function(a,b){this.light=a;this.light.updateMatrixWorld();var c=new THREE.SphereGeometry(b,4,2),d=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});d.color.copy(this.light.color).multiplyScalar(this.light.intensity);THREE.Mesh.call(this,c,d);this.matrix=this.light.matrixWorld;this.matrixAutoUpdate=!1};THREE.PointLightHelper.prototype=Object.create(THREE.Mesh.prototype);THREE.PointLightHelper.prototype.constructor=THREE.PointLightHelper;
THREE.PointLightHelper.prototype.dispose=function(){this.geometry.dispose();this.material.dispose()};THREE.PointLightHelper.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)};
THREE.SkeletonHelper=function(a){this.bones=this.getBoneList(a);for(var b=new THREE.Geometry,c=0;c<this.bones.length;c++)this.bones[c].parent instanceof THREE.Bone&&(b.vertices.push(new THREE.Vector3),b.vertices.push(new THREE.Vector3),b.colors.push(new THREE.Color(0,0,1)),b.colors.push(new THREE.Color(0,1,0)));b.dynamic=!0;c=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors,depthTest:!1,depthWrite:!1,transparent:!0});THREE.LineSegments.call(this,b,c);this.root=a;this.matrix=a.matrixWorld;
this.matrixAutoUpdate=!1;this.update()};THREE.SkeletonHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.SkeletonHelper.prototype.constructor=THREE.SkeletonHelper;THREE.SkeletonHelper.prototype.getBoneList=function(a){var b=[];a instanceof THREE.Bone&&b.push(a);for(var c=0;c<a.children.length;c++)b.push.apply(b,this.getBoneList(a.children[c]));return b};
THREE.SkeletonHelper.prototype.update=function(){for(var a=this.geometry,b=(new THREE.Matrix4).getInverse(this.root.matrixWorld),c=new THREE.Matrix4,d=0,e=0;e<this.bones.length;e++){var g=this.bones[e];g.parent instanceof THREE.Bone&&(c.multiplyMatrices(b,g.matrixWorld),a.vertices[d].setFromMatrixPosition(c),c.multiplyMatrices(b,g.parent.matrixWorld),a.vertices[d+1].setFromMatrixPosition(c),d+=2)}a.verticesNeedUpdate=!0;a.computeBoundingSphere()};
THREE.SpotLightHelper=function(a){THREE.Object3D.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;a=new THREE.CylinderGeometry(0,1,1,8,1,!0);a.applyMatrix((new THREE.Matrix4).makeTranslation(0,-.5,0));a.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI/2));var b=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});this.cone=new THREE.Mesh(a,b);this.add(this.cone);this.update()};THREE.SpotLightHelper.prototype=Object.create(THREE.Object3D.prototype);
THREE.SpotLightHelper.prototype.constructor=THREE.SpotLightHelper;THREE.SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose();this.cone.material.dispose()};
THREE.SpotLightHelper.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(){var c=this.light.distance?this.light.distance:1E4,d=c*Math.tan(this.light.angle);this.cone.scale.set(d,d,c);a.setFromMatrixPosition(this.light.matrixWorld);b.setFromMatrixPosition(this.light.target.matrixWorld);this.cone.lookAt(b.sub(a));this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}();
THREE.VertexNormalsHelper=function(a,b,c,d){this.object=a;this.size=void 0!==b?b:1;a=void 0!==c?c:16711680;d=void 0!==d?d:1;b=0;c=this.object.geometry;c instanceof THREE.Geometry?b=3*c.faces.length:c instanceof THREE.BufferGeometry&&(b=c.attributes.normal.count);c=new THREE.BufferGeometry;b=new THREE.Float32Attribute(6*b,3);c.addAttribute("position",b);THREE.LineSegments.call(this,c,new THREE.LineBasicMaterial({color:a,linewidth:d}));this.matrixAutoUpdate=!1;this.normalMatrix=new THREE.Matrix3;this.update()};
THREE.VertexNormalsHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.VertexNormalsHelper.prototype.constructor=THREE.VertexNormalsHelper;
THREE.VertexNormalsHelper.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(){var c=["a","b","c"];this.object.updateMatrixWorld(!0);this.normalMatrix.getNormalMatrix(this.object.matrixWorld);var d=this.object.matrixWorld,e=this.geometry.attributes.position,g=this.object.geometry;if(g instanceof THREE.Geometry)for(var f=g.vertices,h=g.faces,k=g=0,n=h.length;k<n;k++)for(var l=h[k],p=0,m=l.vertexNormals.length;p<m;p++){var q=l.vertexNormals[p];a.copy(f[l[c[p]]]).applyMatrix4(d);
b.copy(q).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size).add(a);e.setXYZ(g,a.x,a.y,a.z);g+=1;e.setXYZ(g,b.x,b.y,b.z);g+=1}else if(g instanceof THREE.BufferGeometry)for(c=g.attributes.position,f=g.attributes.normal,p=g=0,m=c.count;p<m;p++)a.set(c.getX(p),c.getY(p),c.getZ(p)).applyMatrix4(d),b.set(f.getX(p),f.getY(p),f.getZ(p)),b.applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size).add(a),e.setXYZ(g,a.x,a.y,a.z),g+=1,e.setXYZ(g,b.x,b.y,b.z),g+=1;e.needsUpdate=
!0;return this}}();THREE.VertexTangentsHelper=function(a,b,c,d){this.object=a;this.size=void 0!==b?b:1;a=void 0!==c?c:255;d=void 0!==d?d:1;b=0;c=this.object.geometry;c instanceof THREE.Geometry?b=3*c.faces.length:c instanceof THREE.BufferGeometry&&(b=c.attributes.tangent.count);c=new THREE.BufferGeometry;b=new THREE.Float32Attribute(6*b,3);c.addAttribute("position",b);THREE.LineSegments.call(this,c,new THREE.LineBasicMaterial({color:a,linewidth:d}));this.matrixAutoUpdate=!1;this.update()};
THREE.VertexTangentsHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.VertexTangentsHelper.prototype.constructor=THREE.VertexTangentsHelper;
THREE.VertexTangentsHelper.prototype.update=function(a){var b=new THREE.Vector3,c=new THREE.Vector3;return function(){var a=["a","b","c"];this.object.updateMatrixWorld(!0);var e=this.object.matrixWorld,g=this.geometry.attributes.position,f=this.object.geometry;if(f instanceof THREE.Geometry)for(var h=f.vertices,k=f.faces,n=f=0,l=k.length;n<l;n++)for(var p=k[n],m=0,q=p.vertexTangents.length;m<q;m++){var r=p.vertexTangents[m];b.copy(h[p[a[m]]]).applyMatrix4(e);c.set(r.x,r.y,r.z);c.transformDirection(e).multiplyScalar(this.size).add(b);
g.setXYZ(f,b.x,b.y,b.z);f+=1;g.setXYZ(f,c.x,c.y,c.z);f+=1}else if(f instanceof THREE.BufferGeometry)for(a=f.attributes.position,h=f.attributes.tangent,m=f=0,q=a.count;m<q;m++)b.set(a.getX(m),a.getY(m),a.getZ(m)).applyMatrix4(e),c.set(h.getX(m),h.getY(m),h.getZ(m)),c.transformDirection(e).multiplyScalar(this.size).add(b),g.setXYZ(f,b.x,b.y,b.z),f+=1,g.setXYZ(f,c.x,c.y,c.z),f+=1;g.needsUpdate=!0;return this}}();
THREE.WireframeHelper=function(a,b){var c=void 0!==b?b:16777215;THREE.LineSegments.call(this,new THREE.WireframeGeometry(a.geometry),new THREE.LineBasicMaterial({color:c}));this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1};THREE.WireframeHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.WireframeHelper.prototype.constructor=THREE.WireframeHelper;THREE.ImmediateRenderObject=function(){THREE.Object3D.call(this);this.render=function(a){}};THREE.ImmediateRenderObject.prototype=Object.create(THREE.Object3D.prototype);
THREE.ImmediateRenderObject.prototype.constructor=THREE.ImmediateRenderObject;THREE.MorphBlendMesh=function(a,b){THREE.Mesh.call(this,a,b);this.animationsMap={};this.animationsList=[];var c=this.geometry.morphTargets.length;this.createAnimation("__default",0,c-1,c/1);this.setAnimationWeight("__default",1)};THREE.MorphBlendMesh.prototype=Object.create(THREE.Mesh.prototype);THREE.MorphBlendMesh.prototype.constructor=THREE.MorphBlendMesh;
THREE.MorphBlendMesh.prototype.createAnimation=function(a,b,c,d){b={startFrame:b,endFrame:c,length:c-b+1,fps:d,duration:(c-b)/d,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[a]=b;this.animationsList.push(b)};
THREE.MorphBlendMesh.prototype.autoCreateAnimations=function(a){for(var b=/([a-z]+)_?(\d+)/,c,d={},e=this.geometry,g=0,f=e.morphTargets.length;g<f;g++){var h=e.morphTargets[g].name.match(b);if(h&&1<h.length){var k=h[1];d[k]||(d[k]={start:Infinity,end:-Infinity});h=d[k];g<h.start&&(h.start=g);g>h.end&&(h.end=g);c||(c=k)}}for(k in d)h=d[k],this.createAnimation(k,h.start,h.end,a);this.firstAnimation=c};
THREE.MorphBlendMesh.prototype.setAnimationDirectionForward=function(a){if(a=this.animationsMap[a])a.direction=1,a.directionBackwards=!1};THREE.MorphBlendMesh.prototype.setAnimationDirectionBackward=function(a){if(a=this.animationsMap[a])a.direction=-1,a.directionBackwards=!0};THREE.MorphBlendMesh.prototype.setAnimationFPS=function(a,b){var c=this.animationsMap[a];c&&(c.fps=b,c.duration=(c.end-c.start)/c.fps)};
THREE.MorphBlendMesh.prototype.setAnimationDuration=function(a,b){var c=this.animationsMap[a];c&&(c.duration=b,c.fps=(c.end-c.start)/c.duration)};THREE.MorphBlendMesh.prototype.setAnimationWeight=function(a,b){var c=this.animationsMap[a];c&&(c.weight=b)};THREE.MorphBlendMesh.prototype.setAnimationTime=function(a,b){var c=this.animationsMap[a];c&&(c.time=b)};THREE.MorphBlendMesh.prototype.getAnimationTime=function(a){var b=0;if(a=this.animationsMap[a])b=a.time;return b};
THREE.MorphBlendMesh.prototype.getAnimationDuration=function(a){var b=-1;if(a=this.animationsMap[a])b=a.duration;return b};THREE.MorphBlendMesh.prototype.playAnimation=function(a){var b=this.animationsMap[a];b?(b.time=0,b.active=!0):console.warn("THREE.MorphBlendMesh: animation["+a+"] undefined in .playAnimation()")};THREE.MorphBlendMesh.prototype.stopAnimation=function(a){if(a=this.animationsMap[a])a.active=!1};
THREE.MorphBlendMesh.prototype.update=function(a){for(var b=0,c=this.animationsList.length;b<c;b++){var d=this.animationsList[b];if(d.active){var e=d.duration/d.length;d.time+=d.direction*a;if(d.mirroredLoop){if(d.time>d.duration||0>d.time)d.direction*=-1,d.time>d.duration&&(d.time=d.duration,d.directionBackwards=!0),0>d.time&&(d.time=0,d.directionBackwards=!1)}else d.time%=d.duration,0>d.time&&(d.time+=d.duration);var g=d.startFrame+THREE.Math.clamp(Math.floor(d.time/e),0,d.length-1),f=d.weight;
g!==d.currentFrame&&(this.morphTargetInfluences[d.lastFrame]=0,this.morphTargetInfluences[d.currentFrame]=1*f,this.morphTargetInfluences[g]=0,d.lastFrame=d.currentFrame,d.currentFrame=g);e=d.time%e/e;d.directionBackwards&&(e=1-e);this.morphTargetInfluences[d.currentFrame]=e*f;this.morphTargetInfluences[d.lastFrame]=(1-e)*f}}};
if("function"!==typeof importScripts)var Detector={canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var a=document.createElement("canvas");return!!window.WebGLRenderingContext&&(a.getContext("webgl")||a.getContext("experimental-webgl"))}catch(b){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var a=document.createElement("div");a.id="webgl-error-message";a.style.fontFamily="monospace";a.style.fontSize=
"13px";a.style.fontWeight="normal";a.style.textAlign="center";a.style.background="#fff";a.style.color="#000";a.style.padding="1.5em";a.style.width="400px";a.style.margin="5em auto 0";this.webgl||(a.innerHTML=window.WebGLRenderingContext?'Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br />\nFind out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.':'Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br/>\nFind out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.');
return a},addGetWebGLMessage:function(a){var b,c;a=a||{};b=void 0!==a.parent?a.parent:document.body;a=void 0!==a.id?a.id:"oldie";c=Detector.getWebGLErrorMessage();c.id=a;b.appendChild(c)}};THREE.TypedArrayUtils={};
THREE.TypedArrayUtils.quicksortIP=function(){var a=new Float32Array(4),b=new Float32Array(4);return function(c,d,e,g,f){f=(f||c.length/d)-1;var h=[],k=-1;g=g||0;for(var n=0,l=0,p=0,m=function(a,b){a*=d;b*=d;for(p=0;p<d;p++)n=c[a+p],c[a+p]=c[b+p],c[b+p]=n},q,r;;)if(25>=f-g){for(r=g+1;r<=f;r++){for(l=0;l<d;l++)a[l]=c[r*d+l];for(q=r-1;q>=g&&c[q*d+e]>a[e];){for(l=0;l<d;l++)c[(q+1)*d+l]=c[q*d+l];q--}for(l=0;l<d;l++)c[(q+1)*d+l]=a[l]}if(-1==k)break;f=h[k--];g=h[k--]}else{l=g+f>>1;q=g+1;r=f;m(l,q);c[g*d+
e]>c[f*d+e]&&m(g,f);c[q*d+e]>c[f*d+e]&&m(q,f);c[g*d+e]>c[q*d+e]&&m(g,q);for(l=0;l<d;l++)b[l]=c[q*d+l];for(;;){do q++;while(c[q*d+e]<b[e]);do r--;while(c[r*d+e]>b[e]);if(r<q)break;m(q,r)}for(l=0;l<d;l++)c[(g+1)*d+l]=c[r*d+l],c[r*d+l]=b[l];f-q+1>=r-g?(h[++k]=q,h[++k]=f,f=r-1):(h[++k]=g,h[++k]=r-1,g=q)}return c}}();
THREE.TypedArrayUtils.Kdtree=function(a,b,c,d){function e(b,g,l,p){var m=b%c,q=p-l;b>h&&(h=b);if(0===q)return null;1===q&&new f.Node((0+l)*c,g);m<d&&THREE.TypedArrayUtils.quicksortIP(a,c,m,l,p);m=Math.floor(q/2);g=new f.Node((m+l)*c,g);g.left=e(b+1,g,l,l+m);g.right=e(b+1,g,l+m+1,p);return g}function g(a){return null===a.parent?0:g(a.parent)+1}var f=this,h=0;this.root=e(0,null,0,a.length/c);this.getMaxDepth=function(){return h};this.nearest=function(e,h,l){function p(f){var m;m=g(f)%c;for(var q=[a[f.pos+
0],a[f.pos+1],a[f.pos+2]],t=b(e,q),v=0,z=[],v=0;v<d;v+=1)v===g(f)%c?z[v]=e[v]:z[v]=a[f.pos+v];v=b(z,q);null===f.right&&null===f.left?(r.size()<h||t<r.peek()[1])&&t<l&&(r.push([f,t]),r.size()>h&&r.pop()):(m=null===f.right?f.left:null===f.left?f.right:e[m]<a[f.pos+m]?f.left:f.right,p(m),(r.size()<h||t<r.peek()[1])&&t<=l&&(r.push([f,t]),r.size()>h&&r.pop()),(r.size()<h||Math.abs(v)<r.peek()[1])&&Math.abs(v)<=l&&(f=m===f.left?f.right:f.left,null!==f&&p(f)))}var m,q,r;r=new THREE.TypedArrayUtils.Kdtree.BinaryHeap(function(a){return-a[1]});
p(f.root);q=[];for(m=0;m<Math.min(r.size(),h);m+=1){var t=r.content[m];t&&t[0]&&q.push([t[0],t[1]])}return q}};THREE.TypedArrayUtils.Kdtree.prototype.Node=function(a,b){this.pos=a;this.right=this.left=null;this.parent=b};THREE.TypedArrayUtils.Kdtree.BinaryHeap=function(a){this.content=[];this.scoreFunction=a};
THREE.TypedArrayUtils.Kdtree.BinaryHeap.prototype={push:function(a){this.content.push(a);this.bubbleUp(this.content.length-1)},pop:function(){var a=this.content[0],b=this.content.pop();0<this.content.length&&(this.content[0]=b,this.sinkDown(0));return a},peek:function(){return this.content[0]},remove:function(a){for(var b=this.content.length,c=0;c<b;c++)if(this.content[c]==a){var d=this.content.pop();c!=b-1&&(this.content[c]=d,this.scoreFunction(d)<this.scoreFunction(a)?this.bubbleUp(c):this.sinkDown(c));
return}throw Error("Node not found.");},size:function(){return this.content.length},bubbleUp:function(a){for(var b=this.content[a];0<a;){var c=Math.floor((a+1)/2)-1,d=this.content[c];if(this.scoreFunction(b)<this.scoreFunction(d))this.content[c]=b,this.content[a]=d,a=c;else break}},sinkDown:function(a){for(var b=this.content.length,c=this.content[a],d=this.scoreFunction(c);;){var e=2*(a+1),g=e-1,f=null;if(g<b){var h=this.scoreFunction(this.content[g]);h<d&&(f=g)}e<b&&this.scoreFunction(this.content[e])<
(null===f?d:h)&&(f=e);if(null!==f)this.content[a]=this.content[f],this.content[f]=c,a=f;else break}}};
THREE.TrackballControls=function(a,b){function c(a){!1!==g.enabled&&(window.removeEventListener("keydown",c),n=k,k===f.NONE)&&(a.keyCode!==g.keys[f.ROTATE]||g.noRotate?a.keyCode!==g.keys[f.ZOOM]||g.noZoom?a.keyCode!==g.keys[f.PAN]||g.noPan||(k=f.PAN):k=f.ZOOM:k=f.ROTATE)}function d(a){!1!==g.enabled&&(a.preventDefault(),a.stopPropagation(),k!==f.ROTATE||g.noRotate?k!==f.ZOOM||g.noZoom?k!==f.PAN||g.noPan||C.copy(G(a.pageX,a.pageY)):w.copy(G(a.pageX,a.pageY)):g.cylindricalRotation?(q.copy(r),r.copy(F(a.pageX,
a.pageY))):m.copy(O(a.pageX,a.pageY)))}function e(a){!1!==g.enabled&&(a.preventDefault(),a.stopPropagation(),k=f.NONE,document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",e),g.dispatchEvent(J))}var g=this,f={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4};this.object=a;this.domElement=void 0!==b?b:document;this.enabled=!0;this.screen={left:0,top:0,width:0,height:0};this.rotateSpeed=1;this.zoomSpeed=1.2;this.panSpeed=.3;this.staticMoving=this.noRoll=this.noPan=
this.noZoom=this.noRotate=!1;this.dynamicDampingFactor=.2;this.cylindricalRotation=!0;this.minDistance=0;this.maxDistance=Infinity;this.keys=[65,83,68];this.target=new THREE.Vector3;var h=new THREE.Vector3,k=f.NONE,n=f.NONE,l=new THREE.Vector3,p=new THREE.Vector3,m=new THREE.Vector3,q=new THREE.Vector2,r=new THREE.Vector2,t=new THREE.Vector3,u=0,y=new THREE.Vector2,w=new THREE.Vector2,A=0,v=0,z=new THREE.Vector2,C=new THREE.Vector2;this.target0=this.target.clone();this.position0=this.object.position.clone();
this.up0=this.object.up.clone();var B={type:"change"},x={type:"start"},J={type:"end"};this.handleResize=function(){if(this.domElement===document)this.screen.left=0,this.screen.top=0,this.screen.width=window.innerWidth,this.screen.height=window.innerHeight;else{var a=this.domElement.getBoundingClientRect(),b=this.domElement.ownerDocument.documentElement;this.screen.left=a.left+window.pageXOffset-b.clientLeft;this.screen.top=a.top+window.pageYOffset-b.clientTop;this.screen.width=a.width;this.screen.height=
a.height}};this.handleEvent=function(a){if("function"==typeof this[a.type])this[a.type](a)};var G=function(){var a=new THREE.Vector2;return function(b,c){a.set((b-g.screen.left)/g.screen.width,(c-g.screen.top)/g.screen.height);return a}}(),F=function(){var a=new THREE.Vector2;return function(b,c){a.set((b-.5*g.screen.width-g.screen.left)/(.5*g.screen.width),(.5*g.screen.height+g.screen.top-c)/(.5*g.screen.height)/g.screen.width*g.screen.height);return a}}(),O=function(){var a=new THREE.Vector3,b=
new THREE.Vector3,c=new THREE.Vector3;return function(d,e){c.set((d-.5*g.screen.width-g.screen.left)/(.5*g.screen.width),(.5*g.screen.height+g.screen.top-e)/(.5*g.screen.height),0);var f=c.length();g.noRoll?c.z=f<Math.SQRT1_2?Math.sqrt(1-f*f):.5/f:1<f?c.normalize():c.z=Math.sqrt(1-f*f);l.copy(g.object.position).sub(g.target);a.copy(g.object.up).setLength(c.y);a.add(b.copy(g.object.up).cross(l).setLength(c.x));a.add(l.setLength(c.z));return a}}();this.rotateCamera=function(){var a=new THREE.Vector3,
b=new THREE.Quaternion,c=new THREE.Vector3,d=new THREE.Vector3,e=new THREE.Vector3,f=new THREE.Vector3,h;return function(){if(g.cylindricalRotation)f.set(r.x-q.x,r.y-q.y,0),(h=f.length())?(l.copy(g.object.position).sub(g.target),c.copy(l).normalize(),d.copy(g.object.up).normalize(),e.crossVectors(d,c).normalize(),d.setLength(r.y-q.y),e.setLength(r.x-q.x),f.copy(d.add(e)),a.crossVectors(f,l).normalize(),h*=g.rotateSpeed,b.setFromAxisAngle(a,h),l.applyQuaternion(b),g.object.up.applyQuaternion(b),t.copy(a),
u=h):!g.staticMoving&&u&&(u*=Math.sqrt(1-g.dynamicDampingFactor),l.copy(g.object.position).sub(g.target),b.setFromAxisAngle(t,u),l.applyQuaternion(b),g.object.up.applyQuaternion(b)),q.copy(r);else if(h=Math.acos(p.dot(m)/p.length()/m.length()))a.crossVectors(p,m).normalize(),h*=g.rotateSpeed,b.setFromAxisAngle(a,-h),l.applyQuaternion(b),g.object.up.applyQuaternion(b),m.applyQuaternion(b),g.staticMoving?p.copy(m):(b.setFromAxisAngle(a,h*(g.dynamicDampingFactor-1)),p.applyQuaternion(b))}}();this.zoomCamera=
function(){var a;k===f.TOUCH_ZOOM_PAN?(a=A/v,A=v,l.multiplyScalar(a)):(a=1+(w.y-y.y)*g.zoomSpeed,1!==a&&0<a&&(l.multiplyScalar(a),g.staticMoving?y.copy(w):y.y+=(w.y-y.y)*this.dynamicDampingFactor))};this.panCamera=function(){var a=new THREE.Vector2,b=new THREE.Vector3,c=new THREE.Vector3;return function(){a.copy(C).sub(z);a.lengthSq()&&(a.multiplyScalar(l.length()*g.panSpeed),c.copy(l).cross(g.object.up).setLength(a.x),c.add(b.copy(g.object.up).setLength(a.y)),g.object.position.add(c),g.target.add(c),
g.staticMoving?z.copy(C):z.add(a.subVectors(C,z).multiplyScalar(g.dynamicDampingFactor)))}}();this.checkDistances=function(){g.noZoom&&g.noPan||(l.lengthSq()>g.maxDistance*g.maxDistance&&g.object.position.addVectors(g.target,l.setLength(g.maxDistance)),l.lengthSq()<g.minDistance*g.minDistance&&g.object.position.addVectors(g.target,l.setLength(g.minDistance)))};this.update=function(){l.subVectors(g.object.position,g.target);g.noRotate||g.rotateCamera();g.noZoom||g.zoomCamera();g.noPan||g.panCamera();
g.object.position.addVectors(g.target,l);g.checkDistances();g.object.lookAt(g.target);1E-6<h.distanceToSquared(g.object.position)&&(g.dispatchEvent(B),h.copy(g.object.position))};this.reset=function(){n=k=f.NONE;g.target.copy(g.target0);g.object.position.copy(g.position0);g.object.up.copy(g.up0);l.subVectors(g.object.position,g.target);g.object.lookAt(g.target);g.dispatchEvent(B);h.copy(g.object.position)};this.domElement.addEventListener("contextmenu",function(a){a.preventDefault()},!1);this.domElement.addEventListener("mousedown",
function(a){!1!==g.enabled&&(a.preventDefault(),a.stopPropagation(),k===f.NONE&&(k=a.button),k!==f.ROTATE||g.noRotate?k!==f.ZOOM||g.noZoom?k!==f.PAN||g.noPan||(z.copy(G(a.pageX,a.pageY)),C.copy(z)):(y.copy(G(a.pageX,a.pageY)),w.copy(y)):g.cylindricalRotation?(r.copy(F(a.pageX,a.pageY)),q.copy(r)):(p.copy(O(a.pageX,a.pageY)),m.copy(p)),document.addEventListener("mousemove",d,!1),document.addEventListener("mouseup",e,!1),g.dispatchEvent(x))},!1);this.domElement.addEventListener("wheel",function(a){if(!1!==
g.enabled){a.preventDefault();a.stopPropagation();var b=0;void 0!==a.deltaY&&(b=6*-Math.sign(a.deltaY));y.y+=.01*b;g.dispatchEvent(x);g.dispatchEvent(J)}},!1);this.domElement.addEventListener("touchstart",function(a){if(!1!==g.enabled){switch(a.touches.length){case 1:k=f.TOUCH_ROTATE;g.cylindricalRotation?(r.copy(F(a.touches[0].pageX,a.touches[0].pageY)),q.copy(r)):(p.copy(O(a.touches[0].pageX,a.touches[0].pageY)),m.copy(p));break;case 2:k=f.TOUCH_ZOOM_PAN;var b=a.touches[0].pageX-a.touches[1].pageX,
c=a.touches[0].pageY-a.touches[1].pageY;v=A=Math.sqrt(b*b+c*c);z.copy(G((a.touches[0].pageX+a.touches[1].pageX)/2,(a.touches[0].pageY+a.touches[1].pageY)/2));C.copy(z);break;default:k=f.NONE}g.dispatchEvent(x)}},!1);this.domElement.addEventListener("touchend",function(a){if(!1!==g.enabled){switch(a.touches.length){case 1:g.cylindricalRotation?(q.copy(r),r.copy(F(a.touches[0].pageX,a.touches[0].pageY))):(m.copy(O(a.touches[0].pageX,a.touches[0].pageY)),p.copy(m));break;case 2:A=v=0,C.copy(G((a.touches[0].pageX+
a.touches[1].pageX)/2,(a.touches[0].pageY+a.touches[1].pageY)/2)),z.copy(C)}k=f.NONE;g.dispatchEvent(J)}},!1);this.domElement.addEventListener("touchmove",function(a){if(!1!==g.enabled)switch(a.preventDefault(),a.stopPropagation(),a.touches.length){case 1:g.cylindricalRotation?(q.copy(r),r.copy(F(a.touches[0].pageX,a.touches[0].pageY))):m.copy(O(a.touches[0].pageX,a.touches[0].pageY));break;case 2:var b=a.touches[0].pageX-a.touches[1].pageX,c=a.touches[0].pageY-a.touches[1].pageY;v=Math.sqrt(b*b+
c*c);C.copy(G((a.touches[0].pageX+a.touches[1].pageX)/2,(a.touches[0].pageY+a.touches[1].pageY)/2));break;default:k=f.NONE}},!1);window.addEventListener("keydown",c,!1);window.addEventListener("keyup",function(a){!1!==g.enabled&&(k=n,window.addEventListener("keydown",c,!1))},!1);this.handleResize();this.update()};THREE.TrackballControls.prototype=Object.create(THREE.EventDispatcher.prototype);THREE.TrackballControls.prototype.constructor=THREE.TrackballControls;
THREE.OBJLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.OBJLoader.prototype={constructor:THREE.OBJLoader,load:function(a,b,c,d){var e=this,g=new THREE.XHRLoader(e.manager);g.setCrossOrigin(this.crossOrigin);g.load(a,function(a){b(e.parse(a))},c,d)},parse:function(a){function b(a){a=parseInt(a);return 3*(0<=a?a-1:a+m.length/3)}function c(a){a=parseInt(a);return 3*(0<=a?a-1:a+q.length/3)}function d(a){a=parseInt(a);return 2*(0<=a?a-1:a+r.length/2)}function e(a,b,c){l.vertices.push(m[a],m[a+1],m[a+2],m[b],m[b+1],m[b+2],m[c],m[c+1],m[c+2])}function g(a,
b,c){l.normals.push(q[a],q[a+1],q[a+2],q[b],q[b+1],q[b+2],q[c],q[c+1],q[c+2])}function f(a,b,c){l.uvs.push(r[a],r[a+1],r[b],r[b+1],r[c],r[c+1])}function h(a,h,k,l,n,m,p,q,r,t,u,v){a=b(a);h=b(h);k=b(k);var w;void 0===l?e(a,h,k):(w=b(l),e(a,h,w),e(h,k,w));void 0!==n&&(a=d(n),h=d(m),k=d(p),void 0===l?f(a,h,k):(w=d(q),f(a,h,w),f(h,k,w)));void 0!==r&&(a=c(r),h=c(t),k=c(u),void 0===l?g(a,h,k):(w=c(v),g(a,h,w),g(h,k,w)))}console.time("OBJLoader");var k,n=[],l,p;!1===/^o /gm.test(a)&&(l={vertices:[],normals:[],
uvs:[]},p={name:""},k={name:"",geometry:l,material:p},n.push(k));var m=[],q=[],r=[],t=/v( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,u=/vn( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,y=/vt( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,w=/f( +-?\d+)( +-?\d+)( +-?\d+)( +-?\d+)?/,A=/f( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))?/,v=/f( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))?/,
z=/f( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))?/,C=a.split("\n");for(a=0;a<C.length;a++){k=C[a];k=k.trim();var B;0!==k.length&&"#"!==k.charAt(0)&&(null!==(B=t.exec(k))?m.push(parseFloat(B[1]),parseFloat(B[2]),parseFloat(B[3])):null!==(B=u.exec(k))?q.push(parseFloat(B[1]),parseFloat(B[2]),parseFloat(B[3])):null!==(B=y.exec(k))?r.push(parseFloat(B[1]),parseFloat(B[2])):null!==(B=w.exec(k))?h(B[1],B[2],B[3],B[4]):null!==(B=A.exec(k))?h(B[2],B[5],B[8],B[11],
B[3],B[6],B[9],B[12]):null!==(B=v.exec(k))?h(B[2],B[6],B[10],B[14],B[3],B[7],B[11],B[15],B[4],B[8],B[12],B[16]):null!==(B=z.exec(k))?h(B[2],B[5],B[8],B[11],void 0,void 0,void 0,void 0,B[3],B[6],B[9],B[12]):/^o /.test(k)?(l={vertices:[],normals:[],uvs:[]},p={name:""},k={name:k.substring(2).trim(),geometry:l,material:p},n.push(k)):/^g /.test(k)||(/^usemtl /.test(k)?p.name=k.substring(7).trim():/^mtllib /.test(k)||/^s /.test(k)))}t=new THREE.Object3D;a=0;for(u=n.length;a<u;a++)k=n[a],l=k.geometry,y=
new THREE.BufferGeometry,y.addAttribute("position",new THREE.BufferAttribute(new Float32Array(l.vertices),3)),0<l.normals.length&&y.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(l.normals),3)),0<l.uvs.length&&y.addAttribute("uv",new THREE.BufferAttribute(new Float32Array(l.uvs),2)),p=new THREE.MeshLambertMaterial,p.name=k.material.name,p=new THREE.Mesh(y,p),p.name=k.name,t.add(p);console.timeEnd("OBJLoader");return t}};THREE.PLYLoader=function(){this.propertyNameMapping={}};
THREE.PLYLoader.prototype={constructor:THREE.PLYLoader,setPropertyNameMapping:function(a){this.propertyNameMapping=a},load:function(a,b){var c=this,d=new XMLHttpRequest;d.addEventListener("load",function(a){a=c.parse(a.target.response);c.dispatchEvent({type:"load",content:a});b&&b(a)},!1);d.addEventListener("progress",function(a){c.dispatchEvent({type:"progress",loaded:a.loaded,total:a.total})},!1);d.addEventListener("error",function(){c.dispatchEvent({type:"error",message:"Couldn't load URL ["+a+
"]"})},!1);d.open("GET",a,!0);d.responseType="arraybuffer";d.send(null)},bin2str:function(a){for(var b=new Uint8Array(a),c="",d=0;d<a.byteLength;d++)c+=String.fromCharCode(b[d]);return c},isASCII:function(a){return"ascii"===this.parseHeader(this.bin2str(a)).format},parse:function(a){return a instanceof ArrayBuffer?this.isASCII(a)?this.parseASCII(this.bin2str(a)):this.parseBinary(a):this.parseASCII(a)},parseHeader:function(a){function b(a,b){var c={type:a[0]};"list"===c.type?(c.name=a[3],c.countType=
a[1],c.itemType=a[2]):c.name=a[1];c.name in b&&(c.name=b[c.name]);return c}var c="",d=0;a=/ply([\s\S]*)end_header\s/.exec(a);null!==a&&(c=a[1],d=a[0].length);d={comments:[],elements:[],headerLength:d};c=c.split("\n");a=void 0;for(var e,g,f=0;f<c.length;f++){var h=c[f],h=h.trim();if(""!==h)switch(g=h.split(/\s+/),e=g.shift(),h=g.join(" "),e){case "format":d.format=g[0];d.version=g[1];break;case "comment":d.comments.push(h);break;case "element":void 0!==a&&d.elements.push(a);a={};a.name=g[0];a.count=
parseInt(g[1]);a.properties=[];break;case "property":a.properties.push(b(g,this.propertyNameMapping));break;default:console.log("unhandled",e,g)}}void 0!==a&&d.elements.push(a);return d},parseASCIINumber:function(a,b){switch(b){case "char":case "uchar":case "short":case "ushort":case "int":case "uint":case "int8":case "uint8":case "int16":case "uint16":case "int32":case "uint32":return parseInt(a);case "float":case "double":case "float32":case "float64":return parseFloat(a)}},parseASCIIElement:function(a,
b){for(var c=b.split(/\s+/),d={},e=0;e<a.length;e++)if("list"===a[e].type){for(var g=[],f=this.parseASCIINumber(c.shift(),a[e].countType),h=0;h<f;h++)g.push(this.parseASCIINumber(c.shift(),a[e].itemType));d[a[e].name]=g}else d[a[e].name]=this.parseASCIINumber(c.shift(),a[e].type);return d},parseASCII:function(a){var b=new THREE.Geometry,c,d=this.parseHeader(a),e="";null!==(c=/end_header\s([\s\S]*)$/.exec(a))&&(e=c[1]);a=e.split("\n");e=c=0;b.useColor=!1;for(var g=0;g<a.length;g++){var f=a[g],f=f.trim();
""!==f&&(e>=d.elements[c].count&&(c++,e=0),f=this.parseASCIIElement(d.elements[c].properties,f),this.handleElement(b,d.elements[c].name,f),e++)}return this.postProcess(b)},postProcess:function(a){if(a.useColor){for(var b=0;b<a.faces.length;b++)a.faces[b].vertexColors=[a.colors[a.faces[b].a],a.colors[a.faces[b].b],a.colors[a.faces[b].c]];a.elementsNeedUpdate=!0}a.computeBoundingSphere();return a},handleElement:function(a,b,c){"vertex"===b?(a.vertices.push(new THREE.Vector3(c.x,c.y,c.z)),"red"in c&&
"green"in c&&"blue"in c&&(a.useColor=!0,b=new THREE.Color,b.setRGB(c.red/255,c.green/255,c.blue/255),a.colors.push(b))):"face"===b&&(c=c.vertex_indices,3===c.length?a.faces.push(new THREE.Face3(c[0],c[1],c[2])):4===c.length&&a.faces.push(new THREE.Face3(c[0],c[1],c[3]),new THREE.Face3(c[1],c[2],c[3])))},binaryRead:function(a,b,c,d){switch(c){case "int8":case "char":return[a.getInt8(b),1];case "uint8":case "uchar":return[a.getUint8(b),1];case "int16":case "short":return[a.getInt16(b,d),2];case "uint16":case "ushort":return[a.getUint16(b,
d),2];case "int32":case "int":return[a.getInt32(b,d),4];case "uint32":case "uint":return[a.getUint32(b,d),4];case "float32":case "float":return[a.getFloat32(b,d),4];case "float64":case "double":return[a.getFloat64(b,d),8]}},binaryReadElement:function(a,b,c,d){for(var e={},g,f=0,h=0;h<c.length;h++)if("list"===c[h].type){var k=[];g=this.binaryRead(a,b+f,c[h].countType,d);for(var n=g[0],f=f+g[1],l=0;l<n;l++)g=this.binaryRead(a,b+f,c[h].itemType,d),k.push(g[0]),f+=g[1];e[c[h].name]=k}else g=this.binaryRead(a,
b+f,c[h].type,d),e[c[h].name]=g[0],f+=g[1];return[e,f]},parseBinary:function(a){var b=new THREE.Geometry,c=this.parseHeader(this.bin2str(a)),d="binary_little_endian"===c.format;a=new DataView(a,c.headerLength);for(var e,g=0,f=0;f<c.elements.length;f++)for(var h=0;h<c.elements[f].count;h++)e=this.binaryReadElement(a,g,c.elements[f].properties,d),g+=e[1],this.handleElement(b,c.elements[f].name,e[0]);return this.postProcess(b)}};THREE.EventDispatcher.prototype.apply(THREE.PLYLoader.prototype);

// File:js/build/ngl.min.js

// https://github.com/arose/ngl/ LICENSE
(function(a){a.console=a.console||{};a=a.console;for(var b,c={},d=function(){},e=["memory"],f="assert clear count debug dir dirxml error exception group groupCollapsed groupEnd info log markTimeline profile profiles profileEnd show table time timeEnd timeline timelineEnd timeStamp trace warn".split(" ");b=e.pop();)a[b]||(a[b]=c);for(;b=f.pop();)a[b]||(a[b]=d)})("undefined"===typeof window?this:window);
"function"===typeof importScripts||HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(a,b,c){c=window.atob(this.toDataURL(b,c).split(",")[1]);for(var d=c.length,e=d>>2,f=new Uint8Array(d),g=new Uint32Array(f.buffer,0,e),h=0,k=0;h<e;h++)g[h]=c.charCodeAt(k++)|c.charCodeAt(k++)<<8|c.charCodeAt(k++)<<16|c.charCodeAt(k++)<<24;for(d&=3;d--;)f[k]=c.charCodeAt(k++);a(new Blob([f],{type:b||"image/png"}))}});
Number.isInteger||(Number.isInteger=function(a){return"number"===typeof a&&isFinite(a)&&-9007199254740992<a&&9007199254740992>a&&Math.floor(a)===a});Number.isNaN||(Number.isNaN=function(a){return a!==a});
Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(a,b){if(void 0===a||null===a)throw new TypeError("Cannot convert first argument to object");for(var c=Object(a),d=!1,e,f=1;f<arguments.length;f++){var g=arguments[f];if(void 0!==g&&null!==g){for(var h=Object.keys(Object(g)),k=0,l=h.length;k<l;k++){var m=h[k];try{var n=Object.getOwnPropertyDescriptor(g,m);void 0!==n&&n.enumerable&&(c[m]=g[m])}catch(q){d||(d=!0,e=q)}}if(d)throw e;}}return c}});
"function"!==typeof importScripts&&function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b,c){var f=(new Date).getTime(),g=Math.max(0,16-(f-a)),h=window.setTimeout(function(){b(f+g)},g);a=f+g;return h});window.cancelAnimationFrame||
(window.cancelAnimationFrame=function(a){clearTimeout(a)})}();void 0===Function.prototype.name&&void 0!==Object.defineProperty&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*(\S*)\s*\(/)[1]}});"function"!==typeof importScripts&&(HTMLElement.prototype.getBoundingClientRect=function(){var a=HTMLElement.prototype.getBoundingClientRect;return function(){try{return a.apply(this,arguments)}catch(b){return{top:0,left:0,width:this.width,height:this.height}}}}());
var NGL={REVISION:"0.6dev",EPS:1E-7,disableImpostor:!1,useWorker:!0,indexUint16:!1,debug:!1,develop:-1!==self.location.pathname.indexOf("core.js")||-1!==self.location.pathname.indexOf("dev.html"),mainScriptFilePath:"../js/build/ngl.full.min.js",dataProtocolRelativePath:"../data/",fileProtocolRelativePath:"../file/"};NGL.log=Function.prototype.bind.call(console.log,console);NGL.info=Function.prototype.bind.call(console.info,console);NGL.warn=Function.prototype.bind.call(console.warn,console);
NGL.error=Function.prototype.bind.call(console.error,console);NGL.time=Function.prototype.bind.call(console.time,console);NGL.timeEnd=Function.prototype.bind.call(console.timeEnd,console);NGL.LeftMouseButton=1;NGL.MiddleMouseButton=2;NGL.RightMouseButton=3;
NGL.browser=function(){var a=navigator.userAgent;return/Arora/i.test(a)?"Arora":/Opera|OPR/.test(a)?"Opera":/Chrome/i.test(a)?"Chrome":/Epiphany/i.test(a)?"Epiphany":/Firefox/i.test(a)?"Firefox":/Mobile(\/.*)? Safari/i.test(a)?"Mobile Safari":/MSIE/i.test(a)?"Internet Explorer":/Midori/i.test(a)?"Midori":/Safari/i.test(a)?"Safari":!1}();NGL.GET=function(a){if(a=(new RegExp(a+"=([^&#=]*)")).exec(window.location.search))return decodeURIComponent(a[1])};
NGL.getAbsolutePath=function(a){var b=window.location,c=b.pathname,c=c.substring(0,c.lastIndexOf("/")+1);return b.origin+c+a};NGL.createObject=function(a,b){var c=Object.create(a),d;for(d in b)b.hasOwnProperty(d)&&(c[d]=b[d]);return c};NGL.deepCopy=function(a){if("object"!==typeof a)return a;var b=Array.isArray(a)?[]:{},c;for(c in a)b[c]=NGL.deepCopy(a[c]);return b};
NGL.download=function(a,b){if(a){b=b||"download";var c=document.createElement("a");c.style.display="hidden";document.body.appendChild(c);c.href=a instanceof Blob?URL.createObjectURL(a):a;c.download=b;c.target="_blank";c.click();document.body.removeChild(c);a instanceof Blob&&URL.revokeObjectURL(a)}else NGL.warn("NGL.download: no data given")};
NGL.open=function(a,b){b=b||["*"];var c=document.createElement("input");c.type="file";c.multiple=!0;c.style.display="hidden";document.body.appendChild(c);c.accept="."+b.join(",.");c.addEventListener("change",function(b){a(b.target.files)},!1);c.click()};NGL.unicodeHelper=function(){var a={"{alpha}":"\u03b1","{beta}":"\u03b2","{gamma}":"\u03b3","{dot}":"\u00b7","{bullet}":"\u2022"},b=Object.keys(a).join("|"),c=new RegExp("("+b+")","gi");return function(b){return b.replace(c,function(b,c,d,h,k){return a[String(b)]})}}();
NGL.getFileInfo=function(a){var b,c;a=a instanceof File?a.name:a;var d=a.replace(/^.*[\\\/]/,""),e=d.substring(0,d.lastIndexOf(".")),f=a.split(".").pop().toLowerCase();if(b=a.match(/^(.+):\/\/(.+)$/))c=b[1].toLowerCase(),a=b[2];-1!==["gz","zip","lzma","bz2"].indexOf(f)?(b=f,f=a.substr(0,a.length-f.length-1).split(".").pop().toLowerCase(),e=e.substr(0,e.length-f.length-1)):b=!1;return{path:a,name:d,ext:f,base:e,compressed:b,protocol:c}};NGL.fromJSON=function(a){return(new NGL[a.metadata.type]).fromJSON(a)};
NGL.processArray=function(a,b,c,d){var e=a.length;if("function"===typeof importScripts)b(0,e,a),c();else{var f=0,g=void 0!==d?d:1E4,h=Math.min(g,e);async.until(function(){return f>=e},function(c){requestAnimationFrame(function(){b(f,h,a)?f=e:(f+=g,h=Math.min(h+g,e));c()})},c)}};NGL.Uint8ToString=function(a){for(var b=[],c=0;c<a.length;c+=4096)b.push(String.fromCharCode.apply(null,a.subarray(c,c+4096)));return b.join("")};
NGL.Uint8ToLines=function(a,b,c){NGL.time("NGL.Uint8ToLines");b=void 0!==b?b:10485760;c=void 0!==c?c:"\n";for(var d="",e=[],f=0;f<a.length;f+=b){var g=NGL.Uint8ToString(a.subarray(f,f+b)),h=g.lastIndexOf(c);-1===h?d+=g:(d+=g.substr(0,h),e=e.concat(d.split(c)),d=h===g.length-c.length?"":g.substr(h+c.length))}""!==d&&e.push(d);NGL.timeEnd("NGL.Uint8ToLines");return e};
NGL.Worker={funcDict:{},add:function(a,b){NGL.Worker.funcDict[a]=b},make:function(a,b){b=b||{};var c;c=NGL.develop?new Worker("../js/ngl/core.js"):new Worker(NGL.mainScriptFilePath);c.onerror=b.onerror;c.onmessage=b.onmessage;var d=c.postMessage;c.postMessage=function(b,f){void 0!==b&&(b.__name__=a);d.call(c,b,f)};void 0!==b.messageData&&c.postMessage.apply(c,b.messageData);return c}};
"function"===typeof importScripts&&(NGL.develop&&importScripts("../three/three.js","../three/Detector.js","../three/TypedArrayUtils.js","../three/controls/TrackballControls.js","../three/loaders/OBJLoader.js","../three/loaders/PLYLoader.js","../lib/async.js","../lib/promise-6.0.0.min.js","../lib/sprintf.min.js","../lib/jszip.min.js","../lib/pako.min.js","../lib/lzma.min.js","../lib/bzip2.min.js","../lib/chroma.min.js","../lib/svd.js","../lib/signals.min.js","../ngl/symmetry.js","../ngl/geometry.js",
"../ngl/structure.js","../ngl/trajectory.js","../ngl/surface.js","../ngl/script.js","../ngl/streamer.js","../ngl/parser.js","../ngl/loader.js","../ngl/viewer.js","../ngl/buffer.js","../ngl/representation.js","../ngl/stage.js"),onmessage=function(a){if(void 0===a.data.__name__)NGL.error("message __name__ undefined");else if(void 0===NGL.Worker.funcDict[a.data.__name__])NGL.error("funcDict __name__ undefined");else NGL.Worker.funcDict[a.data.__name__](a)});
NGL.decompress=function(a,b,c,d){var e,f;b=NGL.getFileInfo(b).compressed;NGL.time("NGL.decompress "+b);a instanceof ArrayBuffer&&(a=new Uint8Array(a));"gz"===b?e=pako.ungzip(a):"zip"===b?(a=new JSZip(a),e=Object.keys(a.files)[0],e=a.files[e].asUint8Array()):"lzma"===b?(e={data:[],offset:0,writeByte:function(a){this.data[this.offset++]=a}},LZMA.decompressFile({data:a,offset:0,readByte:function(){return this.data[this.offset++]}},e),e=new Uint8Array(e.data)):"bz2"===b?(f=bzip2.array(a),f=bzip2.simple(f)):
(NGL.warn("no decompression method available for '"+b+"'"),f=a);c||void 0!==f||(f=NGL.Uint8ToString(e));NGL.timeEnd("NGL.decompress "+b);c=c?e:f;"function"===typeof d&&d(c);return c};NGL.Worker.add("decompress",function(a){a=a.data;var b=NGL.decompress(a.data,a.file,a.asBinary),c=[];a.asBinary&&c.push(b.buffer);self.postMessage(b,c)});
NGL.decompressWorker=function(a,b,c,d){if(NGL.useWorker&&"undefined"!==typeof Worker&&"function"!==typeof importScripts){NGL.time("NGL.decompressWorker");var e=NGL.Worker.make("decompress",{onerror:function(f){console.warn("NGL.decompressWorker error - trying without worker",f);e.terminate();NGL.decompress(a,b,c,d)},onmessage:function(a){NGL.timeEnd("NGL.decompressWorker");e.terminate();d(a.data)},messageData:[{data:a,file:b,asBinary:c},[a.buffer?a.buffer:a]]})}else NGL.decompress(a,b,c,d)};
NGL.Counter=function(){var a=signals;this.count=0;this.signals={countChanged:new a.Signal}};
NGL.Counter.prototype={clear:function(){this.change(-this.count)},change:function(a){this.count+=a;this.signals.countChanged.dispatch(a,this.count);0>this.count&&NGL.warn("NGL.Counter.count below zero",this.count)},increment:function(){this.change(1)},decrement:function(){this.change(-1)},listen:function(a){this.change(a.count);a.signals.countChanged.add(function(a,c){this.change(a)}.bind(this))},onZeroOnce:function(a,b){if(0===this.count)a.call(b,0,0);else{var c=function(){0===this.count&&(this.signals.countChanged.remove(c,
this),a.apply(b,arguments))};this.signals.countChanged.add(c,this)}},dispose:function(){this.clear()}};
NGL.Unitcell=function(a,b,c,d,e,f,g,h){this.a=a||1;this.b=b||1;this.c=c||1;this.alpha=d||90;this.beta=e||90;this.gamma=f||90;this.spacegroup=g||"P 1";d=THREE.Math.degToRad(this.alpha);f=THREE.Math.degToRad(this.beta);e=THREE.Math.degToRad(this.gamma);c=Math.cos(d);a=Math.cos(f);b=Math.cos(e);Math.sin(d);d=Math.sin(f);e=Math.sin(e);this.volume=this.a*this.b*this.c*Math.sqrt(1-c*c-a*a-b*b+2*c*a*b);this.cartToFrac=h;void 0===this.cartToFrac&&(h=this.a*this.b*e/this.volume,c=(a*b-c)/(d*e),this.cartToFrac=
(new THREE.Matrix4).set(this.a,0,0,0,this.b*b,this.b*e,0,0,this.c*a,-this.c*d*c,1/h,0,0,0,0,1));this.fracToCart=(new THREE.Matrix4).getInverse(this.cartToFrac)};
NGL.Unitcell.prototype={toJSON:function(){return{metadata:{version:.1,type:"Unitcell",generator:"UnitcellExporter"},a:this.a,b:this.b,c:this.c,alpha:this.alpha,beta:this.beta,gamma:this.gamma,spacegroup:this.spacegroup,volume:this.volume,cartToFrac:this.cartToFrac.toArray(),fracToCart:this.fracToCart.toArray()}},fromJSON:function(a){this.a=a.a;this.b=a.b;this.c=a.c;this.alpha=a.alpha;this.beta=a.beta;this.gamma=a.gamma;this.spacegroup=a.spacegroup;this.volume=a.volume;this.cartToFrac.fromArray(a.cartToFrac);
this.fracToCart.fromArray(a.fracToCart);return this}};
NGL.getSymmetryOperations=function(a){var b=NGL.SymOp[a],c={};if(void 0===b)return console.warn("NGL.getSymmetryOperations: spacegroup '"+a+"' not found in symop library"),c;var d=/^[1-9]$/;b.forEach(function(a){var b=a.split(","),g=0,h=(new THREE.Matrix4).set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1),k=h.elements;c[a]=h;b.forEach(function(a){for(var b=!1,c=!1,e=0,f=a.length;e<f;++e){var h=a[e];"-"===h?b=!0:"+"===h?b=!1:"/"===h?c=!0:"X"===h?k[0+g]=b?-1:1:"Y"===h?k[4+g]=b?-1:1:"Z"===h?k[8+g]=b?-1:1:d.test(h)?
(h=parseInt(h),k[12+g]=c?k[12+g]/h:h):NGL.warn("NGL.getSymmetryOperations: unknown token '"+h+"'")}g+=1})});return c};
NGL.SymOp={"P 1":["X,Y,Z"],"P -1":["X,Y,Z","-X,-Y,-Z"],"P 1 2 1":["X,Y,Z","-X,Y,-Z"],"P 1 21 1":["X,Y,Z","-X,Y+1/2,-Z"],"C 1 2 1":["X,Y,Z","-X,Y,-Z","1/2+X,1/2+Y,Z","1/2-X,1/2+Y,-Z"],"P 1 m 1":["X,Y,Z","X,-Y,Z"],"P 1 c 1":["X,Y,Z","X,-Y,1/2+Z"],"C 1 m 1":["X,Y,Z","X,-Y,Z","1/2+X,1/2+Y,Z","1/2+X,1/2-Y,Z"],"C 1 c 1":["X,Y,Z","X,-Y,1/2+Z","1/2+X,1/2+Y,Z","1/2+X,1/2-Y,1/2+Z"],"P 1 2/m 1":["X,Y,Z","X,-Y,Z","-X,Y,-Z","-X,-Y,-Z"],"P 1 21/m 1":["X,Y,Z","-X,1/2+Y,-Z","-X,-Y,-Z","X,1/2-Y,Z"],"C 1 2/m 1":"X,Y,Z X,-Y,Z -X,Y,-Z -X,-Y,-Z 1/2+X,1/2+Y,Z 1/2+X,1/2-Y,Z 1/2-X,1/2+Y,-Z 1/2-X,1/2-Y,-Z".split(" "),
"P 1 2/c 1":["X,Y,Z","-X,Y,1/2-Z","-X,-Y,-Z","X,-Y,1/2+Z"],"P 1 21/c 1":["X,Y,Z","-X,-Y,-Z","-X,1/2+Y,1/2-Z","X,1/2-Y,1/2+Z"],"C 1 2/c 1":"X,Y,Z -X,Y,1/2-Z -X,-Y,-Z X,-Y,1/2+Z 1/2+X,1/2+Y,Z 1/2-X,1/2+Y,1/2-Z 1/2-X,1/2-Y,-Z 1/2+X,1/2-Y,1/2+Z".split(" "),"P 2 2 2":["X,Y,Z","-X,-Y,Z","-X,Y,-Z","X,-Y,-Z"],"P 2 2 21":["X,Y,Z","-X,-Y,1/2+Z","-X,Y,1/2-Z","X,-Y,-Z"],"P 21 21 2":["X,Y,Z","-X,-Y,Z","1/2-X,1/2+Y,-Z","1/2+X,1/2-Y,-Z"],"P 21 21 21":["X,Y,Z","1/2-X,-Y,1/2+Z","-X,1/2+Y,1/2-Z","1/2+X,1/2-Y,-Z"],
"C 2 2 21":"X,Y,Z -X,-Y,1/2+Z -X,Y,1/2-Z X,-Y,-Z 1/2+X,1/2+Y,Z 1/2-X,1/2-Y,1/2+Z 1/2-X,1/2+Y,1/2-Z 1/2+X,1/2-Y,-Z".split(" "),"C 2 2 2":"X,Y,Z -X,-Y,Z -X,Y,-Z X,-Y,-Z 1/2+X,1/2+Y,Z 1/2-X,1/2-Y,Z 1/2-X,1/2+Y,-Z 1/2+X,1/2-Y,-Z".split(" "),"F 2 2 2":"X,Y,Z -X,-Y,Z -X,Y,-Z X,-Y,-Z X,1/2+Y,1/2+Z -X,1/2-Y,1/2+Z -X,1/2+Y,1/2-Z X,1/2-Y,1/2-Z 1/2+X,Y,1/2+Z 1/2-X,-Y,1/2+Z 1/2-X,Y,1/2-Z 1/2+X,-Y,1/2-Z 1/2+X,1/2+Y,Z 1/2-X,1/2-Y,Z 1/2-X,1/2+Y,-Z 1/2+X,1/2-Y,-Z".split(" "),"I 2 2 2":"X,Y,Z -X,-Y,Z X,-Y,-Z -X,Y,-Z X+1/2,Y+1/2,Z+1/2 -X+1/2,-Y+1/2,Z+1/2 X+1/2,-Y+1/2,-Z+1/2 -X+1/2,Y+1/2,-Z+1/2".split(" "),
"I 21 21 21":"X,Y,Z 1/2-X,-Y,1/2+Z -X,1/2+Y,1/2-Z 1/2+X,1/2-Y,-Z 1/2+X,1/2+Y,1/2+Z -X,1/2-Y,Z 1/2-X,Y,-Z X,-Y,1/2-Z".split(" "),"P m m 2":["X,Y,Z","-X,-Y,Z","X,-Y,Z","-X,Y,Z"],"P m c 21":["X,Y,Z","-X,-Y,1/2+Z","X,-Y,1/2+Z","-X,Y,Z"],"P c c 2":["X,Y,Z","-X,-Y,Z","X,-Y,1/2+Z","-X,Y,1/2+Z"],"P m a 2":["X,Y,Z","-X,-Y,Z","1/2+X,-Y,Z","1/2-X,Y,Z"],"P c a 21":["X,Y,Z","-X,-Y,1/2+Z","1/2+X,-Y,Z","1/2-X,Y,1/2+Z"],"P n c 2":["X,Y,Z","-X,-Y,Z","X,1/2-Y,1/2+Z","-X,1/2+Y,1/2+Z"],"P m n 21":["X,Y,Z","1/2-X,-Y,1/2+Z",
"1/2+X,-Y,1/2+Z","-X,Y,Z"],"P b a 2":["X,Y,Z","-X,-Y,Z","1/2+X,1/2-Y,Z","1/2-X,1/2+Y,Z"],"P n a 21":["X,Y,Z","-X,-Y,1/2+Z","1/2+X,1/2-Y,Z","1/2-X,1/2+Y,1/2+Z"],"P n n 2":["X,Y,Z","-X,-Y,Z","1/2+X,1/2-Y,1/2+Z","1/2-X,1/2+Y,1/2+Z"],"C m m 2":"X,Y,Z -X,-Y,Z X,-Y,Z -X,Y,Z 1/2+X,1/2+Y,Z 1/2-X,1/2-Y,Z 1/2+X,1/2-Y,Z 1/2-X,1/2+Y,Z".split(" "),"C m c 21":"X,Y,Z -X,-Y,1/2+Z X,-Y,1/2+Z -X,Y,Z 1/2+X,1/2+Y,Z 1/2-X,1/2-Y,1/2+Z 1/2+X,1/2-Y,1/2+Z 1/2-X,1/2+Y,Z".split(" "),"C c c 2":"X,Y,Z -X,-Y,Z X,-Y,1/2+Z -X,Y,1/2+Z 1/2+X,1/2+Y,Z 1/2-X,1/2-Y,Z 1/2+X,1/2-Y,1/2+Z 1/2-X,1/2+Y,1/2+Z".split(" "),
"A m m 2":"X,Y,Z -X,-Y,Z X,-Y,Z -X,Y,Z X,1/2+Y,1/2+Z -X,1/2-Y,1/2+Z X,1/2-Y,1/2+Z -X,1/2+Y,1/2+Z".split(" "),"A b m 2":"X,Y,Z -X,-Y,Z X,1/2-Y,Z -X,1/2+Y,Z X,1/2+Y,1/2+Z -X,1/2-Y,1/2+Z X,-Y,1/2+Z -X,Y,1/2+Z".split(" "),"A m a 2":"X,Y,Z -X,-Y,Z 1/2+X,-Y,Z 1/2-X,Y,Z X,1/2+Y,1/2+Z -X,1/2-Y,1/2+Z 1/2+X,1/2-Y,1/2+Z 1/2-X,1/2+Y,1/2+Z".split(" "),"A b a 2":"X,Y,Z -X,-Y,Z 1/2+X,1/2-Y,Z 1/2-X,1/2+Y,Z X,1/2+Y,1/2+Z -X,1/2-Y,1/2+Z 1/2+X,-Y,1/2+Z 1/2-X,Y,1/2+Z".split(" "),"F m m 2":"X,Y,Z -X,-Y,Z X,-Y,Z -X,Y,Z X,1/2+Y,1/2+Z -X,1/2-Y,1/2+Z X,1/2-Y,1/2+Z -X,1/2+Y,1/2+Z 1/2+X,Y,1/2+Z 1/2-X,-Y,1/2+Z 1/2+X,-Y,1/2+Z 1/2-X,Y,1/2+Z 1/2+X,1/2+Y,Z 1/2-X,1/2-Y,Z 1/2+X,1/2-Y,Z 1/2-X,1/2+Y,Z".split(" "),
"F d d 2":"X,Y,Z -X,-Y,Z 1/4+X,1/4-Y,1/4+Z 1/4-X,1/4+Y,1/4+Z X,1/2+Y,1/2+Z -X,1/2-Y,1/2+Z 1/4+X,3/4-Y,3/4+Z 1/4-X,3/4+Y,3/4+Z 1/2+X,Y,1/2+Z 1/2-X,-Y,1/2+Z 3/4+X,1/4-Y,3/4+Z 3/4-X,1/4+Y,3/4+Z 1/2+X,1/2+Y,Z 1/2-X,1/2-Y,Z 3/4+X,3/4-Y,1/4+Z 3/4-X,3/4+Y,1/4+Z".split(" "),"I m m 2":"X,Y,Z -X,-Y,Z X,-Y,Z -X,Y,Z 1/2+X,1/2+Y,1/2+Z 1/2-X,1/2-Y,1/2+Z 1/2+X,1/2-Y,1/2+Z 1/2-X,1/2+Y,1/2+Z".split(" "),"I b a 2":"X,Y,Z -X,-Y,Z 1/2+X,1/2-Y,Z 1/2-X,1/2+Y,Z 1/2+X,1/2+Y,1/2+Z 1/2-X,1/2-Y,1/2+Z X,-Y,1/2+Z -X,Y,1/2+Z".split(" "),
"I m a 2":"X,Y,Z -X,-Y,Z 1/2+X,-Y,Z 1/2-X,Y,Z 1/2+X,1/2+Y,1/2+Z 1/2-X,1/2-Y,1/2+Z X,1/2-Y,1/2+Z -X,1/2+Y,1/2+Z".split(" "),"P 2/m 2/m 2/m":"X,Y,Z -X,-Y,Z -X,Y,-Z X,-Y,-Z -X,-Y,-Z X,Y,-Z X,-Y,Z -X,Y,Z".split(" "),"P 2/n 2/n 2/n":"X,Y,Z -X,-Y,Z -X,Y,-Z X,-Y,-Z 1/2-X,1/2-Y,1/2-Z 1/2+X,1/2+Y,1/2-Z 1/2+X,1/2-Y,1/2+Z 1/2-X,1/2+Y,1/2+Z".split(" "),"P 2/c 2/c 2/m":"X,Y,Z -X,-Y,Z -X,Y,1/2-Z X,-Y,1/2-Z -X,-Y,-Z X,Y,-Z X,-Y,1/2+Z -X,Y,1/2+Z".split(" "),"P 2/b 2/a 2/n":"X,Y,Z -X,-Y,Z -X,Y,-Z X,-Y,-Z 1/2-X,1/2-Y,-Z 1/2+X,1/2+Y,-Z 1/2+X,1/2-Y,Z 1/2-X,1/2+Y,Z".split(" "),
"P 21/m 2/m 2/a":"X,Y,Z 1/2-X,-Y,Z -X,Y,-Z 1/2+X,-Y,-Z -X,-Y,-Z 1/2+X,Y,-Z X,-Y,Z 1/2-X,Y,Z".split(" "),"P 2/n 21/n 2/a":"X,Y,Z 1/2-X,-Y,Z 1/2-X,1/2+Y,1/2-Z X,1/2-Y,1/2-Z -X,-Y,-Z 1/2+X,Y,-Z 1/2+X,1/2-Y,1/2+Z -X,1/2+Y,1/2+Z".split(" "),"P 2/m 2/n 21/a":"X,Y,Z 1/2-X,-Y,1/2+Z 1/2-X,Y,1/2-Z X,-Y,-Z -X,-Y,-Z 1/2+X,Y,1/2-Z 1/2+X,-Y,1/2+Z -X,Y,Z".split(" "),"P 21/c 2/c 2/a":"X,Y,Z 1/2-X,-Y,Z -X,Y,1/2-Z 1/2+X,-Y,1/2-Z -X,-Y,-Z 1/2+X,Y,-Z X,-Y,1/2+Z 1/2-X,Y,1/2+Z".split(" "),"P 21/b 21/a 2/m":"X,Y,Z -X,-Y,Z 1/2-X,1/2+Y,-Z 1/2+X,1/2-Y,-Z -X,-Y,-Z X,Y,-Z 1/2+X,1/2-Y,Z 1/2-X,1/2+Y,Z".split(" "),
"P 21/c 21/c 2/n":"X,Y,Z 1/2-X,1/2-Y,Z -X,1/2+Y,1/2-Z 1/2+X,-Y,1/2-Z -X,-Y,-Z 1/2+X,1/2+Y,-Z X,1/2-Y,1/2+Z 1/2-X,Y,1/2+Z".split(" "),"P 2/b 21/c 21/m":"X,Y,Z -X,-Y,1/2+Z -X,1/2+Y,1/2-Z X,1/2-Y,-Z -X,-Y,-Z X,Y,1/2-Z X,1/2-Y,1/2+Z -X,1/2+Y,Z".split(" "),"P 21/n 21/n 2/m":"X,Y,Z -X,-Y,Z 1/2-X,1/2+Y,1/2-Z 1/2+X,1/2-Y,1/2-Z -X,-Y,-Z X,Y,-Z 1/2+X,1/2-Y,1/2+Z 1/2-X,1/2+Y,1/2+Z".split(" "),"P 21/m 21/m 2/n":"X,Y,Z -X,-Y,Z 1/2-X,Y+1/2,-Z X+1/2,1/2-Y,-Z 1/2-X,1/2-Y,-Z X+1/2,Y+1/2,-Z X,-Y,Z -X,Y,Z".split(" "),
"P 21/b 2/c 21/n":"X,Y,Z 1/2-X,1/2-Y,1/2+Z -X,Y,1/2-Z 1/2+X,1/2-Y,-Z -X,-Y,-Z 1/2+X,1/2+Y,1/2-Z X,-Y,1/2+Z 1/2-X,1/2+Y,Z".split(" "),"P 21/b 21/c 21/a":"X,Y,Z 1/2-X,-Y,1/2+Z -X,1/2+Y,1/2-Z 1/2+X,1/2-Y,-Z -X,-Y,-Z 1/2+X,Y,1/2-Z X,1/2-Y,1/2+Z 1/2-X,1/2+Y,Z".split(" "),"P 21/n 21/m 21/a":"X,Y,Z -X+1/2,-Y,Z+1/2 -X,Y+1/2,-Z X+1/2,-Y+1/2,-Z+1/2 -X,-Y,-Z X+1/2,Y,-Z+1/2 X,-Y+1/2,Z -X+1/2,Y+1/2,Z+1/2".split(" "),"C 2/m 2/c 21/m":"X,Y,Z -X,-Y,1/2+Z -X,Y,1/2-Z X,-Y,-Z -X,-Y,-Z X,Y,1/2-Z X,-Y,1/2+Z -X,Y,Z 1/2+X,1/2+Y,Z 1/2-X,1/2-Y,1/2+Z 1/2-X,1/2+Y,1/2-Z 1/2+X,1/2-Y,-Z 1/2-X,1/2-Y,-Z 1/2+X,1/2+Y,1/2-Z 1/2+X,1/2-Y,1/2+Z 1/2-X,1/2+Y,Z".split(" "),
"C 2/m 2/c 21/a":"X,Y,Z -X,1/2-Y,1/2+Z -X,1/2+Y,1/2-Z X,-Y,-Z -X,-Y,-Z X,1/2+Y,1/2-Z X,1/2-Y,1/2+Z -X,Y,Z 1/2+X,1/2+Y,Z 1/2-X,-Y,1/2+Z 1/2-X,Y,1/2-Z 1/2+X,1/2-Y,-Z 1/2-X,1/2-Y,-Z 1/2+X,Y,1/2-Z 1/2+X,-Y,1/2+Z 1/2-X,1/2+Y,Z".split(" "),"C 2/m 2/m 2/m":"X,Y,Z -X,-Y,Z -X,Y,-Z X,-Y,-Z -X,-Y,-Z X,Y,-Z X,-Y,Z -X,Y,Z 1/2+X,1/2+Y,Z 1/2-X,1/2-Y,Z 1/2-X,1/2+Y,-Z 1/2+X,1/2-Y,-Z 1/2-X,1/2-Y,-Z 1/2+X,1/2+Y,-Z 1/2+X,1/2-Y,Z 1/2-X,1/2+Y,Z".split(" "),"C 2/c 2/c 2/m":"X,Y,Z -X,-Y,Z -X,Y,1/2-Z X,-Y,1/2-Z -X,-Y,-Z X,Y,-Z X,-Y,1/2+Z -X,Y,1/2+Z 1/2+X,1/2+Y,Z 1/2-X,1/2-Y,Z 1/2-X,1/2+Y,1/2-Z 1/2+X,1/2-Y,1/2-Z 1/2-X,1/2-Y,-Z 1/2+X,1/2+Y,-Z 1/2+X,1/2-Y,1/2+Z 1/2-X,1/2+Y,1/2+Z".split(" "),
"C 2/m 2/m 2/a":"X,Y,Z -X,1/2-Y,Z -X,1/2+Y,-Z X,-Y,-Z -X,-Y,-Z X,1/2+Y,-Z X,1/2-Y,Z -X,Y,Z 1/2+X,1/2+Y,Z 1/2-X,-Y,Z 1/2-X,Y,-Z 1/2+X,1/2-Y,-Z 1/2-X,1/2-Y,-Z 1/2+X,Y,-Z 1/2+X,-Y,Z 1/2-X,1/2+Y,Z".split(" "),"C 2/c 2/c 2/a":"X,Y,Z 1/2-X,1/2-Y,Z -X,Y,-Z 1/2+X,1/2-Y,-Z -X,1/2-Y,1/2-Z 1/2+X,Y,1/2-Z X,1/2-Y,1/2+Z 1/2-X,Y,1/2+Z 1/2+X,1/2+Y,Z -X,-Y,Z 1/2-X,1/2+Y,-Z X,-Y,-Z 1/2-X,-Y,1/2-Z X,1/2+Y,1/2-Z 1/2+X,-Y,1/2+Z -X,1/2+Y,1/2+Z".split(" "),"F 2/m 2/m 2/m":"X,Y,Z -X,-Y,Z -X,Y,-Z X,-Y,-Z -X,-Y,-Z X,Y,-Z X,-Y,Z -X,Y,Z X,1/2+Y,1/2+Z -X,1/2-Y,1/2+Z -X,1/2+Y,1/2-Z X,1/2-Y,1/2-Z -X,1/2-Y,1/2-Z X,1/2+Y,1/2-Z X,1/2-Y,1/2+Z -X,1/2+Y,1/2+Z 1/2+X,Y,1/2+Z 1/2-X,-Y,1/2+Z 1/2-X,Y,1/2-Z 1/2+X,-Y,1/2-Z 1/2-X,-Y,1/2-Z 1/2+X,Y,1/2-Z 1/2+X,-Y,1/2+Z 1/2-X,Y,1/2+Z 1/2+X,1/2+Y,Z 1/2-X,1/2-Y,Z 1/2-X,1/2+Y,-Z 1/2+X,1/2-Y,-Z 1/2-X,1/2-Y,-Z 1/2+X,1/2+Y,-Z 1/2+X,1/2-Y,Z 1/2-X,1/2+Y,Z".split(" "),
"F 2/d 2/d 2/d":"X,Y,Z -X,-Y,Z -X,Y,-Z X,-Y,-Z 1/4-X,1/4-Y,1/4-Z 1/4+X,1/4+Y,1/4-Z 1/4+X,1/4-Y,1/4+Z 1/4-X,1/4+Y,1/4+Z X,1/2+Y,1/2+Z -X,1/2-Y,1/2+Z -X,1/2+Y,1/2-Z X,1/2-Y,1/2-Z 1/4-X,3/4-Y,3/4-Z 1/4+X,3/4+Y,3/4-Z 1/4+X,3/4-Y,3/4+Z 1/4-X,3/4+Y,3/4+Z 1/2+X,Y,1/2+Z 1/2-X,-Y,1/2+Z 1/2-X,Y,1/2-Z 1/2+X,-Y,1/2-Z 3/4-X,1/4-Y,3/4-Z 3/4+X,1/4+Y,3/4-Z 3/4+X,1/4-Y,3/4+Z 3/4-X,1/4+Y,3/4+Z 1/2+X,1/2+Y,Z 1/2-X,1/2-Y,Z 1/2-X,1/2+Y,-Z 1/2+X,1/2-Y,-Z 3/4-X,3/4-Y,1/4-Z 3/4+X,3/4+Y,1/4-Z 3/4+X,3/4-Y,1/4+Z 3/4-X,3/4+Y,1/4+Z".split(" "),
"I 2/m 2/m 2/m":"X,Y,Z -X,-Y,Z -X,Y,-Z X,-Y,-Z -X,-Y,-Z X,Y,-Z X,-Y,Z -X,Y,Z 1/2+X,1/2+Y,1/2+Z 1/2-X,1/2-Y,1/2+Z 1/2-X,1/2+Y,1/2-Z 1/2+X,1/2-Y,1/2-Z 1/2-X,1/2-Y,1/2-Z 1/2+X,1/2+Y,1/2-Z 1/2+X,1/2-Y,1/2+Z 1/2-X,1/2+Y,1/2+Z".split(" "),"I 2/b 2/a 2/m":"X,Y,Z -X,-Y,Z 1/2-X,1/2+Y,-Z 1/2+X,1/2-Y,-Z -X,-Y,-Z X,Y,-Z 1/2+X,1/2-Y,Z 1/2-X,1/2+Y,Z 1/2+X,1/2+Y,1/2+Z 1/2-X,1/2-Y,1/2+Z -X,Y,1/2-Z X,-Y,1/2-Z 1/2-X,1/2-Y,1/2-Z 1/2+X,1/2+Y,1/2-Z X,-Y,1/2+Z -X,Y,1/2+Z".split(" "),"I 21/b 21/c 21/a":"X,Y,Z 1/2-X,-Y,1/2+Z -X,1/2+Y,1/2-Z 1/2+X,1/2-Y,-Z -X,-Y,-Z 1/2+X,Y,1/2-Z X,1/2-Y,1/2+Z 1/2-X,1/2+Y,Z 1/2+X,1/2+Y,1/2+Z -X,1/2-Y,Z 1/2-X,Y,-Z X,-Y,1/2-Z 1/2-X,1/2-Y,1/2-Z X,1/2+Y,-Z 1/2+X,-Y,Z -X,Y,1/2+Z".split(" "),
"I 21/m 21/m 21/a":"X,Y,Z -X,1/2-Y,Z -X,1/2+Y,-Z X,-Y,-Z -X,-Y,-Z X,1/2+Y,-Z X,1/2-Y,Z -X,Y,Z 1/2+X,1/2+Y,1/2+Z 1/2-X,-Y,1/2+Z 1/2-X,Y,1/2-Z 1/2+X,1/2-Y,1/2-Z 1/2-X,1/2-Y,1/2-Z 1/2+X,Y,1/2-Z 1/2+X,-Y,1/2+Z 1/2-X,1/2+Y,1/2+Z".split(" "),"P 4":["X,Y,Z","-X,-Y,Z","-Y,X,Z","Y,-X,Z"],"P 41":["X,Y,Z","-X,-Y,1/2+Z","-Y,X,1/4+Z","Y,-X,3/4+Z"],"P 42":["X,Y,Z","-X,-Y,Z","-Y,X,1/2+Z","Y,-X,1/2+Z"],"P 43":["X,Y,Z","-X,-Y,1/2+Z","-Y,X,3/4+Z","Y,-X,1/4+Z"],"I 4":"X,Y,Z -X,-Y,Z -Y,X,Z Y,-X,Z 1/2+X,1/2+Y,1/2+Z 1/2-X,1/2-Y,1/2+Z 1/2-Y,1/2+X,1/2+Z 1/2+Y,1/2-X,1/2+Z".split(" "),
"I 41":"X,Y,Z 1/2-X,1/2-Y,1/2+Z -Y,1/2+X,1/4+Z 1/2+Y,-X,3/4+Z 1/2+X,1/2+Y,1/2+Z -X,-Y,Z 1/2-Y,X,3/4+Z Y,1/2-X,1/4+Z".split(" "),"P -4":["X,Y,Z","-X,-Y,Z","Y,-X,-Z","-Y,X,-Z"],"I -4":"X,Y,Z -X,-Y,Z Y,-X,-Z -Y,X,-Z 1/2+X,1/2+Y,1/2+Z 1/2-X,1/2-Y,1/2+Z 1/2+Y,1/2-X,1/2-Z 1/2-Y,1/2+X,1/2-Z".split(" "),"P 4/m":"X,Y,Z -X,-Y,Z -Y,X,Z Y,-X,Z -X,-Y,-Z X,Y,-Z Y,-X,-Z -Y,X,-Z".split(" "),"P 42/m":"X,Y,Z -X,-Y,Z -Y,X,1/2+Z Y,-X,1/2+Z -X,-Y,-Z X,Y,-Z Y,-X,1/2-Z -Y,X,1/2-Z".split(" "),"P 4/n":"X,Y,Z -X,-Y,Z 1/2-Y,1/2+X,Z 1/2+Y,1/2-X,Z 1/2-X,1/2-Y,-Z 1/2+X,1/2+Y,-Z Y,-X,-Z -Y,X,-Z".split(" "),
"P 42/n":"X,Y,Z -X,-Y,Z 1/2-Y,1/2+X,1/2+Z 1/2+Y,1/2-X,1/2+Z 1/2-X,1/2-Y,1/2-Z 1/2+X,1/2+Y,1/2-Z Y,-X,-Z -Y,X,-Z".split(" "),"I 4/m":"X,Y,Z -X,-Y,Z -Y,X,Z Y,-X,Z -X,-Y,-Z X,Y,-Z Y,-X,-Z -Y,X,-Z 1/2+X,1/2+Y,1/2+Z 1/2-X,1/2-Y,1/2+Z 1/2-Y,1/2+X,1/2+Z 1/2+Y,1/2-X,1/2+Z 1/2-X,1/2-Y,1/2-Z 1/2+X,1/2+Y,1/2-Z 1/2+Y,1/2-X,1/2-Z 1/2-Y,1/2+X,1/2-Z".split(" "),"I 41/a":"X,Y,Z 1/2-X,1/2-Y,1/2+Z -Y,1/2+X,1/4+Z 1/2+Y,-X,3/4+Z -X,1/2-Y,1/4-Z 1/2+X,Y,3/4-Z Y,-X,-Z 1/2-Y,1/2+X,1/2-Z 1/2+X,1/2+Y,1/2+Z -X,-Y,Z 1/2-Y,X,3/4+Z Y,1/2-X,1/4+Z 1/2-X,-Y,3/4-Z X,1/2+Y,1/4-Z 1/2+Y,1/2-X,1/2-Z -Y,X,-Z".split(" "),
"P 4 2 2":"X,Y,Z -X,-Y,Z -Y,X,Z Y,-X,Z -X,Y,-Z X,-Y,-Z Y,X,-Z -Y,-X,-Z".split(" "),"P 4 21 2":"X,Y,Z -X,-Y,Z 1/2-Y,1/2+X,Z 1/2+Y,1/2-X,Z 1/2-X,1/2+Y,-Z 1/2+X,1/2-Y,-Z Y,X,-Z -Y,-X,-Z".split(" "),"P 41 2 2":"X,Y,Z -X,-Y,1/2+Z -Y,X,1/4+Z Y,-X,3/4+Z -X,Y,-Z X,-Y,1/2-Z Y,X,3/4-Z -Y,-X,1/4-Z".split(" "),"P 41 21 2":"X,Y,Z -X,-Y,1/2+Z 1/2-Y,1/2+X,1/4+Z 1/2+Y,1/2-X,3/4+Z 1/2-X,1/2+Y,1/4-Z 1/2+X,1/2-Y,3/4-Z Y,X,-Z -Y,-X,1/2-Z".split(" "),"P 42 2 2":"X,Y,Z -X,-Y,Z -Y,X,1/2+Z Y,-X,1/2+Z -X,Y,-Z X,-Y,-Z Y,X,1/2-Z -Y,-X,1/2-Z".split(" "),
"P 42 21 2":"X,Y,Z -X,-Y,Z 1/2-Y,1/2+X,1/2+Z 1/2+Y,1/2-X,1/2+Z 1/2-X,1/2+Y,1/2-Z 1/2+X,1/2-Y,1/2-Z Y,X,-Z -Y,-X,-Z".split(" "),"P 43 2 2":"X,Y,Z -X,-Y,1/2+Z -Y,X,3/4+Z Y,-X,1/4+Z -X,Y,-Z X,-Y,1/2-Z Y,X,1/4-Z -Y,-X,3/4-Z".split(" "),"P 43 21 2":"X,Y,Z -X,-Y,1/2+Z 1/2-Y,1/2+X,3/4+Z 1/2+Y,1/2-X,1/4+Z 1/2-X,1/2+Y,3/4-Z 1/2+X,1/2-Y,1/4-Z Y,X,-Z -Y,-X,1/2-Z".split(" "),"I 4 2 2":"X,Y,Z -X,-Y,Z -Y,X,Z Y,-X,Z -X,Y,-Z X,-Y,-Z Y,X,-Z -Y,-X,-Z 1/2+X,1/2+Y,1/2+Z 1/2-X,1/2-Y,1/2+Z 1/2-Y,1/2+X,1/2+Z 1/2+Y,1/2-X,1/2+Z 1/2-X,1/2+Y,1/2-Z 1/2+X,1/2-Y,1/2-Z 1/2+Y,1/2+X,1/2-Z 1/2-Y,1/2-X,1/2-Z".split(" "),
"I 41 2 2":"X,Y,Z 1/2-X,1/2-Y,1/2+Z -Y,1/2+X,1/4+Z 1/2+Y,-X,3/4+Z 1/2-X,Y,3/4-Z X,1/2-Y,1/4-Z 1/2+Y,1/2+X,1/2-Z -Y,-X,-Z 1/2+X,1/2+Y,1/2+Z -X,-Y,Z 1/2-Y,X,3/4+Z Y,1/2-X,1/4+Z -X,1/2+Y,1/4-Z 1/2+X,-Y,3/4-Z Y,X,-Z 1/2-Y,1/2-X,1/2-Z".split(" "),"P 4 m m":"X,Y,Z -X,-Y,Z -Y,X,Z Y,-X,Z X,-Y,Z -X,Y,Z -Y,-X,Z Y,X,Z".split(" "),"P 4 b m":"X,Y,Z -X,-Y,Z -Y,X,Z Y,-X,Z 1/2+X,1/2-Y,Z 1/2-X,1/2+Y,Z 1/2-Y,1/2-X,Z 1/2+Y,1/2+X,Z".split(" "),"P 42 c m":"X,Y,Z -X,-Y,Z -Y,X,1/2+Z Y,-X,1/2+Z X,-Y,1/2+Z -X,Y,1/2+Z -Y,-X,Z Y,X,Z".split(" "),
"P 42 n m":"X,Y,Z -X,-Y,Z 1/2-Y,1/2+X,1/2+Z 1/2+Y,1/2-X,1/2+Z 1/2+X,1/2-Y,1/2+Z 1/2-X,1/2+Y,1/2+Z -Y,-X,Z Y,X,Z".split(" "),"P 4 c c":"X,Y,Z -X,-Y,Z -Y,X,Z Y,-X,Z X,-Y,1/2+Z -X,Y,1/2+Z -Y,-X,1/2+Z Y,X,1/2+Z".split(" "),"P 4 n c":"X,Y,Z -X,-Y,Z -Y,X,Z Y,-X,Z 1/2+X,1/2-Y,1/2+Z 1/2-X,1/2+Y,1/2+Z 1/2-Y,1/2-X,1/2+Z 1/2+Y,1/2+X,1/2+Z".split(" "),"P 42 m c":"X,Y,Z -X,-Y,Z -Y,X,1/2+Z Y,-X,1/2+Z X,-Y,Z -X,Y,Z -Y,-X,1/2+Z Y,X,1/2+Z".split(" "),"P 42 b c":"X,Y,Z -X,-Y,Z -Y,X,1/2+Z Y,-X,1/2+Z 1/2+X,1/2-Y,Z 1/2-X,1/2+Y,Z 1/2-Y,1/2-X,1/2+Z 1/2+Y,1/2+X,1/2+Z".split(" "),
"I 4 m m":"X,Y,Z -X,-Y,Z -Y,X,Z Y,-X,Z X,-Y,Z -X,Y,Z -Y,-X,Z Y,X,Z 1/2+X,1/2+Y,1/2+Z 1/2-X,1/2-Y,1/2+Z 1/2-Y,1/2+X,1/2+Z 1/2+Y,1/2-X,1/2+Z 1/2+X,1/2-Y,1/2+Z 1/2-X,1/2+Y,1/2+Z 1/2-Y,1/2-X,1/2+Z 1/2+Y,1/2+X,1/2+Z".split(" "),"I 4 c m":"X,Y,Z -X,-Y,Z -Y,X,Z Y,-X,Z X,-Y,1/2+Z -X,Y,1/2+Z -Y,-X,1/2+Z Y,X,1/2+Z 1/2+X,1/2+Y,1/2+Z 1/2-X,1/2-Y,1/2+Z 1/2-Y,1/2+X,1/2+Z 1/2+Y,1/2-X,1/2+Z 1/2+X,1/2-Y,Z 1/2-X,1/2+Y,Z 1/2-Y,1/2-X,Z 1/2+Y,1/2+X,Z".split(" "),"I 41 m d":"X,Y,Z 1/2-X,1/2-Y,1/2+Z -Y,1/2+X,1/4+Z 1/2+Y,-X,3/4+Z X,-Y,Z 1/2-X,1/2+Y,1/2+Z -Y,1/2-X,1/4+Z 1/2+Y,X,3/4+Z 1/2+X,1/2+Y,1/2+Z -X,-Y,Z 1/2-Y,X,3/4+Z Y,1/2-X,1/4+Z 1/2+X,1/2-Y,1/2+Z -X,Y,Z 1/2-Y,-X,3/4+Z Y,1/2+X,1/4+Z".split(" "),
"I 41 c d":"X,Y,Z 1/2-X,1/2-Y,1/2+Z -Y,1/2+X,1/4+Z 1/2+Y,-X,3/4+Z X,-Y,1/2+Z 1/2-X,1/2+Y,Z -Y,1/2-X,3/4+Z 1/2+Y,X,1/4+Z 1/2+X,1/2+Y,1/2+Z -X,-Y,Z 1/2-Y,X,3/4+Z Y,1/2-X,1/4+Z 1/2+X,1/2-Y,Z -X,Y,1/2+Z 1/2-Y,-X,1/4+Z Y,1/2+X,3/4+Z".split(" "),"P -4 2 m":"X,Y,Z -X,-Y,Z -Y,X,-Z Y,-X,-Z -X,Y,-Z X,-Y,-Z -Y,-X,Z Y,X,Z".split(" "),"P -4 2 c":"X,Y,Z -X,-Y,Z -Y,X,-Z Y,-X,-Z -X,Y,1/2-Z X,-Y,1/2-Z -Y,-X,1/2+Z Y,X,1/2+Z".split(" "),"P -4 21 m":"X,Y,Z -X,-Y,Z -Y,X,-Z Y,-X,-Z 1/2-X,1/2+Y,-Z 1/2+X,1/2-Y,-Z 1/2-Y,1/2-X,Z 1/2+Y,1/2+X,Z".split(" "),
"P -4 21 c":"X,Y,Z -X,-Y,Z -Y,X,-Z Y,-X,-Z 1/2-X,1/2+Y,1/2-Z 1/2+X,1/2-Y,1/2-Z 1/2-Y,1/2-X,1/2+Z 1/2+Y,1/2+X,1/2+Z".split(" "),"P -4 m 2":"X,Y,Z -X,-Y,Z Y,-X,-Z -Y,X,-Z X,-Y,Z -X,Y,Z Y,X,-Z -Y,-X,-Z".split(" "),"P -4 c 2":"X,Y,Z -X,-Y,Z -Y,X,-Z Y,-X,-Z X,-Y,1/2+Z -X,Y,1/2+Z Y,X,1/2-Z -Y,-X,1/2-Z".split(" "),"P -4 b 2":"X,Y,Z -X,-Y,Z -Y,X,-Z Y,-X,-Z 1/2+X,1/2-Y,Z 1/2-X,1/2+Y,Z 1/2+Y,1/2+X,-Z 1/2-Y,1/2-X,-Z".split(" "),"P -4 n 2":"X,Y,Z -X,-Y,Z -Y,X,-Z Y,-X,-Z 1/2+X,1/2-Y,1/2+Z 1/2-X,1/2+Y,1/2+Z 1/2+Y,1/2+X,1/2-Z 1/2-Y,1/2-X,1/2-Z".split(" "),
"I -4 m 2":"X,Y,Z -X,-Y,Z -Y,X,-Z Y,-X,-Z X,-Y,Z -X,Y,Z Y,X,-Z -Y,-X,-Z 1/2+X,1/2+Y,1/2+Z 1/2-X,1/2-Y,1/2+Z 1/2-Y,1/2+X,1/2-Z 1/2+Y,1/2-X,1/2-Z 1/2+X,1/2-Y,1/2+Z 1/2-X,1/2+Y,1/2+Z 1/2+Y,1/2+X,1/2-Z 1/2-Y,1/2-X,1/2-Z".split(" "),"I -4 c 2":"X,Y,Z -X,-Y,Z -Y,X,-Z Y,-X,-Z X,-Y,1/2+Z -X,Y,1/2+Z Y,X,1/2-Z -Y,-X,1/2-Z 1/2+X,1/2+Y,1/2+Z 1/2-X,1/2-Y,1/2+Z 1/2-Y,1/2+X,1/2-Z 1/2+Y,1/2-X,1/2-Z 1/2+X,1/2-Y,Z 1/2-X,1/2+Y,Z 1/2+Y,1/2+X,-Z 1/2-Y,1/2-X,-Z".split(" "),"I -4 2 m":"X,Y,Z -X,-Y,Z -Y,X,-Z Y,-X,-Z -X,Y,-Z X,-Y,-Z -Y,-X,Z Y,X,Z 1/2+X,1/2+Y,1/2+Z 1/2-X,1/2-Y,1/2+Z 1/2-Y,1/2+X,1/2-Z 1/2+Y,1/2-X,1/2-Z 1/2-X,1/2+Y,1/2-Z 1/2+X,1/2-Y,1/2-Z 1/2-Y,1/2-X,1/2+Z 1/2+Y,1/2+X,1/2+Z".split(" "),
"I -4 2 d":"X,Y,Z -X,-Y,Z -Y,X,-Z Y,-X,-Z 1/2-X,Y,3/4-Z 1/2+X,-Y,3/4-Z 1/2-Y,-X,3/4+Z 1/2+Y,X,3/4+Z 1/2+X,1/2+Y,1/2+Z 1/2-X,1/2-Y,1/2+Z 1/2-Y,1/2+X,1/2-Z 1/2+Y,1/2-X,1/2-Z -X,1/2+Y,1/4-Z X,1/2-Y,1/4-Z -Y,1/2-X,1/4+Z Y,1/2+X,1/4+Z".split(" "),"P 4/m 2/m 2/m":"X,Y,Z -X,-Y,Z -Y,X,Z Y,-X,Z -X,Y,-Z X,-Y,-Z Y,X,-Z -Y,-X,-Z -X,-Y,-Z X,Y,-Z Y,-X,-Z -Y,X,-Z X,-Y,Z -X,Y,Z -Y,-X,Z Y,X,Z".split(" "),"P 4/m 2/c 2/c":"X,Y,Z -X,-Y,Z -Y,X,Z Y,-X,Z -X,Y,1/2-Z X,-Y,1/2-Z Y,X,1/2-Z -Y,-X,1/2-Z -X,-Y,-Z X,Y,-Z Y,-X,-Z -Y,X,-Z X,-Y,1/2+Z -X,Y,1/2+Z -Y,-X,1/2+Z Y,X,1/2+Z".split(" "),
"P 4/n 2/b 2/m":"X,Y,Z -X,-Y,Z -Y,X,Z Y,-X,Z -X,Y,-Z X,-Y,-Z Y,X,-Z -Y,-X,-Z 1/2-X,1/2-Y,-Z 1/2+X,1/2+Y,-Z 1/2+Y,1/2-X,-Z 1/2-Y,1/2+X,-Z 1/2+X,1/2-Y,Z 1/2-X,1/2+Y,Z 1/2-Y,1/2-X,Z 1/2+Y,1/2+X,Z".split(" "),"P 4/n 2/n 2/c":"X,Y,Z -X,-Y,Z -Y,X,Z Y,-X,Z -X,Y,-Z X,-Y,-Z Y,X,-Z -Y,-X,-Z 1/2-X,1/2-Y,1/2-Z 1/2+X,1/2+Y,1/2-Z 1/2+Y,1/2-X,1/2-Z 1/2-Y,1/2+X,1/2-Z 1/2+X,1/2-Y,1/2+Z 1/2-X,1/2+Y,1/2+Z 1/2-Y,1/2-X,1/2+Z 1/2+Y,1/2+X,1/2+Z".split(" "),"P 4/m 21/b 2/m":"X,Y,Z -X,-Y,Z -Y,X,Z Y,-X,Z 1/2-X,1/2+Y,-Z 1/2+X,1/2-Y,-Z 1/2+Y,1/2+X,-Z 1/2-Y,1/2-X,-Z -X,-Y,-Z X,Y,-Z Y,-X,-Z -Y,X,-Z 1/2+X,1/2-Y,Z 1/2-X,1/2+Y,Z 1/2-Y,1/2-X,Z 1/2+Y,1/2+X,Z".split(" "),
"P 4/m 21/n 2/c":"X,Y,Z -X,-Y,Z -Y,X,Z Y,-X,Z 1/2-X,1/2+Y,1/2-Z 1/2+X,1/2-Y,1/2-Z 1/2+Y,1/2+X,1/2-Z 1/2-Y,1/2-X,1/2-Z -X,-Y,-Z X,Y,-Z Y,-X,-Z -Y,X,-Z 1/2+X,1/2-Y,1/2+Z 1/2-X,1/2+Y,1/2+Z 1/2-Y,1/2-X,1/2+Z 1/2+Y,1/2+X,1/2+Z".split(" "),"P 4/n 21/m 2/m":"X,Y,Z -X,-Y,Z 1/2-Y,1/2+X,Z 1/2+Y,1/2-X,Z 1/2-X,1/2+Y,-Z 1/2+X,1/2-Y,-Z Y,X,-Z -Y,-X,-Z 1/2-X,1/2-Y,-Z 1/2+X,1/2+Y,-Z Y,-X,-Z -Y,X,-Z X,-Y,Z -X,Y,Z 1/2-Y,1/2-X,Z 1/2+Y,1/2+X,Z".split(" "),"P 4/n 2/c 2/c":"X,Y,Z -X,-Y,Z 1/2-Y,1/2+X,Z 1/2+Y,1/2-X,Z 1/2-X,1/2+Y,1/2-Z 1/2+X,1/2-Y,1/2-Z Y,X,1/2-Z -Y,-X,1/2-Z 1/2-X,1/2-Y,-Z 1/2+X,1/2+Y,-Z Y,-X,-Z -Y,X,-Z X,-Y,1/2+Z -X,Y,1/2+Z 1/2-Y,1/2-X,1/2+Z 1/2+Y,1/2+X,1/2+Z".split(" "),
"P 42/m 2/m 2/c":"X,Y,Z -X,-Y,Z -Y,X,1/2+Z Y,-X,1/2+Z -X,Y,-Z X,-Y,-Z Y,X,1/2-Z -Y,-X,1/2-Z -X,-Y,-Z X,Y,-Z Y,-X,1/2-Z -Y,X,1/2-Z X,-Y,Z -X,Y,Z -Y,-X,1/2+Z Y,X,1/2+Z".split(" "),"P 42/m 2/c 2/m":"X,Y,Z -X,-Y,Z -Y,X,1/2+Z Y,-X,1/2+Z -X,Y,1/2-Z X,-Y,1/2-Z Y,X,-Z -Y,-X,-Z -X,-Y,-Z X,Y,-Z Y,-X,1/2-Z -Y,X,1/2-Z X,-Y,1/2+Z -X,Y,1/2+Z -Y,-X,Z Y,X,Z".split(" "),"P 42/n 2/b 2/c":"X,Y,Z -X,-Y,Z 1/2-Y,1/2+X,1/2+Z 1/2+Y,1/2-X,1/2+Z -X,Y,1/2-Z X,-Y,1/2-Z 1/2+Y,1/2+X,-Z 1/2-Y,1/2-X,-Z 1/2-X,1/2-Y,1/2-Z 1/2+X,1/2+Y,1/2-Z Y,-X,-Z -Y,X,-Z 1/2+X,1/2-Y,Z 1/2-X,1/2+Y,Z -Y,-X,1/2+Z Y,X,1/2+Z".split(" "),
"P 42/n 2/n 2/m":"X,Y,Z -X,-Y,Z 1/2-Y,1/2+X,1/2+Z 1/2+Y,1/2-X,1/2+Z -X,Y,-Z X,-Y,-Z 1/2+Y,1/2+X,1/2-Z 1/2-Y,1/2-X,1/2-Z 1/2-X,1/2-Y,1/2-Z 1/2+X,1/2+Y,1/2-Z Y,-X,-Z -Y,X,-Z 1/2+X,1/2-Y,1/2+Z 1/2-X,1/2+Y,1/2+Z -Y,-X,Z Y,X,Z".split(" "),"P 42/m 21/b 2/c":"X,Y,Z -X,-Y,Z -Y,X,1/2+Z Y,-X,1/2+Z 1/2-X,1/2+Y,-Z 1/2+X,1/2-Y,-Z 1/2+Y,1/2+X,1/2-Z 1/2-Y,1/2-X,1/2-Z -X,-Y,-Z X,Y,-Z Y,-X,1/2-Z -Y,X,1/2-Z 1/2+X,1/2-Y,Z 1/2-X,1/2+Y,Z 1/2-Y,1/2-X,1/2+Z 1/2+Y,1/2+X,1/2+Z".split(" "),"P 42/m 21/n 2/m":"X,Y,Z -X,-Y,Z 1/2-Y,X+1/2,Z+1/2 Y+1/2,1/2-X,Z+1/2 1/2-X,Y+1/2,1/2-Z X+1/2,1/2-Y,1/2-Z Y,X,-Z -Y,-X,-Z -X,-Y,-Z X,Y,-Z Y+1/2,1/2-X,1/2-Z 1/2-Y,X+1/2,1/2-Z X+1/2,1/2-Y,Z+1/2 1/2-X,Y+1/2,Z+1/2 -Y,-X,Z Y,X,Z".split(" "),
"P 42/n 21/m 2/c":"X,Y,Z -X,-Y,Z 1/2-Y,1/2+X,1/2+Z 1/2+Y,1/2-X,1/2+Z 1/2-X,1/2+Y,1/2-Z 1/2+X,1/2-Y,1/2-Z Y,X,-Z -Y,-X,-Z 1/2-X,1/2-Y,1/2-Z 1/2+X,1/2+Y,1/2-Z Y,-X,-Z -Y,X,-Z X,-Y,Z -X,Y,Z 1/2-Y,1/2-X,1/2+Z 1/2+Y,1/2+X,1/2+Z".split(" "),"P 42/n 21/c 2/m":"X,Y,Z -X,-Y,Z 1/2-Y,1/2+X,1/2+Z 1/2+Y,1/2-X,1/2+Z 1/2-X,1/2+Y,-Z 1/2+X,1/2-Y,-Z Y,X,1/2-Z -Y,-X,1/2-Z 1/2-X,1/2-Y,1/2-Z 1/2+X,1/2+Y,1/2-Z Y,-X,-Z -Y,X,-Z X,-Y,1/2+Z -X,Y,1/2+Z 1/2-Y,1/2-X,Z 1/2+Y,1/2+X,Z".split(" "),"I 4/m 2/m 2/m":"X,Y,Z -X,-Y,Z -Y,X,Z Y,-X,Z -X,Y,-Z X,-Y,-Z Y,X,-Z -Y,-X,-Z -X,-Y,-Z X,Y,-Z Y,-X,-Z -Y,X,-Z X,-Y,Z -X,Y,Z -Y,-X,Z Y,X,Z 1/2+X,1/2+Y,1/2+Z 1/2-X,1/2-Y,1/2+Z 1/2-Y,1/2+X,1/2+Z 1/2+Y,1/2-X,1/2+Z 1/2-X,1/2+Y,1/2-Z 1/2+X,1/2-Y,1/2-Z 1/2+Y,1/2+X,1/2-Z 1/2-Y,1/2-X,1/2-Z 1/2-X,1/2-Y,1/2-Z 1/2+X,1/2+Y,1/2-Z 1/2+Y,1/2-X,1/2-Z 1/2-Y,1/2+X,1/2-Z 1/2+X,1/2-Y,1/2+Z 1/2-X,1/2+Y,1/2+Z 1/2-Y,1/2-X,1/2+Z 1/2+Y,1/2+X,1/2+Z".split(" "),
"I 4/m 2/c 2/m":"X,Y,Z -X,-Y,Z -Y,X,Z Y,-X,Z -X,Y,1/2-Z X,-Y,1/2-Z Y,X,1/2-Z -Y,-X,1/2-Z -X,-Y,-Z X,Y,-Z Y,-X,-Z -Y,X,-Z X,-Y,1/2+Z -X,Y,1/2+Z -Y,-X,1/2+Z Y,X,1/2+Z 1/2+X,1/2+Y,1/2+Z 1/2-X,1/2-Y,1/2+Z 1/2-Y,1/2+X,1/2+Z 1/2+Y,1/2-X,1/2+Z 1/2-X,1/2+Y,-Z 1/2+X,1/2-Y,-Z 1/2+Y,1/2+X,-Z 1/2-Y,1/2-X,-Z 1/2-X,1/2-Y,1/2-Z 1/2+X,1/2+Y,1/2-Z 1/2+Y,1/2-X,1/2-Z 1/2-Y,1/2+X,1/2-Z 1/2+X,1/2-Y,Z 1/2-X,1/2+Y,Z 1/2-Y,1/2-X,Z 1/2+Y,1/2+X,Z".split(" "),"I 41/a 2/m 2/d":"X,Y,Z 1/2-X,1/2-Y,1/2+Z -Y,1/2+X,1/4+Z 1/2+Y,-X,3/4+Z 1/2-X,Y,3/4-Z X,1/2-Y,1/4-Z 1/2+Y,1/2+X,1/2-Z -Y,-X,-Z -X,1/2-Y,1/4-Z 1/2+X,Y,3/4-Z Y,-X,-Z 1/2-Y,1/2+X,1/2-Z 1/2+X,1/2-Y,1/2+Z -X,Y,Z 1/2-Y,-X,3/4+Z Y,1/2+X,1/4+Z 1/2+X,1/2+Y,1/2+Z -X,-Y,Z 1/2-Y,X,3/4+Z Y,1/2-X,1/4+Z -X,1/2+Y,1/4-Z 1/2+X,-Y,3/4-Z Y,X,-Z 1/2-Y,1/2-X,1/2-Z 1/2-X,-Y,3/4-Z X,1/2+Y,1/4-Z 1/2+Y,1/2-X,1/2-Z -Y,X,-Z X,-Y,Z 1/2-X,1/2+Y,1/2+Z -Y,1/2-X,1/4+Z 1/2+Y,X,3/4+Z".split(" "),
"I 41/a 2/c 2/d":"X,Y,Z 1/2-X,1/2-Y,1/2+Z -Y,1/2+X,1/4+Z 1/2+Y,-X,3/4+Z 1/2-X,Y,1/4-Z X,1/2-Y,3/4-Z 1/2+Y,1/2+X,-Z -Y,-X,1/2-Z -X,1/2-Y,1/4-Z 1/2+X,Y,3/4-Z Y,-X,-Z 1/2-Y,1/2+X,1/2-Z 1/2+X,1/2-Y,Z -X,Y,1/2+Z 1/2-Y,-X,1/4+Z Y,1/2+X,3/4+Z 1/2+X,1/2+Y,1/2+Z -X,-Y,Z 1/2-Y,X,3/4+Z Y,1/2-X,1/4+Z -X,1/2+Y,3/4-Z 1/2+X,-Y,1/4-Z Y,X,1/2-Z 1/2-Y,1/2-X,-Z 1/2-X,-Y,3/4-Z X,1/2+Y,1/4-Z 1/2+Y,1/2-X,1/2-Z -Y,X,-Z X,-Y,1/2+Z 1/2-X,1/2+Y,Z -Y,1/2-X,3/4+Z 1/2+Y,X,1/4+Z".split(" "),"P 3":["X,Y,Z","-Y,X-Y,Z","Y-X,-X,Z"],
"P 31":["X,Y,Z","-Y,X-Y,Z+1/3","Y-X,-X,Z+2/3"],"P 32":["X,Y,Z","-Y,X-Y,Z+2/3","Y-X,-X,Z+1/3"],"H 3":"X,Y,Z -Y,X-Y,Z Y-X,-X,Z X+2/3,Y+1/3,Z+1/3 -Y+2/3,X-Y+1/3,Z+1/3 Y-X+2/3,-X+1/3,Z+1/3 X+1/3,Y+2/3,Z+2/3 -Y+1/3,X-Y+2/3,Z+2/3 Y-X+1/3,-X+2/3,Z+2/3".split(" "),"R 3":["X,Y,Z","Z,X,Y","Y,Z,X"],"P -3":"X,Y,Z -Y,X-Y,Z Y-X,-X,Z -X,-Y,-Z Y,Y-X,-Z X-Y,X,-Z".split(" "),"H -3":"X,Y,Z -Y,X-Y,Z Y-X,-X,Z -X,-Y,-Z Y,Y-X,-Z X-Y,X,-Z 2/3+X,1/3+Y,1/3+Z 2/3-Y,1/3+X-Y,1/3+Z 2/3+Y-X,1/3-X,1/3+Z 2/3-X,1/3-Y,1/3-Z 2/3+Y,1/3+Y-X,1/3-Z 2/3+X-Y,1/3+X,1/3-Z 1/3+X,2/3+Y,2/3+Z 1/3-Y,2/3+X-Y,2/3+Z 1/3+Y-X,2/3-X,2/3+Z 1/3-X,2/3-Y,2/3-Z 1/3+Y,2/3+Y-X,2/3-Z 1/3+X-Y,2/3+X,2/3-Z".split(" "),
"R -3":"X,Y,Z Z,X,Y Y,Z,X -X,-Y,-Z -Z,-X,-Y -Y,-Z,-X".split(" "),"P 3 1 2":"X,Y,Z -Y,X-Y,Z Y-X,-X,Z -Y,-X,-Z Y-X,Y,-Z X,X-Y,-Z".split(" "),"P 3 2 1":"X,Y,Z -Y,X-Y,Z Y-X,-X,Z Y,X,-Z X-Y,-Y,-Z -X,Y-X,-Z".split(" "),"P 31 1 2":"X,Y,Z -Y,X-Y,1/3+Z Y-X,-X,2/3+Z -Y,-X,2/3-Z Y-X,Y,1/3-Z X,X-Y,-Z".split(" "),"P 31 2 1":"X,Y,Z -Y,X-Y,Z+1/3 Y-X,-X,Z+2/3 Y,X,-Z X-Y,-Y,2/3-Z -X,Y-X,1/3-Z".split(" "),"P 32 1 2":"X,Y,Z -Y,X-Y,2/3+Z Y-X,-X,1/3+Z -Y,-X,1/3-Z Y-X,Y,2/3-Z X,X-Y,-Z".split(" "),"P 32 2 1":"X,Y,Z -Y,X-Y,Z+2/3 Y-X,-X,Z+1/3 Y,X,-Z X-Y,-Y,1/3-Z -X,Y-X,2/3-Z".split(" "),
"H 3 2":"X,Y,Z -Y,X-Y,Z Y-X,-X,Z Y,X,-Z X-Y,-Y,-Z -X,Y-X,-Z 2/3+X,1/3+Y,1/3+Z 2/3-Y,1/3+X-Y,1/3+Z 2/3+Y-X,1/3-X,1/3+Z 2/3+Y,1/3+X,1/3-Z 2/3+X-Y,1/3-Y,1/3-Z 2/3-X,1/3+Y-X,1/3-Z 1/3+X,2/3+Y,2/3+Z 1/3-Y,2/3+X-Y,2/3+Z 1/3+Y-X,2/3-X,2/3+Z 1/3+Y,2/3+X,2/3-Z 1/3+X-Y,2/3-Y,2/3-Z 1/3-X,2/3+Y-X,2/3-Z".split(" "),"R 3 2":"X,Y,Z Z,X,Y Y,Z,X -Y,-X,-Z -X,-Z,-Y -Z,-Y,-X".split(" "),"P 3 m 1":"X,Y,Z -Y,X-Y,Z Y-X,-X,Z -Y,-X,Z Y-X,Y,Z X,X-Y,Z".split(" "),"P 3 1 m":"X,Y,Z -Y,X-Y,Z Y-X,-X,Z Y,X,Z X-Y,-Y,Z -X,Y-X,Z".split(" "),
"P 3 c 1":"X,Y,Z -Y,X-Y,Z Y-X,-X,Z -Y,-X,1/2+Z Y-X,Y,1/2+Z X,X-Y,1/2+Z".split(" "),"P 3 1 c":"X,Y,Z -Y,X-Y,Z Y-X,-X,Z Y,X,1/2+Z X-Y,-Y,1/2+Z -X,Y-X,1/2+Z".split(" "),"H 3 m":"X,Y,Z -Y,X-Y,Z Y-X,-X,Z -Y,-X,Z Y-X,Y,Z X,X-Y,Z 2/3+X,1/3+Y,1/3+Z 2/3-Y,1/3+X-Y,1/3+Z 2/3+Y-X,1/3-X,1/3+Z 2/3-Y,1/3-X,1/3+Z 2/3+Y-X,1/3+Y,1/3+Z 2/3+X,1/3+X-Y,1/3+Z 1/3+X,2/3+Y,2/3+Z 1/3-Y,2/3+X-Y,2/3+Z 1/3+Y-X,2/3-X,2/3+Z 1/3-Y,2/3-X,2/3+Z 1/3+Y-X,2/3+Y,2/3+Z 1/3+X,2/3+X-Y,2/3+Z".split(" "),"R 3 m":"X,Y,Z Z,X,Y Y,Z,X Y,X,Z X,Z,Y Z,Y,X".split(" "),
"H 3 c":"X,Y,Z -Y,X-Y,Z Y-X,-X,Z -Y,-X,1/2+Z Y-X,Y,1/2+Z X,X-Y,1/2+Z 2/3+X,1/3+Y,1/3+Z 2/3-Y,1/3+X-Y,1/3+Z 2/3+Y-X,1/3-X,1/3+Z 2/3-Y,1/3-X,5/6+Z 2/3+Y-X,1/3+Y,5/6+Z 2/3+X,1/3+X-Y,5/6+Z 1/3+X,2/3+Y,2/3+Z 1/3-Y,2/3+X-Y,2/3+Z 1/3+Y-X,2/3-X,2/3+Z 1/3-Y,2/3-X,1/6+Z 1/3+Y-X,2/3+Y,1/6+Z 1/3+X,2/3+X-Y,1/6+Z".split(" "),"R 3 c":"X,Y,Z Z,X,Y Y,Z,X Y+1/2,X+1/2,Z+1/2 X+1/2,Z+1/2,Y+1/2 Z+1/2,Y+1/2,X+1/2".split(" "),"P -3 1 2/m":"X,Y,Z -Y,X-Y,Z Y-X,-X,Z -Y,-X,-Z Y-X,Y,-Z X,X-Y,-Z -X,-Y,-Z Y,Y-X,-Z X-Y,X,-Z Y,X,Z X-Y,-Y,Z -X,Y-X,Z".split(" "),
"P -3 1 2/c":"X,Y,Z -Y,X-Y,Z Y-X,-X,Z -Y,-X,1/2-Z Y-X,Y,1/2-Z X,X-Y,1/2-Z -X,-Y,-Z Y,Y-X,-Z X-Y,X,-Z Y,X,1/2+Z X-Y,-Y,1/2+Z -X,Y-X,1/2+Z".split(" "),"P -3 2/m 1":"X,Y,Z -Y,X-Y,Z Y-X,-X,Z Y,X,-Z X-Y,-Y,-Z -X,Y-X,-Z -X,-Y,-Z Y,Y-X,-Z X-Y,X,-Z -Y,-X,Z Y-X,Y,Z X,X-Y,Z".split(" "),"P -3 2/c 1":"X,Y,Z -Y,X-Y,Z Y-X,-X,Z Y,X,1/2-Z X-Y,-Y,1/2-Z -X,Y-X,1/2-Z -X,-Y,-Z Y,Y-X,-Z X-Y,X,-Z -Y,-X,1/2+Z Y-X,Y,1/2+Z X,X-Y,1/2+Z".split(" "),"H -3 2/m":"X,Y,Z -Y,X-Y,Z Y-X,-X,Z Y,X,-Z X-Y,-Y,-Z -X,Y-X,-Z -X,-Y,-Z Y,Y-X,-Z X-Y,X,-Z -Y,-X,Z Y-X,Y,Z X,X-Y,Z 2/3+X,1/3+Y,1/3+Z 2/3-Y,1/3+X-Y,1/3+Z 2/3+Y-X,1/3-X,1/3+Z 2/3+Y,1/3+X,1/3-Z 2/3+X-Y,1/3-Y,1/3-Z 2/3-X,1/3+Y-X,1/3-Z 2/3-X,1/3-Y,1/3-Z 2/3+Y,1/3+Y-X,1/3-Z 2/3+X-Y,1/3+X,1/3-Z 2/3-Y,1/3-X,1/3+Z 2/3+Y-X,1/3+Y,1/3+Z 2/3+X,1/3+X-Y,1/3+Z 1/3+X,2/3+Y,2/3+Z 1/3-Y,2/3+X-Y,2/3+Z 1/3+Y-X,2/3-X,2/3+Z 1/3+Y,2/3+X,2/3-Z 1/3+X-Y,2/3-Y,2/3-Z 1/3-X,2/3+Y-X,2/3-Z 1/3-X,2/3-Y,2/3-Z 1/3+Y,2/3+Y-X,2/3-Z 1/3+X-Y,2/3+X,2/3-Z 1/3-Y,2/3-X,2/3+Z 1/3+Y-X,2/3+Y,2/3+Z 1/3+X,2/3+X-Y,2/3+Z".split(" "),
"R -3 2/m":"X,Y,Z Z,X,Y Y,Z,X -Y,-X,-Z -X,-Z,-Y -Z,-Y,-X -X,-Y,-Z -Z,-X,-Y -Y,-Z,-X Y,X,Z X,Z,Y Z,Y,X".split(" "),"H -3 2/c":"X,Y,Z -Y,X-Y,Z Y-X,-X,Z Y,X,1/2-Z X-Y,-Y,1/2-Z -X,Y-X,1/2-Z -X,-Y,-Z Y,Y-X,-Z X-Y,X,-Z -Y,-X,1/2+Z Y-X,Y,1/2+Z X,X-Y,1/2+Z 2/3+X,1/3+Y,1/3+Z 2/3-Y,1/3+X-Y,1/3+Z 2/3+Y-X,1/3-X,1/3+Z 2/3+Y,1/3+X,5/6-Z 2/3+X-Y,1/3-Y,5/6-Z 2/3-X,1/3+Y-X,5/6-Z 2/3-X,1/3-Y,1/3-Z 2/3+Y,1/3+Y-X,1/3-Z 2/3+X-Y,1/3+X,1/3-Z 2/3-Y,1/3-X,5/6+Z 2/3+Y-X,1/3+Y,5/6+Z 2/3+X,1/3+X-Y,5/6+Z 1/3+X,2/3+Y,2/3+Z 1/3-Y,2/3+X-Y,2/3+Z 1/3+Y-X,2/3-X,2/3+Z 1/3+Y,2/3+X,1/6-Z 1/3+X-Y,2/3-Y,1/6-Z 1/3-X,2/3+Y-X,1/6-Z 1/3-X,2/3-Y,2/3-Z 1/3+Y,2/3+Y-X,2/3-Z 1/3+X-Y,2/3+X,2/3-Z 1/3-Y,2/3-X,1/6+Z 1/3+Y-X,2/3+Y,1/6+Z 1/3+X,2/3+X-Y,1/6+Z".split(" "),
"R -3 2/c":"X,Y,Z Z,X,Y Y,Z,X -Y+1/2,-X+1/2,-Z+1/2 -X+1/2,-Z+1/2,-Y+1/2 -Z+1/2,-Y+1/2,-X+1/2 -X,-Y,-Z -Z,-X,-Y -Y,-Z,-X Y+1/2,X+1/2,Z+1/2 X+1/2,Z+1/2,Y+1/2 Z+1/2,Y+1/2,X+1/2".split(" "),"P 6":"X,Y,Z -Y,X-Y,Z Y-X,-X,Z -X,-Y,Z Y,Y-X,Z X-Y,X,Z".split(" "),"P 61":"X,Y,Z -Y,X-Y,Z+1/3 Y-X,-X,Z+2/3 -X,-Y,Z+1/2 Y,Y-X,Z+5/6 X-Y,X,Z+1/6".split(" "),"P 65":"X,Y,Z -Y,X-Y,Z+2/3 Y-X,-X,Z+1/3 -X,-Y,Z+1/2 Y,Y-X,Z+1/6 X-Y,X,Z+5/6".split(" "),"P 62":"X,Y,Z -Y,X-Y,2/3+Z Y-X,-X,1/3+Z -X,-Y,Z Y,Y-X,2/3+Z X-Y,X,1/3+Z".split(" "),
"P 64":"X,Y,Z -Y,X-Y,1/3+Z Y-X,-X,2/3+Z -X,-Y,Z Y,Y-X,1/3+Z X-Y,X,2/3+Z".split(" "),"P 63":"X,Y,Z -Y,X-Y,Z Y-X,-X,Z -X,-Y,1/2+Z Y,Y-X,1/2+Z X-Y,X,1/2+Z".split(" "),"P -6":"X,Y,Z -Y,X-Y,Z Y-X,-X,Z X,Y,-Z -Y,X-Y,-Z Y-X,-X,-Z".split(" "),"P 6/m":"X,Y,Z -Y,X-Y,Z Y-X,-X,Z -X,-Y,Z Y,Y-X,Z X-Y,X,Z -X,-Y,-Z Y,Y-X,-Z X-Y,X,-Z X,Y,-Z -Y,X-Y,-Z Y-X,-X,-Z".split(" "),"P 63/m":"X,Y,Z -Y,X-Y,Z Y-X,-X,Z -X,-Y,1/2+Z Y,Y-X,1/2+Z X-Y,X,1/2+Z -X,-Y,-Z Y,Y-X,-Z X-Y,X,-Z X,Y,1/2-Z -Y,X-Y,1/2-Z Y-X,-X,1/2-Z".split(" "),
"P 6 2 2":"X,Y,Z -Y,X-Y,Z Y-X,-X,Z -X,-Y,Z Y,Y-X,Z X-Y,X,Z Y,X,-Z X-Y,-Y,-Z -X,Y-X,-Z -Y,-X,-Z Y-X,Y,-Z X,X-Y,-Z".split(" "),"P 61 2 2":"X,Y,Z -Y,X-Y,1/3+Z Y-X,-X,2/3+Z -X,-Y,1/2+Z Y,Y-X,5/6+Z X-Y,X,1/6+Z Y,X,1/3-Z X-Y,-Y,-Z -X,Y-X,2/3-Z -Y,-X,5/6-Z Y-X,Y,1/2-Z X,X-Y,1/6-Z".split(" "),"P 65 2 2":"X,Y,Z -Y,X-Y,2/3+Z Y-X,-X,1/3+Z -X,-Y,1/2+Z Y,Y-X,1/6+Z X-Y,X,5/6+Z Y,X,2/3-Z X-Y,-Y,-Z -X,Y-X,1/3-Z -Y,-X,1/6-Z Y-X,Y,1/2-Z X,X-Y,5/6-Z".split(" "),"P 62 2 2":"X,Y,Z -Y,X-Y,2/3+Z Y-X,-X,1/3+Z -X,-Y,Z Y,Y-X,2/3+Z X-Y,X,1/3+Z Y,X,2/3-Z X-Y,-Y,-Z -X,Y-X,1/3-Z -Y,-X,2/3-Z Y-X,Y,-Z X,X-Y,1/3-Z".split(" "),
"P 64 2 2":"X,Y,Z -Y,X-Y,1/3+Z Y-X,-X,2/3+Z -X,-Y,Z Y,Y-X,1/3+Z X-Y,X,2/3+Z Y,X,1/3-Z X-Y,-Y,-Z -X,Y-X,2/3-Z -Y,-X,1/3-Z Y-X,Y,-Z X,X-Y,2/3-Z".split(" "),"P 63 2 2":"X,Y,Z -Y,X-Y,Z Y-X,-X,Z -X,-Y,1/2+Z Y,Y-X,1/2+Z X-Y,X,1/2+Z Y,X,-Z X-Y,-Y,-Z -X,Y-X,-Z -Y,-X,1/2-Z Y-X,Y,1/2-Z X,X-Y,1/2-Z".split(" "),"P 6 m m":"X,Y,Z -Y,X-Y,Z Y-X,-X,Z -X,-Y,Z Y,Y-X,Z X-Y,X,Z -Y,-X,Z Y-X,Y,Z X,X-Y,Z Y,X,Z X-Y,-Y,Z -X,Y-X,Z".split(" "),"P 6 c c":"X,Y,Z -Y,X-Y,Z Y-X,-X,Z -X,-Y,Z Y,Y-X,Z X-Y,X,Z -Y,-X,1/2+Z Y-X,Y,1/2+Z X,X-Y,1/2+Z Y,X,1/2+Z X-Y,-Y,1/2+Z -X,Y-X,1/2+Z".split(" "),
"P 63 c m":"X,Y,Z -Y,X-Y,Z Y-X,-X,Z -X,-Y,1/2+Z Y,Y-X,1/2+Z X-Y,X,1/2+Z -Y,-X,1/2+Z Y-X,Y,1/2+Z X,X-Y,1/2+Z Y,X,Z X-Y,-Y,Z -X,Y-X,Z".split(" "),"P 63 m c":"X,Y,Z -Y,X-Y,Z Y-X,-X,Z -X,-Y,1/2+Z Y,Y-X,1/2+Z X-Y,X,1/2+Z -Y,-X,Z Y-X,Y,Z X,X-Y,Z Y,X,1/2+Z X-Y,-Y,1/2+Z -X,Y-X,1/2+Z".split(" "),"P -6 m 2":"X,Y,Z -Y,X-Y,Z Y-X,-X,Z X,Y,-Z -Y,X-Y,-Z Y-X,-X,-Z -Y,-X,Z Y-X,Y,Z X,X-Y,Z -Y,-X,-Z Y-X,Y,-Z X,X-Y,-Z".split(" "),"P -6 c 2":"X,Y,Z -Y,X-Y,Z Y-X,-X,Z X,Y,1/2-Z -Y,X-Y,1/2-Z Y-X,-X,1/2-Z -Y,-X,1/2+Z Y-X,Y,1/2+Z X,X-Y,1/2+Z -Y,-X,-Z Y-X,Y,-Z X,X-Y,-Z".split(" "),
"P -6 2 m":"X,Y,Z -Y,X-Y,Z Y-X,-X,Z X,Y,-Z -Y,X-Y,-Z Y-X,-X,-Z Y,X,-Z X-Y,-Y,-Z -X,Y-X,-Z Y,X,Z X-Y,-Y,Z -X,Y-X,Z".split(" "),"P -6 2 c":"X,Y,Z -Y,X-Y,Z Y-X,-X,Z X,Y,1/2-Z -Y,X-Y,1/2-Z Y-X,-X,1/2-Z Y,X,-Z X-Y,-Y,-Z -X,Y-X,-Z Y,X,1/2+Z X-Y,-Y,1/2+Z -X,Y-X,1/2+Z".split(" "),"P 6/m 2/m 2/m":"X,Y,Z -Y,X-Y,Z Y-X,-X,Z -X,-Y,Z Y,Y-X,Z X-Y,X,Z Y,X,-Z X-Y,-Y,-Z -X,Y-X,-Z -Y,-X,-Z Y-X,Y,-Z X,X-Y,-Z -X,-Y,-Z Y,Y-X,-Z X-Y,X,-Z X,Y,-Z Y-X,-X,-Z -Y,X-Y,-Z -Y,-X,Z Y-X,Y,Z X,X-Y,Z Y,X,Z X-Y,-Y,Z -X,Y-X,Z".split(" "),
"P 6/m 2/c 2/c":"X,Y,Z -Y,X-Y,Z Y-X,-X,Z -X,-Y,Z Y,Y-X,Z X-Y,X,Z Y,X,1/2-Z X-Y,-Y,1/2-Z -X,Y-X,1/2-Z -Y,-X,1/2-Z Y-X,Y,1/2-Z X,X-Y,1/2-Z -X,-Y,-Z Y,Y-X,-Z X-Y,X,-Z X,Y,-Z Y-X,-X,-Z -Y,X-Y,-Z -Y,-X,1/2+Z Y-X,Y,1/2+Z X,X-Y,1/2+Z Y,X,1/2+Z X-Y,-Y,1/2+Z -X,Y-X,1/2+Z".split(" "),"P 63/m 2/c 2/m":"X,Y,Z -Y,X-Y,Z Y-X,-X,Z -X,-Y,1/2+Z Y,Y-X,1/2+Z X-Y,X,1/2+Z Y,X,1/2-Z X-Y,-Y,1/2-Z -X,Y-X,1/2-Z -Y,-X,-Z Y-X,Y,-Z X,X-Y,-Z -X,-Y,-Z Y,Y-X,-Z X-Y,X,-Z X,Y,1/2-Z Y-X,-X,1/2-Z -Y,X-Y,1/2-Z -Y,-X,1/2+Z Y-X,Y,1/2+Z X,X-Y,1/2+Z Y,X,Z X-Y,-Y,Z -X,Y-X,Z".split(" "),
"P 63/m 2/m 2/c":"X,Y,Z -Y,X-Y,Z Y-X,-X,Z -X,-Y,1/2+Z Y,Y-X,1/2+Z X-Y,X,1/2+Z Y,X,-Z X-Y,-Y,-Z -X,Y-X,-Z -Y,-X,1/2-Z Y-X,Y,1/2-Z X,X-Y,1/2-Z -X,-Y,-Z Y,Y-X,-Z X-Y,X,-Z X,Y,1/2-Z Y-X,-X,1/2-Z -Y,X-Y,1/2-Z -Y,-X,Z Y-X,Y,Z X,X-Y,Z Y,X,1/2+Z X-Y,-Y,1/2+Z -X,Y-X,1/2+Z".split(" "),"P 2 3":"X,Y,Z -X,-Y,Z -X,Y,-Z X,-Y,-Z Z,X,Y Z,-X,-Y -Z,-X,Y -Z,X,-Y Y,Z,X -Y,Z,-X Y,-Z,-X -Y,-Z,X".split(" "),"F 2 3":"X,Y,Z -X,-Y,Z -X,Y,-Z X,-Y,-Z Z,X,Y Z,-X,-Y -Z,-X,Y -Z,X,-Y Y,Z,X -Y,Z,-X Y,-Z,-X -Y,-Z,X X,1/2+Y,1/2+Z -X,1/2-Y,1/2+Z -X,1/2+Y,1/2-Z X,1/2-Y,1/2-Z Z,1/2+X,1/2+Y Z,1/2-X,1/2-Y -Z,1/2-X,1/2+Y -Z,1/2+X,1/2-Y Y,1/2+Z,1/2+X -Y,1/2+Z,1/2-X Y,1/2-Z,1/2-X -Y,1/2-Z,1/2+X 1/2+X,Y,1/2+Z 1/2-X,-Y,1/2+Z 1/2-X,Y,1/2-Z 1/2+X,-Y,1/2-Z 1/2+Z,X,1/2+Y 1/2+Z,-X,1/2-Y 1/2-Z,-X,1/2+Y 1/2-Z,X,1/2-Y 1/2+Y,Z,1/2+X 1/2-Y,Z,1/2-X 1/2+Y,-Z,1/2-X 1/2-Y,-Z,1/2+X 1/2+X,1/2+Y,Z 1/2-X,1/2-Y,Z 1/2-X,1/2+Y,-Z 1/2+X,1/2-Y,-Z 1/2+Z,1/2+X,Y 1/2+Z,1/2-X,-Y 1/2-Z,1/2-X,Y 1/2-Z,1/2+X,-Y 1/2+Y,1/2+Z,X 1/2-Y,1/2+Z,-X 1/2+Y,1/2-Z,-X 1/2-Y,1/2-Z,X".split(" "),
"I 2 3":"X,Y,Z -X,-Y,Z -X,Y,-Z X,-Y,-Z Z,X,Y Z,-X,-Y -Z,-X,Y -Z,X,-Y Y,Z,X -Y,Z,-X Y,-Z,-X -Y,-Z,X 1/2+X,1/2+Y,1/2+Z 1/2-X,1/2-Y,1/2+Z 1/2-X,1/2+Y,1/2-Z 1/2+X,1/2-Y,1/2-Z 1/2+Z,1/2+X,1/2+Y 1/2+Z,1/2-X,1/2-Y 1/2-Z,1/2-X,1/2+Y 1/2-Z,1/2+X,1/2-Y 1/2+Y,1/2+Z,1/2+X 1/2-Y,1/2+Z,1/2-X 1/2+Y,1/2-Z,1/2-X 1/2-Y,1/2-Z,1/2+X".split(" "),"P 21 3":"X,Y,Z 1/2-X,-Y,1/2+Z -X,1/2+Y,1/2-Z 1/2+X,1/2-Y,-Z Z,X,Y 1/2+Z,1/2-X,-Y 1/2-Z,-X,1/2+Y -Z,1/2+X,1/2-Y Y,Z,X -Y,1/2+Z,1/2-X 1/2+Y,1/2-Z,-X 1/2-Y,-Z,1/2+X".split(" "),
"I 21 3":"X,Y,Z 1/2-X,-Y,1/2+Z -X,1/2+Y,1/2-Z 1/2+X,1/2-Y,-Z Z,X,Y 1/2+Z,1/2-X,-Y 1/2-Z,-X,1/2+Y -Z,1/2+X,1/2-Y Y,Z,X -Y,1/2+Z,1/2-X 1/2+Y,1/2-Z,-X 1/2-Y,-Z,1/2+X 1/2+X,1/2+Y,1/2+Z -X,1/2-Y,Z 1/2-X,Y,-Z X,-Y,1/2-Z 1/2+Z,1/2+X,1/2+Y Z,-X,1/2-Y -Z,1/2-X,Y 1/2-Z,X,-Y 1/2+Y,1/2+Z,1/2+X 1/2-Y,Z,-X Y,-Z,1/2-X -Y,1/2-Z,X".split(" "),"P 2/m -3":"X,Y,Z -X,-Y,Z -X,Y,-Z X,-Y,-Z Z,X,Y Z,-X,-Y -Z,-X,Y -Z,X,-Y Y,Z,X -Y,Z,-X Y,-Z,-X -Y,-Z,X -X,-Y,-Z X,Y,-Z X,-Y,Z -X,Y,Z -Z,-X,-Y -Z,X,Y Z,X,-Y Z,-X,Y -Y,-Z,-X Y,-Z,X -Y,Z,X Y,Z,-X".split(" "),
"P 2/n -3":"X,Y,Z -X,-Y,Z -X,Y,-Z X,-Y,-Z Z,X,Y Z,-X,-Y -Z,-X,Y -Z,X,-Y Y,Z,X -Y,Z,-X Y,-Z,-X -Y,-Z,X 1/2-X,1/2-Y,1/2-Z 1/2+X,1/2+Y,1/2-Z 1/2+X,1/2-Y,1/2+Z 1/2-X,1/2+Y,1/2+Z 1/2-Z,1/2-X,1/2-Y 1/2-Z,1/2+X,1/2+Y 1/2+Z,1/2+X,1/2-Y 1/2+Z,1/2-X,1/2+Y 1/2-Y,1/2-Z,1/2-X 1/2+Y,1/2-Z,1/2+X 1/2-Y,1/2+Z,1/2+X 1/2+Y,1/2+Z,1/2-X".split(" "),"F 2/m -3":"X,Y,Z -X,-Y,Z -X,Y,-Z X,-Y,-Z Z,X,Y Z,-X,-Y -Z,-X,Y -Z,X,-Y Y,Z,X -Y,Z,-X Y,-Z,-X -Y,-Z,X -X,-Y,-Z X,Y,-Z X,-Y,Z -X,Y,Z -Z,-X,-Y -Z,X,Y Z,X,-Y Z,-X,Y -Y,-Z,-X Y,-Z,X -Y,Z,X Y,Z,-X X,1/2+Y,1/2+Z -X,1/2-Y,1/2+Z -X,1/2+Y,1/2-Z X,1/2-Y,1/2-Z Z,1/2+X,1/2+Y Z,1/2-X,1/2-Y -Z,1/2-X,1/2+Y -Z,1/2+X,1/2-Y Y,1/2+Z,1/2+X -Y,1/2+Z,1/2-X Y,1/2-Z,1/2-X -Y,1/2-Z,1/2+X -X,1/2-Y,1/2-Z X,1/2+Y,1/2-Z X,1/2-Y,1/2+Z -X,1/2+Y,1/2+Z -Z,1/2-X,1/2-Y -Z,1/2+X,1/2+Y Z,1/2+X,1/2-Y Z,1/2-X,1/2+Y -Y,1/2-Z,1/2-X Y,1/2-Z,1/2+X -Y,1/2+Z,1/2+X Y,1/2+Z,1/2-X 1/2+X,Y,1/2+Z 1/2-X,-Y,1/2+Z 1/2-X,Y,1/2-Z 1/2+X,-Y,1/2-Z 1/2+Z,X,1/2+Y 1/2+Z,-X,1/2-Y 1/2-Z,-X,1/2+Y 1/2-Z,X,1/2-Y 1/2+Y,Z,1/2+X 1/2-Y,Z,1/2-X 1/2+Y,-Z,1/2-X 1/2-Y,-Z,1/2+X 1/2-X,-Y,1/2-Z 1/2+X,Y,1/2-Z 1/2+X,-Y,1/2+Z 1/2-X,Y,1/2+Z 1/2-Z,-X,1/2-Y 1/2-Z,X,1/2+Y 1/2+Z,X,1/2-Y 1/2+Z,-X,1/2+Y 1/2-Y,-Z,1/2-X 1/2+Y,-Z,1/2+X 1/2-Y,Z,1/2+X 1/2+Y,Z,1/2-X 1/2+X,1/2+Y,Z 1/2-X,1/2-Y,Z 1/2-X,1/2+Y,-Z 1/2+X,1/2-Y,-Z 1/2+Z,1/2+X,Y 1/2+Z,1/2-X,-Y 1/2-Z,1/2-X,Y 1/2-Z,1/2+X,-Y 1/2+Y,1/2+Z,X 1/2-Y,1/2+Z,-X 1/2+Y,1/2-Z,-X 1/2-Y,1/2-Z,X 1/2-X,1/2-Y,-Z 1/2+X,1/2+Y,-Z 1/2+X,1/2-Y,Z 1/2-X,1/2+Y,Z 1/2-Z,1/2-X,-Y 1/2-Z,1/2+X,Y 1/2+Z,1/2+X,-Y 1/2+Z,1/2-X,Y 1/2-Y,1/2-Z,-X 1/2+Y,1/2-Z,X 1/2-Y,1/2+Z,X 1/2+Y,1/2+Z,-X".split(" "),
"F 2/d -3":"X,Y,Z -X,-Y,Z -X,Y,-Z X,-Y,-Z Z,X,Y Z,-X,-Y -Z,-X,Y -Z,X,-Y Y,Z,X -Y,Z,-X Y,-Z,-X -Y,-Z,X 1/4-X,1/4-Y,1/4-Z 1/4+X,1/4+Y,1/4-Z 1/4+X,1/4-Y,1/4+Z 1/4-X,1/4+Y,1/4+Z 1/4-Z,1/4-X,1/4-Y 1/4-Z,1/4+X,1/4+Y 1/4+Z,1/4+X,1/4-Y 1/4+Z,1/4-X,1/4+Y 1/4-Y,1/4-Z,1/4-X 1/4+Y,1/4-Z,1/4+X 1/4-Y,1/4+Z,1/4+X 1/4+Y,1/4+Z,1/4-X X,1/2+Y,1/2+Z -X,1/2-Y,1/2+Z -X,1/2+Y,1/2-Z X,1/2-Y,1/2-Z Z,1/2+X,1/2+Y Z,1/2-X,1/2-Y -Z,1/2-X,1/2+Y -Z,1/2+X,1/2-Y Y,1/2+Z,1/2+X -Y,1/2+Z,1/2-X Y,1/2-Z,1/2-X -Y,1/2-Z,1/2+X 1/4-X,3/4-Y,3/4-Z 1/4+X,3/4+Y,3/4-Z 1/4+X,3/4-Y,3/4+Z 1/4-X,3/4+Y,3/4+Z 1/4-Z,3/4-X,3/4-Y 1/4-Z,3/4+X,3/4+Y 1/4+Z,3/4+X,3/4-Y 1/4+Z,3/4-X,3/4+Y 1/4-Y,3/4-Z,3/4-X 1/4+Y,3/4-Z,3/4+X 1/4-Y,3/4+Z,3/4+X 1/4+Y,3/4+Z,3/4-X 1/2+X,Y,1/2+Z 1/2-X,-Y,1/2+Z 1/2-X,Y,1/2-Z 1/2+X,-Y,1/2-Z 1/2+Z,X,1/2+Y 1/2+Z,-X,1/2-Y 1/2-Z,-X,1/2+Y 1/2-Z,X,1/2-Y 1/2+Y,Z,1/2+X 1/2-Y,Z,1/2-X 1/2+Y,-Z,1/2-X 1/2-Y,-Z,1/2+X 3/4-X,1/4-Y,3/4-Z 3/4+X,1/4+Y,3/4-Z 3/4+X,1/4-Y,3/4+Z 3/4-X,1/4+Y,3/4+Z 3/4-Z,1/4-X,3/4-Y 3/4-Z,1/4+X,3/4+Y 3/4+Z,1/4+X,3/4-Y 3/4+Z,1/4-X,3/4+Y 3/4-Y,1/4-Z,3/4-X 3/4+Y,1/4-Z,3/4+X 3/4-Y,1/4+Z,3/4+X 3/4+Y,1/4+Z,3/4-X 1/2+X,1/2+Y,Z 1/2-X,1/2-Y,Z 1/2-X,1/2+Y,-Z 1/2+X,1/2-Y,-Z 1/2+Z,1/2+X,Y 1/2+Z,1/2-X,-Y 1/2-Z,1/2-X,Y 1/2-Z,1/2+X,-Y 1/2+Y,1/2+Z,X 1/2-Y,1/2+Z,-X 1/2+Y,1/2-Z,-X 1/2-Y,1/2-Z,X 3/4-X,3/4-Y,1/4-Z 3/4+X,3/4+Y,1/4-Z 3/4+X,3/4-Y,Z+1/4 3/4-X,3/4+Y,Z+1/4 3/4-Z,3/4-X,1/4-Y 3/4-Z,3/4+X,1/4+Y 3/4+Z,3/4+X,1/4-Y 3/4+Z,3/4-X,1/4+Y 3/4-Y,3/4-Z,1/4-X 3/4+Y,3/4-Z,1/4+X 3/4-Y,3/4+Z,1/4+X 3/4+Y,3/4+Z,1/4-X".split(" "),
"I 2/m -3":"X,Y,Z -X,-Y,Z -X,Y,-Z X,-Y,-Z Z,X,Y Z,-X,-Y -Z,-X,Y -Z,X,-Y Y,Z,X -Y,Z,-X Y,-Z,-X -Y,-Z,X -X,-Y,-Z X,Y,-Z X,-Y,Z -X,Y,Z -Z,-X,-Y -Z,X,Y Z,X,-Y Z,-X,Y -Y,-Z,-X Y,-Z,X -Y,Z,X Y,Z,-X 1/2+X,1/2+Y,1/2+Z 1/2-X,1/2-Y,1/2+Z 1/2-X,1/2+Y,1/2-Z 1/2+X,1/2-Y,1/2-Z 1/2+Z,1/2+X,1/2+Y 1/2+Z,1/2-X,1/2-Y 1/2-Z,1/2-X,1/2+Y 1/2-Z,1/2+X,1/2-Y 1/2+Y,1/2+Z,1/2+X 1/2-Y,1/2+Z,1/2-X 1/2+Y,1/2-Z,1/2-X 1/2-Y,1/2-Z,1/2+X 1/2-X,1/2-Y,1/2-Z 1/2+X,1/2+Y,1/2-Z 1/2+X,1/2-Y,1/2+Z 1/2-X,1/2+Y,1/2+Z 1/2-Z,1/2-X,1/2-Y 1/2-Z,1/2+X,1/2+Y 1/2+Z,1/2+X,1/2-Y 1/2+Z,1/2-X,1/2+Y 1/2-Y,1/2-Z,1/2-X 1/2+Y,1/2-Z,1/2+X 1/2-Y,1/2+Z,1/2+X 1/2+Y,1/2+Z,1/2-X".split(" "),
"P 21/a -3":"X,Y,Z 1/2-X,-Y,1/2+Z -X,1/2+Y,1/2-Z 1/2+X,1/2-Y,-Z Z,X,Y 1/2+Z,1/2-X,-Y 1/2-Z,-X,1/2+Y -Z,1/2+X,1/2-Y Y,Z,X -Y,1/2+Z,1/2-X 1/2+Y,1/2-Z,-X 1/2-Y,-Z,1/2+X -X,-Y,-Z 1/2+X,Y,1/2-Z X,1/2-Y,1/2+Z 1/2-X,1/2+Y,Z -Z,-X,-Y 1/2-Z,1/2+X,Y 1/2+Z,X,1/2-Y Z,1/2-X,1/2+Y -Y,-Z,-X Y,1/2-Z,1/2+X 1/2-Y,1/2+Z,X 1/2+Y,Z,1/2-X".split(" "),"I 21/a -3":"X,Y,Z 1/2-X,-Y,1/2+Z -X,1/2+Y,1/2-Z 1/2+X,1/2-Y,-Z Z,X,Y 1/2+Z,1/2-X,-Y 1/2-Z,-X,1/2+Y -Z,1/2+X,1/2-Y Y,Z,X -Y,1/2+Z,1/2-X 1/2+Y,1/2-Z,-X 1/2-Y,-Z,1/2+X -X,-Y,-Z 1/2+X,Y,1/2-Z X,1/2-Y,1/2+Z 1/2-X,1/2+Y,Z -Z,-X,-Y 1/2-Z,1/2+X,Y 1/2+Z,X,1/2-Y Z,1/2-X,1/2+Y -Y,-Z,-X Y,1/2-Z,1/2+X 1/2-Y,1/2+Z,X 1/2+Y,Z,1/2-X 1/2+X,1/2+Y,1/2+Z -X,1/2-Y,Z 1/2-X,+Y,-Z X,-Y,1/2-Z 1/2+Z,1/2+X,1/2+Y Z,-X,1/2-Y -Z,1/2-X,Y 1/2-Z,X,-Y 1/2+Y,1/2+Z,1/2+X 1/2-Y,Z,-X Y,-Z,1/2-X -Y,1/2-Z,X 1/2-X,1/2-Y,1/2-Z X,1/2+Y,-Z 1/2+X,-Y,Z -X,Y,1/2+Z 1/2-Z,1/2-X,1/2-Y -Z,X,1/2+Y Z,1/2+X,-Y 1/2+Z,-X,Y 1/2-Y,1/2-Z,1/2-X 1/2+Y,-Z,X -Y,Z,1/2+X Y,1/2+Z,-X".split(" "),
"P 4 3 2":"X,Y,Z -X,-Y,Z -X,Y,-Z X,-Y,-Z Z,X,Y Z,-X,-Y -Z,-X,Y -Z,X,-Y Y,Z,X -Y,Z,-X Y,-Z,-X -Y,-Z,X Y,X,-Z -Y,-X,-Z Y,-X,Z -Y,X,Z X,Z,-Y -X,Z,Y -X,-Z,-Y X,-Z,Y Z,Y,-X Z,-Y,X -Z,Y,X -Z,-Y,-X".split(" "),"P 42 3 2":"X,Y,Z -X,-Y,Z -X,Y,-Z X,-Y,-Z Z,X,Y Z,-X,-Y -Z,-X,Y -Z,X,-Y Y,Z,X -Y,Z,-X Y,-Z,-X -Y,-Z,X 1/2+Y,1/2+X,1/2-Z 1/2-Y,1/2-X,1/2-Z 1/2+Y,1/2-X,1/2+Z 1/2-Y,1/2+X,1/2+Z 1/2+X,1/2+Z,1/2-Y 1/2-X,1/2+Z,1/2+Y 1/2-X,1/2-Z,1/2-Y 1/2+X,1/2-Z,1/2+Y 1/2+Z,1/2+Y,1/2-X 1/2+Z,1/2-Y,1/2+X 1/2-Z,1/2+Y,1/2+X 1/2-Z,1/2-Y,1/2-X".split(" "),
"F 4 3 2":"X,Y,Z -X,-Y,Z -X,Y,-Z X,-Y,-Z Z,X,Y Z,-X,-Y -Z,-X,Y -Z,X,-Y Y,Z,X -Y,Z,-X Y,-Z,-X -Y,-Z,X Y,X,-Z -Y,-X,-Z Y,-X,Z -Y,X,Z X,Z,-Y -X,Z,Y -X,-Z,-Y X,-Z,Y Z,Y,-X Z,-Y,X -Z,Y,X -Z,-Y,-X X,1/2+Y,1/2+Z -X,1/2-Y,1/2+Z -X,1/2+Y,1/2-Z X,1/2-Y,1/2-Z Z,1/2+X,1/2+Y Z,1/2-X,1/2-Y -Z,1/2-X,1/2+Y -Z,1/2+X,1/2-Y Y,1/2+Z,1/2+X -Y,1/2+Z,1/2-X Y,1/2-Z,1/2-X -Y,1/2-Z,1/2+X Y,1/2+X,1/2-Z -Y,1/2-X,1/2-Z Y,1/2-X,1/2+Z -Y,1/2+X,1/2+Z X,1/2+Z,1/2-Y -X,1/2+Z,1/2+Y -X,1/2-Z,1/2-Y X,1/2-Z,1/2+Y Z,1/2+Y,1/2-X Z,1/2-Y,1/2+X -Z,1/2+Y,1/2+X -Z,1/2-Y,1/2-X 1/2+X,Y,1/2+Z 1/2-X,-Y,1/2+Z 1/2-X,Y,1/2-Z 1/2+X,-Y,1/2-Z 1/2+Z,X,1/2+Y 1/2+Z,-X,1/2-Y 1/2-Z,-X,1/2+Y 1/2-Z,X,1/2-Y 1/2+Y,Z,1/2+X 1/2-Y,Z,1/2-X 1/2+Y,-Z,1/2-X 1/2-Y,-Z,1/2+X 1/2+Y,X,1/2-Z 1/2-Y,-X,1/2-Z 1/2+Y,-X,1/2+Z 1/2-Y,X,1/2+Z 1/2+X,Z,1/2-Y 1/2-X,Z,1/2+Y 1/2-X,-Z,1/2-Y 1/2+X,-Z,1/2+Y 1/2+Z,Y,1/2-X 1/2+Z,-Y,1/2+X 1/2-Z,Y,1/2+X 1/2-Z,-Y,1/2-X 1/2+X,1/2+Y,Z 1/2-X,1/2-Y,Z 1/2-X,1/2+Y,-Z 1/2+X,1/2-Y,-Z 1/2+Z,1/2+X,Y 1/2+Z,1/2-X,-Y 1/2-Z,1/2-X,Y 1/2-Z,1/2+X,-Y 1/2+Y,1/2+Z,X 1/2-Y,1/2+Z,-X 1/2+Y,1/2-Z,-X 1/2-Y,1/2-Z,X 1/2+Y,1/2+X,-Z 1/2-Y,1/2-X,-Z 1/2+Y,1/2-X,Z 1/2-Y,1/2+X,Z 1/2+X,1/2+Z,-Y 1/2-X,1/2+Z,Y 1/2-X,1/2-Z,-Y 1/2+X,1/2-Z,Y 1/2+Z,1/2+Y,-X 1/2+Z,1/2-Y,X 1/2-Z,1/2+Y,X 1/2-Z,1/2-Y,-X".split(" "),
"F 41 3 2":"X,Y,Z -X,1/2-Y,1/2+Z 1/2-X,1/2+Y,-Z 1/2+X,-Y,1/2-Z Z,X,Y 1/2+Z,-X,1/2-Y -Z,1/2-X,1/2+Y 1/2-Z,1/2+X,-Y Y,Z,X 1/2-Y,1/2+Z,-X 1/2+Y,-Z,1/2-X -Y,1/2-Z,1/2+X 3/4+Y,1/4+X,3/4-Z 1/4-Y,1/4-X,1/4-Z 1/4+Y,3/4-X,3/4+Z 3/4-Y,3/4+X,1/4+Z 3/4+X,1/4+Z,3/4-Y 3/4-X,3/4+Z,1/4+Y 1/4-X,1/4-Z,1/4-Y 1/4+X,3/4-Z,3/4+Y 3/4+Z,1/4+Y,3/4-X 1/4+Z,3/4-Y,3/4+X 3/4-Z,3/4+Y,1/4+X 1/4-Z,1/4-Y,1/4-X X,1/2+Y,1/2+Z -X,-Y,Z 1/2-X,Y,1/2-Z 1/2+X,1/2-Y,-Z Z,1/2+X,1/2+Y 1/2+Z,1/2-X,-Y -Z,-X,Y 1/2-Z,X,1/2-Y Y,1/2+Z,1/2+X 1/2-Y,Z,1/2-X 1/2+Y,1/2-Z,-X -Y,-Z,X 3/4+Y,3/4+X,1/4-Z 1/4-Y,3/4-X,3/4-Z 1/4+Y,1/4-X,1/4+Z 3/4-Y,1/4+X,3/4+Z 3/4+X,3/4+Z,1/4-Y 3/4-X,1/4+Z,3/4+Y 1/4-X,3/4-Z,3/4-Y 1/4+X,1/4-Z,1/4+Y 3/4+Z,3/4+Y,1/4-X 1/4+Z,1/4-Y,1/4+X 3/4-Z,1/4+Y,3/4+X 1/4-Z,3/4-Y,3/4-X 1/2+X,Y,1/2+Z 1/2-X,1/2-Y,Z -X,1/2+Y,1/2-Z X,-Y,-Z 1/2+Z,X,1/2+Y Z,-X,-Y 1/2-Z,1/2-X,Y -Z,1/2+X,1/2-Y 1/2+Y,Z,1/2+X -Y,1/2+Z,1/2-X Y,-Z,-X 1/2-Y,1/2-Z,X 1/4+Y,1/4+X,1/4-Z 3/4-Y,1/4-X,3/4-Z 3/4+Y,3/4-X,1/4+Z 1/4-Y,3/4+X,3/4+Z 1/4+X,1/4+Z,1/4-Y 1/4-X,3/4+Z,3/4+Y 3/4-X,1/4-Z,3/4-Y 3/4+X,3/4-Z,1/4+Y 1/4+Z,1/4+Y,1/4-X 3/4+Z,3/4-Y,1/4+X 1/4-Z,3/4+Y,3/4+X 3/4-Z,1/4-Y,3/4-X 1/2+X,1/2+Y,Z 1/2-X,-Y,1/2+Z -X,Y,-Z X,1/2-Y,1/2-Z 1/2+Z,1/2+X,Y Z,1/2-X,1/2-Y 1/2-Z,-X,1/2+Y -Z,X,-Y 1/2+Y,1/2+Z,X -Y,Z,-X Y,1/2-Z,1/2-X 1/2-Y,-Z,1/2+X 1/4+Y,3/4+X,3/4-Z 3/4-Y,3/4-X,1/4-Z 3/4+Y,1/4-X,3/4+Z 1/4-Y,1/4+X,1/4+Z 1/4+X,3/4+Z,3/4-Y 1/4-X,1/4+Z,1/4+Y 3/4-X,3/4-Z,1/4-Y 3/4+X,1/4-Z,3/4+Y 1/4+Z,3/4+Y,3/4-X 3/4+Z,1/4-Y,3/4+X 1/4-Z,1/4+Y,1/4+X 3/4-Z,3/4-Y,1/4-X".split(" "),
"I 4 3 2":"X,Y,Z -X,-Y,Z -X,Y,-Z X,-Y,-Z Z,X,Y Z,-X,-Y -Z,-X,Y -Z,X,-Y Y,Z,X -Y,Z,-X Y,-Z,-X -Y,-Z,X Y,X,-Z -Y,-X,-Z Y,-X,Z -Y,X,Z X,Z,-Y -X,Z,Y -X,-Z,-Y X,-Z,Y Z,Y,-X Z,-Y,X -Z,Y,X -Z,-Y,-X 1/2+X,1/2+Y,1/2+Z 1/2-X,1/2-Y,1/2+Z 1/2-X,1/2+Y,1/2-Z 1/2+X,1/2-Y,1/2-Z 1/2+Z,1/2+X,1/2+Y 1/2+Z,1/2-X,1/2-Y 1/2-Z,1/2-X,1/2+Y 1/2-Z,1/2+X,1/2-Y 1/2+Y,1/2+Z,1/2+X 1/2-Y,1/2+Z,1/2-X 1/2+Y,1/2-Z,1/2-X 1/2-Y,1/2-Z,1/2+X 1/2+Y,1/2+X,1/2-Z 1/2-Y,1/2-X,1/2-Z 1/2+Y,1/2-X,1/2+Z 1/2-Y,1/2+X,1/2+Z 1/2+X,1/2+Z,1/2-Y 1/2-X,1/2+Z,1/2+Y 1/2-X,1/2-Z,1/2-Y 1/2+X,1/2-Z,1/2+Y 1/2+Z,1/2+Y,1/2-X 1/2+Z,1/2-Y,1/2+X 1/2-Z,1/2+Y,1/2+X 1/2-Z,1/2-Y,1/2-X".split(" "),
"P 43 3 2":"X,Y,Z 1/2-X,-Y,1/2+Z -X,1/2+Y,1/2-Z 1/2+X,1/2-Y,-Z Z,X,Y 1/2+Z,1/2-X,-Y 1/2-Z,-X,1/2+Y -Z,1/2+X,1/2-Y Y,Z,X -Y,1/2+Z,1/2-X 1/2+Y,1/2-Z,-X 1/2-Y,-Z,1/2+X 1/4+Y,3/4+X,3/4-Z 1/4-Y,1/4-X,1/4-Z 3/4+Y,3/4-X,1/4+Z 3/4-Y,1/4+X,3/4+Z 1/4+X,3/4+Z,3/4-Y 3/4-X,1/4+Z,3/4+Y 1/4-X,1/4-Z,1/4-Y 3/4+X,3/4-Z,1/4+Y 1/4+Z,3/4+Y,3/4-X 3/4+Z,3/4-Y,1/4+X 3/4-Z,1/4+Y,3/4+X 1/4-Z,1/4-Y,1/4-X".split(" "),"P 41 3 2":"X,Y,Z 1/2-X,-Y,1/2+Z -X,1/2+Y,1/2-Z 1/2+X,1/2-Y,-Z Z,X,Y 1/2+Z,1/2-X,-Y 1/2-Z,-X,1/2+Y -Z,1/2+X,1/2-Y Y,Z,X -Y,1/2+Z,1/2-X 1/2+Y,1/2-Z,-X 1/2-Y,-Z,1/2+X 3/4+Y,1/4+X,1/4-Z 3/4-Y,3/4-X,3/4-Z 1/4+Y,1/4-X,3/4+Z 1/4-Y,3/4+X,1/4+Z 3/4+X,1/4+Z,1/4-Y 1/4-X,3/4+Z,1/4+Y 3/4-X,3/4-Z,3/4-Y 1/4+X,1/4-Z,3/4+Y 3/4+Z,1/4+Y,1/4-X 1/4+Z,1/4-Y,3/4+X 1/4-Z,3/4+Y,1/4+X 3/4-Z,3/4-Y,3/4-X".split(" "),
"I 41 3 2":"X,Y,Z 1/2-X,-Y,1/2+Z -X,1/2+Y,1/2-Z 1/2+X,1/2-Y,-Z Z,X,Y 1/2+Z,1/2-X,-Y 1/2-Z,-X,1/2+Y -Z,1/2+X,1/2-Y Y,Z,X -Y,1/2+Z,1/2-X 1/2+Y,1/2-Z,-X 1/2-Y,-Z,1/2+X 3/4+Y,1/4+X,1/4-Z 3/4-Y,3/4-X,3/4-Z 1/4+Y,1/4-X,3/4+Z 1/4-Y,3/4+X,1/4+Z 3/4+X,1/4+Z,1/4-Y 1/4-X,3/4+Z,1/4+Y 3/4-X,3/4-Z,3/4-Y 1/4+X,1/4-Z,3/4+Y 3/4+Z,1/4+Y,1/4-X 1/4+Z,1/4-Y,3/4+X 1/4-Z,3/4+Y,1/4+X 3/4-Z,3/4-Y,3/4-X 1/2+X,1/2+Y,1/2+Z -X,1/2-Y,Z 1/2-X,Y,-Z X,-Y,1/2-Z 1/2+Z,1/2+X,1/2+Y Z,-X,1/2-Y -Z,1/2-X,Y 1/2-Z,X,-Y 1/2+Y,1/2+Z,1/2+X 1/2-Y,Z,-X Y,-Z,1/2-X -Y,1/2-Z,X 1/4+Y,3/4+X,3/4-Z 1/4-Y,1/4-X,1/4-Z 3/4+Y,3/4-X,1/4+Z 3/4-Y,1/4+X,3/4+Z 1/4+X,3/4+Z,3/4-Y 3/4-X,1/4+Z,3/4+Y 1/4-X,1/4-Z,1/4-Y 3/4+X,3/4-Z,1/4+Y 1/4+Z,3/4+Y,3/4-X 3/4+Z,3/4-Y,1/4+X 3/4-Z,1/4+Y,3/4+X 1/4-Z,1/4-Y,1/4-X".split(" "),
"P -4 3 m":"X,Y,Z -X,-Y,Z -X,Y,-Z X,-Y,-Z Z,X,Y Z,-X,-Y -Z,-X,Y -Z,X,-Y Y,Z,X -Y,Z,-X Y,-Z,-X -Y,-Z,X Y,X,Z -Y,-X,Z Y,-X,-Z -Y,X,-Z X,Z,Y -X,Z,-Y -X,-Z,Y X,-Z,-Y Z,Y,X Z,-Y,-X -Z,Y,-X -Z,-Y,X".split(" "),"F -4 3 m":"X,Y,Z -X,-Y,Z -X,Y,-Z X,-Y,-Z Z,X,Y Z,-X,-Y -Z,-X,Y -Z,X,-Y Y,Z,X -Y,Z,-X Y,-Z,-X -Y,-Z,X Y,X,Z -Y,-X,Z Y,-X,-Z -Y,X,-Z X,Z,Y -X,Z,-Y -X,-Z,Y X,-Z,-Y Z,Y,X Z,-Y,-X -Z,Y,-X -Z,-Y,X X,1/2+Y,1/2+Z -X,1/2-Y,1/2+Z -X,1/2+Y,1/2-Z X,1/2-Y,1/2-Z Z,1/2+X,1/2+Y Z,1/2-X,1/2-Y -Z,1/2-X,1/2+Y -Z,1/2+X,1/2-Y Y,1/2+Z,1/2+X -Y,1/2+Z,1/2-X Y,1/2-Z,1/2-X -Y,1/2-Z,1/2+X Y,1/2+X,1/2+Z -Y,1/2-X,1/2+Z Y,1/2-X,1/2-Z -Y,1/2+X,1/2-Z X,1/2+Z,1/2+Y -X,1/2+Z,1/2-Y -X,1/2-Z,1/2+Y X,1/2-Z,1/2-Y Z,1/2+Y,1/2+X Z,1/2-Y,1/2-X -Z,1/2+Y,1/2-X -Z,1/2-Y,1/2+X 1/2+X,Y,1/2+Z 1/2-X,-Y,1/2+Z 1/2-X,Y,1/2-Z 1/2+X,-Y,1/2-Z 1/2+Z,X,1/2+Y 1/2+Z,-X,1/2-Y 1/2-Z,-X,1/2+Y 1/2-Z,X,1/2-Y 1/2+Y,Z,1/2+X 1/2-Y,Z,1/2-X 1/2+Y,-Z,1/2-X 1/2-Y,-Z,1/2+X 1/2+Y,X,1/2+Z 1/2-Y,-X,1/2+Z 1/2+Y,-X,1/2-Z 1/2-Y,X,1/2-Z 1/2+X,Z,1/2+Y 1/2-X,Z,1/2-Y 1/2-X,-Z,1/2+Y 1/2+X,-Z,1/2-Y 1/2+Z,Y,1/2+X 1/2+Z,-Y,1/2-X 1/2-Z,Y,1/2-X 1/2-Z,-Y,1/2+X 1/2+X,1/2+Y,Z 1/2-X,1/2-Y,Z 1/2-X,1/2+Y,-Z 1/2+X,1/2-Y,-Z 1/2+Z,1/2+X,Y 1/2+Z,1/2-X,-Y 1/2-Z,1/2-X,Y 1/2-Z,1/2+X,-Y 1/2+Y,1/2+Z,X 1/2-Y,1/2+Z,-X 1/2+Y,1/2-Z,-X 1/2-Y,1/2-Z,X 1/2+Y,1/2+X,Z 1/2-Y,1/2-X,Z 1/2+Y,1/2-X,-Z 1/2-Y,1/2+X,-Z 1/2+X,1/2+Z,Y 1/2-X,1/2+Z,-Y 1/2-X,1/2-Z,Y 1/2+X,1/2-Z,-Y 1/2+Z,1/2+Y,X 1/2+Z,1/2-Y,-X 1/2-Z,1/2+Y,-X 1/2-Z,1/2-Y,X".split(" "),
"I -4 3 m":"X,Y,Z -X,-Y,Z -X,Y,-Z X,-Y,-Z Z,X,Y Z,-X,-Y -Z,-X,Y -Z,X,-Y Y,Z,X -Y,Z,-X Y,-Z,-X -Y,-Z,X Y,X,Z -Y,-X,Z Y,-X,-Z -Y,X,-Z X,Z,Y -X,Z,-Y -X,-Z,Y X,-Z,-Y Z,Y,X Z,-Y,-X -Z,Y,-X -Z,-Y,X 1/2+X,1/2+Y,1/2+Z 1/2-X,1/2-Y,1/2+Z 1/2-X,1/2+Y,1/2-Z 1/2+X,1/2-Y,1/2-Z 1/2+Z,1/2+X,1/2+Y 1/2+Z,1/2-X,1/2-Y 1/2-Z,1/2-X,1/2+Y 1/2-Z,1/2+X,1/2-Y 1/2+Y,1/2+Z,1/2+X 1/2-Y,1/2+Z,1/2-X 1/2+Y,1/2-Z,1/2-X 1/2-Y,1/2-Z,1/2+X 1/2+Y,1/2+X,1/2+Z 1/2-Y,1/2-X,1/2+Z 1/2+Y,1/2-X,1/2-Z 1/2-Y,1/2+X,1/2-Z 1/2+X,1/2+Z,1/2+Y 1/2-X,1/2+Z,1/2-Y 1/2-X,1/2-Z,1/2+Y 1/2+X,1/2-Z,1/2-Y 1/2+Z,1/2+Y,1/2+X 1/2+Z,1/2-Y,1/2-X 1/2-Z,1/2+Y,1/2-X 1/2-Z,1/2-Y,1/2+X".split(" "),
"P -4 3 n":"X,Y,Z -X,-Y,Z -X,Y,-Z X,-Y,-Z Z,X,Y Z,-X,-Y -Z,-X,Y -Z,X,-Y Y,Z,X -Y,Z,-X Y,-Z,-X -Y,-Z,X 1/2+Y,1/2+X,1/2+Z 1/2-Y,1/2-X,1/2+Z 1/2+Y,1/2-X,1/2-Z 1/2-Y,1/2+X,1/2-Z 1/2+X,1/2+Z,1/2+Y 1/2-X,1/2+Z,1/2-Y 1/2-X,1/2-Z,1/2+Y 1/2+X,1/2-Z,1/2-Y 1/2+Z,1/2+Y,1/2+X 1/2+Z,1/2-Y,1/2-X 1/2-Z,1/2+Y,1/2-X 1/2-Z,1/2-Y,1/2+X".split(" "),"F -4 3 c":"X,Y,Z -X,-Y,Z -X,Y,-Z X,-Y,-Z Z,X,Y Z,-X,-Y -Z,-X,Y -Z,X,-Y Y,Z,X -Y,Z,-X Y,-Z,-X -Y,-Z,X 1/2+Y,1/2+X,1/2+Z 1/2-Y,1/2-X,1/2+Z 1/2+Y,1/2-X,1/2-Z 1/2-Y,1/2+X,1/2-Z 1/2+X,1/2+Z,1/2+Y 1/2-X,1/2+Z,1/2-Y 1/2-X,1/2-Z,1/2+Y 1/2+X,1/2-Z,1/2-Y 1/2+Z,1/2+Y,1/2+X 1/2+Z,1/2-Y,1/2-X 1/2-Z,1/2+Y,1/2-X 1/2-Z,1/2-Y,1/2+X X,1/2+Y,1/2+Z -X,1/2-Y,1/2+Z -X,1/2+Y,1/2-Z X,1/2-Y,1/2-Z Z,1/2+X,1/2+Y Z,1/2-X,1/2-Y -Z,1/2-X,1/2+Y -Z,1/2+X,1/2-Y Y,1/2+Z,1/2+X -Y,1/2+Z,1/2-X Y,1/2-Z,1/2-X -Y,1/2-Z,1/2+X 1/2+Y,X,Z 1/2-Y,-X,Z 1/2+Y,-X,-Z 1/2-Y,X,-Z 1/2+X,Z,Y 1/2-X,Z,-Y 1/2-X,-Z,Y 1/2+X,-Z,-Y 1/2+Z,Y,X 1/2+Z,-Y,-X 1/2-Z,Y,-X 1/2-Z,-Y,X 1/2+X,Y,1/2+Z 1/2-X,-Y,1/2+Z 1/2-X,Y,1/2-Z 1/2+X,-Y,1/2-Z 1/2+Z,X,1/2+Y 1/2+Z,-X,1/2-Y 1/2-Z,-X,1/2+Y 1/2-Z,X,1/2-Y 1/2+Y,Z,1/2+X 1/2-Y,Z,1/2-X 1/2+Y,-Z,1/2-X 1/2-Y,-Z,1/2+X Y,1/2+X,Z -Y,1/2-X,Z Y,1/2-X,-Z -Y,1/2+X,-Z X,1/2+Z,Y -X,1/2+Z,-Y -X,1/2-Z,Y X,1/2-Z,-Y Z,1/2+Y,X Z,1/2-Y,-X -Z,1/2+Y,-X -Z,1/2-Y,X 1/2+X,1/2+Y,Z 1/2-X,1/2-Y,Z 1/2-X,1/2+Y,-Z 1/2+X,1/2-Y,-Z 1/2+Z,1/2+X,Y 1/2+Z,1/2-X,-Y 1/2-Z,1/2-X,Y 1/2-Z,1/2+X,-Y 1/2+Y,1/2+Z,X 1/2-Y,1/2+Z,-X 1/2+Y,1/2-Z,-X 1/2-Y,1/2-Z,X Y,X,1/2+Z -Y,-X,1/2+Z Y,-X,1/2-Z -Y,X,1/2-Z X,Z,1/2+Y -X,Z,1/2-Y -X,-Z,1/2+Y X,-Z,1/2-Y Z,Y,1/2+X Z,-Y,1/2-X -Z,Y,1/2-X -Z,-Y,1/2+X".split(" "),
"I -4 3 d":"X,Y,Z 1/2-X,-Y,1/2+Z -X,1/2+Y,1/2-Z 1/2+X,1/2-Y,-Z Z,X,Y 1/2+Z,1/2-X,-Y 1/2-Z,-X,1/2+Y -Z,1/2+X,1/2-Y Y,Z,X -Y,1/2+Z,1/2-X 1/2+Y,1/2-Z,-X 1/2-Y,-Z,1/2+X 1/4+Y,1/4+X,1/4+Z 1/4-Y,3/4-X,3/4+Z 3/4+Y,1/4-X,3/4-Z 3/4-Y,3/4+X,1/4-Z 1/4+X,1/4+Z,1/4+Y 3/4-X,3/4+Z,1/4-Y 1/4-X,3/4-Z,3/4+Y 3/4+X,1/4-Z,3/4-Y 1/4+Z,1/4+Y,1/4+X 3/4+Z,1/4-Y,3/4-X 3/4-Z,3/4+Y,1/4-X 1/4-Z,3/4-Y,3/4+X 1/2+X,1/2+Y,1/2+Z -X,1/2-Y,Z 1/2-X,Y,-Z X,-Y,1/2-Z 1/2+Z,1/2+X,1/2+Y Z,-X,1/2-Y -Z,1/2-X,Y 1/2-Z,X,-Y 1/2+Y,1/2+Z,1/2+X 1/2-Y,Z,-X Y,-Z,1/2-X -Y,1/2-Z,X 3/4+Y,3/4+X,3/4+Z 3/4-Y,1/4-X,1/4+Z 1/4+Y,3/4-X,1/4-Z 1/4-Y,1/4+X,3/4-Z 3/4+X,3/4+Z,3/4+Y 1/4-X,1/4+Z,3/4-Y 3/4-X,1/4-Z,1/4+Y 1/4+X,3/4-Z,1/4-Y 3/4+Z,3/4+Y,3/4+X 1/4+Z,3/4-Y,1/4-X 1/4-Z,1/4+Y,3/4-X 3/4-Z,1/4-Y,1/4+X".split(" "),
"P 4/m -3 2/m":"X,Y,Z -X,-Y,Z -X,Y,-Z X,-Y,-Z Z,X,Y Z,-X,-Y -Z,-X,Y -Z,X,-Y Y,Z,X -Y,Z,-X Y,-Z,-X -Y,-Z,X Y,X,-Z -Y,-X,-Z Y,-X,Z -Y,X,Z X,Z,-Y -X,Z,Y -X,-Z,-Y X,-Z,Y Z,Y,-X Z,-Y,X -Z,Y,X -Z,-Y,-X -X,-Y,-Z X,Y,-Z X,-Y,Z -X,Y,Z -Z,-X,-Y -Z,X,Y Z,X,-Y Z,-X,Y -Y,-Z,-X Y,-Z,X -Y,Z,X Y,Z,-X -Y,-X,Z Y,X,Z -Y,X,-Z Y,-X,-Z -X,-Z,Y X,-Z,-Y X,Z,Y -X,Z,-Y -Z,-Y,X -Z,Y,-X Z,-Y,-X Z,Y,X".split(" "),"P 4/n -3 2/n":"X,Y,Z -X,-Y,Z -X,Y,-Z X,-Y,-Z Z,X,Y Z,-X,-Y -Z,-X,Y -Z,X,-Y Y,Z,X -Y,Z,-X Y,-Z,-X -Y,-Z,X Y,X,-Z -Y,-X,-Z Y,-X,Z -Y,X,Z X,Z,-Y -X,Z,Y -X,-Z,-Y X,-Z,Y Z,Y,-X Z,-Y,X -Z,Y,X -Z,-Y,-X 1/2-X,1/2-Y,1/2-Z 1/2+X,1/2+Y,1/2-Z 1/2+X,1/2-Y,1/2+Z 1/2-X,1/2+Y,1/2+Z 1/2-Z,1/2-X,1/2-Y 1/2-Z,1/2+X,1/2+Y 1/2+Z,1/2+X,1/2-Y 1/2+Z,1/2-X,1/2+Y 1/2-Y,1/2-Z,1/2-X 1/2+Y,1/2-Z,1/2+X 1/2-Y,1/2+Z,1/2+X 1/2+Y,1/2+Z,1/2-X 1/2-Y,1/2-X,1/2+Z 1/2+Y,1/2+X,1/2+Z 1/2-Y,1/2+X,1/2-Z 1/2+Y,1/2-X,1/2-Z 1/2-X,1/2-Z,1/2+Y 1/2+X,1/2-Z,1/2-Y 1/2+X,1/2+Z,1/2+Y 1/2-X,1/2+Z,1/2-Y 1/2-Z,1/2-Y,1/2+X 1/2-Z,1/2+Y,1/2-X 1/2+Z,1/2-Y,1/2-X 1/2+Z,1/2+Y,1/2+X".split(" "),
"P 42/m -3 2/n":"X,Y,Z -X,-Y,Z -X,Y,-Z X,-Y,-Z Z,X,Y Z,-X,-Y -Z,-X,Y -Z,X,-Y Y,Z,X -Y,Z,-X Y,-Z,-X -Y,-Z,X 1/2+Y,1/2+X,1/2-Z 1/2-Y,1/2-X,1/2-Z 1/2+Y,1/2-X,1/2+Z 1/2-Y,1/2+X,1/2+Z 1/2+X,1/2+Z,1/2-Y 1/2-X,1/2+Z,1/2+Y 1/2-X,1/2-Z,1/2-Y 1/2+X,1/2-Z,1/2+Y 1/2+Z,1/2+Y,1/2-X 1/2+Z,1/2-Y,1/2+X 1/2-Z,1/2+Y,1/2+X 1/2-Z,1/2-Y,1/2-X -X,-Y,-Z X,Y,-Z X,-Y,Z -X,Y,Z -Z,-X,-Y -Z,X,Y Z,X,-Y Z,-X,Y -Y,-Z,-X Y,-Z,X -Y,Z,X Y,Z,-X 1/2-Y,1/2-X,1/2+Z 1/2+Y,1/2+X,1/2+Z 1/2-Y,1/2+X,1/2-Z 1/2+Y,1/2-X,1/2-Z 1/2-X,1/2-Z,1/2+Y 1/2+X,1/2-Z,1/2-Y 1/2+X,1/2+Z,1/2+Y 1/2-X,1/2+Z,1/2-Y 1/2-Z,1/2-Y,1/2+X 1/2-Z,1/2+Y,1/2-X 1/2+Z,1/2-Y,1/2-X 1/2+Z,1/2+Y,1/2+X".split(" "),
"P 42/n -3 2/m":"X,Y,Z -X,-Y,Z -X,Y,-Z X,-Y,-Z Z,X,Y Z,-X,-Y -Z,-X,Y -Z,X,-Y Y,Z,X -Y,Z,-X Y,-Z,-X -Y,-Z,X 1/2+Y,1/2+X,1/2-Z 1/2-Y,1/2-X,1/2-Z 1/2+Y,1/2-X,1/2+Z 1/2-Y,1/2+X,1/2+Z 1/2+X,1/2+Z,1/2-Y 1/2-X,1/2+Z,1/2+Y 1/2-X,1/2-Z,1/2-Y 1/2+X,1/2-Z,1/2+Y 1/2+Z,1/2+Y,1/2-X 1/2+Z,1/2-Y,1/2+X 1/2-Z,1/2+Y,1/2+X 1/2-Z,1/2-Y,1/2-X 1/2-X,1/2-Y,1/2-Z 1/2+X,1/2+Y,1/2-Z 1/2+X,1/2-Y,1/2+Z 1/2-X,1/2+Y,1/2+Z 1/2-Z,1/2-X,1/2-Y 1/2-Z,1/2+X,1/2+Y 1/2+Z,1/2+X,1/2-Y 1/2+Z,1/2-X,1/2+Y 1/2-Y,1/2-Z,1/2-X 1/2+Y,1/2-Z,1/2+X 1/2-Y,1/2+Z,1/2+X 1/2+Y,1/2+Z,1/2-X -Y,-X,Z Y,X,Z -Y,X,-Z Y,-X,-Z -X,-Z,Y X,-Z,-Y X,Z,Y -X,Z,-Y -Z,-Y,X -Z,Y,-X Z,-Y,-X Z,Y,X".split(" "),
"F 4/m -3 2/m":"X,Y,Z -X,-Y,Z -X,Y,-Z X,-Y,-Z Z,X,Y Z,-X,-Y -Z,-X,Y -Z,X,-Y Y,Z,X -Y,Z,-X Y,-Z,-X -Y,-Z,X Y,X,-Z -Y,-X,-Z Y,-X,Z -Y,X,Z X,Z,-Y -X,Z,Y -X,-Z,-Y X,-Z,Y Z,Y,-X Z,-Y,X -Z,Y,X -Z,-Y,-X -X,-Y,-Z X,Y,-Z X,-Y,Z -X,Y,Z -Z,-X,-Y -Z,X,Y Z,X,-Y Z,-X,Y -Y,-Z,-X Y,-Z,X -Y,Z,X Y,Z,-X -Y,-X,Z Y,X,Z -Y,X,-Z Y,-X,-Z -X,-Z,Y X,-Z,-Y X,Z,Y -X,Z,-Y -Z,-Y,X -Z,Y,-X Z,-Y,-X Z,Y,X X,1/2+Y,1/2+Z -X,1/2-Y,1/2+Z -X,1/2+Y,1/2-Z X,1/2-Y,1/2-Z Z,1/2+X,1/2+Y Z,1/2-X,1/2-Y -Z,1/2-X,1/2+Y -Z,1/2+X,1/2-Y Y,1/2+Z,1/2+X -Y,1/2+Z,1/2-X Y,1/2-Z,1/2-X -Y,1/2-Z,1/2+X Y,1/2+X,1/2-Z -Y,1/2-X,1/2-Z Y,1/2-X,1/2+Z -Y,1/2+X,1/2+Z X,1/2+Z,1/2-Y -X,1/2+Z,1/2+Y -X,1/2-Z,1/2-Y X,1/2-Z,1/2+Y Z,1/2+Y,1/2-X Z,1/2-Y,1/2+X -Z,1/2+Y,1/2+X -Z,1/2-Y,1/2-X -X,1/2-Y,1/2-Z X,1/2+Y,1/2-Z X,1/2-Y,1/2+Z -X,1/2+Y,1/2+Z -Z,1/2-X,1/2-Y -Z,1/2+X,1/2+Y Z,1/2+X,1/2-Y Z,1/2-X,1/2+Y -Y,1/2-Z,1/2-X Y,1/2-Z,1/2+X -Y,1/2+Z,1/2+X Y,1/2+Z,1/2-X -Y,1/2-X,1/2+Z Y,1/2+X,1/2+Z -Y,1/2+X,1/2-Z Y,1/2-X,1/2-Z -X,1/2-Z,1/2+Y X,1/2-Z,1/2-Y X,1/2+Z,1/2+Y -X,1/2+Z,1/2-Y -Z,1/2-Y,1/2+X -Z,1/2+Y,1/2-X Z,1/2-Y,1/2-X Z,1/2+Y,1/2+X 1/2+X,Y,1/2+Z 1/2-X,-Y,1/2+Z 1/2-X,Y,1/2-Z 1/2+X,-Y,1/2-Z 1/2+Z,X,1/2+Y 1/2+Z,-X,1/2-Y 1/2-Z,-X,1/2+Y 1/2-Z,X,1/2-Y 1/2+Y,Z,1/2+X 1/2-Y,Z,1/2-X 1/2+Y,-Z,1/2-X 1/2-Y,-Z,1/2+X 1/2+Y,X,1/2-Z 1/2-Y,-X,1/2-Z 1/2+Y,-X,1/2+Z 1/2-Y,X,1/2+Z 1/2+X,Z,1/2-Y 1/2-X,Z,1/2+Y 1/2-X,-Z,1/2-Y 1/2+X,-Z,1/2+Y 1/2+Z,Y,1/2-X 1/2+Z,-Y,1/2+X 1/2-Z,Y,1/2+X 1/2-Z,-Y,1/2-X 1/2-X,-Y,1/2-Z 1/2+X,Y,1/2-Z 1/2+X,-Y,1/2+Z 1/2-X,Y,1/2+Z 1/2-Z,-X,1/2-Y 1/2-Z,X,1/2+Y 1/2+Z,X,1/2-Y 1/2+Z,-X,1/2+Y 1/2-Y,-Z,1/2-X 1/2+Y,-Z,1/2+X 1/2-Y,Z,1/2+X 1/2+Y,Z,1/2-X 1/2-Y,-X,1/2+Z 1/2+Y,X,1/2+Z 1/2-Y,X,1/2-Z 1/2+Y,-X,1/2-Z 1/2-X,-Z,1/2+Y 1/2+X,-Z,1/2-Y 1/2+X,Z,1/2+Y 1/2-X,Z,1/2-Y 1/2-Z,-Y,1/2+X 1/2-Z,Y,1/2-X 1/2+Z,-Y,1/2-X 1/2+Z,Y,1/2+X 1/2+X,1/2+Y,Z 1/2-X,1/2-Y,Z 1/2-X,1/2+Y,-Z 1/2+X,1/2-Y,-Z 1/2+Z,1/2+X,Y 1/2+Z,1/2-X,-Y 1/2-Z,1/2-X,Y 1/2-Z,1/2+X,-Y 1/2+Y,1/2+Z,X 1/2-Y,1/2+Z,-X 1/2+Y,1/2-Z,-X 1/2-Y,1/2-Z,X 1/2+Y,1/2+X,-Z 1/2-Y,1/2-X,-Z 1/2+Y,1/2-X,Z 1/2-Y,1/2+X,Z 1/2+X,1/2+Z,-Y 1/2-X,1/2+Z,Y 1/2-X,1/2-Z,-Y 1/2+X,1/2-Z,Y 1/2+Z,1/2+Y,-X 1/2+Z,1/2-Y,X 1/2-Z,1/2+Y,X 1/2-Z,1/2-Y,-X 1/2-X,1/2-Y,-Z 1/2+X,1/2+Y,-Z 1/2+X,1/2-Y,Z 1/2-X,1/2+Y,Z 1/2-Z,1/2-X,-Y 1/2-Z,1/2+X,Y 1/2+Z,1/2+X,-Y 1/2+Z,1/2-X,Y 1/2-Y,1/2-Z,-X 1/2+Y,1/2-Z,X 1/2-Y,1/2+Z,X 1/2+Y,1/2+Z,-X 1/2-Y,1/2-X,Z 1/2+Y,1/2+X,Z 1/2-Y,1/2+X,-Z 1/2+Y,1/2-X,-Z 1/2-X,1/2-Z,Y 1/2+X,1/2-Z,-Y 1/2+X,1/2+Z,Y 1/2-X,1/2+Z,-Y 1/2-Z,1/2-Y,X 1/2-Z,1/2+Y,-X 1/2+Z,1/2-Y,-X 1/2+Z,1/2+Y,X".split(" "),
"F 4/m -3 2/c":"X,Y,Z -X,-Y,Z -X,Y,-Z X,-Y,-Z Z,X,Y Z,-X,-Y -Z,-X,Y -Z,X,-Y Y,Z,X -Y,Z,-X Y,-Z,-X -Y,-Z,X 1/2+Y,1/2+X,1/2-Z 1/2-Y,1/2-X,1/2-Z 1/2+Y,1/2-X,1/2+Z 1/2-Y,1/2+X,1/2+Z 1/2+X,1/2+Z,1/2-Y 1/2-X,1/2+Z,1/2+Y 1/2-X,1/2-Z,1/2-Y 1/2+X,1/2-Z,1/2+Y 1/2+Z,1/2+Y,1/2-X 1/2+Z,1/2-Y,1/2+X 1/2-Z,1/2+Y,1/2+X 1/2-Z,1/2-Y,1/2-X -X,-Y,-Z X,Y,-Z X,-Y,Z -X,Y,Z -Z,-X,-Y -Z,X,Y Z,X,-Y Z,-X,Y -Y,-Z,-X Y,-Z,X -Y,Z,X Y,Z,-X 1/2-Y,1/2-X,1/2+Z 1/2+Y,1/2+X,1/2+Z 1/2-Y,1/2+X,1/2-Z 1/2+Y,1/2-X,1/2-Z 1/2-X,1/2-Z,1/2+Y 1/2+X,1/2-Z,1/2-Y 1/2+X,1/2+Z,1/2+Y 1/2-X,1/2+Z,1/2-Y 1/2-Z,1/2-Y,1/2+X 1/2-Z,1/2+Y,1/2-X 1/2+Z,1/2-Y,1/2-X 1/2+Z,1/2+Y,1/2+X X,1/2+Y,1/2+Z -X,1/2-Y,1/2+Z -X,1/2+Y,1/2-Z X,1/2-Y,1/2-Z Z,1/2+X,1/2+Y Z,1/2-X,1/2-Y -Z,1/2-X,1/2+Y -Z,1/2+X,1/2-Y Y,1/2+Z,1/2+X -Y,1/2+Z,1/2-X Y,1/2-Z,1/2-X -Y,1/2-Z,1/2+X 1/2+Y,X,-Z 1/2-Y,-X,-Z 1/2+Y,-X,Z 1/2-Y,X,Z 1/2+X,Z,-Y 1/2-X,Z,Y 1/2-X,-Z,-Y 1/2+X,-Z,Y 1/2+Z,Y,-X 1/2+Z,-Y,X 1/2-Z,Y,X 1/2-Z,-Y,-X -X,1/2-Y,1/2-Z X,1/2+Y,1/2-Z X,1/2-Y,1/2+Z -X,1/2+Y,1/2+Z -Z,1/2-X,1/2-Y -Z,1/2+X,1/2+Y Z,1/2+X,1/2-Y Z,1/2-X,1/2+Y -Y,1/2-Z,1/2-X Y,1/2-Z,1/2+X -Y,1/2+Z,1/2+X Y,1/2+Z,1/2-X 1/2-Y,-X,Z 1/2+Y,X,Z 1/2-Y,X,-Z 1/2+Y,-X,-Z 1/2-X,-Z,Y 1/2+X,-Z,-Y 1/2+X,Z,Y 1/2-X,Z,-Y 1/2-Z,-Y,X 1/2-Z,Y,-X 1/2+Z,-Y,-X 1/2+Z,Y,X 1/2+X,Y,1/2+Z 1/2-X,-Y,1/2+Z 1/2-X,Y,1/2-Z 1/2+X,-Y,1/2-Z 1/2+Z,X,1/2+Y 1/2+Z,-X,1/2-Y 1/2-Z,-X,1/2+Y 1/2-Z,X,1/2-Y 1/2+Y,Z,1/2+X 1/2-Y,Z,1/2-X 1/2+Y,-Z,1/2-X 1/2-Y,-Z,1/2+X Y,1/2+X,-Z -Y,1/2-X,-Z Y,1/2-X,Z -Y,1/2+X,Z X,1/2+Z,-Y -X,1/2+Z,Y -X,1/2-Z,-Y X,1/2-Z,Y Z,1/2+Y,-X Z,1/2-Y,X -Z,1/2+Y,X -Z,1/2-Y,-X 1/2-X,-Y,1/2-Z 1/2+X,Y,1/2-Z 1/2+X,-Y,1/2+Z 1/2-X,Y,1/2+Z 1/2-Z,-X,1/2-Y 1/2-Z,X,1/2+Y 1/2+Z,X,1/2-Y 1/2+Z,-X,1/2+Y 1/2-Y,-Z,1/2-X 1/2+Y,-Z,1/2+X 1/2-Y,Z,1/2+X 1/2+Y,Z,1/2-X -Y,1/2-X,Z Y,1/2+X,Z -Y,1/2+X,-Z Y,1/2-X,-Z -X,1/2-Z,Y X,1/2-Z,-Y X,1/2+Z,Y -X,1/2+Z,-Y -Z,1/2-Y,X -Z,1/2+Y,-X Z,1/2-Y,-X Z,1/2+Y,X 1/2+X,1/2+Y,Z 1/2-X,1/2-Y,Z 1/2-X,1/2+Y,-Z 1/2+X,1/2-Y,-Z 1/2+Z,1/2+X,Y 1/2+Z,1/2-X,-Y 1/2-Z,1/2-X,Y 1/2-Z,1/2+X,-Y 1/2+Y,1/2+Z,X 1/2-Y,1/2+Z,-X 1/2+Y,1/2-Z,-X 1/2-Y,1/2-Z,X Y,X,1/2-Z -Y,-X,1/2-Z Y,-X,1/2+Z -Y,X,1/2+Z X,Z,1/2-Y -X,Z,1/2+Y -X,-Z,1/2-Y X,-Z,1/2+Y Z,Y,1/2-X Z,-Y,1/2+X -Z,Y,1/2+X -Z,-Y,1/2-X 1/2-X,1/2-Y,-Z 1/2+X,1/2+Y,-Z 1/2+X,1/2-Y,Z 1/2-X,1/2+Y,Z 1/2-Z,1/2-X,-Y 1/2-Z,1/2+X,Y 1/2+Z,1/2+X,-Y 1/2+Z,1/2-X,Y 1/2-Y,1/2-Z,-X 1/2+Y,1/2-Z,X 1/2-Y,1/2+Z,X 1/2+Y,1/2+Z,-X -Y,-X,1/2+Z Y,X,1/2+Z -Y,X,1/2-Z Y,-X,1/2-Z -X,-Z,1/2+Y X,-Z,1/2-Y X,Z,1/2+Y -X,Z,1/2-Y -Z,-Y,1/2+X -Z,Y,1/2-X Z,-Y,1/2-X Z,Y,1/2+X".split(" "),
"F 41/d -3 2/m":"X,Y,Z -X,1/2-Y,1/2+Z 1/2-X,1/2+Y,-Z 1/2+X,-Y,1/2-Z Z,X,Y 1/2+Z,-X,1/2-Y -Z,1/2-X,1/2+Y 1/2-Z,1/2+X,-Y Y,Z,X 1/2-Y,1/2+Z,-X 1/2+Y,-Z,1/2-X -Y,1/2-Z,1/2+X 3/4+Y,1/4+X,3/4-Z 1/4-Y,1/4-X,1/4-Z 1/4+Y,3/4-X,3/4+Z 3/4-Y,3/4+X,1/4+Z 3/4+X,1/4+Z,3/4-Y 3/4-X,3/4+Z,1/4+Y 1/4-X,1/4-Z,1/4-Y 1/4+X,3/4-Z,3/4+Y 3/4+Z,1/4+Y,3/4-X 1/4+Z,3/4-Y,3/4+X 3/4-Z,3/4+Y,1/4+X 1/4-Z,1/4-Y,1/4-X 1/4-X,1/4-Y,1/4-Z 1/4+X,3/4+Y,3/4-Z 3/4+X,3/4-Y,1/4+Z 3/4-X,1/4+Y,3/4+Z 1/4-Z,1/4-X,1/4-Y 3/4-Z,1/4+X,3/4+Y 1/4+Z,3/4+X,3/4-Y 3/4+Z,3/4-X,1/4+Y 1/4-Y,1/4-Z,1/4-X 3/4+Y,3/4-Z,1/4+X 3/4-Y,1/4+Z,3/4+X 1/4+Y,3/4+Z,3/4-X 1/2-Y,-X,1/2+Z Y,X,Z -Y,1/2+X,1/2-Z 1/2+Y,1/2-X,-Z 1/2-X,-Z,1/2+Y 1/2+X,1/2-Z,-Y X,Z,Y -X,1/2+Z,1/2-Y 1/2-Z,-Y,1/2+X -Z,1/2+Y,1/2-X 1/2+Z,1/2-Y,-X Z,Y,X X,1/2+Y,1/2+Z -X,-Y,Z 1/2-X,Y,1/2-Z 1/2+X,1/2-Y,-Z Z,1/2+X,1/2+Y 1/2+Z,1/2-X,-Y -Z,-X,Y 1/2-Z,X,1/2-Y Y,1/2+Z,1/2+X 1/2-Y,Z,1/2-X 1/2+Y,1/2-Z,-X -Y,-Z,X 3/4+Y,3/4+X,1/4-Z 1/4-Y,3/4-X,3/4-Z 1/4+Y,1/4-X,1/4+Z 3/4-Y,1/4+X,3/4+Z 3/4+X,3/4+Z,1/4-Y 3/4-X,1/4+Z,3/4+Y 1/4-X,3/4-Z,3/4-Y 1/4+X,1/4-Z,1/4+Y 3/4+Z,3/4+Y,1/4-X 1/4+Z,1/4-Y,1/4+X 3/4-Z,1/4+Y,3/4+X 1/4-Z,3/4-Y,3/4-X 1/4-X,3/4-Y,3/4-Z 1/4+X,1/4+Y,1/4-Z 3/4+X,1/4-Y,3/4+Z 3/4-X,3/4+Y,1/4+Z 1/4-Z,3/4-X,3/4-Y 3/4-Z,3/4+X,1/4+Y 1/4+Z,1/4+X,1/4-Y 3/4+Z,1/4-X,3/4+Y 1/4-Y,3/4-Z,3/4-X 3/4+Y,1/4-Z,3/4+X 3/4-Y,3/4+Z,1/4+X 1/4+Y,1/4+Z,1/4-X 1/2-Y,1/2-X,Z Y,1/2+X,1/2+Z -Y,X,-Z 1/2+Y,-X,1/2-Z 1/2-X,1/2-Z,Y 1/2+X,-Z,1/2-Y X,1/2+Z,1/2+Y -X,Z,-Y 1/2-Z,1/2-Y,X -Z,Y,-X 1/2+Z,-Y,1/2-X Z,1/2+Y,1/2+X 1/2+X,Y,1/2+Z 1/2-X,1/2-Y,Z -X,1/2+Y,1/2-Z X,-Y,-Z 1/2+Z,X,1/2+Y Z,-X,-Y 1/2-Z,1/2-X,Y -Z,1/2+X,1/2-Y 1/2+Y,Z,1/2+X -Y,1/2+Z,1/2-X Y,-Z,-X 1/2-Y,1/2-Z,X 1/4+Y,1/4+X,1/4-Z 3/4-Y,1/4-X,3/4-Z 3/4+Y,3/4-X,1/4+Z 1/4-Y,3/4+X,3/4+Z 1/4+X,1/4+Z,1/4-Y 1/4-X,3/4+Z,3/4+Y 3/4-X,1/4-Z,3/4-Y 3/4+X,3/4-Z,1/4+Y 1/4+Z,1/4+Y,1/4-X 3/4+Z,3/4-Y,1/4+X 1/4-Z,3/4+Y,3/4+X 3/4-Z,1/4-Y,3/4-X 3/4-X,1/4-Y,3/4-Z 3/4+X,3/4+Y,1/4-Z 1/4+X,3/4-Y,3/4+Z 1/4-X,1/4+Y,1/4+Z 3/4-Z,1/4-X,3/4-Y 1/4-Z,1/4+X,1/4+Y 3/4+Z,3/4+X,1/4-Y 1/4+Z,3/4-X,3/4+Y 3/4-Y,1/4-Z,3/4-X 1/4+Y,3/4-Z,3/4+X 1/4-Y,1/4+Z,1/4+X 3/4+Y,3/4+Z,1/4-X -Y,-X,Z 1/2+Y,X,1/2+Z 1/2-Y,1/2+X,-Z Y,1/2-X,1/2-Z -X,-Z,Y X,1/2-Z,1/2-Y 1/2+X,Z,1/2+Y 1/2-X,1/2+Z,-Y -Z,-Y,X 1/2-Z,1/2+Y,-X Z,1/2-Y,1/2-X 1/2+Z,Y,1/2+X 1/2+X,1/2+Y,Z 1/2-X,-Y,1/2+Z -X,Y,-Z X,1/2-Y,1/2-Z 1/2+Z,1/2+X,Y Z,1/2-X,1/2-Y 1/2-Z,-X,1/2+Y -Z,X,-Y 1/2+Y,1/2+Z,X -Y,Z,-X Y,1/2-Z,1/2-X 1/2-Y,-Z,1/2+X 1/4+Y,3/4+X,3/4-Z 3/4-Y,3/4-X,1/4-Z 3/4+Y,1/4-X,3/4+Z 1/4-Y,1/4+X,1/4+Z 1/4+X,3/4+Z,3/4-Y 1/4-X,1/4+Z,1/4+Y 3/4-X,3/4-Z,1/4-Y 3/4+X,1/4-Z,3/4+Y 1/4+Z,3/4+Y,3/4-X 3/4+Z,1/4-Y,3/4+X 1/4-Z,1/4+Y,1/4+X 3/4-Z,3/4-Y,1/4-X 3/4-X,3/4-Y,1/4-Z 3/4+X,1/4+Y,3/4-Z 1/4+X,1/4-Y,1/4+Z 1/4-X,3/4+Y,3/4+Z 3/4-Z,3/4-X,1/4-Y 1/4-Z,3/4+X,3/4+Y 3/4+Z,1/4+X,3/4-Y 1/4+Z,1/4-X,1/4+Y 3/4-Y,3/4-Z,1/4-X 1/4+Y,1/4-Z,1/4+X 1/4-Y,3/4+Z,3/4+X 3/4+Y,1/4+Z,3/4-X -Y,1/2-X,1/2+Z 1/2+Y,1/2+X,Z 1/2-Y,X,1/2-Z Y,-X,-Z -X,1/2-Z,1/2+Y X,-Z,-Y 1/2+X,1/2+Z,Y 1/2-X,Z,1/2-Y -Z,1/2-Y,1/2+X 1/2-Z,Y,1/2-X Z,-Y,-X 1/2+Z,1/2+Y,X".split(" "),
"F 41/d -3 2/c":"X,Y,Z -X,1/2-Y,1/2+Z 1/2-X,1/2+Y,-Z 1/2+X,-Y,1/2-Z Z,X,Y 1/2+Z,-X,1/2-Y -Z,1/2-X,1/2+Y 1/2-Z,1/2+X,-Y Y,Z,X 1/2-Y,1/2+Z,-X 1/2+Y,-Z,1/2-X -Y,1/2-Z,1/2+X 3/4+Y,1/4+X,3/4-Z 1/4-Y,1/4-X,1/4-Z 1/4+Y,3/4-X,3/4+Z 3/4-Y,3/4+X,1/4+Z 3/4+X,1/4+Z,3/4-Y 3/4-X,3/4+Z,1/4+Y 1/4-X,1/4-Z,1/4-Y 1/4+X,3/4-Z,3/4+Y 3/4+Z,1/4+Y,3/4-X 1/4+Z,3/4-Y,3/4+X 3/4-Z,3/4+Y,1/4+X 1/4-Z,1/4-Y,1/4-X 3/4-X,3/4-Y,3/4-Z 3/4+X,1/4+Y,1/4-Z 1/4+X,1/4-Y,3/4+Z 1/4-X,3/4+Y,1/4+Z 3/4-Z,3/4-X,3/4-Y 1/4-Z,3/4+X,1/4+Y 3/4+Z,1/4+X,1/4-Y 1/4+Z,1/4-X,3/4+Y 3/4-Y,3/4-Z,3/4-X 1/4+Y,1/4-Z,3/4+X 1/4-Y,3/4+Z,1/4+X 3/4+Y,1/4+Z,1/4-X -Y,1/2-X,Z 1/2+Y,1/2+X,1/2+Z 1/2-Y,X,-Z Y,-X,1/2-Z -X,1/2-Z,Y X,-Z,1/2-Y 1/2+X,1/2+Z,1/2+Y 1/2-X,Z,-Y -Z,1/2-Y,X 1/2-Z,Y,-X Z,-Y,1/2-X 1/2+Z,1/2+Y,1/2+X X,1/2+Y,1/2+Z -X,-Y,Z 1/2-X,Y,1/2-Z 1/2+X,1/2-Y,-Z Z,1/2+X,1/2+Y 1/2+Z,1/2-X,-Y -Z,-X,Y 1/2-Z,X,1/2-Y Y,1/2+Z,1/2+X 1/2-Y,Z,1/2-X 1/2+Y,1/2-Z,-X -Y,-Z,X 3/4+Y,3/4+X,1/4-Z 1/4-Y,3/4-X,3/4-Z 1/4+Y,1/4-X,1/4+Z 3/4-Y,1/4+X,3/4+Z 3/4+X,3/4+Z,1/4-Y 3/4-X,1/4+Z,3/4+Y 1/4-X,3/4-Z,3/4-Y 1/4+X,1/4-Z,1/4+Y 3/4+Z,3/4+Y,1/4-X 1/4+Z,1/4-Y,1/4+X 3/4-Z,1/4+Y,3/4+X 1/4-Z,3/4-Y,3/4-X 3/4-X,1/4-Y,1/4-Z 3/4+X,3/4+Y,3/4-Z 1/4+X,3/4-Y,1/4+Z 1/4-X,1/4+Y,3/4+Z 3/4-Z,1/4-X,1/4-Y 1/4-Z,1/4+X,3/4+Y 3/4+Z,3/4+X,3/4-Y 1/4+Z,3/4-X,1/4+Y 3/4-Y,1/4-Z,1/4-X 1/4+Y,3/4-Z,1/4+X 1/4-Y,1/4+Z,3/4+X 3/4+Y,3/4+Z,3/4-X -Y,-X,1/2+Z 1/2+Y,X,Z 1/2-Y,1/2+X,1/2-Z Y,1/2-X,-Z -X,-Z,1/2+Y X,1/2-Z,-Y 1/2+X,Z,Y 1/2-X,1/2+Z,1/2-Y -Z,-Y,1/2+X 1/2-Z,1/2+Y,1/2-X Z,1/2-Y,-X 1/2+Z,Y,X 1/2+X,Y,1/2+Z 1/2-X,1/2-Y,Z -X,1/2+Y,1/2-Z X,-Y,-Z 1/2+Z,X,1/2+Y Z,-X,-Y 1/2-Z,1/2-X,Y -Z,1/2+X,1/2-Y 1/2+Y,Z,1/2+X -Y,1/2+Z,1/2-X Y,-Z,-X 1/2-Y,1/2-Z,X 1/4+Y,1/4+X,1/4-Z 3/4-Y,1/4-X,3/4-Z 3/4+Y,3/4-X,1/4+Z 1/4-Y,3/4+X,3/4+Z 1/4+X,1/4+Z,1/4-Y 1/4-X,3/4+Z,3/4+Y 3/4-X,1/4-Z,3/4-Y 3/4+X,3/4-Z,1/4+Y 1/4+Z,1/4+Y,1/4-X 3/4+Z,3/4-Y,1/4+X 1/4-Z,3/4+Y,3/4+X 3/4-Z,1/4-Y,3/4-X 1/4-X,3/4-Y,1/4-Z 1/4+X,1/4+Y,3/4-Z 3/4+X,1/4-Y,1/4+Z 3/4-X,3/4+Y,3/4+Z 1/4-Z,3/4-X,1/4-Y 3/4-Z,3/4+X,3/4+Y 1/4+Z,1/4+X,3/4-Y 3/4+Z,1/4-X,1/4+Y 1/4-Y,3/4-Z,1/4-X 3/4+Y,1/4-Z,1/4+X 3/4-Y,3/4+Z,3/4+X 1/4+Y,1/4+Z,3/4-X 1/2-Y,1/2-X,1/2+Z Y,1/2+X,Z -Y,X,1/2-Z 1/2+Y,-X,-Z 1/2-X,1/2-Z,1/2+Y 1/2+X,-Z,-Y X,1/2+Z,Y -X,Z,1/2-Y 1/2-Z,1/2-Y,1/2+X -Z,Y,1/2-X 1/2+Z,-Y,-X Z,1/2+Y,X 1/2+X,1/2+Y,Z 1/2-X,-Y,1/2+Z -X,Y,-Z X,1/2-Y,1/2-Z 1/2+Z,1/2+X,Y Z,1/2-X,1/2-Y 1/2-Z,-X,1/2+Y -Z,X,-Y 1/2+Y,1/2+Z,X -Y,Z,-X Y,1/2-Z,1/2-X 1/2-Y,-Z,1/2+X 1/4+Y,3/4+X,3/4-Z 3/4-Y,3/4-X,1/4-Z 3/4+Y,1/4-X,3/4+Z 1/4-Y,1/4+X,1/4+Z 1/4+X,3/4+Z,3/4-Y 1/4-X,1/4+Z,1/4+Y 3/4-X,3/4-Z,1/4-Y 3/4+X,1/4-Z,3/4+Y 1/4+Z,3/4+Y,3/4-X 3/4+Z,1/4-Y,3/4+X 1/4-Z,1/4+Y,1/4+X 3/4-Z,3/4-Y,1/4-X 1/4-X,1/4-Y,3/4-Z 1/4+X,3/4+Y,1/4-Z 3/4+X,3/4-Y,3/4+Z 3/4-X,1/4+Y,1/4+Z 1/4-Z,1/4-X,3/4-Y 3/4-Z,1/4+X,1/4+Y 1/4+Z,3/4+X,1/4-Y 3/4+Z,3/4-X,3/4+Y 1/4-Y,1/4-Z,3/4-X 3/4+Y,3/4-Z,3/4+X 3/4-Y,1/4+Z,1/4+X 1/4+Y,3/4+Z,1/4-X 1/2-Y,-X,Z Y,X,1/2+Z -Y,1/2+X,-Z 1/2+Y,1/2-X,1/2-Z 1/2-X,-Z,Y 1/2+X,1/2-Z,1/2-Y X,Z,1/2+Y -X,1/2+Z,-Y 1/2-Z,-Y,X -Z,1/2+Y,-X 1/2+Z,1/2-Y,1/2-X Z,Y,1/2+X".split(" "),
"I 4/m -3 2/m":"X,Y,Z -X,-Y,Z -X,Y,-Z X,-Y,-Z Z,X,Y Z,-X,-Y -Z,-X,Y -Z,X,-Y Y,Z,X -Y,Z,-X Y,-Z,-X -Y,-Z,X Y,X,-Z -Y,-X,-Z Y,-X,Z -Y,X,Z X,Z,-Y -X,Z,Y -X,-Z,-Y X,-Z,Y Z,Y,-X Z,-Y,X -Z,Y,X -Z,-Y,-X -X,-Y,-Z X,Y,-Z X,-Y,Z -X,Y,Z -Z,-X,-Y -Z,X,Y Z,X,-Y Z,-X,Y -Y,-Z,-X Y,-Z,X -Y,Z,X Y,Z,-X -Y,-X,Z Y,X,Z -Y,X,-Z Y,-X,-Z -X,-Z,Y X,-Z,-Y X,Z,Y -X,Z,-Y -Z,-Y,X -Z,Y,-X Z,-Y,-X Z,Y,X 1/2+X,1/2+Y,1/2+Z 1/2-X,1/2-Y,1/2+Z 1/2-X,1/2+Y,1/2-Z 1/2+X,1/2-Y,1/2-Z 1/2+Z,1/2+X,1/2+Y 1/2+Z,1/2-X,1/2-Y 1/2-Z,1/2-X,1/2+Y 1/2-Z,1/2+X,1/2-Y 1/2+Y,1/2+Z,1/2+X 1/2-Y,1/2+Z,1/2-X 1/2+Y,1/2-Z,1/2-X 1/2-Y,1/2-Z,1/2+X 1/2+Y,1/2+X,1/2-Z 1/2-Y,1/2-X,1/2-Z 1/2+Y,1/2-X,1/2+Z 1/2-Y,1/2+X,1/2+Z 1/2+X,1/2+Z,1/2-Y 1/2-X,1/2+Z,1/2+Y 1/2-X,1/2-Z,1/2-Y 1/2+X,1/2-Z,1/2+Y 1/2+Z,1/2+Y,1/2-X 1/2+Z,1/2-Y,1/2+X 1/2-Z,1/2+Y,1/2+X 1/2-Z,1/2-Y,1/2-X 1/2-X,1/2-Y,1/2-Z 1/2+X,1/2+Y,1/2-Z 1/2+X,1/2-Y,1/2+Z 1/2-X,1/2+Y,1/2+Z 1/2-Z,1/2-X,1/2-Y 1/2-Z,1/2+X,1/2+Y 1/2+Z,1/2+X,1/2-Y 1/2+Z,1/2-X,1/2+Y 1/2-Y,1/2-Z,1/2-X 1/2+Y,1/2-Z,1/2+X 1/2-Y,1/2+Z,1/2+X 1/2+Y,1/2+Z,1/2-X 1/2-Y,1/2-X,1/2+Z 1/2+Y,1/2+X,1/2+Z 1/2-Y,1/2+X,1/2-Z 1/2+Y,1/2-X,1/2-Z 1/2-X,1/2-Z,1/2+Y 1/2+X,1/2-Z,1/2-Y 1/2+X,1/2+Z,1/2+Y 1/2-X,1/2+Z,1/2-Y 1/2-Z,1/2-Y,1/2+X 1/2-Z,1/2+Y,1/2-X 1/2+Z,1/2-Y,1/2-X 1/2+Z,1/2+Y,1/2+X".split(" "),
"I 41/a -3 2/d":"X,Y,Z 1/2-X,-Y,1/2+Z -X,1/2+Y,1/2-Z 1/2+X,1/2-Y,-Z Z,X,Y 1/2+Z,1/2-X,-Y 1/2-Z,-X,1/2+Y -Z,1/2+X,1/2-Y Y,Z,X -Y,1/2+Z,1/2-X 1/2+Y,1/2-Z,-X 1/2-Y,-Z,1/2+X 3/4+Y,1/4+X,1/4-Z 3/4-Y,3/4-X,3/4-Z 1/4+Y,1/4-X,3/4+Z 1/4-Y,3/4+X,1/4+Z 3/4+X,1/4+Z,1/4-Y 1/4-X,3/4+Z,1/4+Y 3/4-X,3/4-Z,3/4-Y 1/4+X,1/4-Z,3/4+Y 3/4+Z,1/4+Y,1/4-X 1/4+Z,1/4-Y,3/4+X 1/4-Z,3/4+Y,1/4+X 3/4-Z,3/4-Y,3/4-X -X,-Y,-Z 1/2+X,Y,1/2-Z X,1/2-Y,1/2+Z 1/2-X,1/2+Y,Z -Z,-X,-Y 1/2-Z,1/2+X,Y 1/2+Z,X,1/2-Y Z,1/2-X,1/2+Y -Y,-Z,-X Y,1/2-Z,1/2+X 1/2-Y,1/2+Z,X 1/2+Y,Z,1/2-X 1/4-Y,3/4-X,3/4+Z 1/4+Y,1/4+X,1/4+Z 3/4-Y,3/4+X,1/4-Z 3/4+Y,1/4-X,3/4-Z 1/4-X,3/4-Z,3/4+Y 3/4+X,1/4-Z,3/4-Y 1/4+X,1/4+Z,1/4+Y 3/4-X,3/4+Z,1/4-Y 1/4-Z,3/4-Y,3/4+X 3/4-Z,3/4+Y,1/4-X 3/4+Z,1/4-Y,3/4-X 1/4+Z,1/4+Y,1/4+X 1/2+X,1/2+Y,1/2+Z -X,1/2-Y,Z 1/2-X,Y,-Z X,-Y,1/2-Z 1/2+Z,1/2+X,1/2+Y Z,-X,1/2-Y -Z,1/2-X,Y 1/2-Z,X,-Y 1/2+Y,1/2+Z,1/2+X 1/2-Y,Z,-X Y,-Z,1/2-X -Y,1/2-Z,X 1/4+Y,3/4+X,3/4-Z 1/4-Y,1/4-X,1/4-Z 3/4+Y,3/4-X,1/4+Z 3/4-Y,1/4+X,3/4+Z 1/4+X,3/4+Z,3/4-Y 3/4-X,1/4+Z,3/4+Y 1/4-X,1/4-Z,1/4-Y 3/4+X,3/4-Z,1/4+Y 1/4+Z,3/4+Y,3/4-X 3/4+Z,3/4-Y,1/4+X 3/4-Z,1/4+Y,3/4+X 1/4-Z,1/4-Y,1/4-X 1/2-X,1/2-Y,1/2-Z X,1/2+Y,-Z 1/2+X,-Y,Z -X,Y,1/2+Z 1/2-Z,1/2-X,1/2-Y -Z,X,1/2+Y Z,1/2+X,-Y 1/2+Z,-X,Y 1/2-Y,1/2-Z,1/2-X 1/2+Y,-Z,X -Y,Z,1/2+X Y,1/2+Z,-X 3/4-Y,1/4-X,1/4+Z 3/4+Y,3/4+X,3/4+Z 1/4-Y,1/4+X,3/4-Z 1/4+Y,3/4-X,1/4-Z 3/4-X,1/4-Z,1/4+Y 1/4+X,3/4-Z,1/4-Y 3/4+X,3/4+Z,3/4+Y 1/4-X,1/4+Z,3/4-Y 3/4-Z,1/4-Y,1/4+X 1/4-Z,1/4+Y,3/4-X 1/4+Z,3/4-Y,1/4-X 3/4+Z,3/4+Y,3/4+X".split(" "),
"P 1 1 2":["X,Y,Z","-X,-Y,Z"],"P 1 1 21":["X,Y,Z","-X,-Y,1/2+Z"],"B 1 1 2":["X,Y,Z","-X,-Y,Z","1/2+X,+Y,1/2+Z","1/2-X,-Y,1/2+Z"],"A 1 2 1":["X,Y,Z","-X,Y,-Z","X,1/2+Y,1/2+Z","-X,1/2+Y,1/2-Z"],"C 1 21 1":["X,Y,Z","-X,1/2+Y,-Z","1/2+X,1/2+Y,Z","1/2-X,Y,-Z"],"I 1 2 1":["X,Y,Z","-X,Y,-Z","X+1/2,Y+1/2,Z+1/2","-X+1/2,Y+1/2,-Z+1/2"],"I 1 21 1":["X,Y,Z","-X,1/2+Y,-Z","X+1/2,Y+1/2,Z+1/2","-X+1/2,Y,1/2-Z"],"P 1 1 m":["X,Y,Z","X,Y,-Z"],"P 1 1 b":["X,Y,Z","X,1/2+Y,-Z"],"B 1 1 m":["X,Y,Z","X,Y,-Z","1/2+X,Y,1/2+Z",
"1/2+X,Y,1/2-Z"],"B 1 1 b":["X,Y,Z","X,1/2+Y,-Z","1/2+X,Y,1/2+Z","1/2+X,1/2+Y,1/2-Z"],"P 1 1 2/m":["X,Y,Z","X,Y,-Z","-X,-Y,Z","-X,-Y,-Z"],"P 1 1 21/m":["X,Y,Z","-X,-Y,1/2+Z","-X,-Y,-Z","X,Y,1/2-Z"],"B 1 1 2/m":"X,Y,Z X,Y,-Z -X,-Y,Z -X,-Y,-Z 1/2+X,Y,1/2+Z 1/2+X,Y,1/2-Z 1/2-X,-Y,1/2+Z 1/2-X,-Y,1/2-Z".split(" "),"P 1 1 2/b":["X,Y,Z","-X,1/2-Y,Z","-X,-Y,-Z","X,1/2+Y,-Z"],"P 1 1 21/b":["X,Y,Z","-X,-Y,-Z","-X,1/2-Y,1/2+Z","X,1/2+Y,1/2-Z"],"B 1 1 2/b":"X,Y,Z -X,1/2-Y,Z -X,-Y,-Z X,1/2+Y,-Z 1/2+X,Y,1/2+Z 1/2-X,1/2-Y,1/2+Z 1/2-X,-Y,1/2-Z 1/2+X,1/2+Y,1/2-Z".split(" "),
"P 21 2 2":["X,Y,Z","-X,Y,-Z","1/2+X,-Y,-Z","1/2-X,-Y,Z"],"P 2 21 2":["X,Y,Z","X,1/2-Y,-Z","-X,1/2+Y,-Z","-X,-Y,Z"],"P 21 21 2 (a)":["X,Y,Z","1/2-X,1/2-Y,Z","X+1/2,-Y,-Z","-X,Y+1/2,-Z"],"P 21 2 21":["X,Y,Z","-X,Y,-Z","1/2+X,-Y,1/2-Z","1/2-X,-Y,1/2+Z"],"P 2 21 21":["X,Y,Z","X,-Y,-Z","-X,1/2+Y,1/2-Z","-X,1/2-Y,1/2+Z"],"C 2 2 21a)":"X,Y,Z 1/2-X,-Y,1/2+Z 1/2+X,1/2-Y,-Z -X,1/2+Y,1/2-Z 1/2+X,1/2+Y,Z -X,1/2-Y,1/2+Z X,-Y,-Z 1/2-X,Y,1/2-Z".split(" "),"C 2 2 2a":"X,Y,Z;1/2-X,1/2-Y,Z;X+1/2,-Y,-Z;-X,Y+1/2,-Z;1/2+ X,1/2+Y,Z;-X,-Y,Z;X,1/2-Y,-Z;1/2-X,Y,-Z".split(";"),
"F 2 2 2a":"X,Y,Z 1/2-X,1/2-Y,Z X+1/2,-Y,-Z -X,Y+1/2,-Z X,Y+1/2,Z+1/2 1/2-X,-Y,Z+1/2 X+1/2,-Y+1/2,-Z+1/2 -X,Y,-Z+1/2 X+1/2,Y,Z+1/2 -X,1/2-Y,Z+1/2 X,-Y,-Z+1/2 -X+1/2,Y+1/2,-Z+1/2 X+1/2,Y+1/2,Z -X,-Y,Z X,-Y+1/2,-Z -X+1/2,Y,-Z".split(" "),"I 2 2 2a":"X,Y,Z 1/2-X,1/2-Y,Z X+1/2,-Y,-Z -X,Y+1/2,-Z 1/2+X,1/2+Y,1/2+Z -X,-Y,1/2+Z 1/2-X,Y,1/2-Z X,1/2-Y,1/2-Z".split(" "),"P 21/m 21/m 2/n a":"X,Y,Z 1/2-X,1/2-Y,Z -X,1/2+Y,-Z 1/2+X,-Y,-Z -X,-Y,-Z X+1/2,Y+1/2,-Z X,1/2-Y,Z 1/2-X,Y,Z".split(" "),"P 42 21 2a":"X,Y,Z 1/2-X,1/2-Y,Z -Y,X+1/2,1/2+Z Y+1/2,-X,1/2+Z -X,Y+1/2,-Z X+1/2,-Y,-Z Y,X,1/2-Z 1/2-Y,1/2-X,1/2-Z".split(" "),
"I 2 3a":"X,Y,Z 1/2-X,1/2-Y,Z X+1/2,-Y,-Z -X,Y+1/2,-Z Y,Z,X 1/2-Y,1/2-Z,X Y+1/2,-Z,-X -Y,Z+1/2,-X Z,X,Y 1/2-Z,1/2-X,Y Z+1/2,-X,-Y -Z,X+1/2,-Y 1/2+X,1/2+Y,1/2+Z -X,-Y,1/2+Z X,1/2-Y,1/2-Z 1/2-X,Y,1/2-Z 1/2+Y,1/2+Z,1/2+X -Y,-Z,1/2+X Y,1/2-Z,1/2-X 1/2-Y,Z,1/2-X 1/2+Z,1/2+X,1/2+Y -Z,-X,1/2+Y Z,1/2-X,1/2-Y 1/2-Z,X,1/2-Y".split(" ")};NGL.Spline=function(a,b){this.arrows=b||!1;this.fiber=a;this.size=a.residueCount-2;this.type=this.fiber.getType();this.tension=this.type===NGL.NucleicType?.5:.9};
NGL.Spline.prototype={constructor:NGL.Spline,interpolate:function(a,b,c,d,e,f){a=(c-a)*f;d=(d-b)*f;f=e*e;return(2*b-2*c+a+d)*e*f+(-3*b+3*c-2*a-d)*f+a*e+b},getSubdividedColor:function(a,b){var c=this.size-1,d=new Float32Array(c*a*3+3),e=new Float32Array(c*a*3+3),f=new NGL.ColorFactory(b,this.fiber.structure),g=new NGL.ColorFactory("picking",this.fiber.structure),h=0,k,l,m,n,q;this.fiber.eachResidueN(4,function(b,c,r,w){m=Math.ceil(a/2);n=c.getTraceAtom();for(k=0;k<m;++k)l=h+3*k,f.atomColorToArray(n,
d,l),g.atomColorToArray(n,e,l);q=r.getTraceAtom();for(k=m;k<a;++k)l=h+3*k,f.atomColorToArray(q,d,l),g.atomColorToArray(q,e,l);h+=3*a});d[c*a*3+0]=d[c*a*3-3];d[c*a*3+1]=d[c*a*3-2];d[c*a*3+2]=d[c*a*3-1];e[c*a*3+0]=e[c*a*3-3];e[c*a*3+1]=e[c*a*3-2];e[c*a*3+2]=e[c*a*3-1];return{color:d,pickingColor:e}},getSubdividedPosition:function(a,b){isNaN(b)&&(b=this.tension);return{position:this.getPosition(a,b)}},getSubdividedOrientation:function(a,b){isNaN(b)&&(b=this.tension);var c=this.getTangent(a,b),d=this.getNormals(a,
b,c);return{tangent:c,normal:d.normal,binormal:d.binormal}},getSubdividedSize:function(a,b,c){var d=this.arrows,e=new Float32Array((this.size-1)*a+1),f=new NGL.RadiusFactory(b,c),g=0,h,k,l,m,n,q;this.fiber.eachResidueN(4,function(b,c,r,w){k=c.getTraceAtom();l=r.getTraceAtom();m=f.atomRadius(k);n=f.atomRadius(l);if(d&&("s"===c.ss&&"s"!==r.ss||"h"===c.ss&&"h"!==r.ss||"g"===c.ss&&"g"!==r.ss||"i"===c.ss&&"i"!==r.ss)){m*=1.7;b=Math.ceil(a/2);for(h=0;h<b;++h)q=h/b,e[g+h]=(1-q)*m+q*n;for(h=b;h<a;++h)e[g+
h]=n}else for(h=0;h<a;++h)q=h/a,e[g+h]=(1-q)*m+q*n;g+=a});e[g]=e[g-1];return{size:e}},getPosition:function(a,b,c){isNaN(b)&&(b=this.tension);var d=this.interpolate,e=new Float32Array((this.size-1)*a*3+3),f=0,g=1/a,h,k,l,m,n,q,p;this.fiber.eachResidueN(4,function(t,r,w,x){c?(m=t.getAtomByName(c),n=r.getAtomByName(c),q=w.getAtomByName(c),p=x.getAtomByName(c)):(m=t.getTraceAtom(),n=r.getTraceAtom(),q=w.getTraceAtom(),p=x.getTraceAtom());for(h=0;h<a;++h)l=g*h,k=f+3*h,e[k+0]=d(m.x,n.x,q.x,p.x,l,b),e[k+
1]=d(m.y,n.y,q.y,p.y,l,b),e[k+2]=d(m.z,n.z,q.z,p.z,l,b);f+=3*a});q.positionToArray(e,f);return e},getTangent:function(a,b,c){isNaN(b)&&(b=this.tension);var d=this.interpolate,e=new THREE.Vector3,f=new THREE.Vector3,g=new Float32Array((this.size-1)*a*3+3),h=0,k=1/a,l,m,n,q,p,t,r,w,x;this.fiber.eachResidueN(4,function(s,y,v,G){c?(t=s.getAtomByName(c),r=y.getAtomByName(c),w=v.getAtomByName(c),x=G.getAtomByName(c)):(t=s.getTraceAtom(),r=y.getTraceAtom(),w=v.getTraceAtom(),x=G.getTraceAtom());for(l=0;l<
a;++l)n=k*l,q=n-1E-4,p=n+1E-4,m=h+3*l,0>q&&(q=0),1<p&&(p=1),e.x=d(t.x,r.x,w.x,x.x,q,b),e.y=d(t.y,r.y,w.y,x.y,q,b),e.z=d(t.z,r.z,w.z,x.z,q,b),f.x=d(t.x,r.x,w.x,x.x,p,b),f.y=d(t.y,r.y,w.y,x.y,p,b),f.z=d(t.z,r.z,w.z,x.z,p,b),f.sub(e).normalize(),f.toArray(g,m);h+=3*a});f.toArray(g,h);return g},getNormals:function(a,b,c){var d=this.interpolate,e=this.type,f=this.size-1,g=new Float32Array(f*a*3+3),h=new Float32Array(f*a*3+3),k=new THREE.Vector3,l=new THREE.Vector3,m=new THREE.Vector3,n=new THREE.Vector3,
q=new THREE.Vector3,p=new THREE.Vector3,t=new THREE.Vector3,r=new THREE.Vector3,w=(new THREE.Vector3).set(0,0,1),x=new THREE.Vector3;new THREE.Vector3;var s=new THREE.Vector3,y=new THREE.Vector3,v=new THREE.Vector3,G=new THREE.Vector3,u=new THREE.Vector3,B=new THREE.Vector3,L=new THREE.Vector3,z=new THREE.Vector3,E=0,A=1/a,O=!0,M=Math.ceil(a/2),H,R,I;this.fiber.eachResidueN(4,function(f,N,S,U){e!==NGL.CgType&&(O?(O=!1,s.copy(f.getDirectionAtom1()),y.copy(N.getDirectionAtom1()),v.copy(S.getDirectionAtom1()),
u.copy(f.getDirectionAtom2()),B.copy(N.getDirectionAtom2()),L.copy(S.getDirectionAtom2()),m.subVectors(u,s),n.subVectors(B,y),0>m.dot(n)&&(n.multiplyScalar(-1),B.addVectors(y,n)),q.subVectors(L,v),0>n.dot(q)&&(q.multiplyScalar(-1),L.addVectors(v,q))):(s.copy(y),y.copy(v),v.copy(G),u.copy(B),B.copy(L),L.copy(z),q.copy(p)),G.copy(U.getDirectionAtom1()),z.copy(U.getDirectionAtom2()),p.subVectors(z,G),0>q.dot(p)&&(p.multiplyScalar(-1),z.addVectors(G,p)));for(H=0;H<a;++H)R=E+3*H,e===NGL.CgType?t.copy(w):
(e===NGL.ProteinType&&(R+=3*M),I=A*H,k.x=d(s.x,y.x,v.x,G.x,I,b),k.y=d(s.y,y.y,v.y,G.y,I,b),k.z=d(s.z,y.z,v.z,G.z,I,b),l.x=d(u.x,B.x,L.x,z.x,I,b),l.y=d(u.y,B.y,L.y,z.y,I,b),l.z=d(u.z,B.z,L.z,z.z,I,b),t.subVectors(l,k).normalize()),r.fromArray(c,R),x.crossVectors(t,r).normalize(),x.toArray(h,R),w.crossVectors(r,x).normalize(),w.toArray(g,R);E+=3*a});if(e===NGL.ProteinType)for(x.fromArray(h,3*M),w.fromArray(g,3*M),H=0;H<M;++H)x.toArray(h,3*H),w.toArray(g,3*H);else x.toArray(h,E),w.toArray(g,E);return{normal:g,
binormal:h}}};NGL.Helixorient=function(a){this.fiber=a;this.size=a.residueCount};
NGL.Helixorient.prototype={constructor:NGL.Helixorient,getFiber:function(a,b){var c=this.getPosition().center,d,e,f,g,h,k=[],l=c.length/3;for(d=0;d<l;++d){e=this.fiber.residues[d];h=e.getTraceAtom();g=new NGL.Residue;f=new NGL.Atom(g,h.globalindex);g.atoms.push(f);g.atomCount+=1;g.resname=e.resname;g.index=e.index;g.chain=e.chain;e=3*d;f.positionFromArray(c,e);if(a){var m,n,q,p=Math.min(a,d,l-d-1);for(n=1;n<=p;++n)m=3*n,q=(p+1-n)/(p+1),f.x+=q*c[e-m+0]+q*c[e+m+0],f.y+=q*c[e-m+1]+q*c[e+m+1],f.z+=q*
c[e-m+2]+q*c[e+m+2];f.x/=p+1;f.y/=p+1;f.z/=p+1}f.atomname=h.atomname;f.index=h.index;f.resname=h.resname;f.chainname=h.chainname;f.bfactor=h.bfactor;f.ss=h.ss;k.push(g);!b||0!==d&&d!==l-1||k.push(g)}return new NGL.Fiber(k,this.fiber.structure)},getColor:function(a){var b=this.size,c=new Float32Array(3*b),d=new Float32Array(3*b),e=new NGL.ColorFactory(a,this.fiber.structure),f=new NGL.ColorFactory("picking",this.fiber.structure),g=0,h;this.fiber.eachResidue(function(a){h=a.getTraceAtom();e.atomColorToArray(h,
c,g);f.atomColorToArray(h,d,g);g+=3});return{color:c,pickingColor:d}},getSize:function(a,b){var c=new Float32Array(this.size),d=new NGL.RadiusFactory(a,b),e=0,f;this.fiber.eachResidue(function(a){f=a.getTraceAtom();c[e]=d.atomRadius(f);e+=1});return{size:c}},getPosition:function(){var a=0,b=this.size,c=new Float32Array(3*b),d=new Float32Array(3*b),e=new Float32Array(b),f=new Float32Array(b),g=new Float32Array(b),h=new Float32Array(b),k=new Float32Array(3*b),l,m,n,q,p,t,r,w,x=new THREE.Vector3,s=new THREE.Vector3,
y=new THREE.Vector3,v=new THREE.Vector3,G=new THREE.Vector3,u=new THREE.Vector3,B=new THREE.Vector3,L=new THREE.Vector3,z=new THREE.Vector3,E=new THREE.Vector3;new THREE.Vector3;var A=new THREE.Vector3(0,0,0);this.fiber.eachResidueN(4,function(b,H,M,I){m=3*a;n=b.getTraceAtom();q=H.getTraceAtom();p=M.getTraceAtom();t=I.getTraceAtom();x.subVectors(q,n);s.subVectors(p,q);y.subVectors(t,p);v.subVectors(x,s);G.subVectors(s,y);L.crossVectors(v,G).normalize();L.toArray(d,m);0<a&&(e[a]=L.angleTo(z));l=Math.cos(v.angleTo(G));
h[a]=180/Math.PI*Math.acos(l);r=v.length();w=G.length();f[a]=Math.sqrt(w*r)/Math.max(2,2*(1-l));g[a]=Math.abs(s.dot(L));u.copy(v).multiplyScalar(f[a]/r);B.copy(G).multiplyScalar(f[a]/w);u.subVectors(q,u);B.subVectors(p,B);u.toArray(c,m+3);B.toArray(c,m+6);E.subVectors(n,A);E.toArray(k,m);a+=1;z.copy(L);A.copy(u)});var O=this.fiber.residues;u.fromArray(c,3);B.fromArray(c,6);L.subVectors(u,B).normalize();A.copy(O[0].getTraceAtom());u=NGL.Utils.pointVectorIntersection(A,u,L);u.toArray(c,0);E.subVectors(A,
u);E.toArray(k,0);u.fromArray(c,3*b-6);B.fromArray(c,3*b-9);L.subVectors(u,B).normalize();A.copy(O[b-1].getTraceAtom());u=NGL.Utils.pointVectorIntersection(A,u,L);u.toArray(c,3*b-3);for(a=b-3;a<b;++a)u.fromArray(c,3*a),A.copy(O[a].getTraceAtom()),E.subVectors(A,u),E.toArray(k,3*a);var O=new Float32Array(b),M=new Float32Array(b),H=new Float32Array(b),R=new Float32Array(b);O[1]=f[0];M[1]=h[0];H[1]=f[0];for(a=2;a<b-2;a++)O[a]=.5*(f[a-2]+f[a-1]),M[a]=.5*(h[a-2]+h[a-1]),H[a]=.5*(g[a-2]+g[a-1]),u.fromArray(d,
3*(a-2)),B.fromArray(d,3*(a-1)),R[a]=180/Math.PI*Math.acos(Math.cos(u.angleTo(B)));O[b-2]=f[b-4];M[b-2]=h[b-4];H[b-2]=g[b-4];var I=new Float32Array(3*b);NGL.Utils.copyArray(d,I,0,0,3);NGL.Utils.copyArray(d,I,0,3,3);for(a=2;a<b-2;a++)u.fromArray(d,3*(a-2)),B.fromArray(d,3*(a-1)),L.addVectors(B,u).multiplyScalar(.5).normalize(),L.toArray(I,3*a);NGL.Utils.copyArray(d,I,3*b-12,3*b-6,3);NGL.Utils.copyArray(d,I,3*b-12,3*b-3,3);return{center:c,axis:I,bending:R,radius:O,rise:H,twist:M,resdir:k}}};
NGL.Helix=function(){this.begin=new THREE.Vector3;this.end=new THREE.Vector3;this.axis=new THREE.Vector3;this.center=new THREE.Vector3;this.length=0;this.residues=[];this.size=0};
NGL.Helix.prototype={constructor:NGL.Helix,fromHelixbundleAxis:function(){var a=new THREE.Vector3;return function(b,c){this.begin.fromArray(b.begin,3*c);this.end.fromArray(b.end,3*c);this.axis.fromArray(b.axis,3*c);this.center.fromArray(b.center,3*c);this.length=a.subVectors(this.begin,this.end).length();this.residues=b.residue[c];this.size=this.residues.length;return this}}(),angleTo:function(){var a=new THREE.Vector3;return function(b){var c=a.crossVectors(this.axis,b.axis).length();b=this.axis.dot(b.axis);
c=Math.atan2(c,b);return 0>b?-c:c}}(),distanceTo:function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3;return function(d){this.crossingPoints(d,a,b);c.subVectors(b,a);return c.length()}}(),crossingPoints:function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3,d=new THREE.Vector3;return function(e,f,g){f||(f=new THREE.Vector3);g||(g=new THREE.Vector3);a.crossVectors(this.axis,e.axis);b.subVectors(e.begin,this.begin);var h=a.dot(a),k=c.crossVectors(b,e.axis).dot(a),
l=d.crossVectors(b,this.axis).dot(a);f.copy(this.axis).multiplyScalar(k/h).add(this.begin);g.copy(e.axis).multiplyScalar(l/h).add(e.begin);return[f,g]}}(),crossing:function(a){var b={},c=this.angleTo(a)/(Math.PI/180),d=this.crossingPoints(a),e=NGL.Utils.isPointOnSegment(d[0],this.begin,this.end)&&NGL.Utils.isPointOnSegment(d[1],a.begin,a.end),f=NGL.Utils.pointVectorIntersection(this.begin,a.begin,a.axis),g=NGL.Utils.pointVectorIntersection(this.end,a.begin,a.axis),h=NGL.Utils.pointVectorIntersection(a.begin,
this.begin,this.axis),k=NGL.Utils.pointVectorIntersection(a.end,this.begin,this.axis),l=NGL.Utils.isPointOnSegment(f,a.begin,a.end),m=NGL.Utils.isPointOnSegment(g,a.begin,a.end),n=NGL.Utils.isPointOnSegment(h,this.begin,this.end),q=NGL.Utils.isPointOnSegment(k,this.begin,this.end),p=[0,0,0,0];l&&m&&(p[0]=f.distanceTo(g));n&&q&&(p[1]=h.distanceTo(k));l&&!m&&(g.distanceTo(a.begin)<g.distanceTo(a.end)?p[2]=f.distanceTo(a.begin):p[2]=f.distanceTo(a.end));!l&&m&&(f.distanceTo(a.begin)<f.distanceTo(a.end)?
p[2]=g.distanceTo(a.begin):p[2]=g.distanceTo(a.end));n&&!q&&(k.distanceTo(this.begin)<k.distanceTo(this.end)?p[3]=h.distanceTo(this.begin):p[3]=h.distanceTo(this.end));!n&&q&&(h.distanceTo(this.begin)<h.distanceTo(this.end)?p[3]=k.distanceTo(this.begin):p[3]=k.distanceTo(this.end));var t=Math.max.apply(null,p),r=[l,m,n,q];if(e)b={distance:this.distanceTo(a),contact:!0,p1:d[0],p2:d[1]};else{d=[];if(120<c||60>c)d.push({distance:this.begin.distanceTo(f),contact:l,p1:this.begin,p2:f}),d.push({distance:this.end.distanceTo(g),
contact:m,p1:this.end,p2:g}),d.push({distance:a.begin.distanceTo(h),contact:n,p1:a.begin,p2:h}),d.push({distance:a.end.distanceTo(k),contact:q,p1:a.end,p2:k});0<t&&(120<c||60>c)&&(d.push({distance:this.begin.distanceTo(a.begin),contact:!0,p1:this.begin,p2:a.begin}),d.push({distance:this.begin.distanceTo(a.end),contact:!0,p1:this.begin,p2:a.end}),d.push({distance:this.end.distanceTo(a.begin),contact:!0,p1:this.end,p2:a.begin}),d.push({distance:this.end.distanceTo(a.end),contact:!0,p1:this.end,p2:a.end}));
b.distance=Infinity;d.forEach(function(a){a.contact&&a.distance<b.distance&&(b=a)})}return Object.assign({distance:Infinity,contact:!1,angle:c,onSegment:r,overlap:p,maxOverlap:t,lineContact:e},b)}};NGL.Helixbundle=function(a){this.fiber=a;this.helixorient=new NGL.Helixorient(a);this.position=this.helixorient.getPosition();this.size=a.residueCount};
NGL.Helixbundle.prototype={constructor:NGL.Helixbundle,getFiber:function(a){},getColor:function(a){},getSize:function(a,b){},getAxis:function(a,b,c,d,e,f){a=a||30;b=b||2.5;c=void 0===c?!1:c;var g=this.position;d=new NGL.ColorFactory(d,this.fiber.structure);var h=new NGL.ColorFactory("picking",this.fiber.structure);e=new NGL.RadiusFactory(e,f);var k,l,m=0,n=0,q=this.size,p=this.fiber.residues,t=[],r=[],w=[],x=[],s=[],y=[],v=[],G=[],u=[];l=[];var B,L=new THREE.Vector3,z=new THREE.Vector3,E=new THREE.Vector3,
A=new THREE.Vector3,u=!1;for(f=0;f<q;++f)k=p[f],E.fromArray(g.center,3*f),f===q-1?u=!0:(l=p[f+1],A.fromArray(g.center,3*f+3),c&&k.ss!==l.ss?u=!0:E.distanceTo(A)>b?u=!0:g.bending[f]>a&&(u=!0)),u&&(4>f-m||(k=k.getTraceAtom(),u=g.axis.subarray(3*m+3,3*f),l=g.center.subarray(3*m,3*f+3),u=NGL.Utils.calculateMeanVector3(u).normalize(),B=NGL.Utils.calculateMeanVector3(l),L.fromArray(l),L=NGL.Utils.pointVectorIntersection(L,B,u),z.fromArray(l,l.length-3),z=NGL.Utils.pointVectorIntersection(z,B,u),u.subVectors(z,
L),u.toArray(t,n),B.toArray(r,n),L.toArray(w,n),z.toArray(x,n),d.atomColorToArray(k,s,n),h.atomColorToArray(k,y,n),v.push(e.atomRadius(k)),G.push(p.slice(m,f+1)),n+=3),m=f,u=!1);return{axis:new Float32Array(t),center:new Float32Array(r),begin:new Float32Array(w),end:new Float32Array(x),color:new Float32Array(s),pickingColor:new Float32Array(y),size:new Float32Array(v),residue:G}},getPosition:function(){}};NGL.HelixCrossing=function(a){this.helices=a};
NGL.HelixCrossing.prototype={constructor:NGL.HelixCrossing,getCrossing:function(a){a=a||12;for(var b=this.helices,c=[],d=[],e=[],f=[],g=[],h=0,k=0;k<b.length;++k){var l=b[k];c.push("H"+(k+1));l.center.toArray(d,3*k);for(var m=k+1;m<b.length;++m){var n=l.crossing(b[m]);n.contact&&n.distance<a&&(g.push({helix1:k+1,helix2:m+1,angle:n.angle,distance:n.distance,overlap:n.maxOverlap}),n.p1.toArray(e,3*h),n.p2.toArray(f,3*h),h+=1)}}return{helixLabel:c,helixCenter:d,begin:e,end:f,info:g}}};
NGL.Kdtree=function(a,b){var c=b?function(a,b){var c=a[0]-b[0],d=a[1]-b[1],e=a[2]-b[2];return c*c+d*d+e*e}:function(a,b){var c=a[0]-b[0],d=a[1]-b[1],e=a[2]-b[2];return Math.sqrt(c*c+d*d+e*e)};if(a instanceof NGL.AtomSet||a instanceof NGL.Structure||a instanceof NGL.StructureSubset)a=a.atoms;for(var d=a.length,e=new Float32Array(4*d),f=0;f<d;++f){var g=a[f],h=4*f;e[h+0]=g.x;e[h+1]=g.y;e[h+2]=g.z;e[h+3]=f}this.points=e;this.atoms=a;this.kdtree=new THREE.TypedArrayUtils.Kdtree(e,c,4,3)};
NGL.Kdtree.prototype={nearest:function(){var a=new Float32Array(3);return function(b,c,d){b instanceof THREE.Vector3?b.toArray(a):(b instanceof NGL.Atom||b instanceof NGL.ProxyAtom)&&b.positionToArray(a);b=this.kdtree.nearest(a,c,d);c=this.atoms;d=[];for(var e=0,f=b.length;e<f;++e){var g=b[e];d.push({atom:c[this.points[g[0].pos+3]],distance:g[1]})}return d}}()};NGL.Contact=function(a,b){this.atomSet1=a;this.atomSet2=b;this.kdtree1=new NGL.Kdtree(a);this.kdtree2=new NGL.Kdtree(b)};
NGL.Contact.prototype={within:function(a,b){NGL.time("NGL.Contact within");for(var c=new NGL.AtomSet,d=new NGL.BondSet,e=this.kdtree2,f=this.atomSet1.atoms,g=0,h=f.length;g<h;++g){for(var k=f[g],l=!1,m=e.nearest(k,Infinity,a),n=0,q=m.length;n<q;++n){var p=m[n],t=p.atom,p=p.distance;k.residue!==t.residue&&(!b||p>b)&&(l=!0,c.addAtom(t),d.addBond(k,t,!0))}l&&c.addAtom(k)}NGL.timeEnd("NGL.Contact within");return{atomSet:c,bondSet:d}}};
NGL.polarContacts=function(a,b,c){b=b||3.5;c=c||40;var d=new NGL.Selection("( ARG and ( .NE or .NH1 or .NH2 ) ) or ( ASP and .ND2 ) or ( GLN and .NE2 ) or ( HIS and ( .ND1 or .NE2 ) ) or ( LYS and .NZ ) or ( SER and .OG ) or ( THR and .OG1 ) or ( TRP and .NE1 ) or ( TYR and .OH ) or ( PROTEIN and .N )"),e=new NGL.Selection("( ASN and .OD1 ) or ( ASP and ( OD1 or .OD2 ) ) or ( GLN and .OE1 ) or ( GLU and ( .OE1 or .OE2 ) ) or ( HIS and ( .ND1 or .NE2 ) ) or ( SER and .OG ) or ( THR and .OG1 ) or ( TYR and .OH ) or ( PROTEIN and .O )"),
d=new NGL.AtomSet(a,d),e=new NGL.AtomSet(a,e);b=(new NGL.Contact(d,e)).within(b);b.atomSet.structure=a;b.bondSet.structure=a;var f=new NGL.BondSet,g=new THREE.Vector3,h=new THREE.Vector3;b.bondSet.eachBond(function(a){var b=a.atom1;a=a.atom2;if(!("O"===b.atomname&&"N"===a.atomname||"N"===b.atomname&&"O"===a.atomname))if("N"===b.atomname||"N"===a.atomname){var d,e;"N"===b.atomname?(d=b,e=a):(d=a,e=b);var q=d.residue.getAtomByName("CA");if(q){var p=d.residue.getPreviousConnectedResidue();p&&(p=p.getAtomByName("C"))&&
(g.subVectors(d,p),h.subVectors(d,q),g.add(h).multiplyScalar(.5),h.subVectors(e,d),THREE.Math.radToDeg(g.angleTo(h))<c&&f.addBond(b,a,!0))}}else"OH"===b.atomname&&"TYR"===b.resname||"OH"===a.atomname&&"TYR"===a.resname?("OH"===b.atomname?(d=b,e=a):(d=a,e=b),q=d.residue.getAtomByName("CZ"),g.subVectors(q,d),h.subVectors(q,e),THREE.Math.radToDeg(g.angleTo(h))<c&&f.addBond(b,a,!0)):f.addBond(b,a,!0)});f.structure=a;b.bondSet.dispose();d.dispose();e.dispose();return{atomSet:b.atomSet,bondSet:f}};
NGL.polarBackboneContacts=function(a,b,c){b=b||3.5;c=c||40;var d=new NGL.Selection("( PROTEIN and .N )"),e=new NGL.Selection("( PROTEIN and .O )"),d=new NGL.AtomSet(a,d),e=new NGL.AtomSet(a,e);b=(new NGL.Contact(d,e)).within(b);b.atomSet.structure=a;b.bondSet.structure=a;var f=new NGL.BondSet,g=new THREE.Vector3,h=new THREE.Vector3;b.bondSet.eachBond(function(a){var b=a.atom1;a=a.atom2;var d,e;"N"===b.atomname?(d=b,e=a):(d=a,e=b);var q=d.residue.getAtomByName("CA");if(q){var p=d.residue.getPreviousConnectedResidue();
p&&(p=p.getAtomByName("C"))&&(g.subVectors(d,p),h.subVectors(d,q),g.add(h).multiplyScalar(.5),h.subVectors(e,d),THREE.Math.radToDeg(g.angleTo(h))<c&&f.addBond(b,a,!0))}});f.structure=a;b.bondSet.dispose();d.dispose();e.dispose();return{atomSet:b.atomSet,bondSet:f}};
NGL.ElementColors={H:16777215,HE:14286847,LI:13402367,BE:12779264,B:16758197,C:9474192,N:3166456,O:16715021,F:9494608,NE:11789301,NA:11230450,MG:9109248,AL:12560038,SI:1578E4,P:16744448,S:16777008,CL:2093087,AR:8442339,K:9388244,CA:4062976,SC:15132390,TI:12567239,V:10921643,CR:9083335,MN:10255047,FE:14706227,CO:15765664,NI:5296208,CU:13140019,ZN:8224944,GA:12750735,GE:6721423,AS:12419299,SE:16752896,BR:10889513,KR:6076625,RB:7351984,SR:65280,Y:9764863,ZR:9756896,NB:7586505,MO:5551541,TC:3907230,RU:2396047,
RH:687500,PD:27013,AG:12632256,CD:16767375,IN:10909043,SN:6717568,SB:10380213,TE:13924864,I:9699476,XE:9699476,CS:5707663,BA:51456,LA:7394559,CE:16777159,PR:14286791,ND:13107143,PM:10747847,SM:9437127,EU:6422471,GD:4587463,TB:3211207,DY:2097095,HO:65436,ER:58997,TM:54354,YB:48952,LU:43812,HF:5096191,TA:5089023,W:2200790,RE:2522539,OS:2516630,IR:1528967,PT:13684960,AU:16765219,HG:12105936,TL:10900557,PB:5724513,BI:10375093,PO:11230208,AT:7688005,RN:4358806,FR:4325478,RA:32E3,AC:7384058,TH:47871,PA:41471,
U:36863,NP:33023,PU:27647,AM:5528818,CM:7888099,BK:9064419,CF:10565332,ES:11739092,FM:11739066,MD:11734438,NO:12389767,LR:13041766,RF:13369433,DB:13697103,SG:14221381,BH:14680120,HS:15073326,MT:15400998,DS:16777215,RG:16777215,CN:16777215,UUT:16777215,FL:16777215,UUP:16777215,LV:16777215,UUH:16777215,D:16777152,T:16777120,"":16777215};
NGL.ResidueColors={ALA:9240460,ARG:124,ASN:16743536,ASP:10485826,CYS:16777072,GLN:16731212,GLU:6684672,GLY:16777215,HIS:7368959,ILE:19456,LEU:4546117,LYS:4671416,MET:12099650,PHE:5459026,PRO:5395026,SER:16740418,THR:12078080,TRP:5195264,TYR:9203788,VAL:16747775,ASX:16711935,GLX:16711935,ASH:16711935,GLH:16711935,A:10526975,G:16740464,I:8454143,C:16747595,T:10551200,U:16744576,DA:10526975,DG:16740464,DI:8454143,DC:16747595,DT:10551200,DU:16744576,"":16711935};
NGL.StructureColors={alphaHelix:16711808,"3_10Helix":10485888,piHelix:6291584,betaStrand:16762880,betaTurn:6324479,coil:16777215,dna:11403518,rna:16580962,carbohydrate:10921722,"":8421504};NGL.HelixTypes={1:"h",2:"h",3:"i",4:"h",5:"g",6:"h",7:"h",8:"h",9:"h",10:"h","":"h"};
NGL.VdwRadii={H:1.1,HE:1.4,LI:1.81,BE:1.53,B:1.92,C:1.7,N:1.55,O:1.52,F:1.47,NE:1.54,NA:2.27,MG:1.73,AL:1.84,SI:2.1,P:1.8,S:1.8,CL:1.75,AR:1.88,K:2.75,CA:2.31,SC:2.3,TI:2.15,V:2.05,CR:2.05,MN:2.05,FE:2.05,CO:2,NI:2,CU:2,ZN:2.1,GA:1.87,GE:2.11,AS:1.85,SE:1.9,BR:1.83,KR:2.02,RB:3.03,SR:2.49,Y:2.4,ZR:2.3,NB:2.15,MO:2.1,TC:2.05,RU:2.05,RH:2,PD:2.05,AG:2.1,CD:2.2,IN:2.2,SN:1.93,SB:2.17,TE:2.06,I:1.98,XE:2.16,CS:3.43,BA:2.68,LA:2.5,CE:2.48,PR:2.47,ND:2.45,PM:2.43,SM:2.42,EU:2.4,GD:2.38,TB:2.37,DY:2.35,
HO:2.33,ER:2.32,TM:2.3,YB:2.28,LU:2.27,HF:2.25,TA:2.2,W:2.1,RE:2.05,OS:2,IR:2,PT:2.05,AU:2.1,HG:2.05,TL:1.96,PB:2.02,BI:2.07,PO:1.97,AT:2.02,RN:2.2,FR:3.48,RA:2.83,AC:2,TH:2.4,PA:2,U:2.3,NP:2,PU:2,AM:2,CM:2,BK:2,CF:2,ES:2,FM:2,MD:2,NO:2,LR:2,RF:2,DB:2,SG:2,BH:2,HS:2,MT:2,DS:2,RG:2,CN:2,UUT:2,FL:2,UUP:2,LV:2,UUH:2,"":2};
NGL.CovalentRadii={H:.31,HE:.28,LI:1.28,BE:.96,B:.84,C:.76,N:.71,O:.66,F:.57,NE:.58,NA:1.66,MG:1.41,AL:1.21,SI:1.11,P:1.07,S:1.05,CL:1.02,AR:1.06,K:2.03,CA:1.76,SC:1.7,TI:1.6,V:1.53,CR:1.39,MN:1.39,FE:1.32,CO:1.26,NI:1.24,CU:1.32,ZN:1.22,GA:1.22,GE:1.2,AS:1.19,SE:1.2,BR:1.2,KR:1.16,RB:2.2,SR:1.95,Y:1.9,ZR:1.75,NB:1.64,MO:1.54,TC:1.47,RU:1.46,RH:1.42,PD:1.39,AG:1.45,CD:1.44,IN:1.42,SN:1.39,SB:1.39,TE:1.38,I:1.39,XE:1.4,CS:2.44,BA:2.15,LA:2.07,CE:2.04,PR:2.03,ND:2.01,PM:1.99,SM:1.98,EU:1.98,GD:1.96,
TB:1.94,DY:1.92,HO:1.92,ER:1.89,TM:1.9,YB:1.87,LU:1.87,HF:1.75,TA:1.7,W:1.62,RE:1.51,OS:1.44,IR:1.41,PT:1.36,AU:1.36,HG:1.32,TL:1.45,PB:1.46,BI:1.48,PO:1.4,AT:1.5,RN:1.5,FR:2.6,RA:2.21,AC:2.15,TH:2.06,PA:2,U:1.96,NP:1.9,PU:1.87,AM:1.8,CM:1.69,BK:1.6,CF:1.6,ES:1.6,FM:1.6,MD:1.6,NO:1.6,LR:1.6,RF:1.6,DB:1.6,SG:1.6,BH:1.6,HS:1.6,MT:1.6,DS:1.6,RG:1.6,CN:1.6,UUT:1.6,FL:1.6,UUP:1.6,LV:1.6,UUH:1.6,"":1.6};
NGL.ResidueRadii={"2QY":6.58,CY0:11.98,"2QZ":2.52,CY1:6.59,HHK:5.11,CXM:4.69,HHI:4.58,CY4:4.57,S12:18.57,CY3:2.79,C5C:5.35,PFX:11.84,"2R3":6.94,"2R1":3.78,ILX:4.99,"32S":5.68,BTK:8.59,"32T":5.72,FAK:9.8,B27:2.78,ILM:3.84,C4R:5.63,"32L":6.75,SYS:3.01,"1MH":5.04,ILE:3.65,YNM:6.39,"2RX":4.91,B3A:2.48,GEE:4.76,"7MN":7.34,B3E:5.4,ARG:6.33,200:6.89,HIP:5.47,HIA:4.64,B3K:5.89,HIC:5.76,B3L:4.96,B3M:5.07,ARM:6.86,ARO:7.35,AR4:8.42,PG1:10.67,YOF:6.44,IML:3.74,SXE:6.65,HIQ:7.98,PFF:6.31,HIS:4.52,"0TD":3.62,
C3Y:5.24,"1OP":11.55,"02Y":4.77,"02V":4.83,ASB:5.59,"30V":8.53,S2P:4.81,ASP:3.55,ASN:3.54,"2OR":6.91,QMM:6.13,"2P0":8.52,ASL:5.36,HFA:5.14,"5PG":5.69,B3X:4.38,AS9:4.1,ARV:7.59,B3U:6.06,S2C:7.54,B3T:3.34,175:5.64,GFT:8.18,HG7:6.8,B3Q:4.48,ASA:3.64,"02K":2.94,B3Y:7.45,PHD:5.35,C6C:6.42,BUC:5.8,HGL:8.07,PHE:5.06,"03Y":2.6,PHA:5.11,OCY:5,"4PH":6.79,"5OH":4.7,"31Q":10.46,BTR:7.98,"3PX":4.7,"1PA":8.07,ASX:3.54,IOR:7.23,"03E":3.38,PHL:5.17,KWS:5.09,PHI:7.12,NAL:7.22,S1H:19.21,"2ML":3.86,"2MR":7.35,GHG:4.83,
TYY:6.54,"2MT":3.67,"56A":13.01,SVA:5.46,TYX:8.31,TYS:8.59,TYR:6.38,TYQ:6.43,HLU:3.99,MYK:19.47,TYO:7.71,HLX:4.98,TYN:9.87,TYJ:6.25,TYI:6.49,LYH:5.13,LYF:12.19,SUN:6.73,LYR:18.28,TYB:6.46,"11W":14.39,LYS:5.54,LYN:4.8,"11Q":4.85,LYO:4.71,LYZ:1.76,TXY:6.44,MYN:4.71,TY5:10.6,HMR:5.09,"01W":8.55,LYX:13.36,TY8:7.22,TY2:6.49,KYN:6.18,KYQ:9.75,CZZ:5.14,IIL:3.81,HNC:10.41,OIC:4.62,LVN:2.89,QIL:3.84,JJL:8.3,VAH:3.88,JJJ:7.5,JJK:7.43,VAD:2.56,CYW:4.65,"0QL":5.72,143:8.22,SVX:7.04,CYJ:11.64,SVY:7.1,SVZ:6.6,
CYG:8.03,CYF:13.54,SVV:5.09,GL3:2.72,"8SP":14.26,CYS:2.78,"004":4.33,CYR:10.33,PLJ:3.71,EXY:7.37,HL2:3.75,A5N:5.21,CYQ:5.67,CZ2:5.16,LWY:4.12,PM3:8.78,OHS:6.98,OHI:5.35,"3TY":8.42,CYD:8.55,DYS:7.87,DAH:6.47,"4IK":11.81,"3EG":3.66,AYA:3.65,"4IN":6.31,DAB:3.48,"4HT":6.03,RGL:7.03,DAM:2.49,NFA:5.04,WFP:6.07,"2JC":2.97,HAR:7.55,"2JG":5.67,MH6:1.72,"2JF":9.13,"3FG":4.96,MGN:4.84,AZH:5.36,AZK:6.03,ZBZ:7.79,TBG:2.58,VAL:2.51,MGG:7.34,AZS:5.61,FHL:9.75,"2JH":4.56,IEL:7.07,FHO:6.75,DA2:7.79,FH7:6.99,ME0:4.52,
"3GL":4.84,MDO:5.03,AZY:7.37,A8E:3.76,ZCL:6.71,MDH:2.58,LA2:14.07,"4FW":6.1,YCM:5.32,MDF:4.95,YCP:3.01,TEF:8.63,FGP:4.34,UF0:19.72,XCN:4.57,FGL:2.56,MF3:6.37,MEQ:5.13,LAA:3.23,IGL:5.52,MET:4.49,NIY:6.81,QCS:5.18,TCQ:8.56,MEN:4.33,"4HL":8.79,MEA:4.95,EFC:5.28,LAL:2.41,"2HF":5.52,KBE:5.64,OCS:3.94,CAF:5.46,NC1:11.4,NBQ:9.82,CAB:4.19,MBQ:9.55,193:7.38,192:2.44,"0WZ":7.61,CAS:5.35,NB8:11.98,OBS:11.71,"1AC":2.42,PCA:3.48,MCL:9.73,LBY:7.75,GAU:4.67,PBF:9.75,MCG:6.46,DDE:6.86,"19W":3.94,MD5:9.33,MD6:6.44,
MD3:8.41,MCS:7.56,OBF:3.64,UAL:4.68,PAT:6.05,IAM:8.88,PAQ:8.77,FDL:9.49,NCB:3.45,LCK:9.81,DDZ:2.52,"2FM":5.54,IAR:6.77,OAS:4.8,HBN:8.8,TA4:5.55,"1C3":7.43,ECX:5.51,PF5:6.28,RE3:5.29,FCL:6.25,ECC:4.79,LDH:7.06,NCY:2.91,CCS:4.58,PEC:6.54,"2CO":4.45,LE1:2.72,HCM:5.53,"07O":8.05,HCL:4.96,NEP:6.94,PE1:8.01,LEF:4.37,FC0:5.18,LED:4.34,HCS:4.09,DBU:2.49,RE0:5.53,LEN:3.82,"1E3":8.71,BB9:2.56,BB8:5.14,PCS:5.05,BB7:4.56,BB6:2.62,LEU:3.83,DBZ:7.08,LET:11.29,DBY:6.46,ICY:7.76,MAA:2.4,CGA:7.91,"5CS":8.34,UGY:3.7,
LGY:11.71,N10:8.96,AAR:6.39,FT6:7.5,MOD:12.62,"5CW":7.21,PVH:4.58,BBC:6.42,YYA:7.3,O12:14.08,NOT:7.15,KGC:9.88,MP4:5.86,"0CS":4.07,MP8:3.75,VLL:2.54,VLM:2.51,BCS:8.03,MNL:4.9,AA4:4.47,SAC:3.49,BCX:2.99,"3CF":6.47,SAH:11.7,NNH:6.86,CGU:4.71,SIB:12.41,TLY:8.78,SIC:4.81,VMS:8.82,TMD:6.76,MMO:6.53,PXU:2.46,"4AW":6.22,OTH:3.6,DLS:6.84,MME:4.99,DM0:6.99,"0FL":2.76,SBL:8.96,CDV:3.72,OTY:6.51,PYA:7.75,"2AS":3.57,DMH:4.92,ELY:7.42,GVL:9.6,FVA:2.9,SAR:2.48,"4BF":6.92,EME:4.69,CDE:2.51,"3AR":7.86,"3AH":9.11,
AC5:2.44,FTR:6.08,MLL:3.76,NPH:11.66,NPI:6.9,DMT:6.67,PYX:11.3,MLE:3.87,PYL:9.67,ZZU:6.94,H5M:3.61,SCH:4.46,DMK:3.52,FTY:9.07,"2AG":3.7,ABA:2.55,ZZJ:2.44,MLZ:6.8,MLY:6.88,KCX:7.28,ZZD:8.16,"3A5":5.37,LHC:7.75,"9AT":2.47,OZT:3.4,THO:2.62,THR:2.5,DFI:3.93,MKD:6.42,"4CY":4.6,SDP:6.07,DFO:3.94,"0A0":3.45,"4DB":9.73,ML3:6.26,BG1:8.02,SD4:4.57,THC:3.8,SCS:5.48,TH5:4.65,BFD:5.33,AEI:6.34,TH6:2.85,SCY:4.53,TIS:4.81,SEE:4.53,BHD:3.48,SEB:8.18,SEC:2.96,SEP:4.8,CLH:7.13,TIH:5.02,CLG:13.62,SEN:6.43,XXA:7.34,
SEL:2.46,SE7:4.19,"4CF":7.72,G8M:3.57,BH2:3.51,UN2:3.22,VR0:10.51,MK8:4.76,DHA:2.32,LMQ:4.69,SFE:5.01,AHB:3.47,OXX:7.05,BIF:9.63,IZO:4.47,NMM:8.25,"0BN":7,HZP:3.12,NMC:4.23,DHL:2.69,"9DS":9.29,SER:2.41,CHG:4.2,MIR:6.54,AGQ:7.79,SET:2.46,MIS:6.32,"4FB":3.08,"0AR":8.46,LME:3.99,FZN:24.42,AGT:9.04,IYR:6.46,"9DN":9.31,CHP:5.75,UNK:1.64,XX1:9.92,AGM:6.57,"0AH":5.78,LLP:10.22,"0AF":6.72,"4DP":9.28,HYP:2.25,DIR:5.8,LLY:8.71,"0AK":6.11,NLE:4.67,OYL:6.42,WVL:4.69,"0A8":8.1,NLY:6.37,MHO:4.89,VOL:2.55,"0A1":7.1,
MHL:3.92,NLP:4.81,NLQ:4.65,MHW:2.74,BIL:4.7,NLO:4.8,MHU:7.51,XW1:9.36,LLO:10.13,SGB:6.88,MHV:3.6,MHS:4.51,"0A9":5.17,"0LF":9.96,HT7:6.82,X2W:6.6,YPZ:9.38,I58:6.73,FLA:2.4,M0H:4.83,HSL:2.46,FLE:6.17,KOR:10.1,"1VR":3.89,HSO:4.56,TTS:9.41,RVX:7.01,TTQ:7.71,H14:5.27,HTI:7.8,ONH:6.14,LP6:8.58,ONL:4.83,AHH:5.06,HS8:7.4,HS9:4.71,BL2:5.82,AHP:5.26,"6HN":7.34,HRP:5.46,POM:3.6,WPA:5.11,"2ZC":4.29,CPC:2.65,AIB:2.4,XSN:3.47,M2S:5.28,GND:6.67,GNC:4.6,MVA:2.56,OLZ:5.32,M2L:6.15,TRF:6.69,NZH:7.66,SRZ:5.27,OLD:10.47,
CME:5.86,CMH:5.3,ALA:2.38,TRQ:7.36,PPN:7.24,TRP:6.07,TRO:5.82,TRN:5.95,NYS:8.1,ALC:5.26,U3X:11.7,HVA:2.58,TS9:3.92,TRX:7.27,TRW:11.8,LPL:7.51,GMA:4.4,OMT:5.07,CMT:3.54,GME:4.66,NYB:6.07,PR3:5.12,LPD:2.48,GLU:4.49,"1X6":6.84,LPG:2.39,GLX:4.52,PR4:4.52,CML:6.16,FME:4.52,HTR:6.48,PR7:4.66,Z3E:7.2,GLZ:2.39,BMT:6.37,WRP:8.16,GLY:2.37,OMY:6.11,MTY:5.46,OMX:6.15,GLN:4.46,"2XA":8.25,"28X":7.84,"7JA":9.46,FLT:9.65,GLJ:3.7,OMH:5.26,TSY:4.26,PRV:4.28,CS4:11.21,DOA:12.33,"23P":5.42,CS3:8.24,"6CL":6.47,PRR:5.58,
KST:11.58,CS1:7.23,PRS:2.63,ZYJ:11.4,IT1:9.75,UU5:4.98,ESB:6.69,UU4:2.49,ESC:5.65,LSO:10.58,ZYK:11.45,"9NV":8.99,"23F":5.27,ORN:4.25,HOX:6.61,CSD:3.95,FP9:3.03,DO2:4.44,SLL:11.53,P3Q:9.54,ORQ:6.04,MSL:5.21,DNP:2.45,CSB:3.51,WLU:4.24,CSA:5.7,MT2:5.51,CSO:3.53,TPO:4.73,MSP:13.11,"23S":6.09,MSO:4.96,PRO:2.41,TPL:5.41,DNS:8.79,CSK:3.91,Z70:7.4,CSJ:7.51,DNW:7.97,PRK:9.15,GSU:11.81,LTA:6.57,HPE:6.63,TPQ:6.48,PRJ:5.26,PSW:4.65,L3O:3.89,CSU:4.89,ALY:7.38,M3L:7.12,CSW:3.68,XPR:7.68,D4P:5.66,FOE:8.17,SLZ:5.69,
CSP:5.26,TQI:7.68,ALT:2.72,CSR:5.42,CSS:3.61,M3R:7.18,ALO:2.57,R4K:4.67,SMF:9,MSA:2.73,SMC:3.39,CSX:3.47,SME:4.8,ETA:2.4,CSZ:3.6,"22G":8.8,MSE:4.62,ALN:6.16,PSH:7.26,CTE:7.27,DON:6.72,CTH:3.45,U2X:11.54,"6CW":7.56,TQZ:6.97,"3YM":6.52,OSE:4.49,"2VA":9.82,TQQ:7.76,NRG:8.35,BPE:7.24,F2F:6.25,"1TQ":8.58,I2M:3.13,NVA:3.76,R1A:8.2,QPA:6.95,C1X:11.63,FRD:5.05,HR7:6.98,SNC:3.93,QPH:5.15,"26B":8.39,DPQ:6.54,DPP:2.51,"2TY":8.65,TNR:6.88,PTH:8.35,DPL:3.58,APK:8.79,"1TY":8.84,HRG:7.36,PTM:8.74,"1U8":3.62,PTR:8.64,
LVG:3.01,"6FL":4.85,SOC:4.05,KPI:9.79,IPG:2.91,P2Y:2.51,N2C:3.55,T0I:7.34,MPH:5.29,R2T:4.71,TOX:6.78,P2Q:9.8,GPL:10.77,MPJ:5.07,F2Y:6.2,T11:8.58,"9NR":9.33,FPR:8.85,"9NF":8.93,KPY:10.17,"9NE":9.77,TOQ:7.5,MPQ:4.2,FPK:3.08,HQA:7.25,SOY:10.94,"":5};
NGL.guessElement=function(){var a="HCONSP".split(""),b=["NA","CL"];return function(c){c=c.trim().toUpperCase();parseInt(c.charAt(0))&&(c=c.substr(1));var d=c.length;if(0===d)return"";if(1===d)return c;if(2===d){if(-1!==b.indexOf(c))return c;if(-1!==a.indexOf(c[0]))return c[0]}return 3<=d&&-1!==a.indexOf(c[0])?c[0]:""}}();NGL.UnknownType=0;NGL.CgType=1;NGL.ProteinType=2;NGL.ProteinBackboneType=3;NGL.NucleicType=4;NGL.RnaBackboneType=5;NGL.DnaBackboneType=6;NGL.WaterType=7;
NGL.AA1={HIS:"H",ARG:"R",LYS:"K",ILE:"I",PHE:"F",LEU:"L",TRP:"W",ALA:"A",MET:"M",PRO:"P",CYS:"C",ASN:"N",VAL:"V",GLY:"G",SER:"S",GLN:"Q",TYR:"Y",ASP:"D",GLU:"E",THR:"T",ASH:"D",GLH:"E",UNK:""};
NGL.GidPool={nextGid:1,objectList:[],rangeList:[],addObject:function(a){NGL.GidPool.objectList.push(a);NGL.GidPool.rangeList.push(NGL.GidPool.allocateGidRange(a));return NGL.GidPool},removeObject:function(a){a=NGL.GidPool.objectList.indexOf(a);-1!==a&&(NGL.GidPool.objectList.splice(a,1),NGL.GidPool.rangeList.splice(a,1),0===NGL.GidPool.objectList.length&&(NGL.GidPool.nextGid=1));return NGL.GidPool},updateObject:function(a){var b=NGL.GidPool.objectList.indexOf(a);if(-1!==b){var c=NGL.GidPool.rangeList[b];
c[1]===NGL.GidPool.nextGid?(a=NGL.GidPool.getGidCount(a),NGL.GidPool.nextGid+=a-(c[1]-c[0]),c[1]=NGL.GidPool.nextGid):NGL.GidPool.rangeList[b]=NGL.GidPool.allocateGidRange(a)}else NGL.warn("NGL.GidPool.updateObject: object not found.");return NGL.GidPool},getGidCount:function(a){var b=0;a instanceof NGL.Structure?b=a.atomCount:a instanceof NGL.BondSet&&(b=a.bondCount);return b},allocateGidRange:function(a){var b=NGL.GidPool.nextGid;NGL.GidPool.nextGid+=NGL.GidPool.getGidCount(a);return[b,NGL.GidPool.nextGid]},
freeGidRange:function(a){},getNextGid:function(){return NGL.GidPool.nextGid++},getGid:function(a,b){b=b||0;var c=0,d=NGL.GidPool.objectList.indexOf(a);-1!==d?c=NGL.GidPool.rangeList[d][0]+b:NGL.warn("NGL.GidPool.getGid: object not found.");return c},getByGid:function(a){var b;NGL.GidPool.objectList.forEach(function(c){c instanceof NGL.Structure?c.eachAtom(function(d){NGL.GidPool.getGid(c,d.index)===a&&(b=d)}):c instanceof NGL.BondSet&&c.eachBond(function(d){NGL.GidPool.getGid(c,d.index)===a&&(b=d)})});
return b}};
NGL.ColorFactory=function(a,b){this.type=a;this.structure=b.structure;this.bondSet=b.bondSet;this.surface=b.surface;!this.bondSet&&this.structure&&(this.bondSet=this.structure.bondSet);b instanceof NGL.Structure&&(this.structure=b);this.structure&&(this.atomindexScale=chroma.scale(["red","orange","yellow","green","blue"]).mode("lch").domain([0,this.structure.atomCount]),this.residueindexScale=chroma.scale(["red","orange","yellow","green","blue"]).mode("lch").domain([0,this.structure.residueCount]),this.chainindexScale=
chroma.scale("Spectral").mode("lch").domain([0,this.structure.chainCount]),this.modelindexScale=chroma.scale(["red","orange","yellow","green","blue"]).mode("lch").domain([0,this.structure.modelCount]));this.chainNames="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";this.chainnameScale=chroma.scale("Spectral").mode("lch").domain([0,26])};
NGL.ColorFactory.types={"":"",element:"by element",resname:"by residue name",ss:"by secondary structure",atomindex:"by atom index",residueindex:"by residue index",chainindex:"by chain index",modelindex:"by model index",picking:"by picking id",random:"random",color:"color"};NGL.ColorFactory.getTypes=function(){var a={};Object.keys(NGL.ColorFactory.types).forEach(function(b){a[b]=NGL.ColorFactory.types[b]});Object.keys(NGL.ColorFactory.userSchemes).forEach(function(b){a[b]=b.split("|")[1]});return a};
NGL.ColorFactory.signals={typesChanged:new signals.Signal};NGL.ColorFactory.userSchemes={};NGL.ColorFactory.addScheme=function(a,b){b=b||"";var c=" "+THREE.Math.generateUUID()+"|"+b;NGL.ColorFactory.userSchemes[c]=a;NGL.ColorFactory.signals.typesChanged.dispatch();return c};NGL.ColorFactory.removeScheme=function(a){delete NGL.ColorFactory.userSchemes[a];NGL.ColorFactory.signals.typesChanged.dispatch()};
NGL.ColorFactory.addSelectionScheme=function(a,b){var c=[],d=[];a.forEach(function(a){c.push((new THREE.Color(a[0])).getHex());d.push(new NGL.Selection(a[1]))});var e=a.length;return NGL.ColorFactory.addScheme(function(a){for(var b=0;b<e;++b)if(d[b].test(a))return c[b];return 16777215},b)};
NGL.ColorFactory.prototype={constructor:NGL.ColorFactory,atomColor:function(a){var b=this.type,c=this.structure,d=NGL.ElementColors,e=NGL.ResidueColors,f=NGL.StructureColors,g=NGL.ElementColors[""],h=NGL.ResidueColors[""],k=NGL.StructureColors[""],l=this.atomindexScale,m=this.residueindexScale,n=this.chainindexScale,q=this.modelindexScale;if(NGL.ColorFactory.userSchemes[b])return NGL.ColorFactory.userSchemes[b](a);switch(b){case "picking":a=NGL.GidPool.getGid(c,a.index);break;case "element":a=d[a.element]||
g;break;case "resname":a=e[a.resname]||h;break;case "atomindex":a=l(a.index)._rgb;a=a[0]<<16|a[1]<<8|a[2];break;case "residueindex":a=m(a.residue.index)._rgb;a=a[0]<<16|a[1]<<8|a[2];break;case "chainindex":a=""===a.residue.chain.chainname?this.chainnameScale(10*this.chainNames.indexOf(a.chainname))._rgb:n(a.residue.chain.index)._rgb;a=a[0]<<16|a[1]<<8|a[2];break;case "modelindex":a=q(a.residue.chain.model.index)._rgb;a=a[0]<<16|a[1]<<8|a[2];break;case "random":a=16777215*Math.random();break;case "ss":a=
"h"===a.ss?f.alphaHelix:"g"===a.ss?f["3_10Helix"]:"i"===a.ss?f.piHelix:"s"===a.ss?f.betaStrand:a.residue.isNucleic()?f.dna:a.residue.isProtein()||"c"===a.ss?f.coil:k;break;case void 0:a=16777215;break;default:a=b}return a},atomColorToArray:function(a,b,c){a=this.atomColor(a);void 0===b&&(b=[]);void 0===c&&(c=0);b[c+0]=(a>>16&255)/255;b[c+1]=(a>>8&255)/255;b[c+2]=(a&255)/255;return b},bondColor:function(a,b){return"picking"===this.type?NGL.GidPool.getGid(this.bondSet,a.index):this.atomColor(b?a.atom1:
a.atom2)},bondColorToArray:function(a,b,c,d){a=this.bondColor(a,b);void 0===c&&(c=[]);void 0===d&&(d=0);c[d+0]=(a>>16&255)/255;c[d+1]=(a>>8&255)/255;c[d+2]=(a&255)/255;return c}};NGL.RadiusFactory=function(a,b){this.type=a;this.scale=b||1;this.max=10};NGL.RadiusFactory.types={"":"",vdw:"by vdW radius",covalent:"by covalent radius",ss:"by secondary structure",bfactor:"by bfactor",size:"size"};
NGL.RadiusFactory.prototype={constructor:NGL.RadiusFactory,atomRadius:function(a){var b=this.type,c=this.scale,d=NGL.VdwRadii,e=NGL.CovalentRadii,f=NGL.VdwRadii[""],g=NGL.CovalentRadii[""],h=["C3'","C3*","C4'","C4*","P"];switch(b){case "vdw":a=d[a.element]||f;break;case "covalent":a=e[a.element]||g;break;case "bfactor":a=a.bfactor||1;break;case "ss":a="h"===a.ss?.25:"g"===a.ss?.25:"i"===a.ss?.25:"s"===a.ss?.25:-1!==h.indexOf(a.atomname)?.4:.1;break;default:a=b||1}return Math.min(a*c,this.max)}};
NGL.LabelFactory=function(a,b){this.type=a;this.text=b||{}};NGL.LabelFactory.types={"":"",atomname:"atom name",atomindex:"atom index",atom:"atom name + index",resname:"residue name",resno:"residue no",res:"residue name + no",text:"text"};
NGL.LabelFactory.prototype={constructor:NGL.LabelFactory,atomLabel:function(a){switch(this.type){case "atomname":a=a.atomname;break;case "atomindex":a=""+a.index;break;case "atom":a=a.atomname+"|"+a.index;break;case "resname":a=a.resname;break;case "resno":a=""+a.resno;break;case "res":a=(NGL.AA1[a.resname.toUpperCase()]||"")+a.resno;break;case "text":a=this.text[a.globalindex];break;default:a=a.qualifiedName()}return void 0===a?"":a}};
NGL.AtomSet=function(a,b){this.atoms=[];this.bonds=[];this.atomCount=0;a&&this.fromStructure(a,b)};
NGL.AtomSet.prototype={constructor:NGL.AtomSet,apply:function(a){a.getAtoms=NGL.AtomSet.prototype.getAtoms;a.getBoundingBox=NGL.AtomSet.prototype.getBoundingBox;a.atomPosition=NGL.AtomSet.prototype.atomPosition;a.atomColor=NGL.AtomSet.prototype.atomColor;a.atomRadius=NGL.AtomSet.prototype.atomRadius;a.atomCenter=NGL.AtomSet.prototype.atomCenter;a.atomIndex=NGL.AtomSet.prototype.atomIndex},getAtoms:function(a,b){var c;a?(c=[],this.eachAtom(function(a){c.push(a)},a)):c=this.atoms;return b?c[0]:c},addAtom:function(a){this.atoms.push(a);
this.atomCount=this.atoms.length},fromStructure:function(a,b){var c=this;this.structure=a;this.selection=b;this.selection.signals.stringChanged.add(function(a){c.applySelection()});this.applySelection()},applySelection:function(){NGL.time("NGL.AtomSet.applySelection#atoms");this.atoms.length=0;var a=this.atoms;this.structure.eachAtom(function(b){a.push(b)},this.selection);this.atomCount=this.atoms.length;this.center=this.atomCenter();this._atomPosition=void 0;NGL.timeEnd("NGL.AtomSet.applySelection#atoms");
NGL.time("NGL.AtomSet.applySelection#bonds");this.bonds.length=0;var b=this.bonds;if(this.selection){var c={};this.eachAtom(function(a){var e=a.bonds,f=e.length;c[a.index]=!0;for(a=0;a<f;++a){var g=e[a];c[g.atom1.index]&&c[g.atom2.index]&&b.push(g)}})}else this.eachAtom(function(a){a=a.bonds;for(var c=a.length,f=0;f<c;++f)b.push(a[f])});this.bondCount=this.bonds.length;this._bondPositionTo=this._bondPositionFrom=void 0;NGL.timeEnd("NGL.AtomSet.applySelection#bonds")},getBoundingBox:function(a){var b=
new THREE.Box3,c=new THREE.Vector3,d=0,e=this.atoms.length;if(a)for(var f=a.test,d=0;d<e;++d)a=this.atoms[d],f(a)&&(c.copy(a),b.expandByPoint(c));else for(d=0;d<e;++d)c.copy(this.atoms[d]),b.expandByPoint(c);return b},eachAtom:function(a,b){if(b){var c=b.test;this.atoms.forEach(function(b){c(b)&&a(b)})}else this.atoms.forEach(a)},atomPosition:function(a){var b,c,d=0,e=this.atomCount;if(a)b=[],this.eachAtom(function(a){b[d+0]=a.x;b[d+1]=a.y;b[d+2]=a.z;d+=3},a),b=new Float32Array(b);else{b=this._atomPosition?
this._atomPosition:new Float32Array(3*this.atomCount);for(a=0;a<e;++a)c=this.atoms[a],b[d+0]=c.x,b[d+1]=c.y,b[d+2]=c.z,d+=3;this._atomPosition=b}return b},getColorFactory:function(a){return new NGL.ColorFactory(a,{structure:this.structure})},atomColor:function(a,b){var c,d=this.getColorFactory(b);c=a?[]:new Float32Array(3*this.atomCount);var e=0;this.eachAtom(function(a){d.atomColorToArray(a,c,e);e+=3},a);a&&(c=new Float32Array(c));return c},atomRadius:function(a,b,c){var d,e,f=new NGL.RadiusFactory(b,
c);e=a?[]:new Float32Array(this.atomCount);d=0;this.eachAtom(function(a){e[d]=f.atomRadius(a);d+=1},a);a&&(e=new Float32Array(e));return e},atomIndex:function(a){var b=[];this.eachAtom(function(a){b.push(a.index)},a);return b},atomCenter:function(){var a=new THREE.Box3,b=new THREE.Vector3;return function(c){var d=0,e=this.atoms.length;a.makeEmpty();if(c)for(var f=c.test,d=0;d<e;++d)c=this.atoms[d],f(c)&&(b.copy(c),a.expandByPoint(b));else for(d=0;d<e;++d)b.copy(this.atoms[d]),a.expandByPoint(b);return a.center()}}(),
eachBond:function(a,b){if((b=b||this.selection)&&b.test){var c=b.test;this.bonds.forEach(function(b){c(b.atom1)&&c(b.atom2)&&a(b)})}else for(var d=this.bonds,e=d.length,f=0;f<e;++f)a(d[f])},bondPosition:function(a,b){var c,d,e,f=0,g=this.bondCount;if(a)d=[],this.eachBond(function(a){b?(d[f+0]=a.atom1.x,d[f+1]=a.atom1.y,d[f+2]=a.atom1.z):(d[f+0]=a.atom2.x,d[f+1]=a.atom2.y,d[f+2]=a.atom2.z);f+=3},a),d=new Float32Array(d);else{d=[];b?this._bondPositionFrom&&(d=this._bondPositionFrom):this._bondPositionTo&&
(d=this._bondPositionTo);for(c=0;c<g;++c)e=this.bonds[c],b?(d[f+0]=e.atom1.x,d[f+1]=e.atom1.y,d[f+2]=e.atom1.z):(d[f+0]=e.atom2.x,d[f+1]=e.atom2.y,d[f+2]=e.atom2.z),f+=3;b?this._bondPositionFrom||(this._bondPositionFrom=new Float32Array(d)):this._bondPositionTo||(this._bondPositionTo=new Float32Array(d))}return d},bondColor:function(a,b,c){var d=0,e=[],f=this.getColorFactory(c);if(a)this.eachBond(function(a){f.bondColorToArray(a,b,e,d);d+=3},a);else{a=this.bonds;c=a.length;for(var g=0;g<c;++g)f.bondColorToArray(a[g],
b,e,d),d+=3}return new Float32Array(e)},bondRadius:function(a,b,c,d){var e=0,f=[],g=new NGL.RadiusFactory(c,d);if(a)this.eachBond(function(a){f[e]=g.atomRadius(b?a.atom1:a.atom2);e+=1},a);else for(a=this.bonds,c=a.length,e=0;e<c;++e)d=a[e],f[e]=g.atomRadius(b?d.atom1:d.atom2);return new Float32Array(f)},toJSON:function(){for(var a={metadata:{version:.1,type:"AtomSet",generator:"AtomSetExporter"},atomCount:this.atomCount},b=this.atoms,c=b.length,d=new NGL.AtomArray(c),e=new NGL.ProxyAtom(d),f=0;f<
c;++f)e.copy(b[f],f);a.atomArray=d.toJSON();return a},fromJSON:function(a){this.atomCount=a.atomCount;var b=this.atoms;a=new NGL.AtomArray(a.atomArray);for(var c=a.length,d=0;d<c;++d)b.push(new NGL.ProxyAtom(a,d));return this},dispose:function(){this.atoms.length=0;this.bonds.length=0;delete this.structure}};NGL.BondSet=function(){this.bonds=[];this.bondCount=0;NGL.GidPool.addObject(this)};
NGL.BondSet.prototype={constructor:NGL.BondSet,addBond:function(a,b,c,d){d=new NGL.Bond(a,b,d);d.index=this.bondCount;c||(a.bonds.push(d),b.bonds.push(d));this.bonds.push(d);this.bondCount+=1;NGL.GidPool.updateObject(this)},addBondIfConnected:function(a,b,c,d){return a.connectedTo(b)?(this.addBond(a,b,c,d),!0):!1},eachBond:function(a,b){var c=this.bonds,d=c.length;if(b&&b.test)for(var e=b.test,f=0;f<d;++f){var g=c[f];e(g.atom1)&&e(g.atom2)&&a(g)}else for(f=0;f<d;++f)a(c[f])},getColorFactory:function(a){return new NGL.ColorFactory(a,
{bondSet:this})},bondPosition:NGL.AtomSet.prototype.bondPosition,bondColor:NGL.AtomSet.prototype.bondColor,bondRadius:NGL.AtomSet.prototype.bondRadius,toJSON:function(){for(var a={metadata:{version:.1,type:"BondSet",generator:"BondSetExporter"},bondCount:this.bondCount},b=this.bonds,c=b.length,d=new Uint32Array(3*c),e,f,g=0;g<c;++g)e=3*g,f=b[g],d[e]=f.atom1.index,d[e+1]=f.atom2.index,d[e+2]=f.bondOrder;a.bondArray=d;return a},fromJSON:function(a,b){this.bondCount=a.bondCount;for(var c=this.bonds,
d=a.bondArray,e=d.length,f=0;f<e;f+=3){var g=new NGL.Bond(b[d[f]],b[d[f+1]],d[f+2]);g.index=f/3;c.push(g)}NGL.GidPool.updateObject(this);return this},clear:function(){this.bondCount=this.bonds.length=0;this.__disposed||NGL.GidPool.updateObject(this)},dispose:function(){this.__disposed=!0;this.clear();NGL.GidPool.removeObject(this)}};NGL.Bond=function(a,b,c){a.index<b.index?(this.atom1=a,this.atom2=b):(this.atom1=b,this.atom2=a);this.bondOrder=c||1};
NGL.Bond.prototype={constructor:NGL.Bond,atom1:void 0,atom2:void 0,bondOrder:void 0,index:void 0,qualifiedName:function(){return this.atom1.index+"="+this.atom2.index}};NGL.Matrix=function(a,b){return new jsfeat.matrix_t(a,b,jsfeat.F32_t|jsfeat.C1_t)};
NGL.Superposition=function(a,b){var c;"function"===typeof a.eachAtom?c=a.atomCount:a instanceof Float32Array&&(c=a.length/3);var d=new NGL.Matrix(3,c),e=new NGL.Matrix(3,c);this.coords1t=new NGL.Matrix(c,3);this.coords2t=new NGL.Matrix(c,3);this.A=new NGL.Matrix(3,3);this.W=new NGL.Matrix(1,3);this.U=new NGL.Matrix(3,3);this.V=new NGL.Matrix(3,3);this.VH=new NGL.Matrix(3,3);this.R=new NGL.Matrix(3,3);this.tmp=new NGL.Matrix(3,3);this.c=new NGL.Matrix(3,3);this.c.data.set([1,0,0,0,1,0,0,0,-1]);this.prepCoords(a,
d);this.prepCoords(b,e);this._superpose(d,e)};
NGL.Superposition.prototype={constructor:NGL.Superposition,_superpose:function(a,b){this.mean1=jsfeat.matmath.mean_rows(a);this.mean2=jsfeat.matmath.mean_rows(b);jsfeat.matmath.sub_rows(a,this.mean1);jsfeat.matmath.sub_rows(b,this.mean2);jsfeat.matmath.transpose(this.coords1t,a);jsfeat.matmath.transpose(this.coords2t,b);jsfeat.matmath.multiply_ABt(this.A,this.coords2t,this.coords1t);jsfeat.linalg.svd_decompose(this.A,this.W,this.U,this.V);jsfeat.matmath.invert_3x3(this.V,this.VH);jsfeat.matmath.multiply_3x3(this.R,
this.U,this.VH);0>jsfeat.matmath.mat3x3_determinant(this.R)&&(NGL.log("R not a right handed system"),jsfeat.matmath.multiply_3x3(this.tmp,this.c,this.VH),jsfeat.matmath.multiply_3x3(this.R,this.U,this.tmp))},prepCoords:function(a,b){var c=0,d=b.data;"function"===typeof a.eachAtom?a.eachAtom(function(a){d[c+0]=a.x;d[c+1]=a.y;d[c+2]=a.z;c+=3}):a instanceof Float32Array?d.set(a):NGL.warn("prepCoords: input type unknown")},transform:function(a){var b;"function"===typeof a.eachAtom?b=a.atomCount:a instanceof
Float32Array&&(b=a.length/3);var c=new NGL.Matrix(3,b),d=new NGL.Matrix(b,3);this.prepCoords(a,c);jsfeat.matmath.sub_rows(c,this.mean1);jsfeat.matmath.multiply_ABt(d,this.R,c);jsfeat.matmath.transpose(c,d);jsfeat.matmath.add_rows(c,this.mean2);var e=0,f=c.data;"function"===typeof a.eachAtom?a.eachAtom(function(a){a.x=f[e+0];a.y=f[e+1];a.z=f[e+2];e+=3}):a instanceof Float32Array?a.set(f.subarray(0,3*b)):NGL.warn("transform: input type unknown")}};
NGL.Structure=function(a,b){this.name=a;this.path=b;this.id=this.title="";this.atoms=[];this.models=[];this.biomolDict={};this.defaultAssembly="BU1";this.helices=[];this.sheets=[];this.frames=[];this.boxes=[];this.reset();NGL.GidPool.addObject(this)};
NGL.Structure.prototype={constructor:NGL.Structure,atomArray:void 0,reset:function(){this.modelCount=this.chainCount=this.residueCount=this.atomCount=0;this.atoms.length=0;this.models.length=0;this.bondSet?this.bondSet.clear():this.bondSet=new NGL.BondSet;this.biomolDict={};this.helices.length=0;this.sheets.length=0;this.unitcell=new NGL.Unitcell;this.frames.length=0;this.boxes.length=0;this.center=new THREE.Vector3;this.boundingBox=new THREE.Box3},setDefaultAssembly:function(a){this.defaultAssembly=
a},postProcess:function(a){var b=this;async.series([function(a){b._dontAutoBond||b.autoBond();a()},function(a){b._doAutoSS&&b.autoSS();a()},function(a){b._doAutoChainName&&b.autoChainName();a()},function(a){b.center=b.atomCenter();b.boundingBox=b.getBoundingBox();a()}],function(){NGL.GidPool.updateObject(b);a()})},nextAtomIndex:function(){return this.atomCount++},nextResidueIndex:function(){return this.residueCount++},nextChainIndex:function(){return this.chainCount++},nextModelIndex:function(){return this.modelCount++},
addModel:function(a){a?a.structure=this:a=new NGL.Model(this);a.index=this.nextModelIndex();this.models.push(a);return a},eachAtom:function(a,b){if(b&&b.modelOnlyTest){var c=b.modelOnlyTest;this.models.forEach(function(d){c(d)&&d.eachAtom(a,b)})}else if(b)this.models.forEach(function(c){c.eachAtom(a,b)});else for(var d=this.atoms,e=this.atomCount,f=0;f<e;++f)a(d[f])},eachResidue:function(a,b){if(b&&b.modelOnlyTest){var c=b.modelOnlyTest;this.models.forEach(function(d){c(d)&&d.eachResidue(a,b)})}else this.models.forEach(function(c){c.eachResidue(a,
b)})},eachResidueN:function(a,b){this.models.forEach(function(c){c.eachResidueN(a,b)})},eachFiber:function(a,b,c){if(b&&b.modelOnlyTest){var d=b.modelOnlyTest;this.models.forEach(function(e){d(e)&&e.eachFiber(a,b,c)})}else this.models.forEach(function(d){d.eachFiber(a,b,c)})},eachChain:function(a,b){if(b&&b.modelOnlyTest){var c=b.modelOnlyTest;this.models.forEach(function(d){c(d)&&d.eachChain(a,b)})}else this.models.forEach(function(c){c.eachChain(a,b)})},eachModel:function(a,b){if(b&&b.modelOnlyTest){var c=
b.modelOnlyTest;this.models.forEach(function(b){c(b)&&a(b)})}else this.models.forEach(a)},getSequence:function(){var a=[];this.eachResidue(function(b){b.getAtomByName("CA")&&a.push(b.getResname1())});return a},autoBond:function(){NGL.time("NGL.Structure.autoBond");var a=this.bondSet,b,c,d,e,f,g,h,k,l,m,n,q,p,t,r,w={};NGL.time("NGL.Structure.autoBond within");this.eachResidue(function(x){g=x.atoms;d=x.atomCount;e=d-1;p=x.resname;r=!1;if(w[p])if(t=w[p].atomnameList,d===t.length)for(r=!0,b=0;b<d;++b){if(g[b].atomname!==
t[b]){r=!1;break}}else r=!1;if(r){var s=w[p].atomIndices1,y=w[p].atomIndices2;x=s.length;for(b=0;b<x;++b)a.addBond(g[s[b]],g[y[b]])}else{s=[];y=[];if(20<d)for(l=new NGL.Kdtree(g,!0),n=x.hasBackbone()?1.2:2.3,b=0;b<=e;++b)for(h=g[b],q=h.covalent+n+.3,m=l.nearest(h,Infinity,q*q),f=m.length,c=0;c<f;++c)k=m[c].atom,h.index<k.index&&a.addBondIfConnected(h,k)&&(s.push(b),y.push(g.indexOf(k)));else for(b=0;b<e;++b)for(h=g[b],c=b+1;c<=e;++c)k=g[c],a.addBondIfConnected(h,k)&&(s.push(b),y.push(c));w[p]={atomnameList:x.getAtomnameList(),
atomIndices1:s,atomIndices2:y}}});NGL.timeEnd("NGL.Structure.autoBond within");NGL.time("NGL.Structure.autoBond between");this.eachResidueN(2,function(b,c){var d=b.getBackboneType(),e=c.getBackboneType();d!==NGL.UnknownType&&d===e&&a.addBondIfConnected(b.getBackboneAtomStart(),c.getBackboneAtomEnd())});NGL.timeEnd("NGL.Structure.autoBond between");NGL.timeEnd("NGL.Structure.autoBond")},autoSS:function(){var a=function(){var a,c=new THREE.Vector3,d=new THREE.Vector3;return function(e,f,g,h){for(var k=
Math.max(0,f-2);k<=f;++k)for(var l=2;5>l;++l)if(!(k+l>=e.residueCount)&&(c.copy(e.residues[k].getTraceAtom()),d.copy(e.residues[k+l].getTraceAtom()),a=c.distanceTo(d),Math.abs(a-g[l-2])>h))return!1;return!0}}();return function(){NGL.time("NGL.Structure.autoSS");this.eachFiber(function(b){if(!(4>b.residueCount))if(b.isProtein()){var c,d=b.residueCount;for(c=0;c<d;++c)a(b,c,[5.45,5.18,6.37],2.1)?b.residues[c].ss="h":a(b,c,[6.1,10.4,13],1.42)?b.residues[c].ss="s":b.residues[c].ss="c"}else if(b.isCg()){d=
new NGL.Helixbundle(b);b=d.position;c=d.fiber.residues;var d=d.size,e=new THREE.Vector3,f=new THREE.Vector3,g,h,k,l;for(g=0;g<d-1;++g)k=c[g],l=c[g+1],e.fromArray(b.center,3*g),f.fromArray(b.center,3*g+3),h=e.distanceTo(f),2>h&&1<h&&20>b.bending[g]&&(k.ss="h",l.ss="h")}});this.eachFiber(function(a){if(a.isProtein()||a.isCg){var c,d=0;a.eachResidueN(2,function(a,b){a.ss===b.ss?d+=1:(1===d&&(a.ss="c"),d=1);c=b});1===d&&(c.ss="c")}});NGL.timeEnd("NGL.Structure.autoSS")}}(),autoChainName:function(){return function(){NGL.time("NGL.Structure.autoChainName");
var a,b;this.eachModel(function(c){a=0;c.eachFiber(function(c){b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"[a];c.eachAtom(function(a){a.chainname=b});a+=1;62===a&&(NGL.warn("out of chain names"),a=0)})});NGL.timeEnd("NGL.Structure.autoChainName")}}(),updatePosition:function(a){var b,c,d,e=this.atoms,f=this.atomCount;for(b=0;b<f;++b)d=e[b],c=3*b,d.x=a[c],d.y=a[c+1],d.z=a[c+2]},toPdb:function(){function a(a,c){return void 0!==a?a:c}return function(){var b=1,c=[];c.push(sprintf("TITEL %-74s\n",
this.name));this.trajectory&&(c.push(sprintf("REMARK %-73s\n","Trajectory '"+this.trajectory.name+"'")),c.push(sprintf("REMARK %-73s\n","Frame "+this.trajectory.frame+"")));this.eachModel(function(d){c.push(sprintf("MODEL %-74d\n",b++));d.eachAtom(function(b){c.push(sprintf("ATOM  %5d %4s %3s %1s%4d    %8.3f%8.3f%8.3f%6.2f%6.2f      %4s%2s\n",b.serial,b.atomname,b.resname,a(b.chainname," "),b.resno,b.x,b.y,b.z,a(b.occurence,1),a(b.bfactor,0),a(b.segid,""),a(b.element,"")))});c.push(sprintf("%-80s\n",
"ENDMDL"))});c.push(sprintf("%-80s\n","END"));return c.join("")}}(),clone:function(){NGL.time("NGL.Structure.clone");var a=new NGL.Structure;a.name=this.name;a.path=this.path;a.title=this.title;a.id=this.id;this.biomolDict&&(a.biomolDict=this.biomolDict);this.atomArray&&(a.atomArray=this.atomArray.clone());this.eachModel(function(b){b=b.clone(a);a.addModel(b);b.eachAtom(function(b){a.atoms.push(b)})});a.frames=this.frames;a.boxes=this.boxes;this.bondSet.eachBond(function(b){a.bondSet.addBond(a.atoms[b.atom1.index],
a.atoms[b.atom2.index])});NGL.timeEnd("NGL.Structure.clone");NGL.debug&&NGL.log(a);return a},toJSON:function(){NGL.time("NGL.Structure.toJSON");var a={metadata:{version:.1,type:"Structure",generator:"StructureExporter"},name:this.name,path:this.path,title:this.title,id:this.id,biomolDict:this.biomolDict,helices:this.helices,sheets:this.sheets,unitcell:this.unitcell.toJSON(),frames:this.frames,boxes:this.boxes,center:this.center.toArray(),boundingBox:[this.boundingBox.min.toArray(),this.boundingBox.max.toArray()],
atoms:[]};if(this.atomArray)a.atomArray=this.atomArray.toJSON();else for(var b=this.atoms,c=b.length,d=0;d<c;++d)a.atoms.push(b[d].toJSON());a.bondSet=this.bondSet.toJSON();NGL.timeEnd("NGL.Structure.toJSON");return a},fromJSON:function(a){NGL.time("NGL.Structure.fromJSON");this.reset();this.name=a.name;this.path=a.path;this.title=a.title;this.id=a.id;this.biomolDict=a.biomolDict;this.helices=a.helices;this.sheets=a.sheets;this.unitcell=(new NGL.Unitcell).fromJSON(a.unitcell);this.frames=a.frames;
this.boxes=a.boxes;this.center=(new THREE.Vector3).fromArray(a.center);this.boundingBox=new THREE.Box3((new THREE.Vector3).fromArray(a.boundingBox[0]),(new THREE.Vector3).fromArray(a.boundingBox[1]));var b=this.atoms;if(a.atomArray)for(var c=this.atomArray=new NGL.AtomArray(a.atomArray),d=c.usedLength,e=0;e<d;++e)b.push(new NGL.ProxyAtom(c,e));else for(c=a.atoms,d=a.atoms.length,e=0;e<d;++e){var f=(new NGL.Atom).fromJSON(c[e]);f.index=e;b.push(f)}this.bondSet.fromJSON(a.bondSet,this.atoms);this.bondSet.eachBond(function(a){b[a.atom1.index].bonds.push(a);
b[a.atom2.index].bonds.push(a)});NGL.GidPool.updateObject(this);NGL.timeEnd("NGL.Structure.fromJSON");return this},getTransferable:function(){var a=[];this.atomArray&&a.concat(this.atomArray.getTransferable());if(this.frames)for(var b=this.frames,c=this.frames.length,d=0;d<c;++d)a.push(b[d].buffer);if(this.boxes)for(b=this.boxes,c=this.boxes.length,d=0;d<c;++d)a.push(b[d].buffer);return a},dispose:function(){this.modelCount=this.chainCount=this.residueCount=this.atomCount=0;this.atoms.length=0;this.models.length=
0;this.cif&&delete this.cif;this.frames&&(this.frames.length=0);this.boxes&&(this.boxes.length=0);this.bondSet.dispose();this.atomArray&&this.atomArray.dispose();NGL.GidPool.removeObject(this)}};NGL.AtomSet.prototype.apply(NGL.Structure.prototype);NGL.Model=function(a){this.structure=a;this.chains=[];this.chainCount=this.residueCount=this.atomCount=0};
NGL.Model.prototype={constructor:NGL.Model,modelno:void 0,nextAtomIndex:function(){this.atomCount+=1;return this.structure.nextAtomIndex()},nextResidueIndex:function(){this.residueCount+=1;return this.structure.nextResidueIndex()},nextChainIndex:function(){this.chainCount+=1;return this.structure.nextChainIndex()},addChain:function(a){a?a.model=this:a=new NGL.Chain(this);a.index=this.nextChainIndex();this.chains.push(a);return a},eachAtom:function(a,b){if(b&&b.chainOnlyTest){var c=b.chainOnlyTest;
this.chains.forEach(function(d){c(d)&&d.eachAtom(a,b)})}else this.chains.forEach(function(c){c.eachAtom(a,b)})},eachResidue:function(a,b){var c,d,e=this.chainCount;if(b&&b.chainOnlyTest){var f=b.chainOnlyTest;for(c=0;c<e;++c)d=this.chains[c],f(d)&&d.eachResidue(a,b)}else for(c=0;c<e;++c)d=this.chains[c],d.eachResidue(a,b)},eachResidueN:function(a,b){this.chains.forEach(function(c){c.eachResidueN(a,b)})},eachFiber:function(a,b,c){if(b&&b.chainOnlyTest){var d=b.chainOnlyTest;this.chains.forEach(function(e){d(e)&&
e.eachFiber(a,b,c)})}else this.chains.forEach(function(d){d.eachFiber(a,b,c)})},eachChain:function(a,b){var c,d,e=this.chainCount;if(b&&b.chainOnlyTest){var f=b.chainOnlyTest;for(c=0;c<e;++c)d=this.chains[c],f(d)&&a(d)}else for(c=0;c<e;++c)a(this.chains[c])},clone:function(a){var b=new NGL.Model(a);b.modelno=this.modelno;this.eachChain(function(a){b.addChain(a.clone(b))});return b},toJSON:function(){var a={modelno:this.modelno,chains:[]};this.eachChain(function(b){a.chains.push(b.toJSON())});return a},
fromJSON:function(a){this.modelno=a.modelno;a.chains.forEach(function(a){this.addChain((new NGL.Chain(this)).fromJSON(a))}.bind(this));return this}};NGL.AtomSet.prototype.apply(NGL.Model.prototype);NGL.Chain=function(a){this.model=a;this.residues=[];this.residueCount=this.atomCount=0};
NGL.Chain.prototype={constructor:NGL.Chain,chainname:void 0,nextAtomIndex:function(){this.atomCount+=1;return this.model.nextAtomIndex()},nextResidueIndex:function(){this.residueCount+=1;return this.model.nextResidueIndex()},addResidue:function(a){a?a.chain=this:a=new NGL.Residue(this);a.index=this.nextResidueIndex();this.residues.push(a);return a},eachAtom:function(a,b){var c,d,e,f,g=this.residueCount;if(b&&b.residueOnlyTest)for(d=b.residueOnlyTest,c=0;c<g;++c)f=this.residues[c],d(f)&&f.eachAtom(a,
b);else if(b&&(b.atomOnlyTest||""===this.chainname&&b.test))for(c=0;c<g;++c)f=this.residues[c],f.eachAtom(a,b);else for(c=0;c<g;++c)for(f=this.residues[c],e=f.atomCount,d=0;d<e;++d)a(f.atoms[d])},eachResidue:function(a,b){var c,d,e=this.residueCount;if(b&&b.residueOnlyTest){var f=b.residueOnlyTest;for(c=0;c<e;++c)d=this.residues[c],f(d)&&a(d)}else for(c=0;c<e;++c)a(this.residues[c])},eachResidueN:function(a,b){if(!(this.residues.length<a)){var c=this.residues,d=Array(a),e=c.length,f;for(f=0;f<a;f++)d[f]=
c[f];b.apply(this,d);for(f=a;f<e;f++)d.shift(),d.push(c[f]),b.apply(this,d)}},getFiber:function(a,b,c){var d=this.residueCount,e=this.residues.slice(a,b);if(c){c=this.residues[a-1];var f=this.residues[a],g=this.residues[b-1],h=this.residues[b];0!==a&&c.getBackboneType(-1)===f.getBackboneType(1)&&c.connectedTo(f)?e.unshift(c):e.unshift(f);b!==d&&h.getBackboneType(1)===f.getBackboneType(-1)&&g.connectedTo(h)?e.push(h):e.push(g)}return new NGL.Fiber(e,this.model.structure)},eachFiber:function(a,b,c){var d=
this,e=0,f=1,g=this.residues,h=b?b.test:void 0,k,l,m,n;this.eachResidueN(2,function(b,g){m=b.getBackboneType(e===f-1?-1:void 0);n=g.getBackboneType();m!==NGL.UnknownType&&m===n?(k=b.getBackboneAtomStart(),l=g.getBackboneAtomEnd(),k&&l&&k.connectedTo(l)&&(!h||h(k)&&h(l))||(a(d.getFiber(e,f,c)),e=f)):(m!==NGL.UnknownType&&a(d.getFiber(e,f,c)),e=f);++f});g[e].hasBackbone(-1)&&a(d.getFiber(e,f,c))},clone:function(a){var b=new NGL.Chain(a);b.chainname=this.chainname;this.eachResidue(function(a){b.addResidue(a.clone(b))});
return b},toJSON:function(){var a={chainname:this.chainname,residues:[]};this.eachResidue(function(b){a.residues.push(b.toJSON())});return a},fromJSON:function(a){this.chainname=a.chainname;a.residues.forEach(function(a){this.addResidue((new NGL.Residue(this)).fromJSON(a))}.bind(this));return this}};NGL.AtomSet.prototype.apply(NGL.Chain.prototype);NGL.Fiber=function(a,b){this.structure=b;this.residues=a;this.residueCount=a.length;this.isProtein()||this.isNucleic()||this.isCg()||NGL.error("NGL.fiber: could not determine molecule type")};
NGL.Fiber.prototype={constructor:NGL.Fiber,eachAtom:NGL.Chain.prototype.eachAtom,eachResidue:NGL.Chain.prototype.eachResidue,eachResidueN:NGL.Chain.prototype.eachResidueN,isProtein:function(){return this.residues[0].isProtein()},isCg:function(){return this.residues[0].isCg()},isNucleic:function(){return this.residues[0].isNucleic()},getType:function(){return this.residues[0].getType()},getBackboneType:function(a){return this.residues[0].getBackboneType(a)}};
NGL.Residue=function(a){this.chain=a;this.atoms=[];this.atomCount=0};
NGL.Residue.atomnames=function(){var a={};a[NGL.ProteinBackboneType]={trace:"CA",direction1:"C",direction2:["O","OC1","O1"],backboneStart:"C",backboneEnd:"N"};a[NGL.RnaBackboneType]={trace:["C4'","C4*"],direction1:["C1'","C1*"],direction2:["C3'","C3*"],backboneStart:["O3'","O3*"],backboneEnd:"P"};a[NGL.DnaBackboneType]={trace:["C3'","C3*"],direction1:["C2'","C2*"],direction2:["O4'","O4*"],backboneStart:["O3'","O3*"],backboneEnd:"P"};a[NGL.CgType]={trace:["CA","BB"],direction1:null,direction2:null,
backboneStart:["CA","BB"],backboneEnd:["CA","BB"]};a[NGL.UnknownType]={trace:"CA",direction1:null,direction2:null,backboneStart:"CA",backboneEnd:"CA"};return a}();
NGL.Residue.makeHasBackboneFn=function(a,b){return function(c){return-1===c?a.call(this)&&this.hasAtomWithName(b.backboneStart,b.direction1,b.direction2):0===c?a.call(this)&&this.hasAtomWithName(b.direction1,b.direction2):1===c?a.call(this)&&this.hasAtomWithName(b.backboneEnd,b.direction1,b.direction2):a.call(this)&&this.hasAtomWithName(b.backboneStart,b.backboneEnd,b.direction1,b.direction2)}};
NGL.Residue.prototype={constructor:NGL.Residue,index:void 0,chain:void 0,atoms:void 0,atomCount:void 0,resno:void 0,resname:void 0,_ss:void 0,get ss(){return this._ss},set ss(a){this._ss=a;var b,c=this.atomCount,d=this.atoms;for(b=0;b<c;++b)d[b].ss=a},isProtein:function(){return this.hasAtomWithName("CA","C","N")},isCg:function(){var a=Object.keys(NGL.AA1);return function(){return this._cg=!this.isProtein()&&this.hasAtomWithName(["CA","BB"])&&5>=this.atomCount&&-1!==a.indexOf(this.resname)}}(),isNucleic:function(){var a=
"A C T G U DA DC DT DG DU".split(" ");return function(){return-1!==a.indexOf(this.resname)}}(),isRna:function(){var a=["A","C","T","G","U"];return function(){return-1!==a.indexOf(this.resname)}}(),isDna:function(){var a=["DA","DC","DT","DG","DU"];return function(){return-1!==a.indexOf(this.resname)}}(),isHetero:function(){return this.atoms.length&&1===this.atoms[0].hetero},isWater:function(){var a=["SOL","WAT","HOH","H2O","W"];return function(){return-1!==a.indexOf(this.resname)}}(),hasProteinBackbone:function(){return NGL.Residue.makeHasBackboneFn(function(){return this.isProtein()},
NGL.Residue.atomnames[NGL.ProteinBackboneType])}(),hasRnaBackbone:function(){var a=["A","C","T","G","U"];return NGL.Residue.makeHasBackboneFn(function(){return-1!==a.indexOf(this.resname)},NGL.Residue.atomnames[NGL.RnaBackboneType])}(),hasDnaBackbone:function(){var a=["DA","DC","DT","DG","DU"];return NGL.Residue.makeHasBackboneFn(function(){return-1!==a.indexOf(this.resname)},NGL.Residue.atomnames[NGL.DnaBackboneType])}(),hasCgBackbone:function(){return this.isCg()},hasBackbone:function(a){return this.hasProteinBackbone(a)||
this.hasCgBackbone()||this.hasRnaBackbone(a)||this.hasDnaBackbone(a)},getResname1:function(){return NGL.AA1[this.resname.toUpperCase()]||"?"},getType:function(){return this.isProtein()?NGL.ProteinType:this.isNucleic()?NGL.NucleicType:this.isCg()?NGL.CgType:this.isWater()?NGL.WaterType:NGL.UnknownType},getBackboneType:function(a){return this.hasProteinBackbone(a)?NGL.ProteinBackboneType:this.hasRnaBackbone(a)?NGL.RnaBackboneType:this.hasDnaBackbone(a)?NGL.DnaBackboneType:this.isCg()?NGL.CgType:NGL.UnknownType},
nextAtomIndex:function(){this.atomCount+=1;return this.chain.nextAtomIndex()},addAtom:function(a){a?a.residue=this:a=new NGL.Atom(this);a.index=this.nextAtomIndex();this.atoms.push(a);return a},addProxyAtom:function(a){a=new NGL.ProxyAtom(a,this.nextAtomIndex());a.residue=this;this.atoms.push(a);return a},eachAtom:function(a,b){var c,d,e=this.atomCount;if(b&&(b.atomOnlyTest||""===this.chain.chainname&&b.test)){var f;f=""===this.chain.chainname?b.test:b.atomOnlyTest;for(c=0;c<e;++c)d=this.atoms[c],
f(d)&&a(d)}else for(c=0;c<e;++c)a(this.atoms[c])},getAtomByName:function(a){var b,c,d=void 0,e=this.atomCount;if(Array.isArray(a))for(b=0;b<e;++b){if(c=this.atoms[b],-1!==a.indexOf(c.atomname)){d=c;break}}else for(b=0;b<e;++b)if(c=this.atoms[b],a===c.atomname){d=c;break}return d},hasAtomWithName:function(a){for(var b=arguments.length,c=0;c<b;++c)if(void 0===this.getAtomByName(arguments[c]))return!1;return!0},getAtomnameList:function(){for(var a=this.atoms.length,b=[],c=0;c<a;++c)b.push(this.atoms[c].atomname);
return b},getTraceAtom:function(){return this.getAtomByName(NGL.Residue.atomnames[this.getBackboneType(0)].trace)},getDirectionAtom1:function(){return this.getAtomByName(NGL.Residue.atomnames[this.getBackboneType(0)].direction1)},getDirectionAtom2:function(){return this.getAtomByName(NGL.Residue.atomnames[this.getBackboneType(0)].direction2)},getBackboneAtomStart:function(){return this.getAtomByName(NGL.Residue.atomnames[this.getBackboneType(-1)].backboneStart)},getBackboneAtomEnd:function(){return this.getAtomByName(NGL.Residue.atomnames[this.getBackboneType(1)].backboneEnd)},
connectedTo:function(a){return this.getBackboneAtomStart().connectedTo(a.getBackboneAtomEnd())},getNextConnectedResidue:function(){var a=this.chain.residues,b=a.indexOf(this);if(-1!==b&&b<a.length&&(a=a[b+1],this.connectedTo(a)))return a},getPreviousConnectedResidue:function(){var a=this.chain.residues,b=a.indexOf(this);if(-1!==b&&0<b&&(a=a[b-1],a.connectedTo(this)))return a},qualifiedName:function(a){var b="";this.resname&&!a&&(b+="["+this.resname+"]");this.resno&&(b+=this.resno);this.chain&&(b+=
":"+this.chain.chainname);this.chain&&this.chain.model&&(b+="/"+this.chain.model.index);return b},clone:function(a){var b=new NGL.Residue(a);b.resno=this.resno;b.resname=this.resname;this.eachAtom(function(a){b.addAtom(a.clone(b))});return b},toJSON:function(){var a={resno:this.resno,resname:this.resname,_ss:this._ss,atoms:[]};this.chain.model.structure.atomArray?this.eachAtom(function(b){a.atoms.push(b.index)}):this.eachAtom(function(b){a.atoms.push(b.toJSON())});return a},fromJSON:function(a){this.resno=
a.resno;this.resname=a.resname;this._ss=a._ss;if(this.chain.model.structure.atomArray){var b=this.chain.model.structure.atomArray;a.atoms.forEach(function(a){this.addAtom(new NGL.ProxyAtom(b,a))}.bind(this))}else a.atoms.forEach(function(a){this.addAtom((new NGL.Atom(this)).fromJSON(a))}.bind(this));return this}};NGL.AtomSet.prototype.apply(NGL.Residue.prototype);NGL.Atom=function(a){this.residue=a;this.bonds=[]};
NGL.Atom.prototype={constructor:NGL.Atom,index:void 0,atomno:void 0,resname:void 0,x:void 0,y:void 0,z:void 0,element:void 0,chainname:void 0,resno:void 0,serial:void 0,ss:void 0,vdw:void 0,covalent:void 0,hetero:void 0,bfactor:void 0,altloc:void 0,atomname:void 0,modelindex:void 0,residue:void 0,bonds:void 0,distanceTo:function(a){var b=this.x-a.x,c=this.y-a.y;a=this.z-a.z;return Math.sqrt(b*b+c*c+a*a)},connectedTo:function(a){if(""!==this.altloc&&""!==a.altloc&&this.altloc!==a.altloc)return!1;var b=
this.x-a.x,c=this.y-a.y,d=this.z-a.z,b=b*b+c*c+d*d;if(28>b&&this.residue.isCg())return!0;if(isNaN(b))return!1;c=this.covalent+a.covalent;a=c+.3;c-=.5;return b<a*a&&b>c*c},qualifiedName:function(a){var b="";this.resname&&!a&&(b+="["+this.resname+"]");this.resno&&(b+=this.resno);this.chainname&&(b+=":"+this.chainname);this.atomname&&(b+="."+this.atomname);this.residue&&this.residue.chain&&this.residue.chain.model&&(b+="/"+this.residue.chain.model.index);return b},positionFromArray:function(a,b){void 0===
b&&(b=0);this.x=a[b+0];this.y=a[b+1];this.z=a[b+2];return this},positionToArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b+0]=this.x;a[b+1]=this.y;a[b+2]=this.z;return a},positionToVector3:function(a){void 0===a&&(a=new THREE.Vector3);a.x=this.x;a.y=this.y;a.z=this.z;return a},positionFromVector3:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},copy:function(a){this.index=a.index;this.atomno=a.atomno;this.resname=a.resname;this.x=a.x;this.y=a.y;this.z=a.z;this.element=a.element;
this.chainname=a.chainname;this.resno=a.resno;this.serial=a.serial;this.ss=a.ss;this.vdw=a.vdw;this.covalent=a.covalent;this.hetero=a.hetero;this.bfactor=a.bfactor;this.bonds=a.bonds;this.altloc=a.altloc;this.atomname=a.atomname;this.modelindex=a.modelindex;this.residue=a.residue;return this},clone:function(a){a=new NGL.Atom(a);a.atomno=this.atomno;a.resname=this.resname;a.x=this.x;a.y=this.y;a.z=this.z;a.element=this.element;a.chainname=this.chainname;a.resno=this.resno;a.serial=this.serial;a.ss=
this.ss;a.vdw=this.vdw;a.covalent=this.covalent;a.hetero=this.hetero;a.bfactor=this.bfactor;a.altloc=this.altloc;a.atomname=this.atomname;a.modelindex=this.modelindex;return a},toJSON:function(){return{atomno:this.atomno,resname:this.resname,x:this.x,y:this.y,z:this.z,element:this.element,chainname:this.chainname,resno:this.resno,serial:this.serial,ss:this.ss,vdw:this.vdw,covalent:this.covalent,hetero:this.hetero,bfactor:this.bfactor,altloc:this.altloc,atomname:this.atomname,modelindex:this.modelindex}},
fromJSON:function(a){this.atomno=a.atomno;this.resname=a.resname;this.x=a.x;this.y=a.y;this.z=a.z;this.element=a.element;this.chainname=a.chainname;this.resno=a.resno;this.serial=a.serial;this.ss=a.ss;this.vdw=a.vdw;this.covalent=a.covalent;this.hetero=a.hetero;this.bfactor=a.bfactor;this.altloc=a.altloc;this.atomname=a.atomname;this.modelindex=a.modelindex;return this}};NGL.AtomArray=function(a){this.useBuffer=!1;Number.isInteger(a)?this.init(a):this.fromJSON(a)};
NGL.AtomArray.prototype={constructor:NGL.AtomArray,init:function(a){this.length=a;this.usedLength=0;this.useBuffer?(this.makeOffsetAndSize(),this.buffer=new ArrayBuffer(this.byteLength),this.makeTypedArrays()):(this.atomno=new Int32Array(a),this.resname=new Uint8Array(5*a),this.x=new Float32Array(a),this.y=new Float32Array(a),this.z=new Float32Array(a),this.element=new Uint8Array(3*a),this.chainname=new Uint8Array(4*a),this.resno=new Int32Array(a),this.serial=new Int32Array(a),this.ss=new Uint8Array(a),
this.vdw=new Float32Array(a),this.covalent=new Float32Array(a),this.hetero=new Uint8Array(a),this.bfactor=new Float32Array(a),this.altloc=new Uint8Array(a),this.atomname=new Uint8Array(4*a),this.modelindex=new Int32Array(a));this.makeBonds();this.makeResidue()},getTransferable:function(){return this.useBuffer?[this.buffer]:[this.atomno.buffer,this.resname.buffer,this.x.buffer,this.y.buffer,this.z.buffer,this.element.buffer,this.chainname.buffer,this.resno.buffer,this.serial.buffer,this.ss.buffer,
this.vdw.buffer,this.covalent.buffer,this.hetero.buffer,this.bfactor.buffer,this.altloc.buffer,this.atomname.buffer,this.modelindex.buffer]},makeOffsetAndSize:function(){var a=this.length;this.atomnoOffset=0;this.atomnoSize=4*a;this.resnoOffset=this.atomnoOffset+this.atomnoSize;this.resnoSize=4*a;this.serialOffset=this.resnoOffset+this.resnoSize;this.serialSize=4*a;this.modelindexOffset=this.serialOffset+this.serialSize;this.modelindexSize=4*a;this.xOffset=this.modelindexOffset+this.modelindexSize;
this.xSize=4*a;this.yOffset=this.xOffset+this.xSize;this.ySize=4*a;this.zOffset=this.yOffset+this.ySize;this.zSize=4*a;this.vdwOffset=this.zOffset+this.zSize;this.vdwSize=4*a;this.covalentOffset=this.vdwOffset+this.vdwSize;this.covalentSize=4*a;this.bfactorOffset=this.covalentOffset+this.covalentSize;this.bfactorSize=4*a;this.atomnameOffset=this.bfactorOffset+this.bfactorSize;this.atomnameSize=4*a;this.chainnameOffset=this.atomnameOffset+this.atomnameSize;this.chainnameSize=4*a;this.elementOffset=
this.chainnameOffset+this.chainnameSize;this.elementSize=3*a;this.resnameOffset=this.elementOffset+this.elementSize;this.resnameSize=5*a;this.ssOffset=this.resnameOffset+this.resnameSize;this.ssSize=a;this.heteroOffset=this.ssOffset+this.ssSize;this.heteroSize=a;this.altlocOffset=this.heteroOffset+this.heteroSize;this.altlocSize=a;this.byteLength=this.altlocOffset+this.altlocSize},makeTypedArrays:function(){this.atomno=new Int32Array(this.buffer,this.atomnoOffset,this.atomnoSize/4);this.resname=new Uint8Array(this.buffer,
this.resnameOffset,this.resnameSize);this.x=new Float32Array(this.buffer,this.xOffset,this.xSize/4);this.y=new Float32Array(this.buffer,this.yOffset,this.ySize/4);this.z=new Float32Array(this.buffer,this.zOffset,this.zSize/4);this.element=new Uint8Array(this.buffer,this.elementOffset,this.elementSize);this.chainname=new Uint8Array(this.buffer,this.chainnameOffset,this.chainnameSize);this.resno=new Int32Array(this.buffer,this.resnoOffset,this.resnoSize/4);this.serial=new Int32Array(this.buffer,this.serialOffset,
this.serialSize/4);this.ss=new Uint8Array(this.buffer,this.ssOffset,this.ssSize);this.vdw=new Float32Array(this.buffer,this.vdwOffset,this.vdwSize/4);this.covalent=new Float32Array(this.buffer,this.covalentOffset,this.covalentSize/4);this.hetero=new Uint8Array(this.buffer,this.heteroOffset,this.heteroSize);this.bfactor=new Float32Array(this.buffer,this.bfactorOffset,this.bfactorSize/4);this.altloc=new Uint8Array(this.buffer,this.altlocOffset,this.altlocSize);this.atomname=new Uint8Array(this.buffer,
this.atomnameOffset,this.atomnameSize);this.modelindex=new Int32Array(this.buffer,this.modelindexOffset,this.modelindexSize/4)},makeResidue:function(){this.residue=Array(this.length)},makeBonds:function(){var a=this.length;this.bonds=Array(a);for(var b=0;b<a;++b)this.bonds[b]=[]},setResname:function(a,b){var c=5*a;this.resname[c]=b.charCodeAt(0);this.resname[c+1]=b.charCodeAt(1);this.resname[c+2]=b.charCodeAt(2);this.resname[c+3]=b.charCodeAt(3);this.resname[c+4]=b.charCodeAt(4)},getResname:function(a){for(var b=
"",c=5*a,d=0;5>d;++d)if(a=this.resname[c+d])b+=String.fromCharCode(a);else break;return b},setElement:function(a,b){var c=3*a;this.element[c]=b.charCodeAt(0);this.element[c+1]=b.charCodeAt(1);this.element[c+2]=b.charCodeAt(2)},getElement:function(a){for(var b="",c=3*a,d=0;3>d;++d)if(a=this.element[c+d])b+=String.fromCharCode(a);else break;return b},setChainname:function(a,b){var c=4*a;this.chainname[c]=b.charCodeAt(0);this.chainname[c+1]=b.charCodeAt(1);this.chainname[c+2]=b.charCodeAt(2);this.chainname[c+
3]=b.charCodeAt(3)},getChainname:function(a){for(var b="",c=4*a,d=0;4>d;++d)if(a=this.chainname[c+d])b+=String.fromCharCode(a);else break;return b},setSS:function(a,b){this.ss[a]=b.charCodeAt(0)},getSS:function(a){return(a=this.ss[a])?String.fromCharCode(a):""},setAltloc:function(a,b){this.altloc[a]=b.charCodeAt(0)},getAltloc:function(a){return(a=this.altloc[a])?String.fromCharCode(a):""},setAtomname:function(a,b){var c=4*a;this.atomname[c]=b.charCodeAt(0);this.atomname[c+1]=b.charCodeAt(1);this.atomname[c+
2]=b.charCodeAt(2);this.atomname[c+3]=b.charCodeAt(3)},getAtomname:function(a){for(var b="",c=4*a,d=0;4>d;++d)if(a=this.atomname[c+d])b+=String.fromCharCode(a);else break;return b},clone:function(){var a=new NGL.AtomArray(this.length);a.atomno.set(this.atomno);a.resname.set(this.resname);a.x.set(this.x);a.y.set(this.y);a.z.set(this.z);a.element.set(this.element);a.chainname.set(this.chainname);a.resno.set(this.resno);a.serial.set(this.serial);a.ss.set(this.ss);a.vdw.set(this.vdw);a.covalent.set(this.covalent);
a.hetero.set(this.hetero);a.bfactor.set(this.bfactor);a.altloc.set(this.altloc);a.atomname.set(this.atomname);a.modelindex.set(this.modelindex);a.usedLength=this.usedLength;return a},toJSON:function(){return this.useBuffer?{length:this.length,usedLength:this.usedLength,buffer:this.buffer}:{length:this.length,usedLength:this.usedLength,atomno:this.atomno,resname:this.resname,x:this.x,y:this.y,z:this.z,element:this.element,chainname:this.chainname,resno:this.resno,serial:this.serial,ss:this.ss,vdw:this.vdw,
covalent:this.covalent,hetero:this.hetero,bfactor:this.bfactor,altloc:this.altloc,atomname:this.atomname,modelindex:this.modelindex}},fromJSON:function(a){this.length=a.length;this.usedLength=a.usedLength;this.useBuffer?(this.makeOffsetAndSize(),this.buffer=a.buffer,this.makeTypedArrays()):(this.atomno=a.atomno,this.resname=a.resname,this.x=a.x,this.y=a.y,this.z=a.z,this.element=a.element,this.chainname=a.chainname,this.resno=a.resno,this.serial=a.serial,this.ss=a.ss,this.vdw=a.vdw,this.covalent=
a.covalent,this.hetero=a.hetero,this.bfactor=a.bfactor,this.altloc=a.altloc,this.atomname=a.atomname,this.modelindex=a.modelindex);a.bonds?this.bonds=a.bonds:this.makeBonds();a.residue?this.residue=a.residue:this.makeResidue()},dispose:function(){this.useBuffer&&delete this.buffer;delete this.atomno;delete this.resname;delete this.x;delete this.y;delete this.z;delete this.element;delete this.chainname;delete this.resno;delete this.serial;delete this.ss;delete this.vdw;delete this.covalent;delete this.hetero;
delete this.bfactor;delete this.altloc;delete this.atomname;delete this.modelindex;delete this.bonds;delete this.residue;this.usedLength=this.length=0}};NGL.ProxyAtom=function(a,b){this.atomArray=a;this.index=b};
NGL.ProxyAtom.prototype={constructor:NGL.ProxyAtom,atomArray:void 0,index:void 0,get atomno(){return this.atomArray.atomno[this.index]},set atomno(a){this.atomArray.atomno[this.index]=a},get resname(){return this.atomArray.getResname(this.index)},set resname(a){this.atomArray.setResname(this.index,a)},get x(){return this.atomArray.x[this.index]},set x(a){this.atomArray.x[this.index]=a},get y(){return this.atomArray.y[this.index]},set y(a){this.atomArray.y[this.index]=a},get z(){return this.atomArray.z[this.index]},
set z(a){this.atomArray.z[this.index]=a},get element(){return this.atomArray.getElement(this.index)},set element(a){this.atomArray.setElement(this.index,a)},get chainname(){return this.atomArray.getChainname(this.index)},set chainname(a){this.atomArray.setChainname(this.index,a)},get resno(){return this.atomArray.resno[this.index]},set resno(a){this.atomArray.resno[this.index]=a},get serial(){return this.atomArray.serial[this.index]},set serial(a){this.atomArray.serial[this.index]=a},get ss(){return this.atomArray.getSS(this.index)},
set ss(a){this.atomArray.setSS(this.index,a)},get vdw(){return this.atomArray.vdw[this.index]},set vdw(a){this.atomArray.vdw[this.index]=a},get covalent(){return this.atomArray.covalent[this.index]},set covalent(a){this.atomArray.covalent[this.index]=a},get hetero(){return this.atomArray.hetero[this.index]},set hetero(a){this.atomArray.hetero[this.index]=a},get bfactor(){return this.atomArray.bfactor[this.index]},set bfactor(a){this.atomArray.bfactor[this.index]=a},get bonds(){return this.atomArray.bonds[this.index]},
set bonds(a){this.atomArray.bonds[this.index]=a},get altloc(){return this.atomArray.getAltloc(this.index)},set altloc(a){this.atomArray.setAltloc(this.index,a)},get atomname(){return this.atomArray.getAtomname(this.index)},set atomname(a){this.atomArray.setAtomname(this.index,a)},get residue(){return this.atomArray.residue[this.index]},set residue(a){this.atomArray.residue[this.index]=a},get modelindex(){return this.atomArray.modelindex[this.index]},set modelindex(a){this.atomArray.modelindex[this.index]=
a},distanceTo:function(a){var b=this.atomArray,c=a.atomArray,d=this.index,e=a.index;a=b.x[d]-c.x[e];var f=b.y[d]-c.y[e],b=b.z[d]-c.z[e];return Math.sqrt(a*a+f*f+b*b)},connectedTo:function(a){var b=this.atomArray,c=a.atomArray,d=this.index;a=a.index;var e=b.altloc[d],f=c.altloc[a];if(0!==e&&0!==f&&e!==f)return!1;var e=b.x[d]-c.x[a],f=b.y[d]-c.y[a],g=b.z[d]-c.z[a],e=e*e+f*f+g*g;if(28>e&&b.residue[d].isCg())return!0;if(isNaN(e))return!1;c=b.covalent[d]+c.covalent[a];b=c+.3;c-=.5;return e<b*b&&e>c*c},
qualifiedName:NGL.Atom.prototype.qualifiedName,positionFromArray:NGL.Atom.prototype.positionFromArray,positionToArray:NGL.Atom.prototype.positionToArray,positionFromVector3:NGL.Atom.prototype.positionFromVector3,positionToVector3:NGL.Atom.prototype.positionToVector3,copy:function(a,b){this.index=b;this.atomno=a.atomno;this.resname=a.resname;this.x=a.x;this.y=a.y;this.z=a.z;this.element=a.element;this.chainname=a.chainname;this.resno=a.resno;this.serial=a.serial;this.ss=a.ss;this.vdw=a.vdw;this.covalent=
a.covalent;this.hetero=a.hetero;this.bfactor=a.bfactor;this.bonds=a.bonds;this.altloc=a.altloc;this.atomname=a.atomname;this.modelindex=a.modelindex;this.residue=a.residue;return this},clone:function(a){return new NGL.ProxyAtom(a.chain.model.structure.atomArray,this.index)},toJSON:function(){return{}},fromJSON:function(a){return this}};NGL.StructureSubset=function(a,b){NGL.Structure.call(this,a.name,a.path);this.structure=a;this.selection=b;this._build()};NGL.StructureSubset.prototype=Object.create(NGL.Structure.prototype);
NGL.StructureSubset.prototype.constructor=NGL.StructureSubset;NGL.StructureSubset.prototype.setDefaultAssembly=function(a){this.defaultAssembly=a;this.structure.setDefaultAssembly(a)};
NGL.StructureSubset.prototype._build=function(){NGL.time("NGL.StructureSubset._build");var a=this.structure,b=this.selection,c=this.atoms,d=this,e,f,g,h,k={};a.eachModel(function(a){e=d.addModel();a.eachChain(function(a){f=e.addChain();f.chainname=a.chainname;a.eachResidue(function(a){g=f.addResidue();g.resno=a.resno;g.resname=a.resname;g.ss=a.ss;a.eachAtom(function(a){h=g.addAtom();h.atomno=a.atomno;h.resname=a.resname;h.x=a.x;h.y=a.y;h.z=a.z;h.element=a.element;h.chainname=a.chainname;h.resno=a.resno;
h.serial=a.serial;h.ss=a.ss;h.vdw=a.vdw;h.covalent=a.covalent;h.hetero=a.hetero;h.bfactor=a.bfactor;h.bonds=[];h.altloc=a.altloc;h.atomname=a.atomname;h.modelindex=a.modelindex;k[a.index]=h;c.push(h)},b);0===g.atoms.length&&(f.residues.pop(),--f.residueCount,--e.residueCount,--d.residueCount)},b);0===f.residues.length&&(e.chains.pop(),--e.chainCount,--d.chainCount)},b);0===e.chains.length&&(d.models.pop(),--d.modelCount)},b);a.bondSet.eachBond(function(a){d.bondSet.addBond(k[a.atom1.index],k[a.atom2.index])},
b);d.title=a.title;d.id=a.id;d.center=d.atomCenter();d.boundingBox=d.getBoundingBox();d.frames=a.frames;d.boxes=a.boxes;d.helices=a.helices;d.sheets=a.sheets;d.biomolDict=a.biomolDict;d.defaultAssembly=a.defaultAssembly;NGL.GidPool.updateObject(this);NGL.timeEnd("NGL.StructureSubset._build")};NGL.Selection=function(a,b){this.signals={stringChanged:new signals.Signal};this.setString(a,b)};
NGL.Selection.prototype={constructor:NGL.Selection,setString:function(a,b,c){void 0===a&&(a=this.string||"");void 0===b&&(b=this.extraString||"");if(a!==this.string||b!==this.extraString){var d;d=a||b?a?b?"( "+a+" ) and ( "+b+" )":a:b:"";if(d!==this.combinedString){try{this.parse(d)}catch(e){this.selection={error:e.message}}this.string=a;this.extraString=b;this.combinedString=d;this.test=this.makeAtomTest();this.residueTest=this.makeResidueTest();this.chainTest=this.makeChainTest();this.modelTest=
this.makeModelTest();this.atomOnlyTest=this.makeAtomTest(!0);this.residueOnlyTest=this.makeResidueTest(!0);this.chainOnlyTest=this.makeChainTest(!0);this.modelOnlyTest=this.makeModelTest(!0);c||this.signals.stringChanged.dispatch(this.string)}}},parse:function(a){this.selection={operator:void 0,rules:[]};if(a){var b=this,c=this.selection,d=[],e,f;a=a.replace(/\(/g," ( ").replace(/\)/g," ) ").trim();"("===a.charAt(0)&&")"===a.substr(-1)&&(a=a.slice(1,-1).trim());a=a.split(/\s+/);var g=["*","","ALL"],
h,k,l,m,n=function(a){e={operator:a,rules:[]};void 0===c?(c=e,b.selection=e):(c.rules.push(e),d.push(c),c=e)},q=function(a){f=c;c=d.pop();void 0===c&&(n(a),p(f))},p=function(a){c.rules.push(a)};for(l=0;l<a.length;++l)if(h=a[l],"("===h)m=!1,n();else if(")"===h)q(),c.negate&&q();else{if(0<m)if("NOT"===h.toUpperCase())m=1;else if(1===m)m=2;else if(2===m)m=!1,q();else throw Error("something went wrong with 'not'");if("AND"===h.toUpperCase())"OR"===c.operator?(k=c.rules.pop(),n("AND"),p(k)):c.operator=
"AND";else if("OR"===h.toUpperCase())"AND"===c.operator?q("OR"):c.operator="OR";else if("NOT"===h.toUpperCase())m=1,n(),c.negate=!0;else if(k={},"HETERO"===h.toUpperCase())k.keyword="HETERO",p(k);else if("WATER"===h.toUpperCase())k.keyword="WATER",p(k);else if("PROTEIN"===h.toUpperCase())k.keyword="PROTEIN",p(k);else if("NUCLEIC"===h.toUpperCase())k.keyword="NUCLEIC",p(k);else if("RNA"===h.toUpperCase())k.keyword="RNA",p(k);else if("DNA"===h.toUpperCase())k.keyword="DNA",p(k);else if("POLYMER"===
h.toUpperCase())k.keyword="POLYMER",p(k);else if("HYDROGEN"===h.toUpperCase())k.element="H",p(k);else if("SMALL"===h.toUpperCase())k={operator:"OR",rules:[{resname:"GLY"},{resname:"ALA"}]},p(k);else if("NUCLEOPHILIC"===h.toUpperCase())k={operator:"OR",rules:[{resname:"SER"},{resname:"THR"},{resname:"CYS"}]},p(k);else if("HYDROPHOBIC"===h.toUpperCase())k={operator:"OR",rules:[{resname:"VAL"},{resname:"LEU"},{resname:"ILE"},{resname:"MET"},{resname:"PRO"}]},p(k);else if("AROMATIC"===h.toUpperCase())k=
{operator:"OR",rules:[{resname:"PHE"},{resname:"TYR"},{resname:"TRP"}]},p(k);else if("AMIDE"===h.toUpperCase())k={operator:"OR",rules:[{resname:"ASN"},{resname:"GLN"}]},p(k);else if("ACIDIC"===h.toUpperCase())k={operator:"OR",rules:[{resname:"ASP"},{resname:"GLU"}]},p(k);else if("BASIC"===h.toUpperCase())k={operator:"OR",rules:[{resname:"HIS"},{resname:"LYS"},{resname:"ARG"}]},p(k);else if("CHARGED"===h.toUpperCase())k={operator:"OR",rules:[{resname:"ASP"},{resname:"GLU"},{resname:"HIS"},{resname:"LYS"},
{resname:"ARG"}]},p(k);else if("POLAR"===h.toUpperCase())k={operator:"OR",rules:[{resname:"ASP"},{resname:"GLU"},{resname:"HIS"},{resname:"LYS"},{resname:"ARG"},{resname:"ASN"},{resname:"GLN"},{resname:"SER"},{resname:"THR"},{resname:"TYR"}]},p(k);else if("NONPOLAR"===h.toUpperCase())k={operator:"OR",rules:[{resname:"ALA"},{resname:"CYS"},{resname:"GLY"},{resname:"ILE"},{resname:"LEU"},{resname:"MET"},{resname:"PHE"},{resname:"PRO"},{resname:"VAL"},{resname:"TRP"}]},p(k);else if("HELIX"===h.toUpperCase())k.keyword=
"HELIX",p(k);else if("SHEET"===h.toUpperCase())k.keyword="SHEET",p(k);else if("TURN"===h.toUpperCase())k={operator:"OR",negate:!0,rules:[{keyword:"HELIX"},{keyword:"SHEET"}]},p(k);else if("BACKBONE"===h.toUpperCase())k.keyword="BACKBONE",p(k);else if("SIDECHAIN"===h.toUpperCase())k.keyword="SIDECHAIN",p(k);else if("SIDECHAINATTACHED"===h.toUpperCase())k={operator:"OR",rules:[{operator:"AND",negate:!1,rules:[{resname:"PRO"},{atomname:"N"}]},{keyword:"SIDECHAIN"},{atomname:"CA"},{atomname:"BB"}]},p(k);
else if(-1!==g.indexOf(h.toUpperCase()))k.keyword="ALL",p(k);else if("#"===h.charAt(0))k.element=h.substr(1).toUpperCase(),p(k);else if("~"===h.charAt(0))k.altloc=h.substr(1),p(k);else if(1<=h.length&&4>=h.length&&":"!==h[0]&&"."!==h[0]&&"/"!==h[0]&&isNaN(parseInt(h)))k.resname=h.toUpperCase(),p(k);else{k={operator:"AND",rules:[]};h=h.split("/");if(1<h.length&&h[1]){if(isNaN(parseInt(h[1])))throw Error("model must be an integer");k.rules.push({model:parseInt(h[1])})}h=h[0].split(".");if(1<h.length&&
h[1]){if(4<h[1].length)throw Error("atomname must be one to four characters");k.rules.push({atomname:h[1].substring(0,4).toUpperCase()})}h=h[0].split(":");1<h.length&&h[1]&&k.rules.push({chainname:h[1]});if(h[0])if(h=h[0].split("-"),1===h.length){h=parseInt(h[0]);if(isNaN(h))throw Error("resi must be an integer");k.rules.push({resno:h})}else if(2===h.length)k.rules.push({resno:[parseInt(h[0]),parseInt(h[1])]});else throw Error("resi range must contain one '-'");if(1===k.rules.length)p(k.rules[0]);
else if(1<k.rules.length)p(k);else throw Error("empty selection chunk");}}void 0===this.selection.operator&&1===this.selection.rules.length&&this.selection.rules[0].hasOwnProperty("operator")&&(this.selection=this.selection.rules[0])}},_makeTest:function(a,b){void 0===b&&(b=this.selection);if(null===b||b.error)return!1;var c=b.rules.length;if(0===c)return!1;for(var d=b.negate?!1:!0,e=b.negate?!0:!1,f,g,h,k,l=[],m=0;m<c;++m)f=b.rules[m],f.hasOwnProperty("operator")&&(l[m]=this._makeTest(a,f));return function(m){g=
"AND"===b.operator;k=!1;for(var q=0;q<c;++q){f=b.rules[q];if(f.hasOwnProperty("operator"))h=l[q]?l[q](m):-1;else{if(void 0!==f.keyword&&"ALL"===f.keyword)if(g)continue;else return d;h=a(m,f)}if(-1===h)k=!0;else if(!0===h){if(!g)return d}else if(g)return e}return k?-1:g?d:e}},_filter:function(a,b){void 0===b&&(b=this.selection);if(b.error)return b;var c=b.rules.length;if(0===c)return b;var d=[];b.hasOwnProperty("negate");for(var e=0;e<c;++e){var f=b.rules[e];f.hasOwnProperty("operator")?(f=this._filter(a,
f),null!==f&&d.push(f)):a(f)||d.push(f)}return 0<d.length?b:null},makeAtomTest:function(a){var b="CA C N O O1 O2 OC1 OC2 H H1 H2 H3 HA".split(" "),c="P O3' O5' C5' C4' C3' OP1 OP2 O3* O5* C5* C4* C3*".split(" "),d=["CA","BB"],e=["h","g","i"];a=a?this._filter(function(a){return void 0!==a.model||void 0!==a.chainname||void 0!==a.resname||void 0!==a.resno?!0:!1}):this.selection;return this._makeTest(function(a,g){if(void 0!==g.keyword)return"HETERO"===g.keyword&&1===a.hetero||"PROTEIN"===g.keyword&&
(a.residue.isProtein()||a.residue.isCg())||"NUCLEIC"===g.keyword&&a.residue.isNucleic()||"RNA"===g.keyword&&a.residue.isRna()||"DNA"===g.keyword&&a.residue.isDna()||"POLYMER"===g.keyword&&(a.residue.isProtein()||a.residue.isNucleic()||a.residue.isCg())||"WATER"===g.keyword&&a.residue.isWater()||"HELIX"===g.keyword&&-1!==e.indexOf(a.ss)||"SHEET"===g.keyword&&"s"===a.ss||"BACKBONE"===g.keyword&&(a.residue.isProtein()&&-1!==b.indexOf(a.atomname)||a.residue.isNucleic()&&-1!==c.indexOf(a.atomname)||a.residue.isCg()&&
-1!==d.indexOf(a.atomname))||"SIDECHAIN"===g.keyword&&(a.residue.isProtein()&&-1===b.indexOf(a.atomname)||a.residue.isNucleic()&&-1===c.indexOf(a.atomname)||a.residue.isCg()&&-1===d.indexOf(a.atomname))?!0:!1;if(void 0!==g.resname&&g.resname!==a.resname||void 0!==g.chainname&&g.chainname!==a.chainname||void 0!==g.atomname&&g.atomname!==a.atomname||void 0!==g.model&&g.model!==a.residue.chain.model.index)return!1;if(void 0!==g.resno)if(Array.isArray(g.resno)&&2===g.resno.length){if(g.resno[0]>a.resno||
g.resno[1]<a.resno)return!1}else if(g.resno!==a.resno)return!1;return void 0!==g.element&&g.element!==a.element||void 0!==g.altloc&&g.altloc!==a.altloc?!1:!0},a)},makeResidueTest:function(a){a=a?this._filter(function(a){return void 0!==a.model||void 0!==a.chainname||void 0!==a.atomname||void 0!==a.element||void 0!==a.altloc?!0:!1}):this.selection;return this._makeTest(function(a,c){if(void 0!==c.keyword&&("HETERO"===c.keyword&&a.isHetero()||"PROTEIN"===c.keyword&&(a.isProtein()||a.isCg())||"NUCLEIC"===
c.keyword&&a.isNucleic()||"RNA"===c.keyword&&a.isRna()||"DNA"===c.keyword&&a.isDna()||"POLYMER"===c.keyword&&(a.isProtein()||a.isNucleic()||a.isCg())||"WATER"===c.keyword&&a.isWater()))return!0;if(void 0===c.chainname&&void 0===c.model&&void 0===c.resname&&void 0===c.resno||void 0!==c.chainname&&void 0===a.chain.chainname||void 0!==c.chainname&&""===a.chain.chainname)return-1;if(void 0!==c.resname&&c.resname!==a.resname||void 0!==c.chainname&&c.chainname!==a.chain.chainname||void 0!==c.model&&c.model!==
a.chain.model.index)return!1;if(void 0!==c.resno)if(Array.isArray(c.resno)&&2===c.resno.length){if(c.resno[0]>a.resno||c.resno[1]<a.resno)return!1}else if(c.resno!==a.resno)return!1;return!0},a)},makeChainTest:function(a){a=a?this._filter(function(a){return void 0!==a.model||void 0!==a.resname||void 0!==a.resno||void 0!==a.atomname||void 0!==a.element||void 0!==a.altloc?!0:!1}):this.selection;return this._makeTest(function(a,c){return void 0!==c.chainname&&void 0===a.chainname||void 0===c.chainname&&
void 0===c.model||void 0!==c.chainname&&""===a.chainname?-1:void 0!==c.chainname&&c.chainname!==a.chainname||void 0!==c.model&&c.model!==a.model.index?!1:!0},a)},makeModelTest:function(a){a=a?this._filter(function(a){return void 0!==a.chainname||void 0!==a.resname||void 0!==a.resno||void 0!==a.atomname||void 0!==a.element||void 0!==a.altloc?!0:!1}):this.selection;return this._makeTest(function(a,c){return void 0===c.model?-1:c.model!==a.index?!1:!0},a)}};
NGL.SubstitutionMatrices=function(){function a(a,c){var d,e=0,f={};c.forEach(function(c){d=0;var h={};c.forEach(function(c){h[a[d++]]=c});f[a[e++]]=h});return f}return{blosum62:a("ARNDCQEGHILKMFPSTWYVBZ?",[[4,-1,-2,-2,0,-1,-1,0,-2,-1,-1,-1,-1,-2,-1,1,0,-3,-2,0,-2,-1,0],[-1,5,0,-2,-3,1,0,-2,0,-3,-2,2,-1,-3,-2,-1,-1,-3,-2,-3,-1,0,-1],[-2,0,6,1,-3,0,0,0,1,-3,-3,0,-2,-3,-2,1,0,-4,-2,-3,3,0,-1],[-2,-2,1,6,-3,0,2,-1,-1,-3,-4,-1,-3,-3,-1,0,-1,-4,-3,-3,4,1,-1],[0,-3,-3,-3,9,-3,-4,-3,-3,-1,-1,-3,-1,-2,-3,
-1,-1,-2,-2,-1,-3,-3,-2],[-1,1,0,0,-3,5,2,-2,0,-3,-2,1,0,-3,-1,0,-1,-2,-1,-2,0,3,-1],[-1,0,0,2,-4,2,5,-2,0,-3,-3,1,-2,-3,-1,0,-1,-3,-2,-2,1,4,-1],[0,-2,0,-1,-3,-2,-2,6,-2,-4,-4,-2,-3,-3,-2,0,-2,-2,-3,-3,-1,-2,-1],[-2,0,1,-1,-3,0,0,-2,8,-3,-3,-1,-2,-1,-2,-1,-2,-2,2,-3,0,0,-1],[-1,-3,-3,-3,-1,-3,-3,-4,-3,4,2,-3,1,0,-3,-2,-1,-3,-1,3,-3,-3,-1],[-1,-2,-3,-4,-1,-2,-3,-4,-3,2,4,-2,2,0,-3,-2,-1,-2,-1,1,-4,-3,-1],[-1,2,0,-1,-3,1,1,-2,-1,-3,-2,5,-1,-3,-1,0,-1,-3,-2,-2,0,1,-1],[-1,-1,-2,-3,-1,0,-2,-3,-2,1,2,
-1,5,0,-2,-1,-1,-1,-1,1,-3,-1,-1],[-2,-3,-3,-3,-2,-3,-3,-3,-1,0,0,-3,0,6,-4,-2,-2,1,3,-1,-3,-3,-1],[-1,-2,-2,-1,-3,-1,-1,-2,-2,-3,-3,-1,-2,-4,7,-1,-1,-4,-3,-2,-2,-1,-2],[1,-1,1,0,-1,0,0,0,-1,-2,-2,0,-1,-2,-1,4,1,-3,-2,-2,0,0,0],[0,-1,0,-1,-1,-1,-1,-2,-2,-1,-1,-1,-1,-2,-1,1,5,-2,-2,0,-1,-1,0],[-3,-3,-4,-4,-2,-2,-3,-2,-2,-3,-2,-3,-1,1,-4,-3,-2,11,2,-3,-4,-3,-2],[-2,-2,-2,-3,-2,-1,-2,-3,2,-1,-1,-2,-1,3,-3,-2,-2,2,7,-1,-3,-2,-1],[0,-3,-3,-3,-1,-2,-2,-3,-3,3,1,-2,1,-1,-2,-2,0,-3,-1,4,-3,-2,-1],[-2,-1,
3,4,-3,0,1,-1,0,-3,-4,0,-3,-3,-2,0,-1,-4,-3,-3,4,1,-1],[-1,0,0,1,-3,3,4,-2,0,-3,-3,1,-1,-3,-1,0,-1,-3,-2,-2,1,4,-1],[0,-1,-1,-1,-2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-2,0,0,-2,-1,-1,-1,-1,-1]]),blosum62x:a("ACDEFGHIKLMNPQRSTVWY",[[4,0,-2,-1,-2,0,-2,-1,-1,-1,-1,-2,-1,-1,-1,1,0,0,-3,-2],[0,9,-3,-4,-2,-3,-3,-1,-3,-1,-1,-3,-3,-3,-3,-1,-1,-1,-2,-2],[-2,-3,6,2,-3,-1,-1,-3,-1,-4,-3,1,-1,0,-2,0,-1,-3,-4,-3],[-1,-4,2,5,-3,-2,0,-3,1,-3,-2,0,-1,2,0,0,-1,-2,-3,-2],[-2,-2,-3,-3,6,-3,-1,0,-3,0,0,-3,-4,-3,-3,-2,-2,-1,1,
3],[0,-3,-1,-2,-3,6,-2,-4,-2,-4,-3,0,-2,-2,-2,0,-2,-3,-2,-3],[-2,-3,-1,0,-1,-2,8,-3,-1,-3,-2,1,-2,0,0,-1,-2,-3,-2,2],[-1,-1,-3,-3,0,-4,-3,4,-3,2,1,-3,-3,-3,-3,-2,-1,3,-3,-1],[-1,-3,-1,1,-3,-2,-1,-3,5,-2,-1,0,-1,1,2,0,-1,-2,-3,-2],[-1,-1,-4,-3,0,-4,-3,2,-2,4,2,-3,-3,-2,-2,-2,-1,1,-2,-1],[-1,-1,-3,-2,0,-3,-2,1,-1,2,5,-2,-2,0,-1,-1,-1,1,-1,-1],[-2,-3,1,0,-3,0,1,-3,0,-3,-2,6,-2,0,0,1,0,-3,-4,-2],[-1,-3,-1,-1,-4,-2,-2,-3,-1,-3,-2,-2,7,-1,-2,-1,-1,-2,-4,-3],[-1,-3,0,2,-3,-2,0,-3,1,-2,0,0,-1,5,1,0,-1,-2,
-2,-1],[-1,-3,-2,0,-3,-2,0,-3,2,-2,-1,0,-2,1,5,-1,-1,-3,-3,-2],[1,-1,0,0,-2,0,-1,-2,0,-2,-1,1,-1,0,-1,4,1,-2,-3,-2],[0,-1,-1,-1,-2,-2,-2,-1,-1,-1,-1,0,-1,-1,-1,1,5,0,-2,-2],[0,-1,-3,-2,-1,-3,-3,3,-2,1,1,-3,-2,-2,-3,-2,0,4,-3,-1],[-3,-2,-4,-3,1,-2,-2,-3,-3,-2,-1,-4,-4,-2,-3,-3,-2,-3,11,2],[-2,-2,-3,-2,3,-3,2,-1,-2,-1,-1,-2,-3,-1,-2,-2,-2,-1,2,7]])}}();
NGL.Alignment=function(a,b,c,d,e){this.seq1=a;this.seq2=b;this.gapPenalty=c||-10;this.gapExtensionPenalty=d||-1;this.substMatrix=e||"blosum62",this.substMatrix=NGL.SubstitutionMatrices[this.substMatrix]};
NGL.Alignment.prototype={constructor:NGL.Alignment,initMatrices:function(){this.n=this.seq1.length;this.m=this.seq2.length;this.score=void 0;this.ali="";this.S=[];this.V=[];this.H=[];for(var a=0;a<=this.n;++a){this.S[a]=[];this.V[a]=[];this.H[a]=[];for(var b=0;b<=this.m;++b)this.S[a][b]=0,this.V[a][b]=0,this.H[a][b]=0}for(a=0;a<=this.n;++a)this.S[a][0]=this.gap(0),this.H[a][0]=-Infinity;for(b=0;b<=this.m;++b)this.S[0][b]=this.gap(0),this.V[0][b]=-Infinity;this.S[0][0]=0},gap:function(a){return this.gapPenalty+
a*this.gapExtensionPenalty},makeScoreFn:function(){var a=this.seq1,b=this.seq2,c=this.substMatrix,d,e;if(c)return function(f,g){d=a[f];e=b[g];try{return c[d][e]}catch(h){return-4}};NGL.warn("NGL.Alignment: no subst matrix");return function(c,g){d=a[c];e=b[g];return d===e?5:-3}},calc:function(){NGL.time("NGL.Alignment.calc");this.initMatrices();var a=this.gap(0),b=this.makeScoreFn(),c=this.gapExtensionPenalty,d=this.V,e=this.H,f=this.S,g=this.n,h=this.m,k,l,m,n,q,p,t;for(p=1;p<=g;++p)for(l=f[p-1],
k=d[p-1],m=d[p],n=e[p],q=f[p],t=1;t<=h;++t)m[t]=Math.max(l[t]+a,k[t]+c),n[t]=Math.max(q[t-1]+a,n[t-1]+c),q[t]=Math.max(l[t-1]+b(p-1,t-1),m[t],n[t]);NGL.timeEnd("NGL.Alignment.calc")},trace:function(){this.ali2=this.ali1="";var a=this.makeScoreFn(),b=this.n,c=this.m,d="S";this.S[b][c]>=this.V[b][c]&&this.S[b][c]>=this.V[b][c]?(d="S",this.score=this.S[b][c]):this.V[b][c]>=this.H[b][c]?(d="V",this.score=this.V[b][c]):(d="H",this.score=this.H[b][c]);for(;0<b&&0<c;)"S"==d?this.S[b][c]==this.S[b-1][c-1]+
a(b-1,c-1)?(this.ali1=this.seq1[b-1]+this.ali1,this.ali2=this.seq2[c-1]+this.ali2,--b,--c,d="S"):this.S[b][c]==this.V[b][c]?d="V":this.S[b][c]==this.H[b][c]?d="H":(NGL.error("NGL.Alignment: S"),--b,--c):"V"==d?this.V[b][c]==this.V[b-1][c]+this.gapExtensionPenalty?(this.ali1=this.seq1[b-1]+this.ali1,this.ali2="-"+this.ali2,--b,d="V"):this.V[b][c]==this.S[b-1][c]+this.gap(0)?(this.ali1=this.seq1[b-1]+this.ali1,this.ali2="-"+this.ali2,--b,d="S"):(NGL.error("NGL.Alignment: V"),--b):"H"==d?this.H[b][c]==
this.H[b][c-1]+this.gapExtensionPenalty?(this.ali1="-"+this.ali1,this.ali2=this.seq2[c-1]+this.ali2,--c,d="H"):this.H[b][c]==this.S[b][c-1]+this.gap(0)?(this.ali1="-"+this.ali1,this.ali2=this.seq2[c-1]+this.ali2,--c,d="S"):(NGL.error("NGL.Alignment: H"),--c):NGL.error("NGL.Alignment: no matrix");for(;0<b;)this.ali1=this.seq1[b-1]+this.ali1,this.ali2="-"+this.ali2,--b;for(;0<c;)this.ali1="-"+this.ali1,this.ali2=this.seq2[c-1]+this.ali2,--c}};
NGL.superpose=function(a,b,c,d,e,f,g){d=d||"";e=e||"";f=f||"";g=g||"";var h,k;if(c){c=a;var l=b;d&&e&&(c=new NGL.StructureSubset(a,new NGL.Selection(d)),l=new NGL.StructureSubset(b,new NGL.Selection(e)));b=c.getSequence();d=l.getSequence();d=new NGL.Alignment(b.join(""),d.join(""));d.calc();d.trace();var m,n,q,p,t=0,r=0;b=d.ali1.length;var w=[],x=[];for(e=0;e<b;++e)q=d.ali1[e],p=d.ali2[e],n=m=0,"-"===q?x[r]=!1:(x[r]=!0,m=1),"-"===p?w[t]=!1:(w[t]=!0,n=1),t+=m,r+=n;h=new NGL.AtomSet;k=new NGL.AtomSet;
t=0;c.eachResidue(function(a){a.getResname1()&&a.getAtomByName("CA")&&(w[t]&&h.addAtom(a.getAtomByName("CA")),t+=1)});t=0;l.eachResidue(function(a){a.getResname1()&&a.getAtomByName("CA")&&(x[t]&&k.addAtom(a.getAtomByName("CA")),t+=1)})}else h=new NGL.AtomSet(a,new NGL.Selection(d+" and .CA")),k=new NGL.AtomSet(b,new NGL.Selection(e+" and .CA"));if(f&&g){c=new NGL.AtomSet;l=new NGL.AtomSet;f=new NGL.Selection(f);b=new NGL.Selection(g);g=f.test;f=b.test;b=h.atomCount;for(t=0;t<b;++t)d=h.atoms[t],e=
k.atoms[t],g(d)&&f(e)&&(c.addAtom(d),l.addAtom(e));h=c;k=l}g=new NGL.Superposition(h,k);f=new NGL.AtomSet(a,new NGL.Selection("*"));g.transform(f);a.center=a.atomCenter()};NGL.makeTrajectory=function(a,b,c){return!a&&b.frames?new NGL.StructureTrajectory(a,b,c):new NGL.RemoteTrajectory(a,b,c)};
NGL.Trajectory=function(a,b,c){var d=this,e=signals;this.signals={gotNumframes:new e.Signal,frameChanged:new e.Signal,selectionChanged:new e.Signal,playerChanged:new e.Signal};this.params={centerPbc:!0,removePbc:!0,superpose:!0};this.name=a.replace(/^.*[\\\/]/,"");this.selection=new NGL.Selection(c||"backbone and not hydrogen");this.selection.signals.stringChanged.add(function(a){d.makeIndices();d.resetCache()});this.setStructure(b);this.trajPath=a;this.numframes=void 0;this.getNumframes()};
NGL.Trajectory.prototype={constructor:NGL.Trajectory,setStructure:function(a){this.structure=a;this.atomCount=a.atomCount;this.makeAtomIndices();this.saveInitialStructure();this.backboneIndices=this.structure.atomIndex(new NGL.Selection("backbone and not hydrogen"));this.makeIndices();this.frameCache=[];this.boxCache=[];this.pathCache=[];this.frameCacheSize=0;this.currentFrame=-1},saveInitialStructure:function(){var a=0,b=new Float32Array(3*this.atomCount);this.structure.eachAtom(function(c){b[a+
0]=c.x;b[a+1]=c.y;b[a+2]=c.z;a+=3});this.initialStructure=b},setSelection:function(a){this.selection.setString(a);return this},makeIndices:function(){this.indices=this.structure.atomIndex(this.selection);var a,b,c=3*this.indices.length;this.coords1=new Float32Array(c);this.coords2=new Float32Array(c);var d=this.initialStructure,e=this.coords2;for(a=0;a<c;a+=3)b=3*this.indices[a/3],e[a+0]=d[b+0],e[a+1]=d[b+1],e[a+2]=d[b+2]},makeAtomIndices:function(){NGL.error("Trajectory.makeAtomIndices not implemented")},
getNumframes:function(){NGL.error("Trajectory.loadFrame not implemented")},resetCache:function(){this.frameCache=[];this.boxCache=[];this.pathCache=[];this.frameCacheSize=0;this.setFrame(this.currentFrame);return this},setParameters:function(a){var b=this.params,c=!1;void 0!==a.centerPbc&&a.centerPbc!==b.centerPbc&&(b.centerPbc=a.centerPbc,c=!0);void 0!==a.removePbc&&a.removePbc!==b.removePbc&&(b.removePbc=a.removePbc,c=!0);void 0!==a.superpose&&a.superpose!==b.superpose&&(b.superpose=a.superpose,
c=!0);c&&this.resetCache()},setFrame:function(a,b){if(void 0===a)return this;this.inProgress=!0;a=parseInt(a);-1===a||this.frameCache[a]?this.updateStructure(a,b):this.loadFrame(a,function(){this.updateStructure(a,b)}.bind(this));return this},interpolate:function(){var a=function(a,c,d,e,f,g){a=(d-a)*g;e=(e-c)*g;g=f*f;return(2*c-2*d+a+e)*f*g+(-3*c+3*d-2*a-e)*g+a*f+c};return function(b,c,d,e,f,g,h){var k=this.frameCache,l=k[b];c=k[c];d=k[d];var m=k[e];e=l.length;k=new Float32Array(e);if("spline"===
g)for(g=0;g<e;g+=3)k[g+0]=a(m[g+0],d[g+0],c[g+0],l[g+0],f,1),k[g+1]=a(m[g+1],d[g+1],c[g+1],l[g+1],f,1),k[g+2]=a(m[g+2],d[g+2],c[g+2],l[g+2],f,1);else for(g=0;g<e;g+=3)d=c[g+0],k[g+0]=d+(l[g+0]-d)*f,d=c[g+1],k[g+1]=d+(l[g+1]-d)*f,d=c[g+2],k[g+2]=d+(l[g+2]-d)*f;this.structure.updatePosition(k);this.currentFrame=b;this.signals.frameChanged.dispatch(b);"function"===typeof h&&h()}}(),setFrameInterpolated:function(a,b,c,d,e,f,g){if(void 0===a)return this;var h=this.frameCache,k=[];h[d]||k.push(d);h[c]||
k.push(c);h[b]||k.push(b);h[a]||k.push(a);k.length?this.loadFrame(k,function(){this.interpolate(a,b,c,d,e,f,g)}.bind(this)):this.interpolate(a,b,c,d,e,f,g);return this},loadFrame:function(a,b){if(Array.isArray(a)){var c=this;async.eachLimit(a,4,function(a,b){c._loadFrame(a,b)},function(a){"function"===typeof b&&b()})}else this._loadFrame(a,b)},_loadFrame:function(a,b){NGL.error("Trajectory._loadFrame not implemented")},updateStructure:function(a,b){this._disposed||(-1===a?this.structure.updatePosition(this.initialStructure):
this.structure.updatePosition(this.frameCache[a]),this.structure.trajectory={name:this.trajPath,frame:a},"function"===typeof b&&b(),this.currentFrame=a,this.inProgress=!1,this.signals.frameChanged.dispatch(a))},getCircularMean:function(a,b,c){return[NGL.Utils.circularMean(b,c[0],3,0,a),NGL.Utils.circularMean(b,c[1],3,1,a),NGL.Utils.circularMean(b,c[2],3,2,a)]},centerPbc:function(a,b,c){if(0!==c[0]&&0!==c[8]&&0!==c[4]){var d=a.length,e=c[0],f=c[1];c=c[2];var g=-b[0]+e+e/2,h=-b[1]+f+f/2,k=-b[2]+c+c/
2;for(b=0;b<d;b+=3)a[b+0]=(a[b+0]+g)%e,a[b+1]=(a[b+1]+h)%f,a[b+2]=(a[b+2]+k)%c}},removePbc:function(a,b){if(0!==b[0]&&0!==b[8]&&0!==b[4]){var c,d,e,f=a.length;for(c=3;c<f;c+=3)for(d=0;3>d;++d)if(e=a[c+d]-a[c-3+d],Math.abs(e)>.9*b[3*d+d])if(0<e)for(e=0;3>e;++e)a[c+e]-=b[3*d+e];else for(e=0;3>e;++e)a[c+e]+=b[3*d+e];return a}},superpose:function(a){var b,c,d=3*this.indices.length,e=this.coords1,f=this.coords2;for(b=0;b<d;b+=3)c=3*this.indices[b/3],e[b+0]=a[c+0],e[b+1]=a[c+1],e[b+2]=a[c+2];(new NGL.Superposition(e,
f)).transform(a)},process:function(a,b,c,d){this.setNumframes(d);if(b){if(0<this.backboneIndices.length&&this.params.centerPbc){d=[b[0],b[4],b[8]];var e=this.getCircularMean(this.backboneIndices,c,d);this.centerPbc(c,e,d)}this.params.removePbc&&this.removePbc(c,b)}0<this.indices.length&&this.params.superpose&&this.superpose(c);this.frameCache[a]=c;this.boxCache[a]=b;this.frameCacheSize+=1},setNumframes:function(a){a!==this.numframes&&(this.numframes=a,this.signals.gotNumframes.dispatch(a))},dispose:function(){this.frameCache=
[];this._disposed=!0;this.player&&this.player.stop()},setPlayer:function(a){this.player=a;this.signals.playerChanged.dispatch(a)},getPath:function(a,b){NGL.error("Trajectory.getPath not implemented")},download:function(a){for(var b=this,c=this.numframes,d=Math.ceil(c/a),e=0,f=new Float32Array(d*(9+3*this.atomCount)),g=0;g<c;g+=a)this.loadFrame(g,function(){var a=g,c=e,l=c*(9+3*b.atomCount);f.set(b.boxCache[a],l);f.set(b.frameCache[a],l+9);c===d-1&&(a=new Blob([f],{type:"application/octet-binary"}),
NGL.download(a,"traj.bbt"))}),e+=1}};NGL.RemoteTrajectory=function(a,b,c){NGL.Trajectory.call(this,a,b,c)};
NGL.RemoteTrajectory.prototype=NGL.createObject(NGL.Trajectory.prototype,{constructor:NGL.RemoteTrajectory,type:"remote",makeAtomIndices:function(){var a=this.structure,b=[];if(a instanceof NGL.StructureSubset){var a=a.structure.atomIndex(a.selection),c,d,e=a[0],f=a[0],g=a.length;for(c=1;c<g;++c)d=a[c],f+1<d&&(b.push([e,f+1]),e=d),f=d;b.push([e,f+1])}else b.push([0,this.atomCount]);this.atomIndices=b},_loadFrame:function(a,b){var c=this,d=new XMLHttpRequest,e="../traj/frame/"+a+"/"+this.trajPath,
f="atomIndices="+this.atomIndices.join(";");d.open("POST",e,!0);d.responseType="arraybuffer";d.setRequestHeader("Content-type","application/x-www-form-urlencoded");d.addEventListener("load",function(d){var f=this.response;if(f){d=(new Int32Array(f,0,1))[0];new Float32Array(f,4,1);var k=new Float32Array(f,8,9),f=new Float32Array(f,44);c.process(a,k,f,d);"function"===typeof b&&b()}else NGL.error("empty arrayBuffer for '"+e+"'")},!1);d.send(f)},getNumframes:function(){var a=this;(new THREE.XHRLoader).load("../traj/numframes/"+
this.trajPath,function(b){a.setNumframes(parseInt(b))})},getPath:function(a,b){if(this.pathCache[a])b(this.pathCache[a]);else{NGL.time("loadPath");var c=this,d=new XMLHttpRequest,e="../traj/path/"+a+"/"+this.trajPath;d.open("POST",e,!0);d.responseType="arraybuffer";d.setRequestHeader("Content-type","application/x-www-form-urlencoded");d.addEventListener("load",function(d){NGL.timeEnd("loadPath");(d=this.response)?(d=new Float32Array(d),c.pathCache[a]=d,b(d)):NGL.error("empty arrayBuffer for '"+e+
"'")},!1);d.send("")}}});NGL.StructureTrajectory=function(a,b,c){NGL.Trajectory.call(this,"",b,c)};
NGL.StructureTrajectory.prototype=NGL.createObject(NGL.Trajectory.prototype,{constructor:NGL.StructureTrajectory,type:"structure",makeAtomIndices:function(){var a=this.structure;this.atomIndices=a instanceof NGL.StructureSubset?a.structure.atomIndex(a.selection):null},_loadFrame:function(a,b){var c,d=this.structure.frames[a];if(this.atomIndices){var e=this.atomIndices,f=e.length;c=new Float32Array(3*f);for(var g=0;g<f;++g){var h=3*g,k=3*e[g];c[h+0]=d[k+0];c[h+1]=d[k+1];c[h+2]=d[k+2]}}else c=new Float32Array(d);
this.process(a,this.structure.boxes[a],c,this.structure.frames.length);"function"===typeof b&&b()},getNumframes:function(){this.numframes=this.structure.frames.length;this.signals.gotNumframes.dispatch(this.numframes)},getPath:function(a,b){var c,d,e,f=this.numframes,g=3*a,h=new Float32Array(3*f);for(c=0;c<f;++c)d=3*c,e=this.structure.frames[c],h[d+0]=e[g+0],h[d+1]=e[g+1],h[d+2]=e[g+2];b(h)}});
NGL.TrajectoryPlayer=function(a,b,c,d,e){var f=signals;this.signals={startedRunning:new f.Signal,haltedRunning:new f.Signal};var g=this;a.signals.playerChanged.add(function(a){a!==g&&g.pause()});this.traj=a;this.step=b||Math.ceil((a.numframes+1)/100);this.timeout=c||50;this.start=d||0;this.end=e||a.numframes-1;this.end=Math.min(this.end,a.numframes-1);this.interpolateType="";this.interpolateStep=5;this.mode="loop";this.direction="forward";this._running=this._stopFlag=!1};
NGL.TrajectoryPlayer.prototype={constructor:NGL.TrajectoryPlayer,_animate:function(){var a;this._running=!0;if(!this.traj.inProgress&&!this._stopFlag){a="forward"===this.direction?this.traj.currentFrame+this.step:this.traj.currentFrame-this.step;if(a>=this.end||a<this.start)"once"===this.mode?(this.pause(),a="forward"===this.direction?this.end:this.start):a="forward"===this.direction?this.start:this.end;this.interpolateType||this.traj.setFrame(a)}if(this._stopFlag)this._running=!1;else if(!this.traj.inProgress&&
this.interpolateType){var b,c,d;"forward"===this.direction?(b=Math.max(this.start,a-this.step),c=Math.max(this.start,a-2*this.step),d=Math.max(this.start,a-3*this.step)):(b=Math.min(this.end,a+this.step),c=Math.min(this.end,a+2*this.step),d=Math.min(this.end,a+3*this.step));this._interpolate(a,b,c,d,1/this.interpolateStep,0)}else setTimeout(this._animate.bind(this),this.timeout)},_interpolate:function(a,b,c,d,e,f){f+=e;if(1>=f){var g=Math.round(this.timeout*e);this.traj.setFrameInterpolated(a,b,c,
d,f,this.interpolateType,function(){setTimeout(function(){this._interpolate(a,b,c,d,e,f)}.bind(this),g)}.bind(this))}else setTimeout(this._animate.bind(this),0)},toggle:function(){this._running?this.pause():this.play()},play:function(){if(!this._running){this.traj.player!==this&&this.traj.setPlayer(this);var a=this.traj.currentFrame,b=Math.ceil(a/this.step)*this.step;"forward"===this.direction&&a>=this.end?b=this.start:"backward"===this.direction&&a<=this.start&&(b=this.end);this.traj.setFrame(b);
this._stopFlag=!1;this._animate();this.signals.startedRunning.dispatch()}},pause:function(){this._running&&(this._stopFlag=!0,this.signals.haltedRunning.dispatch())},stop:function(){this.traj.setFrame(this.start);this.pause()}};NGL.Surface=function(a,b,c){this.name=a;this.path=b;this.center=new THREE.Vector3;this.boundingBox=new THREE.Box3;c&&this.fromGeometry(c)};
NGL.Surface.prototype={constructor:NGL.Surface,fromGeometry:function(a){NGL.time("NGL.GeometrySurface.fromGeometry");a instanceof THREE.Geometry?(a.computeFaceNormals(!0),a.computeVertexNormals(!0)):a=a instanceof THREE.BufferGeometry?a:a.children[0].geometry;a.computeBoundingSphere();a.computeBoundingBox();this.center.copy(a.boundingSphere.center);this.boundingBox.copy(a.boundingBox);var b,c;if(a instanceof THREE.BufferGeometry){var d=a.attributes;b=d.normal?d.normal.array:!1;(!b||0===b[0]&&0===
b[1]&&0===b[2])&&a.computeVertexNormals();b=d.position.array;c=d.index?d.index.array:null;a=d.normal.array}else NGL.log("TODO non BufferGeometry surface"),b=NGL.Utils.positionFromGeometry(a),c=NGL.Utils.indexFromGeometry(a),a=NGL.Utils.normalFromGeometry(a);this.position=b;this.index=c;this.normal=a;this.size=b.length/3;NGL.timeEnd("NGL.GeometrySurface.setGeometry")},getPosition:function(){return this.position},getColor:function(a){a=new THREE.Color(a);return NGL.Utils.uniformArray3(this.size,a.r,
a.g,a.b)},getNormal:function(){return this.normal},getIndex:function(){return this.index},filterData:function(a,b){},getDataPosition:function(){return this.getPosition.apply(this,arguments)},getDataColor:function(){return this.getColor.apply(this,arguments)},getDataSize:function(a){return NGL.Utils.uniformArray(this.size,a)},toJSON:function(){return{metadata:{version:.1,type:"Surface",generator:"SurfaceExporter"},name:this.name,path:this.path,position:this.position,index:this.index,normal:this.normal,
size:this.size,center:this.center.toArray(),boundingBox:{min:this.boundingBox.min.toArray(),max:this.boundingBox.max.toArray()}}},fromJSON:function(a){this.name=a.name;this.path=a.path;this.position=a.position;this.index=a.index;this.normal=a.normal;this.size=a.size;this.center.fromArray(a.center);this.boundingBox.set(a.boundingBox.min,a.boundingBox.max);return this},getTransferable:function(){var a=[];this.position&&a.push(this.position.buffer);this.index&&a.push(this.index.buffer);this.normal&&
a.push(this.normal.buffer);return a}};NGL.Worker.add("surf",function(a){NGL.time("WORKER surf");void 0===self.vol&&(self.vol=new NGL.Volume);var b=self.vol;a=a.data;var c=a.params;a.vol&&b.fromJSON(a.vol);b.generateSurface(c.isolevel,c.smooth);NGL.timeEnd("WORKER surf");a={position:b.position,index:b.index,normal:b.normal};c=[b.position.buffer,b.index.buffer];b.normal&&c.push(b.normal.buffer);self.postMessage(a,c)});
NGL.Volume=function(a,b,c,d,e,f){this.name=a;this.path=b;this.matrix=new THREE.Matrix4;this.center=new THREE.Vector3;this.boundingBox=new THREE.Box3;this.setData(c,d,e,f)};
NGL.Volume.prototype={constructor:NGL.Volume,setData:function(a,b,c,d){this.nx=b||1;this.ny=c||1;this.nz=d||1;this.__data=this.data=a||new Float32Array(1);delete this.mc;delete this.__isolevel;delete this.__smooth;delete this.__minValue;delete this.__maxValue;delete this.__dataPositionBuffer;delete this.__dataPosition;delete this.__dataBuffer;delete this.__dataMin;delete this.__dataMax;delete this.__dataMean;delete this.__dataRms;this.worker&&this.worker.terminate()},setMatrix:function(a){this.matrix.copy(a);
a=this.boundingBox;var b=this.center,c=this.nx-1,d=this.ny-1,e=this.nz-1;a.makeEmpty();a.expandByPoint(b.set(c,d,e));a.expandByPoint(b.set(c,d,0));a.expandByPoint(b.set(c,0,e));a.expandByPoint(b.set(c,0,0));a.expandByPoint(b.set(0,d,e));a.expandByPoint(b.set(0,0,e));a.expandByPoint(b.set(0,d,0));a.expandByPoint(b.set(0,0,0));a.applyMatrix4(this.matrix);a.center(this.center)},generateSurface:function(a,b){a=isNaN(a)?this.getIsolevelForSigma(2):a;b=b||0;if(a!==this.__isolevel||b!==this.__smooth){void 0===
this.mc&&(this.mc=new NGL.MarchingCubes2(this.__data,this.nx,this.ny,this.nz));var c;b?(c=this.mc.triangulate(a,!0),NGL.laplacianSmooth(c.position,c.index,b,!0)):c=this.mc.triangulate(a);this.position=c.position;this.normal=c.normal;this.index=c.index;this.size=this.position.length/3;this.matrix.applyToVector3Array(this.position);if(this.normal){var d=this.matrix.elements;c=new THREE.Vector3(d[0],d[1],d[2]);var e=new THREE.Vector3(d[4],d[5],d[6]),d=new THREE.Vector3(d[8],d[9],d[10]),f=new THREE.Vector3,
g=new THREE.Matrix3,h=g.elements;f.crossVectors(e,d);h[0]=f.x;h[1]=f.y;h[2]=f.z;f.crossVectors(d,c);h[3]=f.x;h[4]=f.y;h[5]=f.z;f.crossVectors(c,e);h[6]=f.x;h[7]=f.y;h[8]=f.z;g.applyToVector3Array(this.normal)}this.__isolevel=a;this.__smooth=b}},generateSurfaceWorker:function(a,b,c){a=isNaN(a)?this.getIsolevelForSigma(2):a;b=b||0;if(a===this.__isolevel&&b===this.__smooth)c();else if(NGL.useWorker&&"undefined"!==typeof Worker&&"function"!==typeof importScripts){var d="NGL.Volume.generateSurfaceWorker "+
this.name;NGL.time(d);var e=void 0;void 0===this.worker&&(e=this.toJSON(),this.worker=NGL.Worker.make("surf"));this.worker.onerror=function(d){console.warn("NGL.Volume.generateSurfaceWorker error - trying without worker",d);this.worker.terminate();this.worker=void 0;this.generateSurface(a,b);c()}.bind(this);this.worker.onmessage=function(e){NGL.timeEnd(d);this.position=e.data.position;this.normal=e.data.normal;this.index=e.data.index;this.size=this.position.length/3;this.__isolevel=a;this.__smooth=
b;c()}.bind(this);this.worker.postMessage({vol:e,params:{isolevel:a,smooth:b}})}else this.generateSurface(a,b),c()},getIsolevelForSigma:function(a){a=void 0!==a?a:2;return this.getDataMean()+a*this.getDataRms()},getSigmaForIsolevel:function(a){return((void 0!==a?a:0)-this.getDataMean())/this.getDataRms()},getPosition:function(){return this.position},getColor:function(a){a=new THREE.Color(a);return NGL.Utils.uniformArray3(this.size,a.r,a.g,a.b)},getNormal:function(){return this.normal},getIndex:function(){return this.index},
filterData:function(a,b){isNaN(a)&&this.header&&(a=this.header.DMEAN+2*this.header.ARMS);a=void 0===a||isNaN(a)?-Infinity:a;b=void 0!==b?b:Infinity;this.dataPosition||this.makeDataPosition();var c=this.__dataPosition,d=this.__data;if(a!==this.__minValue||b!=this.__maxValue){if(-Infinity===a&&Infinity===b)this.dataPosition=c,this.data=d;else{var e=d.length;this.__dataBuffer||(this.__dataPositionBuffer=new ArrayBuffer(12*e),this.__dataBuffer=new ArrayBuffer(4*e));for(var f=new Float32Array(this.__dataPositionBuffer),
g=new Float32Array(this.__dataBuffer),h=0,k=0;k<e;++k){var l=3*k,m=d[k];if(m>=a&&m<=b){var n=3*h;f[n+0]=c[l+0];f[n+1]=c[l+1];f[n+2]=c[l+2];g[h]=m;h+=1}}this.dataPosition=new Float32Array(this.__dataPositionBuffer,0,3*h);this.data=new Float32Array(this.__dataBuffer,0,h)}this.__minValue=a;this.__maxValue=b}},makeDataPosition:function(){for(var a=this.nz,b=this.ny,c=this.nx,d=new Float32Array(c*b*a*3),e=0,f=0;f<a;++f)for(var g=0;g<b;++g)for(var h=0;h<c;++h)d[e+0]=h,d[e+1]=g,d[e+2]=f,e+=3;this.matrix.applyToVector3Array(d);
this.__dataPosition=this.dataPosition=d},getDataPosition:function(){return this.dataPosition},getDataColor:function(a){var b=chroma.scale("Spectral").mode("lch").domain([this.getDataMin(),this.getDataMax()]),c=this.dataPosition.length/3,d=this.data;switch(a){case "value":a=new Float32Array(3*c);for(var e=0;e<c;++e){var f=3*e,g=b(d[e])._rgb;a[f+0]=g[0]/255;a[f+1]=g[1]/255;a[f+2]=g[2]/255}break;default:b=new THREE.Color(a),a=NGL.Utils.uniformArray3(c,b.r,b.g,b.b)}return a},getDataSize:function(a,b){var c=
this.dataPosition.length/3,d;switch(a){case "value":d=new Float32Array(this.data);break;case "value-min":d=new Float32Array(this.data);for(var e=this.getDataMin(),f=0;f<c;++f)d[f]-=e;break;case "deviation":d=new Float32Array(this.data);break;default:d=NGL.Utils.uniformArray(c,a)}if(1!==b)for(f=0;f<c;++f)d[f]*=b;return d},getDataMin:function(){if(void 0===this.__dataMin){for(var a=this.__data,b=a.length,c=Infinity,d=0;d<b;++d)c=Math.min(c,a[d]);this.__dataMin=c}return this.__dataMin},getDataMax:function(){if(void 0===
this.__dataMax){for(var a=this.__data,b=a.length,c=-Infinity,d=0;d<b;++d)c=Math.max(c,a[d]);this.__dataMax=c}return this.__dataMax},getDataMean:function(){if(void 0===this.__dataMean){for(var a=this.__data,b=a.length,c=0,d=0;d<b;++d)c+=a[d];this.__dataMean=c/b}return this.__dataMean},getDataRms:function(){if(void 0===this.__dataRms){var a=this.__data,b=a.length,c=0,d,e;for(e=0;e<b;++e)d=a[e],c+=d*d;this.__dataRms=Math.sqrt(c/b)}return this.__dataRms},clone:function(){var a=new NGL.Volume(this.name,
this.path,this.data,this.nx,this.ny,this.nz);a.matrix.copy(this.matrix);this.header&&(a.header=Object.assign({},this.header));return a},toJSON:function(){var a={metadata:{version:.1,type:"Volume",generator:"VolumeExporter"},name:this.name,path:this.path,data:this.data,nx:this.nx,ny:this.ny,nz:this.nz,matrix:this.matrix.toArray(),center:this.center.toArray(),boundingBox:{min:this.boundingBox.min.toArray(),max:this.boundingBox.max.toArray()}};this.header&&(a.header=Object.assign({},this.header));return a},
fromJSON:function(a){this.name=a.name;this.path=a.path;this.setData(a.data,a.nx,a.ny,a.nz);this.matrix.fromArray(a.matrix);a.header&&(this.header=Object.assign({},a.header));this.center.fromArray(a.center);this.boundingBox.set(a.boundingBox.min,a.boundingBox.max);return this},getTransferable:function(){return[this.data.buffer]},dispose:function(){this.worker&&this.worker.terminate()}};
NGL.MarchingCubes=function(a,b,c,d,e){NGL.time("NGL.MarchingCubes");b=new Int32Array([b,c,d]);c=NGL.MarchingCubes.edgeTable;d=NGL.MarchingCubes.triTable;var f=NGL.MarchingCubes.cubeVerts,g=NGL.MarchingCubes.edgeIndex,h=[],k=[],l=0,m=0,n=0,q=new Float32Array(8),p=new Int32Array(12),t=new Int32Array(3);for(t[2]=0;t[2]<b[2]-1;++t[2],n+=b[0])for(t[1]=0;t[1]<b[1]-1;++t[1],++n)for(t[0]=0;t[0]<b[0]-1;++t[0],++n){for(var r=0,w=0;8>w;++w){var x=f[w],x=a[n+x[0]+b[0]*(x[1]+b[1]*x[2])]-e;q[w]=x;r|=0<x?1<<w:0}x=
c[r];if(0!==x){for(w=0;12>w;++w)if(0!==(x&1<<w)){p[w]=l/3;var s=g[w],y=f[s[0]],v=f[s[1]],G=q[s[0]],s=G-q[s[1]],u=0;1E-6<Math.abs(s)&&(u=G/s);h[l+0]=t[0]+y[0]+u*(v[0]-y[0]);h[l+1]=t[1]+y[1]+u*(v[1]-y[1]);h[l+2]=t[2]+y[2]+u*(v[2]-y[2]);l+=3}r=d[r];for(w=0;w<r.length;w+=3)k[m+0]=p[r[w+0]],k[m+1]=p[r[w+1]],k[m+2]=p[r[w+2]],m+=3}}NGL.timeEnd("NGL.MarchingCubes");return{position:new Float32Array(h),normal:void 0,index:new Uint32Array(k)}};
NGL.MarchingCubes2=function(a,b,c,d){function e(a,b,c){return a+(b-a)*c}function f(a,b,c,d,f,g,h){if(0>x[a]){g=(n-g)/(h-g);h=w;var k=3*s;G[k+0]=c+g;G[k+1]=d;G[k+2]=f;q||(c=3*a,u[k]=-e(h[c],h[c+3],g),u[k+1]=-e(h[c+1],h[c+4],g),u[k+2]=-e(h[c+2],h[c+5],g));x[a]=s;v[b]=s;s+=1}else v[b]=x[a]}function g(a,b,c,d,f,g,h){if(0>x[a]){g=(n-g)/(h-g);h=w;var k=3*s;G[k]=c;G[k+1]=d+g;G[k+2]=f;q||(c=3*a,d=c+3*t,u[k]=-e(h[c],h[d],g),u[k+1]=-e(h[c+1],h[d+1],g),u[k+2]=-e(h[c+2],h[d+2],g));x[a]=s;v[b]=s;s+=1}else v[b]=
x[a]}function h(a,b,c,d,f,g,h){if(0>x[a]){g=(n-g)/(h-g);h=w;var k=3*s;G[k]=c;G[k+1]=d;G[k+2]=f+g;q||(c=3*a,d=c+3*r,u[k]=-e(h[c],h[d],g),u[k+1]=-e(h[c+1],h[d+1],g),u[k+2]=-e(h[c+2],h[d+2],g));x[a]=s;v[b]=s;s+=1}else v[b]=x[a]}function k(b){var c=3*b;0===w[c]&&(w[c]=a[b-1]-a[b+1],w[c+1]=a[b-t]-a[b+t],w[c+2]=a[b-r]-a[b+r])}var l=NGL.MarchingCubes.edgeTable,m=NGL.MarchingCubes.triTable2,n=0,q=!1,p=b*c*d,t=b,r=b*c,w,x,s,y,v=new Int32Array(12),G=[],u=[],B=[];this.triangulate=function(e,z){NGL.time("NGL.MarchingCubes2.triangulate");
n=e;(q=z)||w||(w=new Float32Array(3*p));x||(x=new Int32Array(p));for(var E=0;E<p;++E)x[E]=-1;y=s=0;var A,O,M,H,R,I,D,N,S;q?(I=0,D=b-1,N=c-1,S=d-1):(I=1,D=b-2,N=c-2,S=d-2);for(M=I;M<S;++M)for(R=r*M,O=I;O<N;++O)for(H=R+t*O,E=I;E<D;++E){A=H+E;var U=E,P=O,Y=M,aa=A,fa=aa+1,la=aa+t,J=aa+r,V=fa+t,C=fa+r,F=aa+t+r,K=fa+t+r;A=0;var ba=a[aa],na=a[fa],ta=a[la],va=a[V],wa=a[J],xa=a[C],Ga=a[F],Aa=a[K];ba<n&&(A|=1);na<n&&(A|=2);ta<n&&(A|=8);va<n&&(A|=4);wa<n&&(A|=16);xa<n&&(A|=32);Ga<n&&(A|=128);Aa<n&&(A|=64);var ma=
l[A];if(0!==ma){var ua=U+1,ra=P+1,pa=Y+1;ma&1&&(q||(k(aa),k(fa)),f(aa,0,U,P,Y,ba,na));ma&2&&(q||(k(fa),k(V)),g(fa,1,ua,P,Y,na,va));ma&4&&(q||(k(la),k(V)),f(la,2,U,ra,Y,ta,va));ma&8&&(q||(k(aa),k(la)),g(aa,3,U,P,Y,ba,ta));ma&16&&(q||(k(J),k(C)),f(J,4,U,P,pa,wa,xa));ma&32&&(q||(k(C),k(K)),g(C,5,ua,P,pa,xa,Aa));ma&64&&(q||(k(F),k(K)),f(F,6,U,ra,pa,Ga,Aa));ma&128&&(q||(k(J),k(F)),g(J,7,U,P,pa,wa,Ga));ma&256&&(q||(k(aa),k(J)),h(aa,8,U,P,Y,ba,wa));ma&512&&(q||(k(fa),k(C)),h(fa,9,ua,P,Y,na,xa));ma&1024&&
(q||(k(V),k(K)),h(V,10,ua,ra,Y,va,Aa));ma&2048&&(q||(k(la),k(F)),h(la,11,U,ra,Y,ta,Ga));A<<=4;Y=P=U=void 0;for(aa=0;-1!=m[A+aa];)U=A+aa,P=U+1,Y=U+2,B[y]=v[m[P]],B[y+1]=v[m[U]],B[y+2]=v[m[Y]],y+=3,aa+=3}}G.length=3*s;q||(u.length=3*s);B.length=y;NGL.timeEnd("NGL.MarchingCubes2.triangulate");return{position:new Float32Array(G),normal:q?void 0:new Float32Array(u),index:new Uint32Array(B)}}};
NGL.MarchingCubes.edgeTable=new Uint32Array([0,265,515,778,1030,1295,1541,1804,2060,2309,2575,2822,3082,3331,3593,3840,400,153,915,666,1430,1183,1941,1692,2460,2197,2975,2710,3482,3219,3993,3728,560,825,51,314,1590,1855,1077,1340,2620,2869,2111,2358,3642,3891,3129,3376,928,681,419,170,1958,1711,1445,1196,2988,2725,2479,2214,4010,3747,3497,3232,1120,1385,1635,1898,102,367,613,876,3180,3429,3695,3942,2154,2403,2665,2912,1520,1273,2035,1786,502,255,1013,764,3580,3317,4095,3830,2554,2291,3065,2800,1616,
1881,1107,1370,598,863,85,348,3676,3925,3167,3414,2650,2899,2137,2384,1984,1737,1475,1226,966,719,453,204,4044,3781,3535,3270,3018,2755,2505,2240,2240,2505,2755,3018,3270,3535,3781,4044,204,453,719,966,1226,1475,1737,1984,2384,2137,2899,2650,3414,3167,3925,3676,348,85,863,598,1370,1107,1881,1616,2800,3065,2291,2554,3830,4095,3317,3580,764,1013,255,502,1786,2035,1273,1520,2912,2665,2403,2154,3942,3695,3429,3180,876,613,367,102,1898,1635,1385,1120,3232,3497,3747,4010,2214,2479,2725,2988,1196,1445,1711,
1958,170,419,681,928,3376,3129,3891,3642,2358,2111,2869,2620,1340,1077,1855,1590,314,51,825,560,3728,3993,3219,3482,2710,2975,2197,2460,1692,1941,1183,1430,666,915,153,400,3840,3593,3331,3082,2822,2575,2309,2060,1804,1541,1295,1030,778,515,265,0]);
NGL.MarchingCubes.triTable=[[],[0,8,3],[0,1,9],[1,8,3,9,8,1],[1,2,10],[0,8,3,1,2,10],[9,2,10,0,2,9],[2,8,3,2,10,8,10,9,8],[3,11,2],[0,11,2,8,11,0],[1,9,0,2,3,11],[1,11,2,1,9,11,9,8,11],[3,10,1,11,10,3],[0,10,1,0,8,10,8,11,10],[3,9,0,3,11,9,11,10,9],[9,8,10,10,8,11],[4,7,8],[4,3,0,7,3,4],[0,1,9,8,4,7],[4,1,9,4,7,1,7,3,1],[1,2,10,8,4,7],[3,4,7,3,0,4,1,2,10],[9,2,10,9,0,2,8,4,7],[2,10,9,2,9,7,2,7,3,7,9,4],[8,4,7,3,11,2],[11,4,7,11,2,4,2,0,4],[9,0,1,8,4,7,2,3,11],[4,7,11,9,4,11,9,11,2,9,2,1],[3,10,1,
3,11,10,7,8,4],[1,11,10,1,4,11,1,0,4,7,11,4],[4,7,8,9,0,11,9,11,10,11,0,3],[4,7,11,4,11,9,9,11,10],[9,5,4],[9,5,4,0,8,3],[0,5,4,1,5,0],[8,5,4,8,3,5,3,1,5],[1,2,10,9,5,4],[3,0,8,1,2,10,4,9,5],[5,2,10,5,4,2,4,0,2],[2,10,5,3,2,5,3,5,4,3,4,8],[9,5,4,2,3,11],[0,11,2,0,8,11,4,9,5],[0,5,4,0,1,5,2,3,11],[2,1,5,2,5,8,2,8,11,4,8,5],[10,3,11,10,1,3,9,5,4],[4,9,5,0,8,1,8,10,1,8,11,10],[5,4,0,5,0,11,5,11,10,11,0,3],[5,4,8,5,8,10,10,8,11],[9,7,8,5,7,9],[9,3,0,9,5,3,5,7,3],[0,7,8,0,1,7,1,5,7],[1,5,3,3,5,7],[9,7,
8,9,5,7,10,1,2],[10,1,2,9,5,0,5,3,0,5,7,3],[8,0,2,8,2,5,8,5,7,10,5,2],[2,10,5,2,5,3,3,5,7],[7,9,5,7,8,9,3,11,2],[9,5,7,9,7,2,9,2,0,2,7,11],[2,3,11,0,1,8,1,7,8,1,5,7],[11,2,1,11,1,7,7,1,5],[9,5,8,8,5,7,10,1,3,10,3,11],[5,7,0,5,0,9,7,11,0,1,0,10,11,10,0],[11,10,0,11,0,3,10,5,0,8,0,7,5,7,0],[11,10,5,7,11,5],[10,6,5],[0,8,3,5,10,6],[9,0,1,5,10,6],[1,8,3,1,9,8,5,10,6],[1,6,5,2,6,1],[1,6,5,1,2,6,3,0,8],[9,6,5,9,0,6,0,2,6],[5,9,8,5,8,2,5,2,6,3,2,8],[2,3,11,10,6,5],[11,0,8,11,2,0,10,6,5],[0,1,9,2,3,11,5,
10,6],[5,10,6,1,9,2,9,11,2,9,8,11],[6,3,11,6,5,3,5,1,3],[0,8,11,0,11,5,0,5,1,5,11,6],[3,11,6,0,3,6,0,6,5,0,5,9],[6,5,9,6,9,11,11,9,8],[5,10,6,4,7,8],[4,3,0,4,7,3,6,5,10],[1,9,0,5,10,6,8,4,7],[10,6,5,1,9,7,1,7,3,7,9,4],[6,1,2,6,5,1,4,7,8],[1,2,5,5,2,6,3,0,4,3,4,7],[8,4,7,9,0,5,0,6,5,0,2,6],[7,3,9,7,9,4,3,2,9,5,9,6,2,6,9],[3,11,2,7,8,4,10,6,5],[5,10,6,4,7,2,4,2,0,2,7,11],[0,1,9,4,7,8,2,3,11,5,10,6],[9,2,1,9,11,2,9,4,11,7,11,4,5,10,6],[8,4,7,3,11,5,3,5,1,5,11,6],[5,1,11,5,11,6,1,0,11,7,11,4,0,4,11],
[0,5,9,0,6,5,0,3,6,11,6,3,8,4,7],[6,5,9,6,9,11,4,7,9,7,11,9],[10,4,9,6,4,10],[4,10,6,4,9,10,0,8,3],[10,0,1,10,6,0,6,4,0],[8,3,1,8,1,6,8,6,4,6,1,10],[1,4,9,1,2,4,2,6,4],[3,0,8,1,2,9,2,4,9,2,6,4],[0,2,4,4,2,6],[8,3,2,8,2,4,4,2,6],[10,4,9,10,6,4,11,2,3],[0,8,2,2,8,11,4,9,10,4,10,6],[3,11,2,0,1,6,0,6,4,6,1,10],[6,4,1,6,1,10,4,8,1,2,1,11,8,11,1],[9,6,4,9,3,6,9,1,3,11,6,3],[8,11,1,8,1,0,11,6,1,9,1,4,6,4,1],[3,11,6,3,6,0,0,6,4],[6,4,8,11,6,8],[7,10,6,7,8,10,8,9,10],[0,7,3,0,10,7,0,9,10,6,7,10],[10,6,7,1,
10,7,1,7,8,1,8,0],[10,6,7,10,7,1,1,7,3],[1,2,6,1,6,8,1,8,9,8,6,7],[2,6,9,2,9,1,6,7,9,0,9,3,7,3,9],[7,8,0,7,0,6,6,0,2],[7,3,2,6,7,2],[2,3,11,10,6,8,10,8,9,8,6,7],[2,0,7,2,7,11,0,9,7,6,7,10,9,10,7],[1,8,0,1,7,8,1,10,7,6,7,10,2,3,11],[11,2,1,11,1,7,10,6,1,6,7,1],[8,9,6,8,6,7,9,1,6,11,6,3,1,3,6],[0,9,1,11,6,7],[7,8,0,7,0,6,3,11,0,11,6,0],[7,11,6],[7,6,11],[3,0,8,11,7,6],[0,1,9,11,7,6],[8,1,9,8,3,1,11,7,6],[10,1,2,6,11,7],[1,2,10,3,0,8,6,11,7],[2,9,0,2,10,9,6,11,7],[6,11,7,2,10,3,10,8,3,10,9,8],[7,2,3,
6,2,7],[7,0,8,7,6,0,6,2,0],[2,7,6,2,3,7,0,1,9],[1,6,2,1,8,6,1,9,8,8,7,6],[10,7,6,10,1,7,1,3,7],[10,7,6,1,7,10,1,8,7,1,0,8],[0,3,7,0,7,10,0,10,9,6,10,7],[7,6,10,7,10,8,8,10,9],[6,8,4,11,8,6],[3,6,11,3,0,6,0,4,6],[8,6,11,8,4,6,9,0,1],[9,4,6,9,6,3,9,3,1,11,3,6],[6,8,4,6,11,8,2,10,1],[1,2,10,3,0,11,0,6,11,0,4,6],[4,11,8,4,6,11,0,2,9,2,10,9],[10,9,3,10,3,2,9,4,3,11,3,6,4,6,3],[8,2,3,8,4,2,4,6,2],[0,4,2,4,6,2],[1,9,0,2,3,4,2,4,6,4,3,8],[1,9,4,1,4,2,2,4,6],[8,1,3,8,6,1,8,4,6,6,10,1],[10,1,0,10,0,6,6,0,4],
[4,6,3,4,3,8,6,10,3,0,3,9,10,9,3],[10,9,4,6,10,4],[4,9,5,7,6,11],[0,8,3,4,9,5,11,7,6],[5,0,1,5,4,0,7,6,11],[11,7,6,8,3,4,3,5,4,3,1,5],[9,5,4,10,1,2,7,6,11],[6,11,7,1,2,10,0,8,3,4,9,5],[7,6,11,5,4,10,4,2,10,4,0,2],[3,4,8,3,5,4,3,2,5,10,5,2,11,7,6],[7,2,3,7,6,2,5,4,9],[9,5,4,0,8,6,0,6,2,6,8,7],[3,6,2,3,7,6,1,5,0,5,4,0],[6,2,8,6,8,7,2,1,8,4,8,5,1,5,8],[9,5,4,10,1,6,1,7,6,1,3,7],[1,6,10,1,7,6,1,0,7,8,7,0,9,5,4],[4,0,10,4,10,5,0,3,10,6,10,7,3,7,10],[7,6,10,7,10,8,5,4,10,4,8,10],[6,9,5,6,11,9,11,8,9],[3,
6,11,0,6,3,0,5,6,0,9,5],[0,11,8,0,5,11,0,1,5,5,6,11],[6,11,3,6,3,5,5,3,1],[1,2,10,9,5,11,9,11,8,11,5,6],[0,11,3,0,6,11,0,9,6,5,6,9,1,2,10],[11,8,5,11,5,6,8,0,5,10,5,2,0,2,5],[6,11,3,6,3,5,2,10,3,10,5,3],[5,8,9,5,2,8,5,6,2,3,8,2],[9,5,6,9,6,0,0,6,2],[1,5,8,1,8,0,5,6,8,3,8,2,6,2,8],[1,5,6,2,1,6],[1,3,6,1,6,10,3,8,6,5,6,9,8,9,6],[10,1,0,10,0,6,9,5,0,5,6,0],[0,3,8,5,6,10],[10,5,6],[11,5,10,7,5,11],[11,5,10,11,7,5,8,3,0],[5,11,7,5,10,11,1,9,0],[10,7,5,10,11,7,9,8,1,8,3,1],[11,1,2,11,7,1,7,5,1],[0,8,3,
1,2,7,1,7,5,7,2,11],[9,7,5,9,2,7,9,0,2,2,11,7],[7,5,2,7,2,11,5,9,2,3,2,8,9,8,2],[2,5,10,2,3,5,3,7,5],[8,2,0,8,5,2,8,7,5,10,2,5],[9,0,1,5,10,3,5,3,7,3,10,2],[9,8,2,9,2,1,8,7,2,10,2,5,7,5,2],[1,3,5,3,7,5],[0,8,7,0,7,1,1,7,5],[9,0,3,9,3,5,5,3,7],[9,8,7,5,9,7],[5,8,4,5,10,8,10,11,8],[5,0,4,5,11,0,5,10,11,11,3,0],[0,1,9,8,4,10,8,10,11,10,4,5],[10,11,4,10,4,5,11,3,4,9,4,1,3,1,4],[2,5,1,2,8,5,2,11,8,4,5,8],[0,4,11,0,11,3,4,5,11,2,11,1,5,1,11],[0,2,5,0,5,9,2,11,5,4,5,8,11,8,5],[9,4,5,2,11,3],[2,5,10,3,5,
2,3,4,5,3,8,4],[5,10,2,5,2,4,4,2,0],[3,10,2,3,5,10,3,8,5,4,5,8,0,1,9],[5,10,2,5,2,4,1,9,2,9,4,2],[8,4,5,8,5,3,3,5,1],[0,4,5,1,0,5],[8,4,5,8,5,3,9,0,5,0,3,5],[9,4,5],[4,11,7,4,9,11,9,10,11],[0,8,3,4,9,7,9,11,7,9,10,11],[1,10,11,1,11,4,1,4,0,7,4,11],[3,1,4,3,4,8,1,10,4,7,4,11,10,11,4],[4,11,7,9,11,4,9,2,11,9,1,2],[9,7,4,9,11,7,9,1,11,2,11,1,0,8,3],[11,7,4,11,4,2,2,4,0],[11,7,4,11,4,2,8,3,4,3,2,4],[2,9,10,2,7,9,2,3,7,7,4,9],[9,10,7,9,7,4,10,2,7,8,7,0,2,0,7],[3,7,10,3,10,2,7,4,10,1,10,0,4,0,10],[1,10,
2,8,7,4],[4,9,1,4,1,7,7,1,3],[4,9,1,4,1,7,0,8,1,8,7,1],[4,0,3,7,4,3],[4,8,7],[9,10,8,10,11,8],[3,0,9,3,9,11,11,9,10],[0,1,10,0,10,8,8,10,11],[3,1,10,11,3,10],[1,2,11,1,11,9,9,11,8],[3,0,9,3,9,11,1,2,9,2,11,9],[0,2,11,8,0,11],[3,2,11],[2,3,8,2,8,10,10,8,9],[9,10,2,0,9,2],[2,3,8,2,8,10,0,1,8,1,10,8],[1,10,2],[1,3,8,9,1,8],[0,9,1],[0,3,8],[]];
NGL.MarchingCubes.triTable2=new Int32Array([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,9,8,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,2,10,0,2,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,8,3,2,10,8,10,9,8,-1,-1,-1,-1,-1,-1,-1,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,8,11,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,11,-1,
-1,-1,-1,-1,-1,-1,-1,-1,-1,1,11,2,1,9,11,9,8,11,-1,-1,-1,-1,-1,-1,-1,3,10,1,11,10,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,10,1,0,8,10,8,11,10,-1,-1,-1,-1,-1,-1,-1,3,9,0,3,11,9,11,10,9,-1,-1,-1,-1,-1,-1,-1,9,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,7,3,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,1,9,4,7,1,7,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,4,7,3,0,4,1,2,10,-1,-1,-1,-1,-1,-1,-1,9,2,10,
9,0,2,8,4,7,-1,-1,-1,-1,-1,-1,-1,2,10,9,2,9,7,2,7,3,7,9,4,-1,-1,-1,-1,8,4,7,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,4,7,11,2,4,2,0,4,-1,-1,-1,-1,-1,-1,-1,9,0,1,8,4,7,2,3,11,-1,-1,-1,-1,-1,-1,-1,4,7,11,9,4,11,9,11,2,9,2,1,-1,-1,-1,-1,3,10,1,3,11,10,7,8,4,-1,-1,-1,-1,-1,-1,-1,1,11,10,1,4,11,1,0,4,7,11,4,-1,-1,-1,-1,4,7,8,9,0,11,9,11,10,11,0,3,-1,-1,-1,-1,4,7,11,4,11,9,9,11,10,-1,-1,-1,-1,-1,-1,-1,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,5,4,1,5,0,-1,-1,
-1,-1,-1,-1,-1,-1,-1,-1,8,5,4,8,3,5,3,1,5,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,10,4,9,5,-1,-1,-1,-1,-1,-1,-1,5,2,10,5,4,2,4,0,2,-1,-1,-1,-1,-1,-1,-1,2,10,5,3,2,5,3,5,4,3,4,8,-1,-1,-1,-1,9,5,4,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,0,8,11,4,9,5,-1,-1,-1,-1,-1,-1,-1,0,5,4,0,1,5,2,3,11,-1,-1,-1,-1,-1,-1,-1,2,1,5,2,5,8,2,8,11,4,8,5,-1,-1,-1,-1,10,3,11,10,1,3,9,5,4,-1,-1,-1,-1,-1,-1,-1,4,9,5,0,8,1,8,10,1,8,11,10,-1,-1,-1,-1,5,4,0,5,0,11,5,11,10,11,0,3,-1,-1,-1,
-1,5,4,8,5,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,9,7,8,5,7,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,3,0,9,5,3,5,7,3,-1,-1,-1,-1,-1,-1,-1,0,7,8,0,1,7,1,5,7,-1,-1,-1,-1,-1,-1,-1,1,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,7,8,9,5,7,10,1,2,-1,-1,-1,-1,-1,-1,-1,10,1,2,9,5,0,5,3,0,5,7,3,-1,-1,-1,-1,8,0,2,8,2,5,8,5,7,10,5,2,-1,-1,-1,-1,2,10,5,2,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,7,9,5,7,8,9,3,11,2,-1,-1,-1,-1,-1,-1,-1,9,5,7,9,7,2,9,2,0,2,7,11,-1,-1,-1,-1,2,3,11,0,1,8,1,7,8,1,5,7,-1,-1,-1,-1,11,2,1,11,1,7,7,1,5,-1,-1,
-1,-1,-1,-1,-1,9,5,8,8,5,7,10,1,3,10,3,11,-1,-1,-1,-1,5,7,0,5,0,9,7,11,0,1,0,10,11,10,0,-1,11,10,0,11,0,3,10,5,0,8,0,7,5,7,0,-1,11,10,5,7,11,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,0,1,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,1,9,8,5,10,6,-1,-1,-1,-1,-1,-1,-1,1,6,5,2,6,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,6,5,1,2,6,3,0,8,-1,-1,-1,-1,-1,-1,-1,9,6,5,9,0,6,0,2,6,-1,-1,-1,-1,-1,-1,-1,5,9,8,5,8,2,5,2,6,3,2,8,-1,-1,-1,-1,
2,3,11,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,0,8,11,2,0,10,6,5,-1,-1,-1,-1,-1,-1,-1,0,1,9,2,3,11,5,10,6,-1,-1,-1,-1,-1,-1,-1,5,10,6,1,9,2,9,11,2,9,8,11,-1,-1,-1,-1,6,3,11,6,5,3,5,1,3,-1,-1,-1,-1,-1,-1,-1,0,8,11,0,11,5,0,5,1,5,11,6,-1,-1,-1,-1,3,11,6,0,3,6,0,6,5,0,5,9,-1,-1,-1,-1,6,5,9,6,9,11,11,9,8,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,4,7,3,6,5,10,-1,-1,-1,-1,-1,-1,-1,1,9,0,5,10,6,8,4,7,-1,-1,-1,-1,-1,-1,-1,10,6,5,1,9,7,1,7,3,7,9,4,-1,-1,-1,-1,6,1,2,6,5,1,4,7,8,
-1,-1,-1,-1,-1,-1,-1,1,2,5,5,2,6,3,0,4,3,4,7,-1,-1,-1,-1,8,4,7,9,0,5,0,6,5,0,2,6,-1,-1,-1,-1,7,3,9,7,9,4,3,2,9,5,9,6,2,6,9,-1,3,11,2,7,8,4,10,6,5,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,2,4,2,0,2,7,11,-1,-1,-1,-1,0,1,9,4,7,8,2,3,11,5,10,6,-1,-1,-1,-1,9,2,1,9,11,2,9,4,11,7,11,4,5,10,6,-1,8,4,7,3,11,5,3,5,1,5,11,6,-1,-1,-1,-1,5,1,11,5,11,6,1,0,11,7,11,4,0,4,11,-1,0,5,9,0,6,5,0,3,6,11,6,3,8,4,7,-1,6,5,9,6,9,11,4,7,9,7,11,9,-1,-1,-1,-1,10,4,9,6,4,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,10,6,4,9,10,0,8,3,-1,-1,-1,
-1,-1,-1,-1,10,0,1,10,6,0,6,4,0,-1,-1,-1,-1,-1,-1,-1,8,3,1,8,1,6,8,6,4,6,1,10,-1,-1,-1,-1,1,4,9,1,2,4,2,6,4,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,9,2,4,9,2,6,4,-1,-1,-1,-1,0,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,3,2,8,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,10,4,9,10,6,4,11,2,3,-1,-1,-1,-1,-1,-1,-1,0,8,2,2,8,11,4,9,10,4,10,6,-1,-1,-1,-1,3,11,2,0,1,6,0,6,4,6,1,10,-1,-1,-1,-1,6,4,1,6,1,10,4,8,1,2,1,11,8,11,1,-1,9,6,4,9,3,6,9,1,3,11,6,3,-1,-1,-1,-1,8,11,1,8,1,0,11,6,1,9,1,4,6,4,1,-1,3,11,6,3,6,0,0,6,4,-1,-1,-1,
-1,-1,-1,-1,6,4,8,11,6,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,10,6,7,8,10,8,9,10,-1,-1,-1,-1,-1,-1,-1,0,7,3,0,10,7,0,9,10,6,7,10,-1,-1,-1,-1,10,6,7,1,10,7,1,7,8,1,8,0,-1,-1,-1,-1,10,6,7,10,7,1,1,7,3,-1,-1,-1,-1,-1,-1,-1,1,2,6,1,6,8,1,8,9,8,6,7,-1,-1,-1,-1,2,6,9,2,9,1,6,7,9,0,9,3,7,3,9,-1,7,8,0,7,0,6,6,0,2,-1,-1,-1,-1,-1,-1,-1,7,3,2,6,7,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,11,10,6,8,10,8,9,8,6,7,-1,-1,-1,-1,2,0,7,2,7,11,0,9,7,6,7,10,9,10,7,-1,1,8,0,1,7,8,1,10,7,6,7,10,2,3,11,-1,11,2,1,11,1,7,10,6,1,6,7,
1,-1,-1,-1,-1,8,9,6,8,6,7,9,1,6,11,6,3,1,3,6,-1,0,9,1,11,6,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,8,0,7,0,6,3,11,0,11,6,0,-1,-1,-1,-1,7,11,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,1,9,8,3,1,11,7,6,-1,-1,-1,-1,-1,-1,-1,10,1,2,6,11,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,8,6,11,7,-1,-1,-1,-1,-1,-1,-1,2,9,0,2,10,9,6,11,7,-1,-1,-1,-1,-1,-1,-1,6,11,7,2,10,3,10,8,3,10,9,8,
-1,-1,-1,-1,7,2,3,6,2,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,0,8,7,6,0,6,2,0,-1,-1,-1,-1,-1,-1,-1,2,7,6,2,3,7,0,1,9,-1,-1,-1,-1,-1,-1,-1,1,6,2,1,8,6,1,9,8,8,7,6,-1,-1,-1,-1,10,7,6,10,1,7,1,3,7,-1,-1,-1,-1,-1,-1,-1,10,7,6,1,7,10,1,8,7,1,0,8,-1,-1,-1,-1,0,3,7,0,7,10,0,10,9,6,10,7,-1,-1,-1,-1,7,6,10,7,10,8,8,10,9,-1,-1,-1,-1,-1,-1,-1,6,8,4,11,8,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,6,11,3,0,6,0,4,6,-1,-1,-1,-1,-1,-1,-1,8,6,11,8,4,6,9,0,1,-1,-1,-1,-1,-1,-1,-1,9,4,6,9,6,3,9,3,1,11,3,6,-1,-1,-1,-1,6,8,4,6,11,8,
2,10,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,11,0,6,11,0,4,6,-1,-1,-1,-1,4,11,8,4,6,11,0,2,9,2,10,9,-1,-1,-1,-1,10,9,3,10,3,2,9,4,3,11,3,6,4,6,3,-1,8,2,3,8,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,0,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,4,2,4,6,4,3,8,-1,-1,-1,-1,1,9,4,1,4,2,2,4,6,-1,-1,-1,-1,-1,-1,-1,8,1,3,8,6,1,8,4,6,6,10,1,-1,-1,-1,-1,10,1,0,10,0,6,6,0,4,-1,-1,-1,-1,-1,-1,-1,4,6,3,4,3,8,6,10,3,0,3,9,10,9,3,-1,10,9,4,6,10,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,5,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,
3,4,9,5,11,7,6,-1,-1,-1,-1,-1,-1,-1,5,0,1,5,4,0,7,6,11,-1,-1,-1,-1,-1,-1,-1,11,7,6,8,3,4,3,5,4,3,1,5,-1,-1,-1,-1,9,5,4,10,1,2,7,6,11,-1,-1,-1,-1,-1,-1,-1,6,11,7,1,2,10,0,8,3,4,9,5,-1,-1,-1,-1,7,6,11,5,4,10,4,2,10,4,0,2,-1,-1,-1,-1,3,4,8,3,5,4,3,2,5,10,5,2,11,7,6,-1,7,2,3,7,6,2,5,4,9,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,6,0,6,2,6,8,7,-1,-1,-1,-1,3,6,2,3,7,6,1,5,0,5,4,0,-1,-1,-1,-1,6,2,8,6,8,7,2,1,8,4,8,5,1,5,8,-1,9,5,4,10,1,6,1,7,6,1,3,7,-1,-1,-1,-1,1,6,10,1,7,6,1,0,7,8,7,0,9,5,4,-1,4,0,10,4,10,5,0,3,10,
6,10,7,3,7,10,-1,7,6,10,7,10,8,5,4,10,4,8,10,-1,-1,-1,-1,6,9,5,6,11,9,11,8,9,-1,-1,-1,-1,-1,-1,-1,3,6,11,0,6,3,0,5,6,0,9,5,-1,-1,-1,-1,0,11,8,0,5,11,0,1,5,5,6,11,-1,-1,-1,-1,6,11,3,6,3,5,5,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,11,9,11,8,11,5,6,-1,-1,-1,-1,0,11,3,0,6,11,0,9,6,5,6,9,1,2,10,-1,11,8,5,11,5,6,8,0,5,10,5,2,0,2,5,-1,6,11,3,6,3,5,2,10,3,10,5,3,-1,-1,-1,-1,5,8,9,5,2,8,5,6,2,3,8,2,-1,-1,-1,-1,9,5,6,9,6,0,0,6,2,-1,-1,-1,-1,-1,-1,-1,1,5,8,1,8,0,5,6,8,3,8,2,6,2,8,-1,1,5,6,2,1,6,-1,-1,-1,-1,-1,-1,
-1,-1,-1,-1,1,3,6,1,6,10,3,8,6,5,6,9,8,9,6,-1,10,1,0,10,0,6,9,5,0,5,6,0,-1,-1,-1,-1,0,3,8,5,6,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,5,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,7,5,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,11,7,5,8,3,0,-1,-1,-1,-1,-1,-1,-1,5,11,7,5,10,11,1,9,0,-1,-1,-1,-1,-1,-1,-1,10,7,5,10,11,7,9,8,1,8,3,1,-1,-1,-1,-1,11,1,2,11,7,1,7,5,1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,7,1,7,5,7,2,11,-1,-1,-1,-1,9,7,5,9,2,7,9,0,2,2,11,7,-1,-1,-1,-1,7,5,2,7,2,11,5,9,2,3,2,8,9,8,2,-1,2,5,10,2,3,
5,3,7,5,-1,-1,-1,-1,-1,-1,-1,8,2,0,8,5,2,8,7,5,10,2,5,-1,-1,-1,-1,9,0,1,5,10,3,5,3,7,3,10,2,-1,-1,-1,-1,9,8,2,9,2,1,8,7,2,10,2,5,7,5,2,-1,1,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,7,0,7,1,1,7,5,-1,-1,-1,-1,-1,-1,-1,9,0,3,9,3,5,5,3,7,-1,-1,-1,-1,-1,-1,-1,9,8,7,5,9,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,8,4,5,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,5,0,4,5,11,0,5,10,11,11,3,0,-1,-1,-1,-1,0,1,9,8,4,10,8,10,11,10,4,5,-1,-1,-1,-1,10,11,4,10,4,5,11,3,4,9,4,1,3,1,4,-1,2,5,1,2,8,5,2,11,8,4,5,8,-1,-1,-1,-1,0,4,11,
0,11,3,4,5,11,2,11,1,5,1,11,-1,0,2,5,0,5,9,2,11,5,4,5,8,11,8,5,-1,9,4,5,2,11,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,5,10,3,5,2,3,4,5,3,8,4,-1,-1,-1,-1,5,10,2,5,2,4,4,2,0,-1,-1,-1,-1,-1,-1,-1,3,10,2,3,5,10,3,8,5,4,5,8,0,1,9,-1,5,10,2,5,2,4,1,9,2,9,4,2,-1,-1,-1,-1,8,4,5,8,5,3,3,5,1,-1,-1,-1,-1,-1,-1,-1,0,4,5,1,0,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,4,5,8,5,3,9,0,5,0,3,5,-1,-1,-1,-1,9,4,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,11,7,4,9,11,9,10,11,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,7,9,11,7,9,10,11,-1,-1,-1,-1,
1,10,11,1,11,4,1,4,0,7,4,11,-1,-1,-1,-1,3,1,4,3,4,8,1,10,4,7,4,11,10,11,4,-1,4,11,7,9,11,4,9,2,11,9,1,2,-1,-1,-1,-1,9,7,4,9,11,7,9,1,11,2,11,1,0,8,3,-1,11,7,4,11,4,2,2,4,0,-1,-1,-1,-1,-1,-1,-1,11,7,4,11,4,2,8,3,4,3,2,4,-1,-1,-1,-1,2,9,10,2,7,9,2,3,7,7,4,9,-1,-1,-1,-1,9,10,7,9,7,4,10,2,7,8,7,0,2,0,7,-1,3,7,10,3,10,2,7,4,10,1,10,0,4,0,10,-1,1,10,2,8,7,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,7,1,3,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,0,8,1,8,7,1,-1,-1,-1,-1,4,0,3,7,4,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,
4,8,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,11,9,10,-1,-1,-1,-1,-1,-1,-1,0,1,10,0,10,8,8,10,11,-1,-1,-1,-1,-1,-1,-1,3,1,10,11,3,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,11,1,11,9,9,11,8,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,1,2,9,2,11,9,-1,-1,-1,-1,0,2,11,8,0,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,2,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,10,8,9,-1,-1,-1,-1,-1,-1,-1,9,10,2,0,9,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,0,1,8,1,10,8,-1,
-1,-1,-1,1,10,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,8,9,1,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,9,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,3,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]);NGL.MarchingCubes.cubeVerts=[[0,0,0],[1,0,0],[1,1,0],[0,1,0],[0,0,1],[1,0,1],[1,1,1],[0,1,1]];NGL.MarchingCubes.edgeIndex=[[0,1],[1,2],[2,3],[3,0],[4,5],[5,6],[6,7],[7,4],[0,4],[1,5],[2,6],[3,7]];
NGL.laplacianSmooth=function(a,b,c,d){NGL.time("NGL.laplacianSmooth");c=c||1;d=d||!0;var e=a.length/3,f=b.length/3;if(d){var g=new THREE.BufferGeometry;g.addAttribute("position",new THREE.BufferAttribute(a,3));g.addAttribute("index",new THREE.BufferAttribute(b,1))}for(var h=new Float32Array(3*e),k=Array(20),l=0;20>l;++l)k[l]=new Uint32Array(e);for(l=0;l<e;++l)k[0][l]=0;for(var m,n,q,l=0;l<f;++l){var p=3*l,t=3*l+1,r=3*l+2;q=!0;m=0;for(n=k[0][b[p]];m<n;++m)if(b[t]==k[m+1][b[p]]){q=!1;break}q&&(k[0][b[p]]++,
k[k[0][b[p]]][b[p]]=b[t]);q=!0;m=0;for(n=k[0][b[p]];m<n;++m)if(b[r]==k[m+1][b[p]]){q=!1;break}q&&(k[0][b[p]]++,k[k[0][b[p]]][b[p]]=b[r]);q=!0;m=0;for(n=k[0][b[t]];m<n;++m)if(b[p]==k[m+1][b[t]]){q=!1;break}q&&(k[0][b[t]]++,k[k[0][b[t]]][b[t]]=b[p]);q=!0;m=0;for(n=k[0][b[t]];m<n;++m)if(b[r]==k[m+1][b[t]]){q=!1;break}q&&(k[0][b[t]]++,k[k[0][b[t]]][b[t]]=b[r]);q=!0;for(m=0;m<k[0][b[r]];++m)if(b[p]==k[m+1][b[r]]){q=!1;break}q&&(k[0][b[r]]++,k[k[0][b[r]]][b[r]]=b[p]);q=!0;m=0;for(n=k[0][b[r]];m<n;++m)if(b[t]==
k[m+1][b[r]]){q=!1;break}q&&(k[0][b[r]]++,k[k[0][b[r]]][b[r]]=b[t])}f=.75/4.5;for(n=0;n<c;++n){for(l=0;l<e;++l)if(b=3*l,p=k[0][l],3>p)h[b]=a[b],h[b+1]=a[b+1],h[b+2]=a[b+2];else{if(3===p||4===p){h[b]=0;h[b+1]=0;for(m=h[b+2]=0;m<p;++m)q=3*k[m+1][l],h[b]+=a[q],h[b+1]+=a[q+1],h[b+2]+=a[q+2];h[b]+=.5*a[b];h[b+1]+=.5*a[b+1];h[b+2]+=.5*a[b+2];m=.5+p}else{h[b]=0;h[b+1]=0;for(m=h[b+2]=0;m<p;++m)q=3*k[m+1][l],h[b]+=a[q],h[b+1]+=a[q+1],h[b+2]+=a[q+2];h[b]+=1*a[b];h[b+1]+=1*a[b+1];h[b+2]+=1*a[b+2];m=1+p}h[b]/=
m;h[b+1]/=m;h[b+2]/=m}a.set(h);if(d)for(g.computeVertexNormals(),l=g.attributes.normal.array,m=3*e,b=0;b<m;b+=3)a[b]+=-1*f*l[b],a[b+1]+=-1*f*l[b+1],a[b+2]+=-1*f*l[b+2]}d&&g.dispose();NGL.timeEnd("NGL.laplacianSmooth")};
NGL.Worker.add("molsurf",function(a){NGL.time("WORKER molsurf");a=a.data;var b=a.params;a.atomSet&&(self.molsurf=new NGL.MolecularSurface((new NGL.AtomSet).fromJSON(a.atomSet)));a=self.molsurf;a.generateSurface(b.type,b.probeRadius,b.scaleFactor,b.smooth,b.lowRes);NGL.timeEnd("WORKER molsurf");var b={position:a.position,index:a.index,normal:a.normal},c=[a.position.buffer,a.index.buffer];a.normal&&c.push(a.normal.buffer);self.postMessage(b,c)});NGL.MolecularSurface=function(a){this.atomSet=a};
NGL.MolecularSurface.prototype={generateSurface:function(a,b,c,d,e){if(a!==this.__type||b!==this.__probeRadius||c!==this.__scaleFactor||d!==this.__smooth||e!==this.lowRes){var f=(new NGL.EDTSurface(this.atomSet)).getVolume(a,b,c,e);f.generateSurface(1,d);this.position=f.getPosition();this.normal=f.getNormal();this.index=f.getIndex();this.size=this.position.length/3;this.__type=a;this.__probeRadius=b;this.__scaleFactor=c;this.__smooth=d;this.__lowRes=e}},generateSurfaceWorker:function(a,b,c,d,e,f){if(a===
this.__type&&b===this.__probeRadius&&c===this.__scaleFactor&&d===this.__smooth&&e===this.__lowRes)f();else if(NGL.useWorker&&"undefined"!==typeof Worker&&"function"!==typeof importScripts){var g="NGL.MolecularSurface.generateSurfaceWorker "+a;NGL.time(g);var h=void 0;void 0===this.worker&&(h=this.atomSet.toJSON(),this.worker=NGL.Worker.make("molsurf"));this.worker.onerror=function(g){console.warn("NGL.MolecularSurface.generateSurfaceWorker error - trying without worker",g);this.worker.terminate();
this.worker=void 0;this.generateSurface(a,b,c,d,e);f()}.bind(this);this.worker.onmessage=function(h){NGL.timeEnd(g);this.position=h.data.position;this.normal=h.data.normal;this.index=h.data.index;this.size=this.position.length/3;this.__type=a;this.__probeRadius=b;this.__scaleFactor=c;this.__smooth=d;this.__lowRes=e;f()}.bind(this);this.worker.postMessage({atomSet:h,params:{type:a,probeRadius:b,scaleFactor:c,smooth:d,lowRes:e}})}else this.generateSurface(a,b,c,d,e),f()},getPosition:function(){return this.position},
getColor:function(a){a=new THREE.Color(a);return NGL.Utils.uniformArray3(this.size,a.r,a.g,a.b)},getNormal:function(){return this.normal},getIndex:function(){return this.index},dispose:function(){this.worker&&this.worker.terminate()}};
NGL.EDTSurface=function(a){function b(a){var b,c,d,g,h,k,l;for(l in u)if(g=u[l],!r[l])for(b=a?(g+e)*f+.5:g*f+.5,g=b*b,w[l]=Math.floor(b)+1,h=w[l],r[l]=new Int32Array(h*h),b=k=0;b<h;++b)for(c=0;c<h;++c)d=b*b+c*c,d>g?r[l][k]=-1:(d=Math.sqrt(g-d),r[l][k]=Math.floor(d)),++k}var c=a.atoms,d=a.getBoundingBox(),e,f,g,h,k,l,m,n,q,p,t,r,w,x,s,y,v,G,u,B=[new Int32Array([1,0,0]),new Int32Array([-1,0,0]),new Int32Array([0,1,0]),new Int32Array([0,-1,0]),new Int32Array([0,0,1]),new Int32Array([0,0,-1]),new Int32Array([1,
1,0]),new Int32Array([1,-1,0]),new Int32Array([-1,1,0]),new Int32Array([-1,-1,0]),new Int32Array([1,0,1]),new Int32Array([1,0,-1]),new Int32Array([-1,0,1]),new Int32Array([-1,0,-1]),new Int32Array([0,1,1]),new Int32Array([0,1,-1]),new Int32Array([0,-1,1]),new Int32Array([0,-1,-1]),new Int32Array([1,1,1]),new Int32Array([1,1,-1]),new Int32Array([1,-1,1]),new Int32Array([-1,1,1]),new Int32Array([1,-1,-1]),new Int32Array([-1,-1,1]),new Int32Array([-1,1,-1]),new Int32Array([-1,-1,-1])];this.getVolume=
function(z,E,A,O){NGL.time("NGL.EDTSurface.getVolume");var M="vws"!==z;O?(G="resname",u=NGL.ResidueRadii,c=a.getAtoms(new NGL.Selection(".CA"))):(G="element",u=NGL.VdwRadii,c=a.atoms);e=E||1.4;f=A||2;g=1/f*5.5;O&&(g+=10);h=(new THREE.Vector3).copy(d.min);k=(new THREE.Vector3).copy(d.max);M?(h.addScalar(-(e+g)),k.addScalar(e+g)):(h.addScalar(-g),k.addScalar(g));l=(new THREE.Vector3).copy(h).negate();h.multiplyScalar(f).floor().divideScalar(f);k.multiplyScalar(f).ceil().divideScalar(f);m=(new THREE.Vector3).subVectors(k,
h).multiplyScalar(f).ceil().addScalar(1);n=m.x;q=m.y;p=m.z;var H=256*Math.pow(10,6),R=p*q*n*3;H<=R&&(f*=Math.pow(H/R,1/3),h.multiplyScalar(f).floor().divideScalar(f),k.multiplyScalar(f).ceil().divideScalar(f),m=(new THREE.Vector3).subVectors(k,h).multiplyScalar(f).ceil().addScalar(1),n=m.x,q=m.y,p=m.z);t=new THREE.Matrix4;t.multiply((new THREE.Matrix4).makeRotationY(THREE.Math.degToRad(90)));t.multiply((new THREE.Matrix4).makeScale(-1/f,1/f,1/f));t.multiply((new THREE.Matrix4).makeTranslation(-f*
l.z,-f*l.y,-f*l.x));r={};w={};b(M);x=e*f;s=new Uint8Array(n*q*p);y=new Float64Array(n*q*p);v=new Int32Array(n*q*p);var I,D;I=0;for(D=s.length;I<D;++I)s[I]=0,y[I]=-1,v[I]=-1;I=0;for(D=c.length;I<D;++I)for(var N=I,S=void 0,U=void 0,P=void 0,Y=void 0,aa=void 0,fa=void 0,la=void 0,J=void 0,V=void 0,C=void 0,F=void 0,K=void 0,ba=void 0,na=void 0,ta=void 0,va=void 0,wa=void 0,xa=void 0,Ga=void 0,Aa=c[N],S=Math.floor(.5+f*(Aa.x+l.x)),U=Math.floor(.5+f*(Aa.y+l.y)),P=Math.floor(.5+f*(Aa.z+l.z)),ma=Aa[G],ua=
r[ma],ra=0,pa=q*p,C=0,Ga=w[ma];C<Ga;++C)for(F=0;F<Ga;++F){if(-1!=ua[ra])for(va=-1;2>va;++va)for(wa=-1;2>wa;++wa)for(xa=-1;2>xa;++xa)if(0!==va&&0!==wa&&0!==xa)for(la=va*C,V=xa*F,K=0;K<=ua[ra];++K)if(J=K*wa,ba=S+la,na=U+J,ta=P+V,!(0>ba||0>na||0>ta||ba>=n||na>=q||ta>=p)){var Ba=ba*pa+na*p+ta;if(s[Ba]&1){var Ma=c[v[Ba]],Y=Math.floor(.5+f*(Ma.x+l.x)),aa=Math.floor(.5+f*(Ma.y+l.y)),fa=Math.floor(.5+f*(Ma.z+l.z));la*la+J*J+V*V<Y*Y+aa*aa+fa*fa&&(v[Ba]=N)}else s[Ba]|=1,v[Ba]=N}ra++}I=0;for(D=s.length;I<D;++I)s[I]&
1&&(s[I]|=2);var Ha,Ia,Ja,ca=q*p;for(Ha=0;Ha<n;++Ha)for(Ia=0;Ia<p;++Ia)for(Ja=0;Ja<q;++Ja){var fb=Ha*ca+Ja*p+Ia;if(s[fb]&1)for(var Qa=0;26>Qa;){var gb=Ha+B[Qa][0],hb=Ia+B[Qa][2],ib=Ja+B[Qa][1];if(-1<gb&&gb<n&&-1<ib&&ib<q&&-1<hb&&hb<p&&!(s[gb*ca+ib*p+hb]&1)){s[fb]|=4;break}else Qa++}}if("ms"===z||"ses"===z){var ga,ya,za,sb,tb=new L(n,q,p),jb=q*p,zb=x*x,Ra=[],Ka=[],da;for(ga=0;ga<n;++ga)for(ya=0;ya<q;++ya)for(za=0;za<p;++za)if(da=ga*jb+ya*p+za,s[da]&=-3,s[da]&1&&s[da]&4){var ub={ix:ga,iy:ya,iz:za};
tb.set(ga,ya,za,ub);Ra.push(ub);y[da]=0;s[da]|=2;s[da]&=-5}do{var qa=Ra,Ca=tb,Da=void 0,Ea=void 0,sa=void 0,ha=void 0,ia=void 0,ja=void 0,ka=void 0,ea=void 0,Na=void 0,oa=void 0,Z=void 0,Q=void 0,La=[];if(0!==qa.length){for(var W=-1,X=-1,$=-1,kb=q*p,ka=0,Na=qa.length;ka<Na;++ka)for(Da=qa[ka].ix,Ea=qa[ka].iy,sa=qa[ka].iz,Z=Ca.get(Da,Ea,sa),ea=0;6>ea;++ea)W=Da+B[ea][0],X=Ea+B[ea][1],$=sa+B[ea][2],W<n&&-1<W&&X<q&&-1<X&&$<p&&-1<$&&(Q=W*kb+p*X+$,s[Q]&1&&!(s[Q]&2)?(Ca.set(W,X,sa+B[ea][2],Z),ha=W-Z.ix,ia=
X-Z.iy,ja=$-Z.iz,oa=ha*ha+ia*ia+ja*ja,y[Q]=oa,s[Q]|=2,s[Q]|=4,La.push({ix:W,iy:X,iz:$})):s[Q]&1&&s[Q]&2&&(ha=W-Z.ix,ia=X-Z.iy,ja=$-Z.iz,oa=ha*ha+ia*ia+ja*ja,oa<y[Q]&&(Ca.set(W,X,$,Z),y[Q]=oa,s[Q]&4||(s[Q]|=4,La.push({ix:W,iy:X,iz:$})))));ka=0;for(Na=qa.length;ka<Na;ka++)for(Da=qa[ka].ix,Ea=qa[ka].iy,sa=qa[ka].iz,Z=Ca.get(Da,Ea,sa),ea=6;18>ea;ea++)W=Da+B[ea][0],X=Ea+B[ea][1],$=sa+B[ea][2],W<n&&-1<W&&X<q&&-1<X&&$<p&&-1<$&&(Q=W*kb+p*X+$,s[Q]&1&&!(s[Q]&2)?(Ca.set(W,X,sa+B[ea][2],Z),ha=W-Z.ix,ia=X-Z.iy,
ja=$-Z.iz,oa=ha*ha+ia*ia+ja*ja,y[Q]=oa,s[Q]|=2,s[Q]|=4,La.push({ix:W,iy:X,iz:$})):s[Q]&1&&s[Q]&2&&(ha=W-Z.ix,ia=X-Z.iy,ja=$-Z.iz,oa=ha*ha+ia*ia+ja*ja,oa<y[Q]&&(Ca.set(W,X,$,Z),y[Q]=oa,s[Q]&4||(s[Q]|=4,La.push({ix:W,iy:X,iz:$})))));ka=0;for(Na=qa.length;ka<Na;ka++)for(Da=qa[ka].ix,Ea=qa[ka].iy,sa=qa[ka].iz,Z=Ca.get(Da,Ea,sa),ea=18;26>ea;ea++)W=Da+B[ea][0],X=Ea+B[ea][1],$=sa+B[ea][2],W<n&&-1<W&&X<q&&-1<X&&$<p&&-1<$&&(Q=W*kb+p*X+$,s[Q]&1&&!(s[Q]&2)?(Ca.set(W,X,sa+B[ea][2],Z),ha=W-Z.ix,ia=X-Z.iy,ja=$-
Z.iz,oa=ha*ha+ia*ia+ja*ja,y[Q]=oa,s[Q]|=2,s[Q]|=4,La.push({ix:W,iy:X,iz:$})):s[Q]&1&&s[Q]&2&&(ha=W-Z.ix,ia=X-Z.iy,ja=$-Z.iz,oa=ha*ha+ia*ia+ja*ja,oa<y[Q]&&(Ca.set(W,X,$,Z),y[Q]=oa,s[Q]&4||(s[Q]|=4,La.push({ix:W,iy:X,iz:$})))))}Ka=La;Ra=[];ga=0;for(sb=Ka.length;ga<sb;++ga)da=jb*Ka[ga].ix+p*Ka[ga].iy+Ka[ga].iz,s[da]&=-5,y[da]<=1.0404*zb&&Ra.push({ix:Ka[ga].ix,iy:Ka[ga].iy,iz:Ka[ga].iz})}while(0!==Ra.length);Math.max(0,f-.5);var Ab=e*e;for(ga=0;ga<n;++ga)for(ya=0;ya<q;++ya)for(za=0;za<p;++za)da=ga*jb+
ya*p+za,s[da]&=-5,s[da]&1&&(!(s[da]&2)||s[da]&2&&y[da]>=Ab)&&(s[da]|=4)}if("ses"===z){b(!1);var Fa,Va;Fa=0;for(Va=s.length;Fa<Va;++Fa)s[Fa]&=-3;Fa=0;for(Va=c.length;Fa<Va;++Fa)for(var vb=void 0,wb=void 0,xb=void 0,lb=void 0,mb=void 0,nb=void 0,ob=0,Wa=void 0,Xa=void 0,Ya=void 0,Za=void 0,$a=void 0,ab=void 0,bb=void 0,cb=void 0,db=void 0,Sa=void 0,Ta=void 0,Ua=void 0,pb=void 0,Oa=c[Fa],vb=Math.floor(.5+f*(Oa.x+l.x)),wb=Math.floor(.5+f*(Oa.y+l.y)),xb=Math.floor(.5+f*(Oa.z+l.z)),qb=Oa[G],Bb=q*p,bb=0,
pb=w[qb];bb<pb;++bb)for(cb=0;cb<pb;++cb){if(-1!=r[qb][ob])for(Sa=-1;2>Sa;++Sa)for(Ta=-1;2>Ta;++Ta)for(Ua=-1;2>Ua;++Ua)if(0!==Sa&&0!==Ta&&0!==Ua)for(Wa=Sa*bb,Ya=Ua*cb,db=0;db<=r[qb][ob];++db)if(Xa=db*Ta,Za=vb+Wa,$a=wb+Xa,ab=xb+Ya,!(0>Za||0>$a||0>ab||Za>=n||$a>=q||ab>=p)){var Pa=Za*Bb+$a*p+ab;if(s[Pa]&2){var rb=c[v[Pa]],lb=Math.floor(.5+f*(rb.x+l.x)),mb=Math.floor(.5+f*(rb.y+l.y)),nb=Math.floor(.5+f*(rb.z+l.z));Wa*Wa+Xa*Xa+Ya*Ya<lb*lb+mb*mb+nb*nb&&(v[Pa]=Oa.index)}else s[Pa]|=2,v[Pa]=Oa.index}ob++}}var eb=
s.length;if("vws"===z)for(var T=0;T<eb;++T)s[T]&=-5,s[T]=s[T]&2?1:0;else if("ms"===z)for(T=0;T<eb;++T)s[T]&=-3,s[T]&4&&(s[T]|=2),s[T]&=-5,s[T]=s[T]&2?1:0;else if("ses"===z)for(T=0;T<eb;++T)s[T]&4&&s[T]&2?s[T]&=-5:s[T]&4&&!(s[T]&2)&&(s[T]|=2),s[T]=s[T]&2?1:0;else if("sas"===z)for(T=0;T<eb;++T)s[T]&=-5,s[T]=s[T]&2?1:0;var yb=new NGL.Volume(z,"",s,p,q,n);yb.matrix.copy(t);NGL.timeEnd("NGL.EDTSurface.getVolume");return yb};var L=function(a,b,c){var d=new Int32Array(a*b*c*3);this.set=function(a,e,f,g){a=
3*((a*b+e)*c+f);d[a]=g.ix;d[a+1]=g.iy;d[a+2]=g.iz};this.get=function(a,e,f){a=3*((a*b+e)*c+f);return{ix:d[a],iy:d[a+1],iz:d[a+2]}}}};NGL.Script=function(a,b,c){var d=signals;this.signals={elementAdded:new d.Signal,nameChanged:new d.Signal};this.name=b;this.path=c;this.dir=c.substring(0,c.lastIndexOf("/")+1);try{this.fn=new Function("stage","panel","__name__","__path__","__dir__",Object.keys(NGL.makeScriptHelper()).join(","),a)}catch(e){NGL.error("NGL.Script compilation failed",e),this.fn=null}};
NGL.Script.prototype={constructor:NGL.Script,call:function(a,b){function c(){"function"===typeof b&&b()}var d=this,e={add:function(a){d.signals.elementAdded.dispatch(arguments)},setName:function(a){d.signals.nameChanged.dispatch(a)}},f=new NGL.ScriptQueue(a,this.dir,b),g=NGL.makeScriptHelper(a,f,e);if(this.fn){var h=[a,e,this.name,this.path,this.dir];try{var k=[];Object.keys(g).forEach(function(a){k.push(g[a])});this.fn.apply(null,h.concat(k))}catch(l){NGL.error("NGL.Script.fn",l)}}else NGL.log("NGL.Script.call no function available");
f.then(c,function(){e.add(new UI.Text("ERROR"));c()})}};NGL.ScriptQueue=function(a,b,c){this.stage=a;this.dir=b||"";this.onFinish=c;this.promise=new Promise(function(a,b){a()})};
NGL.ScriptQueue.prototype={constructor:NGL.ScriptQueue,load:function(a,b){var c={},d=this.dir+a,e,f=b||{};"function"===typeof b?(e=b,f={}):e=f.onLoad;f.onLoad=function(a){a.requestGuiVisibility(!1);"function"===typeof e&&e(a);c.resolve?c.resolve():c.success=!0};f.onError=function(a){c.reject?c.reject(a):c.error=a||"error"};this.stage.loadFile(d,f);var g=function(a,b){!0===c.success?a():void 0!==c.error?b(c.error):(c.resolve=a,c.reject=b)};this.promise=this.promise.then(function(){return new Promise(g)})},
then:function(a,b){this.promise=this.promise.then(a,function(a){NGL.error("NGL.ScriptQueue.then",a);"function"===typeof b&&b()})}};
NGL.makeScriptHelper=function(a,b,c){function d(a){a.setVisibility(!1)}function e(a,b){b&&d();a.setVisibility(!0)}function f(a){a=void 0===a?1:a;for(var b=0;b<a;++b)c.add(new UI.Break)}var g=NGL.unicodeHelper;return{load:function(){b.load.apply(b,arguments)},then:function(){b.then.apply(b,arguments)},components:function(b){return a.getComponentsByName(b)},representations:function(b){return a.getRepresentationsByName(b)},structures:function(b){return a.getComponentsByName(b,NGL.StructureComponent)},
color:function(a,b){b.setColor(a)},visibility:function(a,b){b.setVisibility(a)},hide:d,show:e,superpose:function(a,b,c,d,e,f,g){a.superpose(b,c,d,e,f,g)},uiText:function(a,b){var d=new UI.Text(g(a));c.add(d);b&&f(1);return d},uiHtml:function(a,b){var d=new UI.Html(g(a));c.add(d);b&&f(1);return d},uiBreak:f,uiSelect:function(a,b){if(Array.isArray(a)){var d={};a.forEach(function(a){d[a]=a});a=d}var e=(new UI.Select).setOptions(a).onChange(b);c.add(e);return e},uiButton:function(a,b){var d=(new UI.Button(g(a))).onClick(function(){b(d)});
c.add(d);return d},uiOpenButton:function(a,b,d){a=(new UI.Button(g(a))).onClick(function(){NGL.open(b,d)});c.add(a);return a},uiDownloadButton:function(a,b,d){a=(new UI.Button(g(a))).onClick(function(){NGL.download(b(),d)});c.add(a);return a},uiToggleButton:function(a,b,d,e){var f=!0,q=(new UI.Button(g(b))).onClick(function(){f?(f=!1,q.setLabel(g(a)),e()):(f=!0,q.setLabel(g(b)),d())});c.add(q);return q},uiVisibilitySelect:function(b){function f(){var a=[];g.forEach(function(b){b.visible&&a.push(b.name)});
return a}var g=b.list,m={"":"[show]"};g.forEach(function(a){m[a.name]=a.name;a.signals.visibilityChanged.add(function(){var b=f();b.length===g.length?n.setValue(""):a.visible?n.setValue(a.name):n.setValue(b[0])})});var n=(new UI.Select).setOptions(m).onChange(function(){var c=n.getValue();""===c?e(b):(d(b),e(a.getAnythingByName(c)))});c.add(n);return n},uiVisibilityButton:function(a,b){function d(){var a=!1;e.forEach(function(b){b.visible&&(a=!0)});return a}a=g(a?a:"all");b=b||new NGL.Collection;
var e=b.list;e.forEach(function(b){b.signals.visibilityChanged.add(function(){f.setLabel((d()?"hide ":"show ")+a)})});var f=(new UI.Button((d()?"hide ":"show ")+a)).onClick(function(){var a=!d();b.setVisibility(a)});c.add(f);return f},uiPlayButton:function(a,b,d,e,f,q){b=b.trajectory;a=g(a);var p=new NGL.TrajectoryPlayer(b,d,e,f,q);p.mode="once";var t=(new UI.Button("play "+a)).onClick(function(){p.toggle()});p.signals.startedRunning.add(function(){t.setLabel("pause "+a)});p.signals.haltedRunning.add(function(){t.setLabel("play "+
a)});c.add(t);return t}}};NGL.Streamer=function(a,b){var c=b||{};this.compressed=void 0!==c.compressed?c.compressed:!1;this.src=a;this.chunkSize=10485760;this.newline="\n";this.__pointer=0;this.__partialLine="";this.__srcName&&(this[this.__srcName]=a)};NGL.Streamer.prototype.constructor=NGL.Streamer;
NGL.Streamer.prototype={constructor:NGL.Streamer,type:"",__srcName:void 0,onload:function(){},onprogress:function(){},onerror:function(){},read:function(a){this._read(function(b){if(this.compressed)NGL.decompressWorker(b,"foo."+this.compressed,!0,function(b){this.data=b;if("function"===typeof this.onload)this.onload(this.data);a()}.bind(this));else{b instanceof ArrayBuffer&&(b=new Uint8Array(b));this.data=b;if("function"===typeof this.onload)this.onload(this.data);a()}}.bind(this))},_read:function(a){a(this.src)},
_chunk:function(a,b){return this.data.subarray(a,b)},chunk:function(a){return this._chunk(a,a+this.chunkSize)},peekLines:function(a){var b=this.data,c=b.length,d=this.newline.charCodeAt(0),e,f=0;for(e=0;e<c&&(b[e]===d&&++f,f!==a);++e);a=this._chunk(0,e+1);return this.chunkToLines(a,"",e>c).lines},lineCount:function(){for(var a=this.data,b=a.length,c=this.newline.charCodeAt(0),d=0,e=0;e<b;++e)a[e]===c&&++d;a[b-1]!==c&&++d;return d},chunkCount:function(){return Math.floor(this.data.length/this.chunkSize)+
1},asText:function(){return NGL.Uint8ToString(this.data)},chunkToLines:function(a,b,c){var d=this.newline;a=NGL.Uint8ToString(a);var e=[],f=a.lastIndexOf(d);-1===f?b+=a:(b+=a.substr(0,f),e=e.concat(b.split(d)),b=f===a.length-d.length?"":a.substr(f+d.length));c&&""!==b&&e.push(b);return{lines:e,partialLine:b}},nextChunk:function(){var a=this.__pointer;if(!(a>this.data.length))return this.__pointer+=this.chunkSize,this.chunk(a)},nextChunkOfLines:function(){var a=this.nextChunk();if(void 0!==a)return a=
this.chunkToLines(a,this.__partialLine,this.__pointer>this.data.length),this.__partialLine=a.partialLine,a.lines},eachChunk:function(a){for(var b=this.chunkSize,c=this.data.length,d=this.chunkCount(),e=0;e<c;e+=b){var f=this.chunk(e),g=Math.round(e/b);a(f,g,d)}},eachChunkOfLines:function(a){var b="";this.eachChunk(function(c,d,e){c=this.chunkToLines(c,b,d===e+1);b=c.partialLine;a(c.lines,d,e)}.bind(this))},eachChunkOfLinesAsync:function(a,b){var c=this;async.timesSeries(c.chunkCount(),function(b,
e){NGL.processArray(c.nextChunkOfLines(),a,e)},b)},toJSON:function(){var a=this.type.substr(0,1).toUpperCase()+this.type.substr(1),a={metadata:{version:.1,type:a+"Streamer",generator:a+"StreamerExporter"},src:this.src,compressed:this.compressed,chunkSize:this.chunkSize,newline:this.newline};this.__srcName&&(a[this.__srcName]=this[this.__srcName]);return a},fromJSON:function(a){this.src=a.src;this.compressed=a.compressed;this.chunkSize=a.chunkSize;this.newline=a.newline;this.__srcName&&(this[this.__srcName]=
a[this.__srcName]);return this},getTransferable:function(){return[]},dispose:function(){delete this.src;this.__srcName&&delete this[this.__srcName]}};NGL.NetworkStreamer=function(a,b){NGL.Streamer.call(this,a,b)};
NGL.NetworkStreamer.prototype=NGL.createObject(NGL.Streamer.prototype,{constructor:NGL.NetworkStreamer,type:"network",__srcName:"url",_read:function(a){var b=this.src;"function"===typeof importScripts&&"../"===b.substr(0,3)&&(b="../"+b);var c=new XMLHttpRequest;c.open("GET",b,!0);c.addEventListener("load",function(b){if(200===c.status||304===c.status)a(c.response);else if("function"===typeof this.onerror)this.onerror(c.status)}.bind(this),!1);"function"===typeof this.onprogress&&c.addEventListener("progress",
function(a){this.onprogress(a)}.bind(this),!1);"function"===typeof this.onerror&&c.addEventListener("error",function(a){this.onerror(a)}.bind(this),!1);c.responseType="arraybuffer";try{c.send(null)}catch(d){if("function"===typeof this.onerror)this.onerror(d.message)}}});NGL.FileStreamer=function(a,b){NGL.Streamer.call(this,a,b)};
NGL.FileStreamer.prototype=NGL.createObject(NGL.Streamer.prototype,{constructor:NGL.FileStreamer,type:"file",__srcName:"file",_read:function(a){var b=new FileReader;b.onload=function(b){a(b.target.result)}.bind(this);"function"===typeof this.onprogress&&(b.onprogress=function(a){this.onprogress(a)}.bind(this));"function"===typeof this.onerror&&(b.onerror=function(a){this.onerror(a)}.bind(this));b.readAsArrayBuffer(this.file)}});NGL.StringStreamer=function(a,b){NGL.Streamer.call(this,a,b)};
NGL.StringStreamer.prototype=NGL.createObject(NGL.Streamer.prototype,{constructor:NGL.StringStreamer,type:"string",__srcName:"str",_chunk:function(a,b){return this.data.substr(a,b)}});NGL.BinaryStreamer=function(a,b){a instanceof ArrayBuffer&&(a=new Uint8Array(a));NGL.Streamer.call(this,a,b)};
NGL.BinaryStreamer.prototype=NGL.createObject(NGL.Streamer.prototype,{constructor:NGL.BinaryStreamer,type:"binary",__srcName:"bin",getTransferable:function(){var a=NGL.Streamer.prototype.getTransferable.call(this);this.bin instanceof Uint8Array&&a.push(this.bin.buffer);return a}});
NGL.buildStructure=function(a,b){NGL.time("NGL.buildStructure");var c,d,e,f,g,h,k=null,l,m;NGL.processArray(a.atoms,function(b,q,p){for(g=b;g<q;++g){f=p[g];b=f.modelindex;var t=f.chainname,r=f.resno,w=f.resname;k!==b?(c=a.addModel(),h={},d=c.addChain(),d.chainname=t,h[t]=d,e=d.addResidue(),e.resno=r,e.resname=w):l!==t?(h[t]?d=h[t]:(d=c.addChain(),d.chainname=t,h[t]=d),e=d.addResidue(),e.resno=r,e.resname=w):m!==r&&(e=d.addResidue(),e.resno=r,e.resname=w);e.addAtom(f);k=b;l=t;m=r}},function(){NGL.GidPool.updateObject(a);
NGL.timeEnd("NGL.buildStructure");NGL.debug&&NGL.log(a);b()});return a};
NGL.createAtomArray=function(a,b){NGL.time("NGL.createAtomArray");var c=a.atoms;a.atomArray=new NGL.AtomArray(c.length);var d=a.atomArray;NGL.processArray(c,function(a,b){for(var g=a;g<b;++g){var h=c[g],k=new NGL.ProxyAtom(d,g);d.setResname(g,h.resname);d.x[g]=h.x;d.y[g]=h.y;d.z[g]=h.z;d.setElement(g,h.element);d.hetero[g]=h.hetero;d.setChainname(g,h.chainname);d.resno[g]=h.resno;d.serial[g]=h.serial;d.setAtomname(g,h.atomname);d.ss[g]=h.ss.charCodeAt(0);d.bfactor[g]=h.bfactor;d.altloc[g]=h.altloc.charCodeAt(0);
d.vdw[g]=h.vdw;d.covalent[g]=h.covalent;d.modelindex[g]=h.modelindex;d.usedLength+=1;h.bonds.length&&(k.bonds=h.bonds,k.bonds.forEach(function(a){a.atom1.index===k.index?a.atom1=k:a.atom2.index===k.index?a.atom2=k:NGL.warn("NGL.createAtomArray: bond atom not found")}));c[g]=k}},function(){NGL.timeEnd("NGL.createAtomArray");b()},5E4);return a};
NGL.assignSecondaryStructure=function(a,b){NGL.time("NGL.assignSecondaryStructure");var c=a.helices||[];a.eachModel(function(a){var b=0,d=c.length;if(0!==d){var h=c[b],k=!1,l=!1;a.eachChain(function(a){var e=!1;if(a.chainname===h[0])for(var q=0,p=a.residueCount,q=0;q<p;++q){var t=a.residues[q];if(e||l)break;k&&(t.ss=h[4],t.resno===h[3]&&(k=!1,b+=1,b<d?(h=c[b],e=a.chainname!==h[0]):l=!0));t.resno===h[1]&&(k=!0,t.ss=h[4])}})}});var d=a.sheets||[];d.sort(function(a,b){var c=a[0],d=b[0],k=c.length,l=
d.length;if(k<l)return-1;if(k>l)return 1;for(--k;0<=k;--k){if(c[k]<d[k])return-1;if(c[k]>d[k])return 1}return 0});a.eachModel(function(a){var b=0,c=d.length;if(0!==c){var h=d[b],k=!1,l=!1;a.eachChain(function(a){var e=!1;if(a.chainname===h[0])for(var q=0,p=a.residueCount,q=0;q<p;++q){var t=a.residues[q];if(e||l)break;k&&(t.ss="s",t.resno===h[3]&&(k=!1,b+=1,b<c?(q=0,h=d[b],e=a.chainname!==h[0]):l=!0));t.resno===h[1]&&(k=!0,t.ss="s")}})}});NGL.timeEnd("NGL.assignSecondaryStructure");b();return a};
NGL.buildUnitcellAssembly=function(a,b){function c(a,b){b=b||"";var c={};Object.keys(g).forEach(function(e){var t=g[e].clone();k.copy(f).applyMatrix4(t);l.setFromMatrixPosition(t);l.sub(h);1<k.x&&--l.x;0>k.x&&(l.x+=1);1<k.y&&--l.y;0>k.y&&(l.y+=1);1<k.z&&--l.z;0>k.z&&(l.z+=1);a&&l.add(a);t.setPosition(l);t.multiplyMatrices(d.fracToCart,t);t.multiply(d.cartToFrac);c[e+b]=t});return c}var d=a.unitcell,e=a.biomolDict,f=a.atomCenter().applyMatrix4(d.cartToFrac),g=NGL.getSymmetryOperations(d.spacegroup),
h=new THREE.Vector3,k=new THREE.Vector3,l=new THREE.Vector3;1<f.x&&--h.x;0>f.x&&(h.x+=1);1<f.y&&--h.y;0>f.y&&(h.y+=1);1<f.z&&--h.z;0>f.z&&(h.z+=1);e.UNITCELL={matrixDict:c(),chainList:void 0};e.SUPERCELL={matrixDict:Object.assign({},c(),c(new THREE.Vector3(1,1,1),"_666"),c(new THREE.Vector3(-1,-1,-1),"_444"),c(new THREE.Vector3(1,0,0),"_655"),c(new THREE.Vector3(1,1,0),"_665"),c(new THREE.Vector3(1,0,1),"_656"),c(new THREE.Vector3(0,1,0),"_565"),c(new THREE.Vector3(0,1,1),"_566"),c(new THREE.Vector3(0,
0,1),"_556"),c(new THREE.Vector3(-1,0,0),"_455"),c(new THREE.Vector3(-1,-1,0),"_445"),c(new THREE.Vector3(-1,0,-1),"_454"),c(new THREE.Vector3(0,-1,0),"_545"),c(new THREE.Vector3(0,-1,-1),"_544"),c(new THREE.Vector3(0,0,-1),"_554"),c(new THREE.Vector3(1,-1,-1),"_644"),c(new THREE.Vector3(1,1,-1),"_664"),c(new THREE.Vector3(1,-1,1),"_646"),c(new THREE.Vector3(-1,1,1),"_466"),c(new THREE.Vector3(-1,-1,1),"_446"),c(new THREE.Vector3(-1,1,-1),"_464"),c(new THREE.Vector3(0,1,-1),"_564"),c(new THREE.Vector3(0,
-1,1),"_546"),c(new THREE.Vector3(1,0,-1),"_654"),c(new THREE.Vector3(-1,0,1),"_456"),c(new THREE.Vector3(1,-1,0),"_645"),c(new THREE.Vector3(-1,1,0),"_465")),chainList:void 0};b();return a};NGL.Worker.add("parse",function(a){NGL.time("WORKER parse");var b=NGL.fromJSON(a.data);b.parse(function(){NGL.timeEnd("WORKER parse");b.streamer.dispose();self.postMessage(b.toJSON(),b.getTransferable())})});NGL.Parser=function(a,b){var c=b||{};this.streamer=a;this.name=c.name;this.path=c.path};
NGL.Parser.prototype={constructor:NGL.Parser,type:"",__objName:"",parse:function(a){var b=this;async.series([function(a){b.streamer.read(a)},function(a){b._beforeParse(a)},function(a){b._parse(a)},function(a){b._afterParse(a)}],function(){a(this[this.__objName])}.bind(this));return this[this.__objName]},parseWorker:function(a){if(NGL.useWorker&&"undefined"!==typeof Worker&&"function"!==typeof importScripts){var b="NGL.Parser.parseWorker "+this.name;NGL.time(b);var c=NGL.Worker.make("parse",{onerror:function(b){console.warn("NGL.Parser.parseWorker error - trying without worker",
b);c.terminate();this.parse(a)}.bind(this),onmessage:function(d){NGL.timeEnd(b);NGL.debug&&NGL.log(d.data);c.terminate();this.fromJSON(d.data);this._afterWorker(a)}.bind(this),messageData:[this.toJSON(),this.getTransferable()]})}else this.parse(a);return this[this.__objName]},_parse:function(a){NGL.warn("NGL.Parser._parse not implemented");a()},_beforeParse:function(a){a()},_afterParse:function(a){a()},_afterWorker:function(a){a(this[this.__objName])},toJSON:function(){var a=this.type.substr(0,1).toUpperCase()+
this.type.substr(1),a={metadata:{version:.1,type:a+"Parser",generator:a+"ParserExporter"},streamer:this.streamer.toJSON(),name:this.name,path:this.path};a[this.__objName]="function"===typeof this[this.__objName].toJSON?this[this.__objName].toJSON():this[this.__objName];return a},fromJSON:function(a){this.streamer=NGL.fromJSON(a.streamer);this.name=a.name;this.path=a.path;"function"===typeof this[this.__objName].toJSON?this[this.__objName].fromJSON(a[this.__objName]):this[this.__objName]=a[this.__objName];
return this},getTransferable:function(){var a=[],a=a.concat(this.streamer.getTransferable());"function"===typeof this[this.__objName].toJSON&&(a=a.concat(this[this.__objName].getTransferable()));return a}};NGL.useAtomArrayThreshold=1E3;NGL.StructureParser=function(a,b){var c=b||{};this.firstModelOnly=c.firstModelOnly||!1;this.asTrajectory=c.asTrajectory||!1;this.cAlphaOnly=c.cAlphaOnly||!1;NGL.Parser.call(this,a,c);this.structure=new NGL.Structure(this.name,this.path)};
NGL.StructureParser.prototype=NGL.createObject(NGL.Parser.prototype,{constructor:NGL.StructureParser,type:"structure",__objName:"structure",_afterParse:function(a){var b=this;async.series([function(a){!b.structure.atomArray&&b.structure.atoms.length>NGL.useAtomArrayThreshold?NGL.createAtomArray(b.structure,a):a()},function(a){NGL.buildStructure(b.structure,a)},function(a){NGL.assignSecondaryStructure(b.structure,a)},function(a){NGL.buildUnitcellAssembly(b.structure,a)},function(a){b._postProcess(a)},
function(a){var d=b.structure;0===d.helices.length&&0===d.sheets.length&&(d._doAutoSS=!0);var e=!0;d.eachChain(function(a){a.chainname&&(e=!1)});d._doAutoChainName=e;b.structure.postProcess(a)}],function(){a()})},_afterWorker:function(a){NGL.buildStructure(this.structure,function(){a(this[this.__objName])}.bind(this))},_postProcess:function(a){a()},toJSON:function(){var a=NGL.Parser.prototype.toJSON.call(this);a.firstModelOnly=this.firstModelOnly;a.asTrajectory=this.asTrajectory;a.cAlphaOnly=this.cAlphaOnly;
return a},fromJSON:function(a){NGL.Parser.prototype.fromJSON.call(this,a);this.firstModelOnly=a.firstModelOnly;this.asTrajectory=a.asTrajectory;this.cAlphaOnly=a.cAlphaOnly;return this}});NGL.PdbParser=function(a,b){NGL.StructureParser.call(this,a,b)};
NGL.PdbParser.prototype=NGL.createObject(NGL.StructureParser.prototype,{constructor:NGL.PdbParser,type:"pdb",_parse:function(a){var b="NGL.PdbParser._parse "+this.name;NGL.time(b);var c=this.structure,d=this.firstModelOnly,e=this.asTrajectory,f=this.cAlphaOnly,g=c.frames,h=c.boxes,k=!1,l,m,n=c.title,q=c.atoms,p=c.bondSet,t=c.helices,r=c.sheets,w=c.biomolDict,x,s=NGL.guessElement,y=NGL.CovalentRadii,v=NGL.VdwRadii,G=NGL.HelixTypes,u,B,L,z,E,A,O,M,H,R,I,D={},N={};c.hasConnect=!1;var S,U=this.streamer.lineCount();
U>NGL.useAtomArrayThreshold&&(S=new NGL.AtomArray(U),c.atomArray=S);var P=0,Y=0;this.streamer.eachChunkOfLinesAsync(function(a,b,U){for(;a<b;++a)if(u=U[a],B=u.substr(0,6),"ATOM  "===B||"HETATM"===B){if(!(d&&0<Y||(O=u.substr(12,4).trim(),f&&"CA"!==O))){var J=parseFloat(u.substr(30,8)),V=parseFloat(u.substr(38,8)),C=parseFloat(u.substr(46,8));if(e){var F=3*m;l[F+0]=J;l[F+1]=V;l[F+2]=C;m+=1;if(k)continue}L=parseInt(u.substr(6,5));M=u.substr(76,2).trim();H="H"===u[0]?1:0;z=u[21].trim();E=parseInt(u.substr(22,
5));A=u.substr(17,4).trim();R=parseFloat(u.substr(60,8));I=u[16].trim();M||(M=s(O));var K;S?(K=new NGL.ProxyAtom(S,P),S.setResname(P,A),S.x[P]=J,S.y[P]=V,S.z[P]=C,S.setElement(P,M),S.hetero[P]=H,S.setChainname(P,z),S.resno[P]=E,S.serial[P]=L,S.setAtomname(P,O),S.ss[P]=99,S.bfactor[P]=R,S.altloc[P]=I.charCodeAt(0),S.vdw[P]=v[M],S.covalent[P]=y[M],S.modelindex[P]=Y,S.usedLength+=1):(K=new NGL.Atom,K.index=P,K.resname=A,K.x=J,K.y=V,K.z=C,K.element=M,K.hetero=H,K.chainname=z,K.resno=E,K.serial=L,K.atomname=
O,K.ss="c",K.bfactor=R,K.altloc=I,K.vdw=v[M],K.covalent=y[M],K.modelindex=Y);D[L]=K;P+=1;q.push(K)}}else if("CONECT"===B){if(C=D[parseInt(u.substr(6,5))],J=[11,16,21,26],void 0!==C){for(F=0;4>F;F++)V=parseInt(u.substr(J[F],5)),Number.isNaN(V)||(V=D[V],void 0!==V&&p.addBond(C,V));c.hasConnect=!0}}else if("HELIX "===B){var C=u[19].trim(),F=parseInt(u.substr(21,4)),J=u[31].trim(),V=parseInt(u.substr(33,4)),ba=parseInt(u.substr(39,1)),ba=G[ba]||G[""];t.push([C,F,J,V,ba])}else if("SHEET "===B)C=u[21].trim(),
F=parseInt(u.substr(22,4)),J=u[32].trim(),V=parseInt(u.substr(33,4)),r.push([C,F,J,V]);else if("REMARK"===B&&"350"===u.substr(7,3))"BIOMOLECULE:"===u.substr(11,12)?(C=u.substr(23).trim(),/^(0|[1-9][0-9]*)$/.test(C)&&(C="BU"+C),w[C]={matrixDict:{},chainList:[]},x=w[C]):"BIOMT"===u.substr(13,5)?(C=u.split(/\s+/),F=parseInt(u[18])-1,J=C[3].trim(),0===F&&(x.matrixDict[J]=new THREE.Matrix4),J=x.matrixDict[J].elements,J[0+F]=parseFloat(C[4]),J[4+F]=parseFloat(C[5]),J[8+F]=parseFloat(C[6]),J[12+F]=parseFloat(C[7])):
"APPLY THE FOLLOWING TO CHAINS:"!==u.substr(11,30)&&"                   AND CHAINS:"!==u.substr(11,30)||u.substr(41,30).split(",").forEach(function(a){(a=a.trim())&&x.chainList.push(a)});else if("HEADER"===B)u.substr(62,4);else if("TITLE "===B)n+=u.substr(10,70)+"\n";else if("MODEL "===B)e?(k?(l=new Float32Array(3*q.length),g.push(l)):l=[],m=0):K&&(d||(D={}));else if("ENDMDL"===B)e&&!k&&(g.push(new Float32Array(l)),k=!0),Y+=1;else if("MTRIX"===u.substr(0,5))C=u.split(/\s+/),J=C[1].trim(),"1"===u[5]&&
"1"===J&&(w.NCS={matrixDict:{},chainList:void 0},x=w.NCS),F=parseInt(u[5])-1,0===F&&(x.matrixDict[J]=new THREE.Matrix4),J=x.matrixDict[J].elements,J[0+F]=parseFloat(C[2]),J[4+F]=parseFloat(C[3]),J[8+F]=parseFloat(C[4]),J[12+F]=parseFloat(C[5]);else if("ORIGX"===u.substr(0,5))N.origx||(N.origx=new THREE.Matrix4),C=u.split(/\s+/),F=parseInt(u[5])-1,J=N.origx.elements,J[0+F]=parseFloat(C[1]),J[4+F]=parseFloat(C[2]),J[8+F]=parseFloat(C[3]),J[12+F]=parseFloat(C[4]);else if("SCALE"===u.substr(0,5))N.scale||
(N.scale=new THREE.Matrix4),C=u.split(/\s+/),F=parseInt(u[5])-1,J=N.scale.elements,J[0+F]=parseFloat(C[1]),J[4+F]=parseFloat(C[2]),J[8+F]=parseFloat(C[3]),J[12+F]=parseFloat(C[4]);else if("CRYST1"===B){K=parseFloat(u.substr(6,9));var F=parseFloat(u.substr(15,9)),J=parseFloat(u.substr(24,9)),V=parseFloat(u.substr(33,7)),ba=parseFloat(u.substr(40,7)),na=parseFloat(u.substr(47,7)),ta=u.substr(55,11).trim(),C=parseInt(u.substr(66,4)),C=new Float32Array(9);C[0]=K;C[4]=F;C[8]=J;h.push(C);0===Y&&(N.a=K,
N.b=F,N.c=J,N.alpha=V,N.beta=ba,N.gamma=na,N.spacegroup=ta)}},function(){c.unitcell=new NGL.Unitcell(N.a,N.b,N.c,N.alpha,N.beta,N.gamma,N.spacegroup,N.scale);NGL.timeEnd(b);a()})}});NGL.GroParser=function(a,b){NGL.StructureParser.call(this,a,b);this.structure._doAutoSS=!0;this.structure._doAutoChainName=!0};
NGL.GroParser.prototype=NGL.createObject(NGL.StructureParser.prototype,{constructor:NGL.GroParser,type:"gro",_parse:function(a){var b="NGL.GroParser._parse "+this.name;NGL.time(b);var c=this.structure,d=this.firstModelOnly,e=this.asTrajectory,f=this.cAlphaOnly,g=c.frames,h=c.boxes,k,l,m=c.atoms,n=NGL.guessElement,q=NGL.CovalentRadii,p=NGL.VdwRadii,t=this.streamer.peekLines(3);c.title=t[0].trim();var r=5+(t[2].length-t[2].lastIndexOf(".")-1),w=20+r,x=20+2*r,s,y,v,G,u,B=parseInt(t[1]),L=B+3,z,t=this.streamer.lineCount();
t>NGL.useAtomArrayThreshold&&(z=new NGL.AtomArray(t),c.atomArray=z);var E=0,A=0,O=0;this.streamer.eachChunkOfLinesAsync(function(a,b,c){for(;a<b;++a){++O;var t=O-1,D=c[a];if(D)if(0===t%L)e&&(k=new Float32Array(3*B),g.push(k),l=0);else if(1!==t%L)if(t%L===L-1){D.trim().split(/\s+/);var N=new Float32Array(9);N[0]=10*parseFloat(N[0]);N[4]=10*parseFloat(N[1]);N[8]=10*parseFloat(N[2]);h.push(N);if(d)return!0;A+=1}else if(s=D.substr(10,5).trim(),!f||"CA"===s){var N=10*parseFloat(D.substr(20,r)),S=10*parseFloat(D.substr(w,
r)),U=10*parseFloat(D.substr(x,r));if(e){var P=3*l;k[P+0]=N;k[P+1]=S;k[P+2]=U;l+=1;if(t>L)continue}y=D.substr(5,5).trim();v=n(s);G=parseInt(D.substr(0,5));u=parseInt(D.substr(15,5));z?(t=new NGL.ProxyAtom(z,E),z.setResname(E,y),z.x[E]=N,z.y[E]=S,z.z[E]=U,z.setElement(E,v),z.setChainname(E,""),z.resno[E]=G,z.serial[E]=u,z.setAtomname(E,s),z.ss[E]=99,z.setAltloc(E,""),z.vdw[E]=p[v],z.covalent[E]=q[v],z.modelindex[E]=A,z.usedLength+=1):(t=new NGL.Atom,t.index=E,t.resname=y,t.x=N,t.y=S,t.z=U,t.element=
v,t.chainname="",t.resno=G,t.serial=u,t.atomname=s,t.ss="c",t.altloc="",t.vdw=p[v],t.covalent=q[v],t.modelindex=A);E+=1;m.push(t)}}},function(){NGL.timeEnd(b);a()})}});NGL.CifParser=function(a,b){NGL.StructureParser.call(this,a,b)};
NGL.CifParser.prototype=NGL.createObject(NGL.StructureParser.prototype,{constructor:NGL.CifParser,type:"cif",_parse:function(a){function b(a,b,c){for(;a<b;++a)if(r=c[a].trim(),!r&&!v||"#"===r[0])u=B=v=!1,L.length=0,O=A=E=z=null,M.length=0,H.length=0;else if("data_"===r.substring(0,5))r.substring(5);else if(";"===r[0])v?(B?(z===L.length&&(z=0),L[z].push(G),z+=1):y[E][A]=G,v=!1,G=null):(v=!0,G=r.substring(1));else if("loop_"===r)B=!0,L.length=0,z=H.length=0;else if("_"===r[0])if(B){var d=r.split("."),
e=d[0].substring(1),d=d[1];y[e]||(y[e]={});y[e][d]?NGL.warn(e,d,"already exists"):(y[e][d]=[],L.push(y[e][d]),H.push(d));E=e;A=d;O=!0}else{var e=r.match(x),l=e[1],d=e[0].split("."),e=d[0].substring(1),d=d[1];y[e]||(y[e]={});y[e][d]?NGL.warn(e,d,"already exists"):y[e][d]=l;l||(u=!0);E=e;A=d}else if(v)G+=" "+r;else if(B)if("atom_site"===E){l=H.length;e=r.split(w);if(O){for(var d="group_PDB id label_atom_id label_comp_id type_symbol label_asym_id Cartn_x Cartn_y Cartn_z B_iso_or_equiv label_alt_id auth_seq_id pdbx_PDB_model_num".split(" "),
F=M.length=0;F<l;++F)-1!==d.indexOf(H[F])&&M.push(F);R=H.indexOf("label_atom_id");I=H.indexOf("label_alt_id");D=H.indexOf("Cartn_x");N=H.indexOf("Cartn_y");S=H.indexOf("Cartn_z");U=H.indexOf("id");P=H.indexOf("type_symbol");Y=H.indexOf("label_asym_id");aa=H.indexOf("label_comp_id");fa=H.indexOf("group_PDB");la=H.indexOf("B_iso_or_equiv");J=H.indexOf("auth_seq_id");V=H.indexOf("pdbx_PDB_model_num");O=!1;na=parseInt(e[V]);g&&(m=[],n=0)}l=parseInt(e[V]);na!==l&&(g&&(0===ba&&k.push(new Float32Array(m)),
m=new Float32Array(3*q.length),k.push(m),n=0),ba+=1);na=l;if(!(f&&0<ba||(l=e[R].replace(s,""),h&&"CA"!==l))){var d=parseFloat(e[D]),ua=parseFloat(e[N]),ra=parseFloat(e[S]);if(g&&(F=3*n,m[F+0]=d,m[F+1]=ua,m[F+2]=ra,n+=1,0<ba))continue;var F=parseInt(e[U]),pa=e[P],Ba="H"===e[fa][0]?1:0,Ma=e[Y],Ha=parseInt(e[J]),Ia=e[aa],Ja=parseFloat(e[la]),e=e[I],e="."===e?"":e,ca;C?(ca=new NGL.ProxyAtom(C,K),C.setResname(K,Ia),C.x[K]=d,C.y[K]=ua,C.z[K]=ra,C.setElement(K,pa),C.hetero[K]=Ba,C.setChainname(K,Ma),C.resno[K]=
Ha,C.serial[K]=F,C.setAtomname(K,l),C.ss[K]=99,C.bfactor[K]=Ja,C.altloc[K]=e.charCodeAt(0),C.vdw[K]=t[pa],C.covalent[K]=p[pa],C.modelindex[K]=ba,C.usedLength+=1):(ca=new NGL.Atom,ca.index=K,ca.resname=Ia,ca.x=d,ca.y=ua,ca.z=ra,ca.element=pa,ca.hetero=Ba,ca.chainname=Ma,ca.resno=Ha,ca.serial=F,ca.atomname=l,ca.ss="c",ca.bfactor=Ja,ca.altloc=e,ca.vdw=t[pa],ca.covalent=p[pa],ca.modelindex=ba);K+=1;q.push(ca)}}else{e=r.match(x);l=e.length;z===L.length&&(z=0);for(F=0;F<l;++F)L[z+F].push(e[F]);z+=l}else"'"===
r[0]&&"'"===r.substring(r.length-1)?y[E][A]=r.substring(1,r.length-2):u?y[E][A]=r.trim():NGL.log("NGL.CifParser._parse: unknown state",r)}function c(a,b){Array.isArray(a[b])||Object.keys(a).forEach(function(b){a[b]=[a[b]]})}var d="NGL.CifParser._parse "+this.name;NGL.time(d);var e=this.structure,f=this.firstModelOnly,g=this.asTrajectory,h=this.cAlphaOnly,k=e.frames,l=e.boxes,m,n,q=e.atoms,p=NGL.CovalentRadii,t=NGL.VdwRadii,r;e.hasConnect=!1;var w=/\s+/,x=/'(.*?)'|"(.*?)"|(\S+)/g,s=/"/g,y={};this.cif=
y;var v=!1,G=null,u=!1,B=!1,L=[],z=null,E=null,A=null,O=null,M=[],H=[],R,I,D,N,S,U,P,Y,aa,fa,la,J,V,C,F=this.streamer.lineCount();F>NGL.useAtomArrayThreshold&&(C=new NGL.AtomArray(F),e.atomArray=C);var K=0,ba=0,na;async.series([function(a){this.streamer.eachChunkOfLinesAsync(b,function(){y.struct&&y.struct.title&&(e.title=y.struct.title.trim().replace(/^['"]+|['"]+$/g,""));a()})}.bind(this),function(a){var b=y.struct_conf;if(b){var d=e.helices,f=NGL.HelixTypes;c(b,"id");NGL.processArray(b.beg_auth_seq_id,
function(a,c){for(var e=a;e<c;++e){var g=parseInt(b.pdbx_PDB_helix_class[e]);Number.isNaN(g)||d.push([b.beg_label_asym_id[e],parseInt(b.beg_auth_seq_id[e]),b.end_label_asym_id[e],parseInt(b.end_auth_seq_id[e]),f[g]||f[""]])}},a,1E3)}else a()},function(a){var b=y.struct_sheet_range;if(b){var d=e.sheets;c(b,"id");NGL.processArray(b.beg_auth_seq_id,function(a,c){for(var e=a;e<c;++e)d.push([b.beg_label_asym_id[e],parseInt(b.beg_auth_seq_id[e]),b.end_label_asym_id[e],parseInt(b.end_auth_seq_id[e])])},
a,1E3)}else a()},function(a){var b={},d=e.biomolDict;if(y.pdbx_struct_oper_list){var f=y.pdbx_struct_oper_list;c(f,"id");f.id.forEach(function(a,c){var d=new THREE.Matrix4,e=d.elements;e[0]=parseFloat(f["matrix[1][1]"][c]);e[1]=parseFloat(f["matrix[1][2]"][c]);e[2]=parseFloat(f["matrix[1][3]"][c]);e[4]=parseFloat(f["matrix[2][1]"][c]);e[5]=parseFloat(f["matrix[2][2]"][c]);e[6]=parseFloat(f["matrix[2][3]"][c]);e[8]=parseFloat(f["matrix[3][1]"][c]);e[9]=parseFloat(f["matrix[3][2]"][c]);e[10]=parseFloat(f["matrix[3][3]"][c]);
e[3]=parseFloat(f["vector[1]"][c]);e[7]=parseFloat(f["vector[2]"][c]);e[11]=parseFloat(f["vector[3]"][c]);d.transpose();b[a]=d})}if(y.pdbx_struct_assembly_gen){var g=y.pdbx_struct_assembly_gen;c(g,"assembly_id");var h=function(a){var c={};a.replace(/[\(\)']/g,"").split(",").forEach(function(a){if(-1!==a.indexOf("-")){var d=a.split("-");a=parseInt(d[0]);for(d=parseInt(d[1]);a<=d;++a)c[a]=b[a]}else c[a]=b[a]});return c};g.assembly_id.forEach(function(a,b){var c={},e=g.oper_expression[b];if(-1!==e.indexOf(")(")){var e=
e.split(")("),f=h(e[0]),k=h(e[1]);Object.keys(f).forEach(function(a){Object.keys(k).forEach(function(b){var d=new THREE.Matrix4;d.multiplyMatrices(f[a],k[b]);c[a+"x"+b]=d})})}else c=h(e);e=a;/^(0|[1-9][0-9]*)$/.test(e)&&(e="BU"+e);d[e]={matrixDict:c,chainList:g.asym_id_list[b].split(",")}})}if(y.struct_ncs_oper){f=y.struct_ncs_oper;c(f,"id");var k={};d.NCS={matrixDict:k,chainList:void 0};f.id.forEach(function(a,b){var c=new THREE.Matrix4,d=c.elements;d[0]=parseFloat(f["matrix[1][1]"][b]);d[1]=parseFloat(f["matrix[1][2]"][b]);
d[2]=parseFloat(f["matrix[1][3]"][b]);d[4]=parseFloat(f["matrix[2][1]"][b]);d[5]=parseFloat(f["matrix[2][2]"][b]);d[6]=parseFloat(f["matrix[2][3]"][b]);d[8]=parseFloat(f["matrix[3][1]"][b]);d[9]=parseFloat(f["matrix[3][2]"][b]);d[10]=parseFloat(f["matrix[3][3]"][b]);d[3]=parseFloat(f["vector[1]"][b]);d[7]=parseFloat(f["vector[2]"][b]);d[11]=parseFloat(f["vector[3]"][b]);c.transpose();k[a]=c})}var m,n,p,q,s,t,r,w;if(y.cell){var u=y.cell;r=y.symmetry||{};m=parseFloat(u.length_a);n=parseFloat(u.length_b);
p=parseFloat(u.length_c);q=parseFloat(u.angle_alpha);s=parseFloat(u.angle_beta);t=parseFloat(u.angle_gamma);r=r["space_group_name_H-M"];r[0]!==r[r.length-1]||"'"!==r[0]&&'"'!==r[0]||(r=r.substring(1,r.length-1));parseInt(u.Z_PDB);u=new Float32Array(9);u[0]=m;u[4]=n;u[8]=p;l.push(u)}var x=new THREE.Matrix4;if(y.database_PDB_matrix){var u=y.database_PDB_matrix,v=x.elements;v[0]=parseFloat(u["origx[1][1]"]);v[1]=parseFloat(u["origx[1][2]"]);v[2]=parseFloat(u["origx[1][3]"]);v[4]=parseFloat(u["origx[2][1]"]);
v[5]=parseFloat(u["origx[2][2]"]);v[6]=parseFloat(u["origx[2][3]"]);v[8]=parseFloat(u["origx[3][1]"]);v[9]=parseFloat(u["origx[3][2]"]);v[10]=parseFloat(u["origx[3][3]"]);v[3]=parseFloat(u["origx_vector[1]"]);v[7]=parseFloat(u["origx_vector[2]"]);v[11]=parseFloat(u["origx_vector[3]"]);x.transpose()}x=new THREE.Matrix4;y.atom_sites&&(u=y.atom_sites,v=x.elements,v[0]=parseFloat(u["fract_transf_matrix[1][1]"]),v[1]=parseFloat(u["fract_transf_matrix[1][2]"]),v[2]=parseFloat(u["fract_transf_matrix[1][3]"]),
v[4]=parseFloat(u["fract_transf_matrix[2][1]"]),v[5]=parseFloat(u["fract_transf_matrix[2][2]"]),v[6]=parseFloat(u["fract_transf_matrix[2][3]"]),v[8]=parseFloat(u["fract_transf_matrix[3][1]"]),v[9]=parseFloat(u["fract_transf_matrix[3][2]"]),v[10]=parseFloat(u["fract_transf_matrix[3][3]"]),v[3]=parseFloat(u["fract_transf_vector[1]"]),v[7]=parseFloat(u["fract_transf_vector[2]"]),v[11]=parseFloat(u["fract_transf_vector[3]"]),x.transpose(),w=x);e.unitcell=new NGL.Unitcell(m,n,p,q,s,t,r,w);a()}],function(){NGL.timeEnd(d);
a()})},_postProcess:function(a){function b(a,b){Array.isArray(a[b])||Object.keys(a).forEach(function(b){a[b]=[a[b]]})}NGL.time("NGL.CifParser._postProcess");var c=this.structure,d=this.cif;async.series([function(a){var f=d.struct_conn;if(f){b(f,"id");var g=/"/g;NGL.processArray(f.id,function(a,b){for(var d=a;d<b;++d)if("hydrog"!==f.conn_type_id[d]){var e=f.ptnr1_auth_seq_id[d]+":"+f.ptnr1_label_asym_id[d]+"."+f.ptnr1_label_atom_id[d].replace(g,""),n=new NGL.Selection(e);if(n.selection.error)NGL.warn("invalid selection for connection",
e);else{var e=c.getAtoms(n),n=f.ptnr2_auth_seq_id[d]+":"+f.ptnr2_label_asym_id[d]+"."+f.ptnr2_label_atom_id[d].replace(g,""),q=new NGL.Selection(n);if(q.selection.error)NGL.warn("invalid selection for connection",n);else for(var n=c.getAtoms(q),p,t=e.length,r=0;r<t;++r)q=e[r],p=n[r],q&&p?c.bondSet.addBond(q,p):NGL.log("atoms for connection not found")}}},a,500)}else a()}],function(){NGL.timeEnd("NGL.CifParser._postProcess");a()})}});NGL.SdfParser=function(a,b){NGL.StructureParser.call(this,a,b)};
NGL.SdfParser.prototype=NGL.createObject(NGL.StructureParser.prototype,{constructor:NGL.SdfParser,type:"sdf",_parse:function(a){var b=this.streamer.peekLines(2),c=this.structure,d=this.firstModelOnly,e=this.asTrajectory;c.id=b[0].trim();c.title=b[1].trim();var f=c.frames,g=!1,h,k,l=c.atoms,m=c.bondSet,n=NGL.CovalentRadii,q=NGL.VdwRadii,p,b=this.streamer.lineCount();b>NGL.useAtomArrayThreshold&&(p=new NGL.AtomArray(b),c.atomArray=p);var t=0,r=0,w=0,x=0,s,y,v,G,u,B;this.streamer.eachChunkOfLinesAsync(function(a,
b,c){for(;a<b;++a){var A=c[a];"$$$$"===A.substr(0,4)&&(r=-1,++w,x=l.length);3===r&&(s=parseInt(A.substr(0,3)),y=parseInt(A.substr(3,3)),v=4,u=G=v+s,B=u+y,e&&(k=0,h=new Float32Array(3*s),f.push(h),0<w&&(g=!0)));if(r>=v&&r<G){if(d&&0<w)continue;var O=parseFloat(A.substr(0,10)),M=parseFloat(A.substr(10,10)),H=parseFloat(A.substr(20,10));if(e){var R=3*k;h[R+0]=O;h[R+1]=M;h[R+2]=H;k+=1;if(g)continue}var R=A.substr(31,3).trim(),I=R+(t+1),D;p?(D=new NGL.ProxyAtom(p,t),p.setResname(t,"HET"),p.x[t]=O,p.y[t]=
M,p.z[t]=H,p.setElement(t,R),p.setChainname(t,""),p.resno[t]=1,p.serial[t]=t,p.setAtomname(t,I),p.ss[t]=99,p.setAltloc(t,""),p.vdw[t]=q[R],p.covalent[t]=n[R],p.modelindex[t]=w,p.usedLength+=1):(D=new NGL.Atom,D.index=t,D.resname="HET",D.x=O,D.y=M,D.z=H,D.element=R,D.hetero=1,D.chainname="",D.resno=1,D.serial=t,D.atomname=I,D.ss="c",D.altloc="",D.vdw=q[R],D.covalent=n[R],D.modelindex=w);t+=1;l.push(D)}if(r>=u&&r<B){if(d&&0<w)continue;if(e&&0<w)continue;O=parseInt(A.substr(0,3))-1+x;M=parseInt(A.substr(3,
3))-1+x;A=parseInt(A.substr(6,3));m.addBond(l[O],l[M],!1,A)}++r}},function(){c._dontAutoBond=!0;a()})}});NGL.Mol2Parser=function(a,b){NGL.StructureParser.call(this,a,b)};
NGL.Mol2Parser.prototype=NGL.createObject(NGL.StructureParser.prototype,{constructor:NGL.Mol2Parser,type:"mol2",_parse:function(a){var b=/\s+/,c=this.structure,d=this.firstModelOnly,e=this.asTrajectory,f=c.frames,g=!1,h,k,l=c.atoms,m=c.bondSet,n=NGL.CovalentRadii,q=NGL.VdwRadii,p,t=this.streamer.lineCount();t>NGL.useAtomArrayThreshold&&(p=new NGL.AtomArray(t),c.atomArray=p);var r=0,w=0,x=0,s=-1,y=0,v=0,G={1:1,2:2,3:3,am:1,ar:1,du:1,un:1,nc:0};this.streamer.eachChunkOfLinesAsync(function(a,t,L){for(;a<
t;++a){var z=L[a].trim();if(""!==z&&"#"!==z[0])if("@"===z[0])"@<TRIPOS>MOLECULE"===z?(v=1,w=0,++s):"@<TRIPOS>ATOM"===z?(v=2,x=l.length,e&&(k=0,h=new Float32Array(3*y),f.push(h),0<s&&(g=!0))):v="@<TRIPOS>BOND"===z?3:0;else if(1===v)0===w?(c.title=z,c.id=z):1===w&&(z=z.split(b),y=parseInt(z[0])),++w;else if(2===v){if(z=z.split(b),!(d&&0<s)){var E=parseFloat(z[2]),A=parseFloat(z[3]),O=parseFloat(z[4]);if(e){var M=3*k;h[M+0]=E;h[M+1]=A;h[M+2]=O;k+=1;if(g)continue}var M=z[1],H=z[5].split(".")[0],R=z[6]?
parseInt(z[6]):1,I=z[7]?z[7]:"",z=z[8]?parseFloat(z[8]):0,D;p?(D=new NGL.ProxyAtom(p,r),p.setResname(r,I),p.x[r]=E,p.y[r]=A,p.z[r]=O,p.setElement(r,H),p.setChainname(r,""),p.resno[r]=R,p.serial[r]=r,p.setAtomname(r,M),p.ss[r]=99,p.setAltloc(r,""),p.bfactor[r]=z,p.vdw[r]=q[H],p.covalent[r]=n[H],p.modelindex[r]=s,p.usedLength+=1):(D=new NGL.Atom,D.index=r,D.resname=I,D.x=E,D.y=A,D.z=O,D.element=H,D.hetero=1,D.chainname="",D.resno=R,D.serial=r,D.atomname=M,D.ss="c",D.altloc="",D.bfactor=z,D.vdw=q[H],
D.covalent=n[H],D.modelindex=s);r+=1;l.push(D)}}else 3!==v||d&&0<s||e&&0<s||(z=z.split(b),E=parseInt(z[1])-1+x,A=parseInt(z[2])-1+x,m.addBond(l[E],l[A],!1,G[z[3]]))}},function(){c._dontAutoBond=!0;a()})}});NGL.VolumeParser=function(a,b){NGL.Parser.call(this,a,b||{});this.volume=new NGL.Volume(this.name,this.path)};
NGL.VolumeParser.prototype=NGL.createObject(NGL.Parser.prototype,{constructor:NGL.VolumeParser,type:"volume",__objName:"volume",_afterParse:function(a){this.volume.setMatrix(this.getMatrix());a()},getMatrix:function(){return new THREE.Matrix4}});NGL.MrcParser=function(a,b){NGL.VolumeParser.call(this,a,b)};
NGL.MrcParser.prototype=NGL.createObject(NGL.VolumeParser.prototype,{constructor:NGL.MrcParser,type:"mrc",_parse:function(a){var b="NGL.MrcParser._parse "+this.name;NGL.time(b);var c=this.streamer.data;c instanceof Uint8Array&&(c=c.buffer);var d=this.volume,e={},f=new Int32Array(c,0,56),g=new Float32Array(c,0,56),h=new DataView(c);e.MAP=String.fromCharCode(h.getUint8(208),h.getUint8(209),h.getUint8(210),h.getUint8(211));e.MACHST=[h.getUint8(212),h.getUint8(213)];if(17===e.MACHST[0]&&17===e.MACHST[1])for(var k=
c.byteLength,l=0;l<k;l+=4)h.setFloat32(l,h.getFloat32(l),!0);e.NX=f[0];e.NY=f[1];e.NZ=f[2];e.MODE=f[3];e.NXSTART=f[4];e.NYSTART=f[5];e.NZSTART=f[6];e.MX=f[7];e.MY=f[8];e.MZ=f[9];e.xlen=g[10];e.ylen=g[11];e.zlen=g[12];e.alpha=g[13];e.beta=g[14];e.gamma=g[15];e.MAPC=f[16];e.MAPR=f[17];e.MAPS=f[18];e.DMIN=g[19];e.DMAX=g[20];e.DMEAN=g[21];e.ISPG=f[22];e.NSYMBT=f[23];e.LSKFLG=f[24];e.ARMS=g[54];d.header=e;c=new Float32Array(c,1024+e.NSYMBT,e.NX*e.NY*e.NZ);d.setData(c,e.NX,e.NY,e.NZ);NGL.timeEnd(b);a()},
getMatrix:function(){var a=this.volume.header,b=[a.xlen,0,0],c=[a.ylen*Math.cos(Math.PI/180*a.gamma),a.ylen*Math.sin(Math.PI/180*a.gamma),0],d=[a.zlen*Math.cos(Math.PI/180*a.beta),a.zlen*(Math.cos(Math.PI/180*a.alpha)-Math.cos(Math.PI/180*a.gamma)*Math.cos(Math.PI/180*a.beta))/Math.sin(Math.PI/180*a.gamma),0];d[2]=Math.sqrt(a.zlen*a.zlen*Math.sin(Math.PI/180*a.beta)*Math.sin(Math.PI/180*a.beta)-d[1]*d[1]);var b=[0,b,c,d],c=[0,a.MX,a.MY,a.MZ],d=[0,a.MAPC,a.MAPR,a.MAPS],e=new THREE.Matrix4;e.set(b[d[1]][0]/
c[d[1]],b[d[2]][0]/c[d[2]],b[d[3]][0]/c[d[3]],0,b[d[1]][1]/c[d[1]],b[d[2]][1]/c[d[2]],b[d[3]][1]/c[d[3]],0,b[d[1]][2]/c[d[1]],b[d[2]][2]/c[d[2]],b[d[3]][2]/c[d[3]],0,0,0,0,1);e.multiply((new THREE.Matrix4).makeTranslation(a.NXSTART,a.NYSTART,a.NZSTART));return e}});NGL.CubeParser=function(a,b){NGL.VolumeParser.call(this,a,b)};
NGL.CubeParser.prototype=NGL.createObject(NGL.VolumeParser.prototype,{constructor:NGL.CubeParser,type:"cube",_parse:function(a){function b(a,b){var c=e[a].trim().split(g)[b];return parseFloat(c)}var c="NGL.CubeParser._parse "+this.name;NGL.time(c);var d=this.volume,e=this.streamer.peekLines(6),f={},g=/\s+/;f.atomCount=Math.abs(b(2,0));f.originX=.529177210859*b(2,1);f.originY=.529177210859*b(2,2);f.originZ=.529177210859*b(2,3);f.NVX=b(3,0);f.NVY=b(4,0);f.NVZ=b(5,0);f.AVX=.529177210859*b(3,1);f.AVY=
.529177210859*b(4,2);f.AVZ=.529177210859*b(5,3);var h=new Float32Array(f.NVX*f.NVY*f.NVZ),k=0,l=0;this.streamer.eachChunkOfLinesAsync(function(a,b,c){for(;a<b;++a){var d=c[a].trim();if(""!==d&&l>=f.atomCount+6)for(var d=d.split(g),e=0,r=d.length;e<r;++e)1!==d.length&&(h[k]=parseFloat(d[e]),++k);++l}},function(){d.header=f;d.setData(h,f.NVZ,f.NVY,f.NVX);NGL.timeEnd(c);a()})},getMatrix:function(){var a=this.volume.header,b=new THREE.Matrix4;b.multiply((new THREE.Matrix4).makeRotationY(THREE.Math.degToRad(90)));
b.multiply((new THREE.Matrix4).makeTranslation(-a.originZ,a.originY,a.originX));b.multiply((new THREE.Matrix4).makeScale(-a.AVZ,a.AVY,a.AVX));return b}});NGL.SurfaceParser=function(a,b){NGL.Parser.call(this,a,b||{});this.loader=void 0;this.surface=new NGL.Surface(this.name,this.path)};
NGL.SurfaceParser.prototype=NGL.createObject(NGL.Parser.prototype,{constructor:NGL.SurfaceParser,type:"surface",__objName:"surface",_parse:function(a){var b=NGL.Uint8ToString(this.streamer.data),b=this.loader.parse(b);this.surface.fromGeometry(b);a()}});NGL.PlyParser=function(a,b){NGL.SurfaceParser.call(this,a,b||{});this.loader=new THREE.PLYLoader};NGL.PlyParser.prototype=NGL.createObject(NGL.SurfaceParser.prototype,{constructor:NGL.PlyParser,type:"ply"});
NGL.ObjParser=function(a,b){NGL.SurfaceParser.call(this,a,b||{});this.loader=new THREE.OBJLoader};NGL.ObjParser.prototype=NGL.createObject(NGL.SurfaceParser.prototype,{constructor:NGL.ObjParser,type:"obj"});NGL.TextParser=function(a,b){NGL.Parser.call(this,a,b||{});this.text={name:this.name,path:this.path,data:""}};
NGL.TextParser.prototype=NGL.createObject(NGL.Parser.prototype,{constructor:NGL.TextParser,type:"text",__objName:"text",_parse:function(a){this.text.data=NGL.Uint8ToString(this.streamer.data);a()}});NGL.CsvParser=function(a,b){NGL.Parser.call(this,a,b||{});this.table={name:this.name,path:this.path,colNames:[],data:[]}};
NGL.CsvParser.prototype=NGL.createObject(NGL.Parser.prototype,{constructor:NGL.CsvParser,type:"csv",__objName:"table",_parse:function(a){var b=this.table.data,c=/\s*,\s*/;this.streamer.eachChunkOfLines(function(a,e,f){f=a.length;for(var g=0;g<f;++g){var h=a[g].trim(),k=h.split(c);0===e&&0===g?this.table.colNames=k:h&&b.push(k)}}.bind(this));a()}});NGL.JsonParser=function(a,b){NGL.Parser.call(this,a,b||{});this.json={name:this.name,path:this.path,data:{}}};
NGL.JsonParser.prototype=NGL.createObject(NGL.Parser.prototype,{constructor:NGL.JsonParser,type:"json",__objName:"json",_parse:function(a){var b=NGL.Uint8ToString(this.streamer.data);this.json.data=JSON.parse(b);a()}});
NGL.Loader=function(a,b){var c=b||{};"function"===typeof c.onLoad&&(this.onload=c.onLoad);"function"===typeof c.onProgress&&(this.onprogress=c.onProgress);"function"===typeof c.onError&&(this.onerror=c.onError);this.compressed=c.compressed||!1;this.name=c.name||"";this.ext=c.ext||"";this.path=c.path||"";this.params=b;c={compressed:this.compressed};this.streamer=a instanceof File?new NGL.FileStreamer(a,c):new NGL.NetworkStreamer(a,c);this.streamer.onerror=this.onError;this.streamer.onprogress=this.onProgress};
NGL.Loader.prototype={constructor:NGL.Loader,onload:function(){},onprogress:function(){},onerror:function(a){NGL.error(a)},load:function(){try{this._load()}catch(a){NGL.error(a),this.onerror("loading failed")}},_load:function(){}};NGL.ParserLoader=function(a,b){NGL.Loader.call(this,a,b)};
NGL.ParserLoader.prototype=NGL.createObject(NGL.Loader.prototype,{constructor:NGL.ParserLoader,_load:function(){(new {gro:NGL.GroParser,pdb:NGL.PdbParser,ent:NGL.PdbParser,cif:NGL.CifParser,mcif:NGL.CifParser,mmcif:NGL.CifParser,sdf:NGL.SdfParser,mol2:NGL.Mol2Parser,mrc:NGL.MrcParser,ccp4:NGL.MrcParser,map:NGL.MrcParser,cube:NGL.CubeParser,ply:NGL.PlyParser,obj:NGL.ObjParser,txt:NGL.TextParser,csv:NGL.CsvParser,json:NGL.JsonParser}[this.ext](this.streamer,this.params)).parseWorker(this.onload)}});
NGL.ScriptLoader=function(a,b){NGL.Loader.call(this,a,b)};NGL.ScriptLoader.prototype=NGL.createObject(NGL.Loader.prototype,{constructor:NGL.ScriptLoader,_load:function(){this.streamer.read(function(){var a=NGL.Uint8ToString(this.streamer.data),a=new NGL.Script(a,this.name,this.path);this.onload(a)}.bind(this))}});
NGL.autoLoad=function(){var a={gro:NGL.ParserLoader,pdb:NGL.ParserLoader,ent:NGL.ParserLoader,cif:NGL.ParserLoader,mcif:NGL.ParserLoader,mmcif:NGL.ParserLoader,sdf:NGL.ParserLoader,mol2:NGL.ParserLoader,mrc:NGL.ParserLoader,ccp4:NGL.ParserLoader,map:NGL.ParserLoader,cube:NGL.ParserLoader,obj:NGL.ParserLoader,ply:NGL.ParserLoader,txt:NGL.ParserLoader,csv:NGL.ParserLoader,json:NGL.ParserLoader,ngl:NGL.ScriptLoader};return function(b,c){var d=NGL.getFileInfo(b),e=d.path,f=d.name,g=d.ext,h=d.compressed,
d=d.protocol;"rcsb"===d&&(g="cif",h="gz",e="www.rcsb.org/pdb/files/"+f+".cif.gz",d="http");var k,l=c||{};"function"===typeof c?(k=c,l={}):k=l.onLoad;l.name=void 0!==l.name?l.name:f;l.ext=void 0!==l.ext?l.ext:g;l.compressed=void 0!==l.compressed?l.compressed:h;l.path=void 0!==l.path?l.path:e;l.onLoad=function(a){"function"===typeof k&&k(a,l)};e=b instanceof File?b:-1!==["http","https","ftp"].indexOf(d)?d+"://"+e:"data"===d?NGL.getAbsolutePath(NGL.dataProtocolRelativePath+e):NGL.getAbsolutePath(NGL.fileProtocolRelativePath+
e);if(l.ext in a)(new a[l.ext](e,l)).load();else{e="NGL.autoLoading: ext '"+l.ext+"' unknown";if("function"===typeof l.onError)l.onError(e);else NGL.error(e);return null}}}();
NGL.Resources={"../fonts/LatoBlack.fnt":null,"../fonts/LatoBlack.png":"image","../img/radial.png":"image","../shader/CylinderImpostor.vert":null,"../shader/CylinderImpostor.frag":null,"../shader/HyperballStickImpostor.vert":null,"../shader/HyperballStickImpostor.frag":null,"../shader/Line.vert":null,"../shader/Line.frag":null,"../shader/LineSprite.vert":null,"../shader/LineSprite.frag":null,"../shader/Mesh.vert":null,"../shader/Mesh.frag":null,"../shader/ParticleSprite.vert":null,"../shader/ParticleSprite.frag":null,
"../shader/Quad.vert":null,"../shader/Quad.frag":null,"../shader/Ribbon.vert":null,"../shader/Ribbon.frag":null,"../shader/SDFFont.vert":null,"../shader/SDFFont.frag":null,"../shader/SphereHalo.vert":null,"../shader/SphereHalo.frag":null,"../shader/SphereImpostor.vert":null,"../shader/SphereImpostor.frag":null,"../shader/chunk/fog.glsl":null,"../shader/chunk/fog_params.glsl":null,"../shader/chunk/light.glsl":null,"../shader/chunk/light_params.glsl":null};
NGL.UniformsLib={fog:THREE.UniformsLib.fog,lights:THREE.UniformsUtils.merge([THREE.UniformsLib.lights,{ambient:{type:"c",value:new THREE.Color(16777215)},emissive:{type:"c",value:new THREE.Color(0)}}])};
NGL.Utils={lineLineIntersect:function(a,b,c,d){var e=NGL.EPS,f=new THREE.Vector3,g=new THREE.Vector3,h=new THREE.Vector3,k,l;f.x=a.x-c.x;f.y=a.y-c.y;f.z=a.z-c.z;g.x=d.x-c.x;g.y=d.y-c.y;g.z=d.z-c.z;if(Math.abs(g.x)<e&&Math.abs(g.y)<e&&Math.abs(g.z)<e)return null;h.x=b.x-a.x;h.y=b.y-a.y;h.z=b.z-a.z;if(Math.abs(h.x)<e&&Math.abs(h.y)<e&&Math.abs(h.z)<e)return null;b=f.x*g.x+f.y*g.y+f.z*g.z;d=g.x*h.x+g.y*h.y+g.z*h.z;k=f.x*h.x+f.y*h.y+f.z*h.z;f=g.x*g.x+g.y*g.y+g.z*g.z;l=(h.x*h.x+h.y*h.y+h.z*h.z)*f-d*d;
if(Math.abs(l)<e)return null;e=(b*d-k*f)/l;b=(b+d*e)/f;a=new THREE.Vector3(a.x+e*h.x,a.y+e*h.y,a.z+e*h.z);c=new THREE.Vector3(c.x+b*g.x,c.y+b*g.y,c.z+b*g.z);return[a,c]},circularMean:function(){var a=2*Math.PI;return function(b,c,d,e,f){d=d||1;e=e||0;var g=f?f.length:b.length,h,k,l=0,m=0;if(f)for(k=0;k<g;++k)h=(b[f[k]*d+e]+c)%c,h=h/c*a-Math.PI,l+=Math.cos(h),m+=Math.sin(h);else for(k=e;k<g;k+=d)h=(b[k]+c)%c,h=h/c*a-Math.PI,l+=Math.cos(h),m+=Math.sin(h);return(Math.atan2(m/g,l/g)+Math.PI)/a*c}}(),
calculateCenterArray:function(a,b,c,d){var e=a.length;c=c||new Float32Array(e);d=d||0;for(var f=0;f<e;f+=3)c[d+f+0]=(a[f+0]+b[f+0])/2,c[d+f+1]=(a[f+1]+b[f+1])/2,c[d+f+2]=(a[f+2]+b[f+2])/2;return c},calculateDirectionArray:function(a,b){for(var c=a.length,d=new Float32Array(c),e=0;e<c;e+=3)d[e+0]=b[e+0]-a[e+0],d[e+1]=b[e+1]-a[e+1],d[e+2]=b[e+2]-a[e+2];return d},positionFromGeometry:function(a){a=a.vertices;for(var b,c,d=a.length,e=new Float32Array(3*d),f=0;f<d;f++)b=3*f,c=a[f],e[b+0]=c.x,e[b+1]=c.y,
e[b+2]=c.z;return e},colorFromGeometry:function(a){for(var b=a.faces,c,d,e=b.length,f=new Float32Array(3*a.vertices.length),g=0;g<e;g++)c=b[g],d=c.color,a=3*c.a,f[a+0]=d.r,f[a+1]=d.g,f[a+2]=d.b,a=3*c.b,f[a+0]=d.r,f[a+1]=d.g,f[a+2]=d.b,a=3*c.c,f[a+0]=d.r,f[a+1]=d.g,f[a+2]=d.b;return f},indexFromGeometry:function(a){a=a.faces;for(var b,c,d=a.length,e=new Uint32Array(3*d),f=0;f<d;f++)b=3*f,c=a[f],e[b+0]=c.a,e[b+1]=c.b,e[b+2]=c.c;return e},normalFromGeometry:function(a){for(var b=a.faces,c,d,e,f,g=b.length,
h=new Float32Array(3*a.vertices.length),k=0;k<g;k++)a=b[k],c=a.vertexNormals,d=c[0],e=c[1],f=c[2],c=3*a.a,h[c+0]=d.x,h[c+1]=d.y,h[c+2]=d.z,c=3*a.b,h[c+0]=e.x,h[c+1]=e.y,h[c+2]=e.z,c=3*a.c,h[c+0]=f.x,h[c+1]=f.y,h[c+2]=f.z;return h},uniformArray:function(a,b){for(var c=new Float32Array(a),d=0;d<a;++d)c[d]=b;return c},uniformArray3:function(a,b,c,d){for(var e=new Float32Array(3*a),f,g=0;g<a;++g)f=3*g,e[f+0]=b,e[f+1]=c,e[f+2]=d;return e},randomColorArray:function(a){for(var b=new Float32Array(3*a),c,
d=0;d<a;++d)c=3*d,b[c+0]=Math.random(),b[c+1]=Math.random(),b[c+2]=Math.random();return b},replicateArray3Entries:function(a,b){var c=a.length/3,d=new Float32Array(c*b*3),e,f,g,h,k,l,m;for(e=0;e<c;++e)for(f=3*e,g=e*b*3,k=a[f+0],l=a[f+1],m=a[f+2],f=0;f<b;++f)h=g+3*f,d[h+0]=k,d[h+1]=l,d[h+2]=m;return d},calculateMeanArray:function(a,b){for(var c=a.length,d=new Float32Array(c),e=0;e<c;e++)d[e]=(a[e]+b[e])/2;return d},calculateMinArray:function(a,b){for(var c=a.length,d=new Float32Array(c),e=0;e<c;e++)d[e]=
Math.min(a[e],b[e]);return d},calculateMeanVector3:function(a){var b=a.length,c=a.length/3,d=0,e=0,f=0,g;for(g=0;g<b;g+=3)d+=a[g+0],e+=a[g+1],f+=a[g+2];return new THREE.Vector3(d/c,e/c,f/c)},isPointOnSegment:function(a,b,c){var d=b.distanceTo(c);return a.distanceTo(b)<=d&&a.distanceTo(c)<=d},pointVectorIntersection:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c,d,e){a.copy(e);b.subVectors(c,d);c=Math.cos(a.angleTo(b))*b.length();c=a.normalize().multiplyScalar(c);return(new THREE.Vector3).addVectors(c,
d)}}(),copyArray:function(a,b,c,d,e){var f;for(f=0;f<e;++f)b[d+f]=a[c+f]}};NGL.init=function(a,b){var c=NGL.GET("debug");void 0!==c&&(NGL.debug=c);c=NGL.GET("useWorker");void 0!==c&&(NGL.useWorker=c);c=NGL.GET("disableImpostor");void 0!==c&&(NGL.disableImpostor=c);this.textures=[];NGL.initResources(a,b);return this};NGL.dataURItoImage=function(a){if("function"!==typeof importScripts){var b=document.createElement("img");b.src=a;return b}};
NGL.initResources=function(a,b){b=b||"";var c=function(){NGL.log("NGL initialized");void 0!==a&&a()},d=new THREE.LoadingManager(c),e=new THREE.ImageLoader(d),f=new THREE.XHRLoader(d),d=Object.keys(NGL.Resources),g=0;d.forEach(function(a){var c=NGL.Resources[a],d=b+a;"image"===c?e.load(d,function(b){NGL.Resources[a]=b}):null!==c?g+=1:f.load(d,function(b){NGL.Resources[a]=b})});d.length===g&&c()};
NGL.getShader=function(){var a=/^(?!\/\/)\s*#include\s+(\S+)/gmi,b={};return function(c){var d=NGL.Resources["../shader/"+c];b[c]||(b[c]=d.replace(a,function(a,b){var c=NGL.Resources["../shader/chunk/"+b+".glsl"]||THREE.ShaderChunk[b];return c?c:""}));return b[c]}}();
NGL.trimCanvas=function(a,b,c,d,e){var f=a.height,g=a.width,h=a.getContext("2d").getImageData(0,0,g,f).data,k,l,m;m=!1;for(l=0;l<f;l++){for(k=0;k<g;k++){var n=4*(l*g+k);if(h[n]!==b||h[n+1]!==c||h[n+2]!==d||h[n+3]!==e){m=!0;break}}if(m)break}var q=l;m=!1;for(k=0;k<g;k++){for(l=0;l<f;l++)if(n=4*(l*g+k),h[n]!==b||h[n+1]!==c||h[n+2]!==d||h[n+3]!==e){m=!0;break}if(m)break}var p=k;m=!1;for(l=f-1;0<=l;l--){for(k=g-1;0<=k;k--)if(n=4*(l*g+k),h[n]!==b||h[n+1]!==c||h[n+2]!==d||h[n+3]!==e){m=!0;break}if(m)break}var t=
l;m=!1;for(k=g-1;0<=k;k--){for(l=f-1;0<=l;l--)if(n=4*(l*g+k),h[n]!==b||h[n+1]!==c||h[n+2]!==d||h[n+3]!==e){m=!0;break}if(m)break}b=k;c=document.createElement("canvas");c.style.display="hidden";document.body.appendChild(c);c.width=b-p;c.height=t-q;c.getContext("2d").drawImage(a,p,q,c.width,c.height,0,0,c.width,c.height);return c};NGL.Stats=function(){this.signals={updated:new signals.Signal};this.begin();this.maxDuration=-Infinity;this.lastFps=this.lastDuration=this.minDuration=Infinity};
NGL.Stats.prototype={update:function(){this.startTime=this.end();this.signals.updated.dispatch()},begin:function(){this.prevFpsTime=this.startTime=Date.now()},end:function(){var a=Date.now();this.lastDuration=a-this.startTime;this.minDuration=Math.min(this.minDuration,this.lastDuration);this.maxDuration=Math.max(this.maxDuration,this.lastDuration);this.frames+=1;a>this.prevFpsTime+1E3&&(this.lastFps=Math.round(1E3*this.frames/(a-this.startTime)),this.prevFpsTime=a);this.frames=0;return a}};
NGL.Viewer=function(a){a?(this.eid=a,this.container=document.getElementById(a),this.container===document?(this.width=window.innerWidth,this.height=window.innerHeight):(a=this.container.getBoundingClientRect(),this.width=a.width,this.height=a.height)):this.container=document.createElement("div");this.aspect=this.width/this.height;this.initParams();this.initCamera();this.initScene();this.initRenderer();this.initLights();this.initControls();this.initStats();window.addEventListener("resize",this.onWindowResize.bind(this),
!1);this.setBackground();this.setFog();this.boundingBox=new THREE.Box3;this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}}};
NGL.Viewer.prototype={constructor:NGL.Viewer,initParams:function(){this.params={fogType:null,fogColor:0,fogNear:50,fogFar:100,fogDensity:2.5E-4,backgroundColor:0,cameraType:1,cameraFov:40,cameraZ:-80,clipNear:0,clipFar:100,clipDist:20,specular:328965}},initCamera:function(){var a=this.params,b=new THREE.Vector3(0,0,0);this.perspectiveCamera=new THREE.PerspectiveCamera(a.cameraFov,this.aspect,.1,1E4);this.perspectiveCamera.position.z=a.cameraZ;this.perspectiveCamera.lookAt(b);this.camera=this.perspectiveCamera;
this.camera.updateProjectionMatrix()},initRenderer:function(){this.renderer=new THREE.WebGLRenderer({preserveDrawingBuffer:!0,alpha:!0,antialias:!0});this.renderer.setPixelRatio(window.devicePixelRatio);this.renderer.setSize(this.width,this.height);this.renderer.autoClear=!1;this.renderer.sortObjects=!0;var a=this.renderer.context;NGL.extensionFragDepth=a.getExtension("EXT_frag_depth");NGL.extensionFragDepth||NGL.info("EXT_frag_depth not supported");this.renderer.supportsStandardDerivatives()||NGL.warn("OES_standard_derivatives not supported");
a.getExtension("OES_element_index_uint")||(NGL.indexUint16=!0,NGL.info("OES_element_index_uint not supported"));this.eid&&this.container.appendChild(this.renderer.domElement);var b=this,c=this.renderer.setProgram;this.renderer.setProgram=function(a,e,f,g,h){e=c(a,e,f,g,h);b.updateObjectUniforms(h,g,a);b.renderer.loadUniformsGeneric(b.renderer.properties.get(g).uniformsList);return e};this.renderer.supportsFloatTextures()||NGL.warn("OES_texture_float not supported");a.getExtension("WEBGL_color_buffer_float")||
NGL.warn("WEBGL_color_buffer_float not supported");this.pickingTexture=new THREE.WebGLRenderTarget(this.width*window.devicePixelRatio,this.height*window.devicePixelRatio,{minFilter:THREE.NearestFilter,magFilter:THREE.NearestFilter,stencilBuffer:!1,format:THREE.RGBAFormat,type:this.supportsReadPixelsFloat()?THREE.FloatType:THREE.UnsignedByteType});this.pickingTexture.generateMipmaps=!1},supportsReadPixelsFloat:function(){var a=void 0;return function(){if(void 0===a){var b=this.renderer.context;a="Chrome"===
NGL.browser&&this.renderer.supportsFloatTextures()||this.renderer.supportsFloatTextures()&&b.getExtension("WEBGL_color_buffer_float")}return a}}(),initScene:function(){this.scene||(this.scene=new THREE.Scene);this.rotationGroup=new THREE.Group;this.rotationGroup.name="rotationGroup";this.scene.add(this.rotationGroup);this.modelGroup=new THREE.Group;this.modelGroup.name="modelGroup";this.rotationGroup.add(this.modelGroup);this.pickingGroup=new THREE.Group;this.pickingGroup.name="pickingGroup";this.rotationGroup.add(this.pickingGroup);
this.backgroundGroup=new THREE.Group;this.backgroundGroup.name="backgroundGroup";this.rotationGroup.add(this.backgroundGroup)},initLights:function(){var a=new THREE.DirectionalLight(16777215);a.position.copy((new THREE.Vector3(1,1,-2.5)).normalize());a.intensity=.5;var b=new THREE.AmbientLight(1052688),c=new THREE.HemisphereLight(16777215,.01);this.scene.add(a);this.scene.add(b);this.scene.add(c)},initControls:function(){this.controls=new THREE.TrackballControls(this.camera,this.renderer.domElement);
this.controls.rotateSpeed=2;this.controls.zoomSpeed=1.2;this.controls.panSpeed=.8;this.controls.staticMoving=!0;this.controls.cylindricalRotation=!0;this.controls.keys=[65,83,68];this.controls.addEventListener("change",this.requestRender.bind(this));document.addEventListener("mousemove",this.controls.update.bind(this.controls),!1);document.addEventListener("touchmove",this.controls.update.bind(this.controls),!1)},initStats:function(){this.stats=new NGL.Stats},add:function(a,b){var c,d;c=a.group;a.pickable&&
(d=a.pickingGroup);0<a.size&&(b?b.forEach(function(b){this.addBuffer(a,c,d,b)},this):this.addBuffer(a,c,d),a.background?this.backgroundGroup.add(c):this.modelGroup.add(c),a.pickable&&this.pickingGroup.add(d));this.rotationGroup.updateMatrixWorld();this.requestRender()},addBuffer:function(a,b,c,d){var e=a.getRenderOrder();a.material||(a.material=a.getMaterial());var f=a.getMesh(void 0,a.material);f.frustumCulled=!1;f.renderOrder=e;f.userData.buffer=a;d&&f.applyMatrix(d.matrix);b.add(f);a.pickable&&
(a.pickingMaterial||(a.pickingMaterial=a.getMaterial("picking")),b=a.getMesh("picking",a.pickingMaterial),b.frustumCulled=!1,b.renderOrder=e,b.userData.buffer=a,d&&(b.matrix.copy(f.matrix),b.position.copy(f.position),b.quaternion.copy(f.quaternion),b.scale.copy(f.scale),b.userData.instance=d),c.add(b));d?this.updateBoundingBox(a.geometry,d.matrix):this.updateBoundingBox(a.geometry)},remove:function(a){this.rotationGroup.children.forEach(function(b){b.remove(a.group)});a.pickable&&this.pickingGroup.remove(a.pickingGroup);
this.updateBoundingBox()},updateBoundingBox:function(a,b){var c,d=this.boundingBox;this.boundingBoxMesh&&(this.modelGroup.remove(this.boundingBoxMesh),this.boundingBoxMesh.material.dispose(),this.boundingBoxMesh.geometry.dispose());a?(a.boundingBox||a.computeBoundingBox(),b?(c=a.boundingBox.clone(),c.applyMatrix4(b)):c=a.boundingBox,d.expandByPoint(c.min),d.expandByPoint(c.max)):(d.makeEmpty(),this.rotationGroup.traverse(function(a){void 0!==a.geometry&&(a.geometry.boundingBox||a.geometry.computeBoundingBox(),
a.userData.instance?(c=a.geometry.boundingBox.clone(),c.applyMatrix4(a.userData.instance.matrix)):c=a.geometry.boundingBox,d.expandByPoint(c.min),d.expandByPoint(c.max))}));this.controls.maxDistance=10*d.size().length();if(NGL.debug){var e=d.size(),e=new THREE.BoxGeometry(e.x,e.y,e.z),e=new THREE.WireframeGeometry(e);this.boundingBoxMesh=new THREE.LineSegments(e);d.center(this.boundingBoxMesh.position);this.modelGroup.add(this.boundingBoxMesh)}},fullscreen:function(){var a=this.container;a.requestFullscreen?
a.requestFullscreen():a.msRequestFullscreen?a.msRequestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen&&a.webkitRequestFullscreen()},getImage:function(a,b){return this.renderer.domElement.toBlob(a,b)},setFog:function(a,b,c,d,e,f){f=this.params;null!==a&&(f.fogType=a);b&&(f.fogColor=b);c&&(f.fogNear=c);d&&(f.fogFar=d);e&&(f.fogDensity=e);this.requestRender()},setBackground:function(a){var b=this.params;a&&(b.backgroundColor=a);this.setFog(null,b.backgroundColor);
this.renderer.setClearColor(b.backgroundColor,1);this.requestRender()},setCamera:function(a,b,c,d){var e=this.params;null!==a&&(e.cameraType=a);b&&(e.cameraFov=b);c&&(e.cameraNear=c);d&&(e.cameraFar=d);this.camera=this.perspectiveCamera;this.perspectiveCamera.fov=e.cameraFov;this.perspectiveCamera.near=e.cameraNear;this.perspectiveCamera.far=e.cameraFar;this.controls.object=this.camera;this.camera.updateProjectionMatrix();this.requestRender()},setClip:function(a,b){var c=this.params;a&&(c.clipNear=
a);b&&(c.clipFar=b);this.requestRender()},onWindowResize:function(){if(this.container===document)this.width=window.innerWidth,this.height=window.innerHeight;else{var a=this.container.getBoundingClientRect();this.width=a.width;this.height=a.height}this.aspect=this.width/this.height;this.perspectiveCamera.aspect=this.aspect;this.camera.updateProjectionMatrix();this.renderer.setPixelRatio(window.devicePixelRatio);this.renderer.setSize(this.width,this.height);this.pickingTexture.setSize(this.width*window.devicePixelRatio,
this.height*window.devicePixelRatio);this.controls.handleResize();this.requestRender()},updateInfo:function(a){var b=this.info,c=b.memory,b=b.render;if(a)c.programs=0,c.geometries=0,c.textures=0,b.calls=0,b.vertices=0,b.faces=0,b.points=0;else{var d=this.renderer.info;a=d.memory;d=d.render;c.programs=a.programs;c.geometries=a.geometries;c.textures=a.textures;b.calls+=d.calls;b.vertices+=d.vertices;b.faces+=d.faces;b.points+=d.points}},animate:function(){requestAnimationFrame(this.animate.bind(this));
this.controls.update()},screenshot:function(a){NGL.screenshot(this,a)},pick:function(){var a=new Float32Array(4),b=new Uint8Array(4);return function(c,d){var e,f,g,h=this.supportsReadPixelsFloat()?a:b;this.render(null,!0);e=this.renderer.context;this.renderer.setRenderTarget(this.pickingTexture);e.readPixels(c*window.devicePixelRatio,d*window.devicePixelRatio,1,1,e.RGBA,this.supportsReadPixelsFloat()?e.FLOAT:e.UNSIGNED_BYTE,h);this.renderer.setRenderTarget();e=this.supportsReadPixelsFloat()?Math.round(255*
h[0])<<16&16711680|Math.round(255*h[1])<<8&65280|Math.round(255*h[2])&255:h[0]<<16|h[1]<<8|h[2];(f=this.pickingGroup.getObjectById(Math.round(h[3])))&&f.userData.instance&&(g=f.userData.instance);NGL.debug&&(f=Array.apply([],h),NGL.log(h),NGL.log("picked color",[f[0].toPrecision(2),f[1].toPrecision(2),f[2].toPrecision(2),f[3].toPrecision(2)]),NGL.log("picked gid",e),NGL.log("picked instance",g),NGL.log("picked position",c,d),NGL.log("devicePixelRatio",window.devicePixelRatio));return{gid:e,instance:g}}}(),
requestRender:function(){this._renderPending||(this._renderPending=!0,requestAnimationFrame(this.render.bind(this)))},render:function(a,b,c){if(this._rendering)NGL.warn("tried to call 'render' from within 'render'");else{this._rendering=!0;(a=this.camera.position.length())||this.camera.position.set(0,0,this.params.cameraZ);var d=.5*this.boundingBox.size().length(),e=-(50-this.params.clipFar)/50,f=a-(50-this.params.clipNear)/50*d;this.camera.near=Math.max(.1,this.params.clipDist);this.camera.far=Math.max(1,
a+d*e);this.nearClip=f;e=-(50-this.params.fogFar)/50;a=new THREE.Fog(this.params.fogColor,Math.max(.1,a-(50-this.params.fogNear)/50*d),Math.max(1,a+d*e));this.modelGroup.fog=a;this.camera.updateMatrix();this.camera.updateMatrixWorld(!0);this.camera.matrixWorldInverse.getInverse(this.camera.matrixWorld);c||this.camera.updateProjectionMatrix();this.updateMaterialUniforms(this.scene,this.camera);this.sortProjectedPosition(this.scene,this.camera);this.updateInfo(!0);b?(this.renderer.clearTarget(this.pickingTexture),
this.renderer.render(this.pickingGroup,this.camera,this.pickingTexture),this.updateInfo(),this.renderer.setRenderTarget(),NGL.debug&&(this.renderer.clear(),this.renderer.render(this.pickingGroup,this.camera))):(this.renderer.clear(),this.renderer.render(this.backgroundGroup,this.camera),this.renderer.clearDepth(),this.updateInfo(),this.renderer.render(this.modelGroup,this.camera),this.updateInfo());this._renderPending=this._rendering=!1}},updateMaterialUniforms:function(){var a=new THREE.Matrix4,
b=new THREE.Matrix4;return function(c,d){var e=this.params.backgroundColor,f=this.nearClip;a.getInverse(d.projectionMatrix);b.copy(d.projectionMatrix).transpose();c.traverse(function(c){c.material&&(c=c.material.uniforms)&&(c.backgroundColor&&c.backgroundColor.value.set(e),c.nearClip&&(c.nearClip.value=f),c.projectionMatrixInverse&&c.projectionMatrixInverse.value.copy(a),c.projectionMatrixTranspose&&c.projectionMatrixTranspose.value.copy(b))})}}(),updateObjectUniforms:function(){var a=new THREE.Matrix4;
return function(b,c,d){b.material&&(c=b.material.uniforms)&&(c.objectId&&(c.objectId.value=this.supportsReadPixelsFloat()?b.id:b.id/255),c.modelViewMatrixInverse&&c.modelViewMatrixInverse.value.getInverse(b._modelViewMatrix),c.modelViewMatrixInverseTranspose&&(c.modelViewMatrixInverse?c.modelViewMatrixInverseTranspose.value.copy(c.modelViewMatrixInverse.value).transpose():c.modelViewMatrixInverseTranspose.value.getInverse(b._modelViewMatrix).transpose()),c.modelViewProjectionMatrix&&c.modelViewProjectionMatrix.value.multiplyMatrices(d.projectionMatrix,
b._modelViewMatrix),c.modelViewProjectionMatrixInverse&&(c.modelViewProjectionMatrix?a.copy(c.modelViewProjectionMatrix.value):a.multiplyMatrices(d.projectionMatrix,b._modelViewMatrix),c.modelViewProjectionMatrixInverse.value.getInverse(a)))}}(),sortProjectedPosition:function(){var a=new THREE.Vector3,b=new THREE.Matrix4,c=new THREE.Matrix4;return function(d,e){d.traverseVisible(function(d){if(d instanceof THREE.PointCloud&&d.sortParticles){b.multiplyMatrices(e.matrixWorldInverse,d.matrixWorld);c.multiplyMatrices(e.projectionMatrix,
b);var g=d.geometry.attributes,h=g.position.length/3;d.userData.sortData||(d.userData.sortData={});d=d.userData.sortData;d.__sortArray||(d.__sortArray=new Float32Array(2*h));for(var k=d.__sortArray,l=0;l<h;++l){var m=2*l;a.fromArray(g.position.array,3*l);a.applyProjection(c);k[m]=-a.z;k[m+1]=l}THREE.TypedArrayUtils.quicksortIP(k,2,0);var n,q,p,t,r;for(r in g){var l=g[r],m=l.array,w=l.itemSize;d[r]||(d[r]=new Float32Array(w*h));t=d[r];d[r]=m;for(l=0;l<h;++l){n=k[2*l+1];for(var x=0;x<w;++x)q=n*w+x,
p=l*w+x,t[p]=m[q]}g[r].array=t;g[r].needsUpdate=!0}}})}}(),clear:function(){NGL.log("scene cleared");this.scene.remove(this.rotationGroup);this.initScene();this.renderer.clear()},centerView:function(){var a=new THREE.Vector3;return function(b,c){c=c||this.boundingBox.center();this.controls.object.position.sub(this.controls.target);this.controls.target.copy(this.controls.target0);a.copy(c).multiplyScalar(-1);b&&(!0===b&&(b=this.boundingBox.size().length()/2/Math.tan(Math.PI*this.camera.fov/360)),b=
Math.max(b,1.2*this.params.clipDist),this.camera.position.multiplyScalar(b/this.camera.position.length()));this.rotationGroup.position.copy(a);this.rotationGroup.updateMatrixWorld();this.requestRender()}}(),getOrientation:function(){return[this.camera.position.toArray(),this.camera.up.toArray(),this.rotationGroup.position.toArray(),this.controls.target.toArray()]},setOrientation:function(a){console.log("setOrientation");this.controls.object.position.sub(this.controls.target);this.controls.target.copy(this.controls.target0);
this.controls.target.fromArray(a[3]);this.rotationGroup.position.fromArray(a[2]);this.rotationGroup.updateMatrixWorld();this.camera.up.fromArray(a[1]);this.camera.position.fromArray(a[0]);this.requestRender()}};NGL.TiledRenderer=function(a,b,c,d){d=d||{};this.renderer=a;this.camera=b;this.viewer=c;this.factor=void 0!==d.factor?d.factor:2;this.antialias=void 0!==d.antialias?d.antialias:!1;this.onProgress=d.onProgress;this.onFinish=d.onFinish;this.init()};
NGL.TiledRenderer.prototype={init:function(){this.antialias&&(this.factor*=2);this.n=this.factor*this.factor;var a=document.createElement("canvas");a.style.display="hidden";document.body.appendChild(a);this.antialias?(a.width=this.viewer.width*this.factor/2,a.height=this.viewer.height*this.factor/2):(a.width=this.viewer.width*this.factor,a.height=this.viewer.height*this.factor);this.ctx=a.getContext("2d");this.canvas=a;this.shearMatrix=new THREE.Matrix4;this.scaleMatrix=new THREE.Matrix4;a=THREE.Math.degToRad(.5*
this.camera.fov);this.near=this.camera.near;this.top=Math.tan(a)*this.near;this.bottom=-this.top;this.left=this.camera.aspect*this.bottom;this.right=this.camera.aspect*this.top;this.width=Math.abs(this.right-this.left);this.height=Math.abs(this.top-this.bottom)},makeAsymmetricFrustum:function(a,b){var c=this.factor,d=this.near;this.shearMatrix.set(1,0,(b%c-.5*(c-1))*this.width/d,0,0,1,-(Math.floor(b/c)-.5*(c-1))*this.height/d,0,0,0,1,0,0,0,0,1);this.scaleMatrix.set(c,0,0,0,0,c,0,0,0,0,1,0,0,0,0,1);
a.multiply(this.shearMatrix).multiply(this.scaleMatrix);return a},renderTile:function(a){this.viewer.renderer.setPixelRatio(window.devicePixelRatio*this.factor);this.makeAsymmetricFrustum(this.camera.projectionMatrix,a);this.viewer.render(null,null,!0);var b=a%this.factor*this.viewer.width,c=Math.floor(a/this.factor)*this.viewer.height;this.antialias?this.ctx.drawImage(this.renderer.domElement,Math.floor(b/2),Math.floor(c/2),Math.ceil(this.viewer.width/2),Math.ceil(this.viewer.height/2)):this.ctx.drawImage(this.renderer.domElement,
Math.floor(b),Math.floor(c),Math.ceil(this.viewer.width),Math.ceil(this.viewer.height));this.camera.updateProjectionMatrix();if("function"===typeof this.onProgress)this.onProgress(a+1,this.n,!1);this.viewer.renderer.setPixelRatio(window.devicePixelRatio)},render:function(){for(var a=this.n,b=0;b<=a;++b)if(b===a){if("function"===typeof this.onFinish)this.onFinish(b+1,a,!1)}else this.renderTile(b)},renderAsync:function(){for(var a=this.n,b=this.renderTile.bind(this),c=this.onFinish,d=0;d<=a;++d)setTimeout(function(d){d===
a?"function"===typeof c&&c(d+1,a,!1):b(d)},0,d)},dispose:function(){document.body.removeChild(this.canvas)}};
NGL.screenshot=function(a,b){function c(a,b,c){if("function"===typeof e.onProgress)e.onProgress(a,b,c)}function d(a){var b,d=g.split("/")[1];f?(b=t,b=NGL.trimCanvas(r.canvas,255*b.r|0,255*b.g|0,255*b.b|0,k?0:255)):b=r.canvas;b.toBlob(function(b){NGL.download(b,"screenshot."+d);c(a,a,!0);r.dispose()},g,h)}var e=b||{},f=void 0!==e.trim?e.trim:!1,g=void 0!==e.type?e.type:"image/png",h=void 0!==e.quality?e.quality:1,k=void 0!==e.transparent?e.transparent:!1,l=void 0!==e.factor?e.factor:!1,m=void 0!==
e.antialias?e.antialias:!1,n=a.renderer,q=a.camera,p=n.getClearAlpha(),t=n.getClearColor();k&&n.setClearAlpha(0);var r=new NGL.TiledRenderer(n,q,a,{factor:l,antialias:m,onProgress:c,onFinish:function(b,c){d(c);k&&n.setClearAlpha(p);a.requestRender()}});r.renderAsync()};
NGL.Buffer=function(a,b,c,d){d=d||{};this.pickable=!1;this.transparent=void 0!==d.transparent?d.transparent:!1;this.opaqueBack=void 0!==d.opaqueBack?d.opaqueBack:!1;this.dullInterior=void 0!==d.dullInterior?d.dullInterior:!1;this.side=void 0!==d.side?d.side:THREE.DoubleSide;this.opacity=void 0!==d.opacity?d.opacity:1;this.nearClip=void 0!==d.nearClip?d.nearClip:!0;this.background=void 0!==d.background?d.background:!1;this.lineWidth=void 0!==d.lineWidth?d.lineWidth:1;this.attributes=[];this.geometry=
new THREE.BufferGeometry;this.addAttributes({position:{type:"v3",value:a},color:{type:"c",value:b}});this.group=new THREE.Group;this.pickingGroup=new THREE.Group;c&&(this.addAttributes({pickingColor:{type:"c",value:c}}),this.pickable=!0);this.uniforms=THREE.UniformsUtils.merge([NGL.UniformsLib.fog,NGL.UniformsLib.lights,{opacity:{type:"f",value:this.opacity},nearClip:{type:"f",value:0},objectId:{type:"f",value:0}}]);this.pickingUniforms={nearClip:{type:"f",value:0},objectId:{type:"f",value:0}}};
NGL.Buffer.prototype={constructor:NGL.Buffer,finalize:function(){this.makeIndex();NGL.indexUint16&&(this.geometry.drawcalls=this.geometry.computeOffsets())},getRenderOrder:function(){var a=0;this instanceof NGL.TextBuffer?a=1:this.transparent&&(a=this instanceof NGL.SurfaceBuffer?3:2);return a},getMesh:function(a,b){b=b||this.getMaterial(a);if("wireframe"===a||this.wireframe){if(!this.wireframeGeometry){for(var c=this.geometry.attributes.index.array,d=c.length,e=new Uint32Array(6*d),f=0,g=0;f<d;f+=
3,g+=6){var h=c[f+0],k=c[f+1],l=c[f+2];e[g+0]=h;e[g+1]=k;e[g+2]=h;e[g+3]=l;e[g+4]=k;e[g+5]=l}this.wireframeGeometry=this.geometry.clone();this.wireframeGeometry.attributes.index.array=e}return new THREE.LineSegments(this.wireframeGeometry,b)}return new THREE.Mesh(this.geometry,b)},getMaterial:function(a){var b;if("picking"===a)b=new THREE.ShaderMaterial({uniforms:THREE.UniformsUtils.clone(this.pickingUniforms),attributes:this.attributes,vertexShader:NGL.getShader(this.vertexShader),fragmentShader:NGL.getShader(this.fragmentShader),
depthTest:!0,transparent:!1,depthWrite:!0,lights:!1,fog:!1}),b.side=this.side,b.defines.PICKING=1;else if("wireframe"===a||this.wireframe)b=new THREE.ShaderMaterial({uniforms:THREE.UniformsUtils.clone(this.uniforms),attributes:this.attributes,vertexShader:NGL.getShader("Line.vert"),fragmentShader:NGL.getShader("Line.frag"),depthTest:!0,transparent:this.transparent,depthWrite:!0,lights:!1,fog:!0,linewidth:this.lineWidth});else{b=new THREE.ShaderMaterial({uniforms:THREE.UniformsUtils.clone(this.uniforms),
attributes:this.attributes,vertexShader:NGL.getShader(this.vertexShader),fragmentShader:NGL.getShader(this.fragmentShader),depthTest:!0,transparent:this.transparent,depthWrite:!0,lights:!1,fog:!0});b.side=this.side;if("background"===a||this.background)b.defines.NOLIGHT=1;this.flatShaded&&(b.defines.FLAT_SHADED=1);this.opaqueBack&&(b.defines.OPAQUE_BACK=1);this.dullInterior&&(b.defines.DULL_INTERIOR=1)}this.nearClip&&(b.defines.NEAR_CLIP=1);return b},addUniforms:function(a){this.uniforms=THREE.UniformsUtils.merge([this.uniforms,
a]);this.pickingUniforms=THREE.UniformsUtils.merge([this.pickingUniforms,a])},addAttributes:function(a){var b={f:1,v2:2,v3:3,c:3};Object.keys(a).forEach(function(c){var d,e=a[c];this.attributes.push(c);e.value?(this.attributeSize*b[e.type]!==e.value.length&&NGL.error("attribute value has wrong length",c),d=e.value):d=new Float32Array(this.attributeSize*b[e.type]);this.geometry.addAttribute(c,new THREE.BufferAttribute(d,b[e.type]))},this)},setAttributes:function(a){var b=this.geometry.attributes;if(this.wireframeGeometry)var c=
this.wireframeGeometry.attributes;Object.keys(a).forEach(function(d){b[d].set(a[d]);b[d].needsUpdate=!0;this.wireframeGeometry&&(c[d].set(a[d]),c[d].needsUpdate=!0)},this)},makeIndex:function(){this.index&&this.geometry.addAttribute("index",new THREE.BufferAttribute(this.index,1))},setVisibility:function(a){this.group.visible=a;this.pickable&&(this.pickingGroup.visible=a)},dispose:function(){this.group.traverse(function(a){a.material&&a.material.dispose()});this.pickable&&this.pickingGroup.traverse(function(a){a.material&&
a.material.dispose()});this.geometry.dispose();this.wireframeGeometry&&this.wireframeGeometry.dispose()}};NGL.MeshBuffer=function(a,b,c,d,e,f){f=f||{};this.wireframe=void 0!==f.wireframe?f.wireframe:!1;this.flatShaded=void 0!==f.flatShaded?f.flatShaded:!1;this.attributeSize=this.size=a.length/3;this.vertexShader="Mesh.vert";this.fragmentShader="Mesh.frag";this.index=c;NGL.Buffer.call(this,a,b,e,f);this.addAttributes({normal:{type:"v3",value:d}});this.finalize();void 0===d&&this.geometry.computeVertexNormals()};
NGL.MeshBuffer.prototype=Object.create(NGL.Buffer.prototype);NGL.MeshBuffer.prototype.constructor=NGL.MeshBuffer;NGL.MappedBuffer=function(a){this.attributeSize=this.mappedSize=this.size*this.mappingSize;NGL.Buffer.call(this,null,null,null,a);this.addAttributes({mapping:{type:this.mappingType,value:null}})};NGL.MappedBuffer.prototype=Object.create(NGL.Buffer.prototype);NGL.MappedBuffer.prototype.constructor=NGL.MappedBuffer;NGL.MappedBuffer.prototype.finalize=function(){this.makeMapping();NGL.Buffer.prototype.finalize.call(this)};
NGL.MappedBuffer.prototype.setAttributes=function(a){var b=this.geometry.attributes,c=this.size,d=this.mappingSize,e,f,g,h,k,l,m;Object.keys(a).forEach(function(n){f=a[n];e=b[n];g=e.itemSize;h=e.array;for(n=0;n<c;++n){k=n*g;l=k*d;for(var q=0;q<d;++q){m=l+g*q;for(var p=0;p<g;++p)h[m+p]=f[k+p]}}e.needsUpdate=!0},this)};
NGL.MappedBuffer.prototype.makeMapping=function(){for(var a=this.size,b=this.mapping,c=this.mappingSize,d=this.mappingItemSize,e=this.geometry.attributes.mapping.array,f=0;f<a;f++)e.set(b,f*d*c)};
NGL.MappedBuffer.prototype.makeIndex=function(){var a=this.size,b=this.mappingSize,c=this.mappingIndices,d=this.mappingIndicesSize;this.geometry.addAttribute("index",new THREE.BufferAttribute(new Uint32Array(a*d),1));for(var e=this.geometry.attributes.index.array,f,g,h=0;h<a;h++){f=h*d;g=h*b;e.set(c,f);for(var k=0;k<d;++k)e[f+k]+=g}};
NGL.QuadBuffer=function(a){this.mapping=new Float32Array([-1,1,-1,-1,1,1,1,-1]);this.mappingIndices=new Uint32Array([0,1,2,1,3,2]);this.mappingIndicesSize=6;this.mappingType="v2";this.mappingSize=4;this.mappingItemSize=2;NGL.MappedBuffer.call(this,a)};NGL.QuadBuffer.prototype=Object.create(NGL.MappedBuffer.prototype);NGL.QuadBuffer.prototype.constructor=NGL.QuadBuffer;
NGL.BoxBuffer=function(a){this.mapping=new Float32Array([-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,-1,1,-1,1,1,-1,1,1,1,-1,1,1]);this.mappingIndices=new Uint32Array([0,1,2,0,2,3,1,5,6,1,6,2,4,6,5,4,7,6,0,7,4,0,3,7,0,5,1,0,4,5,3,2,6,3,6,7]);this.mappingIndicesSize=36;this.mappingType="v3";this.mappingSize=8;this.mappingItemSize=3;NGL.MappedBuffer.call(this,a)};NGL.BoxBuffer.prototype=Object.create(NGL.MappedBuffer.prototype);NGL.BoxBuffer.prototype.constructor=NGL.BoxBuffer;
NGL.AlignedBoxBuffer=function(a){this.mapping=new Float32Array([-1,1,-1,-1,-1,-1,1,1,-1,1,1,1,1,-1,-1,1,-1,1]);this.mappingIndices=new Uint32Array([0,1,2,1,4,2,2,4,3,4,5,3]);this.mappingIndicesSize=12;this.mappingType="v3";this.mappingSize=6;this.mappingItemSize=3;NGL.MappedBuffer.call(this,a)};NGL.AlignedBoxBuffer.prototype=Object.create(NGL.MappedBuffer.prototype);NGL.AlignedBoxBuffer.prototype.constructor=NGL.AlignedBoxBuffer;
NGL.SphereImpostorBuffer=function(a,b,c,d,e){this.size=a.length/3;this.vertexShader="SphereImpostor.vert";this.fragmentShader="SphereImpostor.frag";NGL.QuadBuffer.call(this,e);this.addUniforms({projectionMatrixInverse:{type:"m4",value:new THREE.Matrix4}});this.addAttributes({radius:{type:"f",value:null}});this.setAttributes({position:a,color:b,radius:c});d&&(this.addAttributes({pickingColor:{type:"c",value:null}}),this.setAttributes({pickingColor:d}),this.pickable=!0);this.finalize()};
NGL.SphereImpostorBuffer.prototype=Object.create(NGL.QuadBuffer.prototype);NGL.SphereImpostorBuffer.prototype.constructor=NGL.SphereImpostorBuffer;
NGL.CylinderImpostorBuffer=function(a,b,c,d,e,f,g,h){var k=h||k;this.shift=void 0!==k.shift?k.shift:0;this.cap=void 0!==k.cap?k.cap:!0;this.size=a.length/3;this.vertexShader="CylinderImpostor.vert";this.fragmentShader="CylinderImpostor.frag";NGL.AlignedBoxBuffer.call(this,k);this.addUniforms({modelViewMatrixInverse:{type:"m4",value:new THREE.Matrix4},shift:{type:"f",value:this.shift}});this.addAttributes({position1:{type:"v3",value:null},position2:{type:"v3",value:null},color2:{type:"c",value:null},
radius:{type:"f",value:null}});this.setAttributes({position:NGL.Utils.calculateCenterArray(a,b),position1:a,position2:b,color:c,color2:d,radius:e});f&&(this.addAttributes({pickingColor:{type:"c",value:null},pickingColor2:{type:"c",value:null}}),this.setAttributes({pickingColor:f,pickingColor2:g}),this.pickable=!0);this.finalize()};NGL.CylinderImpostorBuffer.prototype=Object.create(NGL.AlignedBoxBuffer.prototype);NGL.CylinderImpostorBuffer.prototype.constructor=NGL.CylinderImpostorBuffer;
NGL.CylinderImpostorBuffer.prototype.getMaterial=function(a){a=NGL.Buffer.prototype.getMaterial.call(this,a);this.cap&&(a.defines.CAP=1);return a};
NGL.HyperballStickImpostorBuffer=function(a,b,c,d,e,f,g,h,k){var l=k||l;k=void 0!==l.shrink?l.shrink:.14;this.size=a.length/3;this.vertexShader="HyperballStickImpostor.vert";this.fragmentShader="HyperballStickImpostor.frag";NGL.BoxBuffer.call(this,l);this.addUniforms({modelViewProjectionMatrix:{type:"m4",value:new THREE.Matrix4},modelViewProjectionMatrixInverse:{type:"m4",value:new THREE.Matrix4},modelViewMatrixInverseTranspose:{type:"m4",value:new THREE.Matrix4},shrink:{type:"f",value:k}});this.addAttributes({color:{type:"c",
value:null},color2:{type:"c",value:null},radius:{type:"f",value:null},radius2:{type:"f",value:null},position1:{type:"v3",value:null},position2:{type:"v3",value:null}});this.setAttributes({color:c,color2:d,radius:e,radius2:f,position1:a,position2:b,position:NGL.Utils.calculateCenterArray(a,b)});g&&(this.addAttributes({pickingColor:{type:"c",value:null},pickingColor2:{type:"c",value:null}}),this.setAttributes({pickingColor:g,pickingColor2:h}),this.pickable=!0);this.finalize()};
NGL.HyperballStickImpostorBuffer.prototype=Object.create(NGL.BoxBuffer.prototype);NGL.HyperballStickImpostorBuffer.prototype.constructor=NGL.HyperballStickImpostorBuffer;
NGL.GeometryBuffer=function(a,b,c,d){var e=this.geo,f=a.length/3,g=e.vertices.length,h=e.faces.length;this.size=f*g;this.positionCount=f;this.geoPosition=NGL.Utils.positionFromGeometry(e);this.geoNormal=NGL.Utils.normalFromGeometry(e);this.geoIndex=NGL.Utils.indexFromGeometry(e);this.meshPosition=new Float32Array(3*this.size);this.meshNormal=new Float32Array(3*this.size);this.meshIndex=new Uint32Array(f*h*3);this.meshColor=new Float32Array(3*this.size);this.meshPickingColor=new Float32Array(3*this.size);
this.transformedGeoPosition=new Float32Array(3*g);this.transformedGeoNormal=new Float32Array(3*g);this.makeIndex();this.setAttributes({position:a,color:b,pickingColor:c});this.meshBuffer=new NGL.MeshBuffer(this.meshPosition,this.meshColor,this.meshIndex,this.meshNormal,this.meshPickingColor,d);this.pickable=this.meshBuffer.pickable;this.geometry=this.meshBuffer.geometry};
NGL.GeometryBuffer.prototype={constructor:NGL.GeometryBuffer,get group(){return this.meshBuffer.group},get pickingGroup(){return this.meshBuffer.pickingGroup},get transparent(){return this.meshBuffer.transparent},set transparent(a){this.meshBuffer.transparent=a},applyPositionTransform:function(){},setAttributes:function(){var a=new THREE.Matrix4,b=new THREE.Matrix3;return function(c){var d,e,f;if(c.position){d=c.position;var g=this.geoPosition,h=this.meshPosition,k=this.transformedGeoPosition}if(c.color){e=
c.color;var l=this.meshColor}if(c.pickingColor){f=c.pickingColor;var m=this.meshPickingColor}if(c=this.updateNormals&&d||!this.meshBuffer)var n=this.geoNormal,q=this.meshNormal,p=this.transformedGeoNormal;var t=this.positionCount,r=this.geo.vertices.length,w,x,s,y,v;for(w=0;w<t;++w){s=w*r*3;v=3*w;d&&(k.set(g),a.makeTranslation(d[v+0],d[v+1],d[v+2]),this.applyPositionTransform(a,w,v),a.applyToVector3Array(k),h.set(k,s));c&&(p.set(n),b.getNormalMatrix(a),b.applyToVector3Array(p),q.set(p,s));if(e)for(x=
0;x<r;++x)y=s+3*x,l[y+0]=e[v+0],l[y+1]=e[v+1],l[y+2]=e[v+2];if(f)for(x=0;x<r;++x)y=s+3*x,m[y+0]=f[v+0],m[y+1]=f[v+1],m[y+2]=f[v+2]}g={};d&&(g.position=h);c&&(g.normal=q);e&&(g.color=l);f&&(g.pickingColor=m);this.meshBuffer&&this.meshBuffer.setAttributes(g)}}(),makeIndex:function(){var a=this.geoIndex,b=this.meshIndex,c=this.positionCount,d=this.geo.vertices.length,e,f,g,h=3*this.geo.faces.length;for(f=0;f<c;++f)for(e=f*h,g=e+h,b.set(a,e);e<g;++e)b[e]+=f*d},getRenderOrder:function(){return this.meshBuffer.getRenderOrder()},
getMesh:function(a,b){return this.meshBuffer.getMesh(a,b)},getMaterial:function(a){return this.meshBuffer.getMaterial(a)},setVisibility:NGL.Buffer.prototype.setVisibility,dispose:NGL.Buffer.prototype.dispose};NGL.SphereGeometryBuffer=function(a,b,c,d,e){this.geo=new THREE.IcosahedronGeometry(1,void 0!==e.sphereDetail?e.sphereDetail:1);this.setPositionTransform(c);NGL.GeometryBuffer.call(this,a,b,d,e)};NGL.SphereGeometryBuffer.prototype=Object.create(NGL.GeometryBuffer.prototype);
NGL.SphereGeometryBuffer.prototype.constructor=NGL.SphereGeometryBuffer;NGL.SphereGeometryBuffer.prototype.setPositionTransform=function(a){var b,c=new THREE.Vector3;this.applyPositionTransform=function(d,e){b=a[e];c.set(b,b,b);d.scale(c)}};NGL.SphereGeometryBuffer.prototype.setAttributes=function(a){a.radius&&this.setPositionTransform(a.radius);NGL.GeometryBuffer.prototype.setAttributes.call(this,a)};
NGL.CylinderGeometryBuffer=function(a,b,c,d,e,f,g,h){var k=void 0!==h.radiusSegments?h.radiusSegments:10;this.updateNormals=!0;var l=(new THREE.Matrix4).makeRotationX(Math.PI/2);this.geo=new THREE.CylinderGeometry(1,1,1,k,1,!0);this.geo.applyMatrix(l);k=a.length;l=e.length;this._position=new Float32Array(2*k);this._color=new Float32Array(2*k);this._pickingColor=new Float32Array(2*k);this._from=new Float32Array(2*k);this._to=new Float32Array(2*k);this._radius=new Float32Array(2*l);this.__center=new Float32Array(k);
this.setAttributes({position1:a,position2:b,color:c,color2:d,radius:e,pickingColor:f,pickingColor2:g},!0);this.setPositionTransform(this._from,this._to,this._radius);NGL.GeometryBuffer.call(this,this._position,this._color,this._pickingColor,h)};NGL.CylinderGeometryBuffer.prototype=Object.create(NGL.GeometryBuffer.prototype);NGL.CylinderImpostorBuffer.prototype.constructor=NGL.CylinderImpostorBuffer;
NGL.CylinderGeometryBuffer.prototype.setPositionTransform=function(a,b,c){var d,e=new THREE.Vector3,f=new THREE.Vector3,g=new THREE.Vector3,h=new THREE.Vector3(0,1,0);this.applyPositionTransform=function(k,l,m){f.fromArray(a,m);g.fromArray(b,m);k.lookAt(f,g,h);d=c[l];e.set(d,d,f.distanceTo(g));k.scale(e)}};
NGL.CylinderGeometryBuffer.prototype.setAttributes=function(a,b){if(this.meshBuffer||b){var c=this._position.length/2,d=this._radius.length/2,e={};a.position1&&a.position2&&(NGL.Utils.calculateCenterArray(a.position1,a.position2,this.__center),NGL.Utils.calculateCenterArray(a.position1,this.__center,this._position),NGL.Utils.calculateCenterArray(this.__center,a.position2,this._position,c),this._from.set(a.position1),this._from.set(this.__center,c),this._to.set(this.__center),this._to.set(a.position2,
c),e.position=this._position);a.color&&a.color2&&(this._color.set(a.color),this._color.set(a.color2,c),e.color=this._color);a.pickingColor&&a.pickingColor2&&(this._pickingColor.set(a.pickingColor),this._pickingColor.set(a.pickingColor2,c),e.pickingColor=this._pickingColor);a.radius&&(this._radius.set(a.radius),this._radius.set(a.radius,d));(a.position1&&a.position2||a.radius)&&this.setPositionTransform(this._from,this._to,this._radius);this.meshBuffer&&NGL.GeometryBuffer.prototype.setAttributes.call(this,
e)}else NGL.GeometryBuffer.prototype.setAttributes.call(this,a)};NGL.PointBuffer=function(a,b,c){c=c||{};this.pointSize=void 0!==c.pointSize?c.pointSize:1;this.sizeAttenuation=void 0!==c.sizeAttenuation?c.sizeAttenuation:!0;this.sort=void 0!==c.sort?c.sort:!1;this.attributeSize=this.size=a.length/3;this.tex=new THREE.Texture(NGL.Resources["../img/radial.png"]);this.tex.needsUpdate=!0;this.sort||(this.tex.premultiplyAlpha=!0);NGL.Buffer.call(this,a,b,null,c)};NGL.PointBuffer.prototype=Object.create(NGL.Buffer.prototype);
NGL.PointBuffer.prototype.constructor=NGL.PointBuffer;NGL.PointBuffer.prototype.getMesh=function(a,b){b=b||this.getMaterial(a);var c=new THREE.PointCloud(this.geometry,b);this.sort&&(c.sortParticles=!0);return c};
NGL.PointBuffer.prototype.getMaterial=function(a){return this.sort?new THREE.PointCloudMaterial({map:this.tex,blending:THREE.NormalBlending,depthTest:!0,transparent:!0,vertexColors:!0,size:this.pointSize,sizeAttenuation:this.sizeAttenuation,opacity:this.opacity,fog:!0}):new THREE.PointCloudMaterial({map:this.tex,depthTest:!1,transparent:!0,blending:THREE.CustomBlending,blendEquation:THREE.AddEquation,blendSrc:THREE.OneFactor,blendDst:THREE.OneMinusSrcAlphaFactor,vertexColors:!0,size:this.pointSize,
sizeAttenuation:this.sizeAttenuation,opacity:this.opacity,fog:!0})};NGL.PointBuffer.prototype.dispose=function(){NGL.Buffer.prototype.dispose.call(this);this.tex.dispose()};
NGL.LineBuffer=function(a,b,c,d,e){e=e||{};this.transparent=void 0!==e.transparent?e.transparent:!1;this.opacity=void 0!==e.opacity?e.opacity:1;this.nearClip=void 0!==e.nearClip?e.nearClip:!0;this.lineWidth=void 0!==e.lineWidth?e.lineWidth:1;this.size=a.length/3;this.vertexShader="Line.vert";this.fragmentShader="Line.frag";e=4*this.size;this.attributes=["position","color"];this.geometry=new THREE.BufferGeometry;this.geometry.addAttribute("position",new THREE.BufferAttribute(new Float32Array(3*e),
3));this.geometry.addAttribute("color",new THREE.BufferAttribute(new Float32Array(3*e),3));this.setAttributes({from:a,to:b,color:c,color2:d});this.uniforms=THREE.UniformsUtils.merge([NGL.UniformsLib.fog,{opacity:{type:"f",value:this.opacity},nearClip:{type:"f",value:0}}]);this.group=new THREE.Group};
NGL.LineBuffer.prototype={constructor:NGL.LineBuffer,setAttributes:function(a){var b,c,d,e,f,g,h=this.geometry.attributes;a.from&&a.to&&(b=a.from,c=a.to,f=h.position.array,h.position.needsUpdate=!0);a.color&&a.color2&&(d=a.color,e=a.color2,g=h.color.array,h.color.needsUpdate=!0);a=this.size;for(var h=6*a,k,l,m,n,q,p,t,r,w=0;w<a;w++)l=3*w,k=6*w,b&&c&&(m=b[l+0],n=b[l+1],q=b[l+2],p=c[l+0],t=c[l+1],r=c[l+2],m=(m+p)/2,n=(n+t)/2,q=(q+r)/2,f[k+0]=b[l+0],f[k+1]=b[l+1],f[k+2]=b[l+2],f[k+3]=m,f[k+4]=n,f[k+
5]=q),d&&e&&(g[k+0]=d[l+0],g[k+1]=d[l+1],g[k+2]=d[l+2],g[k+3]=d[l+0],g[k+4]=d[l+1],g[k+5]=d[l+2]),k+=h,b&&c&&(f[k+0]=m,f[k+1]=n,f[k+2]=q,f[k+3]=c[l+0],f[k+4]=c[l+1],f[k+5]=c[l+2]),d&&e&&(g[k+0]=e[l+0],g[k+1]=e[l+1],g[k+2]=e[l+2],g[k+3]=e[l+0],g[k+4]=e[l+1],g[k+5]=e[l+2])},getRenderOrder:NGL.Buffer.prototype.getRenderOrder,getMesh:function(a,b){b=b||this.getMaterial(a);return new THREE.LineSegments(this.geometry,b)},getMaterial:function(a){a=THREE.UniformsUtils.clone(this.uniforms);a=new THREE.ShaderMaterial({uniforms:a,
attributes:this.attributes,vertexShader:NGL.getShader(this.vertexShader),fragmentShader:NGL.getShader(this.fragmentShader),depthTest:!0,transparent:this.transparent,depthWrite:!0,lights:!1,fog:!0,linewidth:this.lineWidth});this.nearClip&&(a.defines.NEAR_CLIP=1);return a},setVisibility:NGL.Buffer.prototype.setVisibility,dispose:NGL.Buffer.prototype.dispose};
NGL.TraceBuffer=function(a,b,c){this.size=a.length/3;var d=this.size-1;this.from=new Float32Array(3*d);this.to=new Float32Array(3*d);this.lineColor=new Float32Array(3*d);this.lineColor2=new Float32Array(3*d);this.setAttributes({position:a,color:b});this.lineBuffer=new NGL.LineBuffer(this.from,this.to,this.lineColor,this.lineColor2,c);this.pickable=this.lineBuffer.pickable;this.geometry=this.lineBuffer.geometry};
NGL.TraceBuffer.prototype={constructor:NGL.TraceBuffer,get group(){return this.lineBuffer.group},get pickingGroup(){return this.lineBuffer.pickingGroup},get transparent(){return this.lineBuffer.transparent},set transparent(a){this.lineBuffer.transparent=a},setAttributes:function(a){var b,c,d,e,f,g;a.position&&(b=a.position,d=this.from,e=this.to);a.color&&(c=a.color,f=this.lineColor,g=this.lineColor2);a=this.size-1;for(var h=0,k;h<a;++h)k=3*h,b&&(d[k+0]=b[k+0],d[k+1]=b[k+1],d[k+2]=b[k+2],e[k+0]=b[k+
3],e[k+1]=b[k+4],e[k+2]=b[k+5]),c&&(f[k+0]=c[k+0],f[k+1]=c[k+1],f[k+2]=c[k+2],g[k+0]=c[k+3],g[k+1]=c[k+4],g[k+2]=c[k+5]);a={};b&&(a.from=d,a.to=e);c&&(a.color=f,a.color2=g);this.lineBuffer&&this.lineBuffer.setAttributes(a)},getRenderOrder:function(){return this.lineBuffer.getRenderOrder()},getMesh:function(a,b){return this.lineBuffer.getMesh(a,b)},getMaterial:function(a){return this.lineBuffer.getMaterial(a)},setVisibility:NGL.Buffer.prototype.setVisibility,dispose:NGL.Buffer.prototype.dispose};
NGL.ParticleSpriteBuffer=function(a,b,c){this.size=a.length/3;this.vertexShader="ParticleSprite.vert";this.fragmentShader="ParticleSprite.frag";NGL.QuadBuffer.call(this);this.addUniforms({projectionMatrixInverse:{type:"m4",value:new THREE.Matrix4}});this.addAttributes({radius:{type:"f",value:null}});this.setAttributes({position:a,color:b,radius:c});this.finalize();this.material.lights=!1};NGL.ParticleSpriteBuffer.prototype=Object.create(NGL.QuadBuffer.prototype);
NGL.ParticleSpriteBuffer.prototype.constructor=NGL.ParticleSpriteBuffer;
NGL.RibbonBuffer=function(a,b,c,d,e,f,g){g=g||{};this.transparent=void 0!==g.transparent?g.transparent:!1;this.side=void 0!==g.side?g.side:THREE.DoubleSide;this.opacity=void 0!==g.opacity?g.opacity:1;this.nearClip=void 0!==g.nearClip?g.nearClip:!0;this.flatShaded=void 0!==g.flatShaded?g.flatShaded:!1;this.vertexShader="Ribbon.vert";this.fragmentShader="Ribbon.frag";this.size=a.length/3-1;g=4*this.size;this.attributes="position normal inputDir inputSize inputNormal inputColor".split(" ");f&&this.attributes.push("pickingColor");
this.uniforms=THREE.UniformsUtils.merge([NGL.UniformsLib.fog,NGL.UniformsLib.lights,{opacity:{type:"f",value:this.opacity},nearClip:{type:"f",value:0},objectId:{type:"f",value:0}}]);this.pickingUniforms={nearClip:{type:"f",value:0},objectId:{type:"f",value:0}};this.geometry=new THREE.BufferGeometry;this.geometry.addAttribute("position",new THREE.BufferAttribute(new Float32Array(3*g),3));this.geometry.addAttribute("inputDir",new THREE.BufferAttribute(new Float32Array(3*g),3));this.geometry.addAttribute("inputSize",
new THREE.BufferAttribute(new Float32Array(g),1));this.geometry.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(3*g),3));this.geometry.addAttribute("inputColor",new THREE.BufferAttribute(new Float32Array(3*g),3));f&&(this.geometry.addAttribute("pickingColor",new THREE.BufferAttribute(new Float32Array(3*g),3)),this.pickable=!0);this.setAttributes({position:a,normal:b,dir:c,color:d,size:e,pickingColor:f});this.group=new THREE.Group;this.pickingGroup=new THREE.Group;NGL.Buffer.prototype.finalize.call(this)};
NGL.RibbonBuffer.prototype={constructor:NGL.RibbonBuffer,setAttributes:function(a){var b=this.size,c=this.geometry.attributes,d,e,f,g,h,k,l,m,n,q,p,t;a.position&&(d=a.position,l=c.position.array,c.position.needsUpdate=!0);a.normal&&(e=a.normal,m=c.normal.array,c.normal.needsUpdate=!0);a.size&&(f=a.size,n=c.inputSize.array,c.inputSize.needsUpdate=!0);a.dir&&(g=a.dir,q=c.inputDir.array,c.inputDir.needsUpdate=!0);a.color&&(h=a.color,p=c.inputColor.array,c.inputColor.needsUpdate=!0);a.pickingColor&&(k=
a.pickingColor,t=c.pickingColor.array,c.pickingColor.needsUpdate=!0);var r,w,x,s,y=f?f[0]:null;for(a=0;a<b;++a){s=3*a;r=12*a;x=4*a;d&&(l[r+0]=d[s+0],l[r+1]=d[s+1],l[r+2]=d[s+2],l[r+3]=d[s+0],l[r+4]=d[s+1],l[r+5]=d[s+2],l[r+6]=d[s+3],l[r+7]=d[s+4],l[r+8]=d[s+5],l[r+9]=d[s+3],l[r+10]=d[s+4],l[r+11]=d[s+5]);e&&(m[r+0]=-e[s+0],m[r+1]=-e[s+1],m[r+2]=-e[s+2],m[r+3]=-e[s+0],m[r+4]=-e[s+1],m[r+5]=-e[s+2],m[r+6]=-e[s+3],m[r+7]=-e[s+4],m[r+8]=-e[s+5],m[r+9]=-e[s+3],m[r+10]=-e[s+4],m[r+11]=-e[s+5]);for(c=0;4>
c;++c)w=r+3*c,h&&(p[w+0]=h[s+0],p[w+1]=h[s+1],p[w+2]=h[s+2]),k&&(t[w+0]=k[s+0],t[w+1]=k[s+1],t[w+2]=k[s+2]);f&&(y!=f[a]?(n[x+0]=Math.abs(y),n[x+1]=Math.abs(y)):(n[x+0]=Math.abs(f[a]),n[x+1]=Math.abs(f[a])),n[x+2]=Math.abs(f[a]),n[x+3]=Math.abs(f[a]),y=f[a]);g&&(q[r+0]=g[s+0],q[r+1]=g[s+1],q[r+2]=g[s+2],q[r+3]=-g[s+0],q[r+4]=-g[s+1],q[r+5]=-g[s+2],q[r+6]=g[s+3],q[r+7]=g[s+4],q[r+8]=g[s+5],q[r+9]=-g[s+3],q[r+10]=-g[s+4],q[r+11]=-g[s+5])}},makeIndex:function(){var a=this.size,b=4*a,c=new Uint32Array([0,
1,2,1,3,2]);this.geometry.addAttribute("index",new THREE.BufferAttribute(new Uint32Array(3*b),1));var b=this.geometry.attributes.index.array,d,e,f,g;for(e=0;e<a;++e)for(f=6*e,g=4*e,b.set(c,f),d=0;6>d;++d)b[f+d]+=g},getRenderOrder:NGL.Buffer.prototype.getRenderOrder,getMesh:NGL.Buffer.prototype.getMesh,getMaterial:NGL.Buffer.prototype.getMaterial,setVisibility:NGL.Buffer.prototype.setVisibility,dispose:NGL.Buffer.prototype.dispose};
NGL.TubeMeshBuffer=function(a,b,c,d,e,f,g,h){h=h||{};this.rx=void 0!==h.rx?h.rx:1.5;this.ry=void 0!==h.ry?h.ry:.5;this.radialSegments=void 0!==h.radialSegments?h.radialSegments:4;this.capVertices=(this.capped=void 0!==h.capped?h.capped:!1)?this.radialSegments:0;this.capTriangles=this.capped?this.radialSegments-2:0;var k=this.size=a.length/3,l=k-1,k=k*this.radialSegments*3+6*this.capVertices;this.meshPosition=new Float32Array(k);this.meshColor=new Float32Array(k);this.meshNormal=new Float32Array(k);
this.meshPickingColor=new Float32Array(k);this.meshIndex=new Uint32Array(2*l*this.radialSegments*3+6*this.capTriangles);this.makeIndex();this.setAttributes({position:a,normal:b,binormal:c,tangent:d,color:e,size:f,pickingColor:g});this.meshBuffer=new NGL.MeshBuffer(this.meshPosition,this.meshColor,this.meshIndex,this.meshNormal,this.meshPickingColor,h);this.pickable=this.meshBuffer.pickable;this.geometry=this.meshBuffer.geometry};
NGL.TubeMeshBuffer.prototype={constructor:NGL.TubeMeshBuffer,get group(){return this.meshBuffer.group},get pickingGroup(){return this.meshBuffer.pickingGroup},get transparent(){return this.meshBuffer.transparent},set transparent(a){this.meshBuffer.transparent=a},setAttributes:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c){var d=this.rx,e=this.ry,f=this.size,g=f-1,h=this.radialSegments,k,l,m,n,q,p,t,r,w,x,s;c.position&&(k=c.position,l=c.normal,m=c.binormal,n=c.tangent,p=
c.size,r=this.meshPosition,x=this.meshNormal);c.color&&(q=c.color,w=this.meshColor);c.pickingColor&&(t=c.pickingColor,s=this.meshPickingColor);var y,v,G,u,B,L,z,E,A,O,M,H,R,I,D,N,S,U,P=[],Y=[],aa=[],fa=[],la=[],J=[];if(k)for(c=0;c<h;++c)v=c/h*2*Math.PI,P[c]=d*Math.cos(v),Y[c]=e*Math.sin(v),aa[c]=d*Math.cos(v-.01),fa[c]=e*Math.sin(v-.01),la[c]=d*Math.cos(v+.01),J[c]=e*Math.sin(v+.01);for(y=0;y<f;++y)for(d=3*y,e=d*h,k&&(a.set(n[d+0],n[d+1],n[d+2]),O=l[d+0],M=l[d+1],H=l[d+2],R=m[d+0],I=m[d+1],D=m[d+
2],N=k[d+0],S=k[d+1],U=k[d+2],A=p[y]),c=0;c<h;++c)v=e+3*c,k&&(G=-A*P[c],u=A*Y[c],B=-A*aa[c],L=A*fa[c],z=-A*la[c],E=A*J[c],r[v+0]=N+G*O+u*R,r[v+1]=S+G*M+u*I,r[v+2]=U+G*H+u*D,b.set(z*O+E*R-(B*O+L*R),z*M+E*I-(B*M+L*I),z*H+E*D-(B*H+L*D)).cross(a),x[v+0]=b.x,x[v+1]=b.y,x[v+2]=b.z),q&&(w[v+0]=q[d+0],w[v+1]=q[d+1],w[v+2]=q[d+2]),t&&(s[v+0]=t[d+0],s[v+1]=t[d+1],s[v+2]=t[d+2]);d=0;e=3*f*h;for(c=0;c<h;++c)v=d+3*c,l=e+3*c,k&&(r[l+0]=r[v+0],r[l+1]=r[v+1],r[l+2]=r[v+2],x[l+0]=n[d+0],x[l+1]=n[d+1],x[l+2]=n[d+2]),
q&&(w[l+0]=w[v+0],w[l+1]=w[v+1],w[l+2]=w[v+2]),t&&(s[l+0]=s[v+0],s[l+1]=s[v+1],s[l+2]=s[v+2]);d=3*(f-1)*h;e=3*(f+1)*h;for(c=0;c<h;++c)v=d+3*c,l=e+3*c,k&&(r[l+0]=r[v+0],r[l+1]=r[v+1],r[l+2]=r[v+2],x[l+0]=n[3*g+0],x[l+1]=n[3*g+1],x[l+2]=n[3*g+2]),q&&(w[l+0]=w[v+0],w[l+1]=w[v+1],w[l+2]=w[v+2]),t&&(s[l+0]=s[v+0],s[l+1]=s[v+1],s[l+2]=s[v+2]);f={};k&&(f.position=r,f.normal=x);q&&(f.color=w);t&&(f.pickingColor=s);this.meshBuffer&&this.meshBuffer.setAttributes(f)}}(),makeIndex:function(){var a=this.meshIndex,
b=this.size,c=b-1,d=this.capTriangles,e=this.radialSegments,f=this.radialSegments+1,g,h,k,l,m,n;for(g=0;g<c;++g)for(h=g*e*6,k=g*e,l=(g+1)*e,n=0;n<e;++n)m=h+6*n,a[m]=k+n,a[m+1]=k+(n+1)%e,a[m+2]=l+n,a[m+3]=l+n,a[m+4]=k+(n+1)%e,a[m+5]=l+(n+1)%e;g=[0];for(n=1;n<f/2;++n)g.push(n),e-n!==n&&g.push(e-n);m=c*e*6;h=b*e;for(n=0;n<g.length-2;++n)0===n%2?(a[m+3*n+0]=h+g[n+0],a[m+3*n+1]=h+g[n+1],a[m+3*n+2]=h+g[n+2]):(a[m+3*n+0]=h+g[n+2],a[m+3*n+1]=h+g[n+1],a[m+3*n+2]=h+g[n+0]);m=c*e*6+3*d;h=b*e+e;for(n=0;n<g.length-
2;++n)0===n%2?(a[m+3*n+0]=h+g[n+0],a[m+3*n+1]=h+g[n+1],a[m+3*n+2]=h+g[n+2]):(a[m+3*n+0]=h+g[n+2],a[m+3*n+1]=h+g[n+1],a[m+3*n+2]=h+g[n+0])},getRenderOrder:function(){return this.meshBuffer.getRenderOrder()},getMesh:function(a,b){return this.meshBuffer.getMesh(a,b)},getMaterial:function(a){return this.meshBuffer.getMaterial(a)},setVisibility:NGL.Buffer.prototype.setVisibility,dispose:NGL.Buffer.prototype.dispose};NGL.SurfaceBuffer=function(){NGL.MeshBuffer.apply(this,arguments)};
NGL.SurfaceBuffer.prototype=Object.create(NGL.MeshBuffer.prototype);NGL.SurfaceBuffer.prototype.constructor=NGL.SurfaceBuffer;NGL.SphereBuffer=function(a,b,c,d,e,f){return!NGL.extensionFragDepth||f?new NGL.SphereGeometryBuffer(a,b,c,d,e):new NGL.SphereImpostorBuffer(a,b,c,d,e)};NGL.CylinderBuffer=function(a,b,c,d,e,f,g,h,k){return!NGL.extensionFragDepth||k?new NGL.CylinderGeometryBuffer(a,b,c,d,e,f,g,h):new NGL.CylinderImpostorBuffer(a,b,c,d,e,f,g,h)};
NGL.HyperballStickBuffer=function(a,b,c,d,e,f,g,h,k,l){return!NGL.extensionFragDepth||l?new NGL.CylinderGeometryBuffer(a,b,c,d,NGL.Utils.calculateMinArray(e,f),g,h,k):new NGL.HyperballStickImpostorBuffer(a,b,c,d,e,f,g,h,k)};
NGL.getFont=function(a){var b={},c,d,e,f;NGL.Resources["../fonts/"+a+".fnt"].split("\n").forEach(function(a){if("char "===a.substr(0,5)){var h={};a.substr(5).split(/\s+/).forEach(function(a){a=a.split("=");h[a[0]]=parseInt(a[1])});a=h.x;var k=h.y,l=h.width,m=h.height;h.textureCoords=new Float32Array([a/d,1-k/e,a/d,1-(k+m)/e,(a+l)/d,1-k/e,(a+l)/d,1-(k+m)/e]);h.width2=10*l/d;h.height2=10*m/e;h.xadvance2=10*h.xadvance/d;h.xoffset2=10*h.xoffset/d;h.yoffset2=10*h.yoffset/e;h.lineHeight=10*f/e;b[h.id]=
h}else"common "===a.substr(0,7)&&(c=a.match(/scaleW=([0-9]+)/),null!==c&&(d=c[1]),c=a.match(/scaleH=([0-9]+)/),null!==c&&(e=c[1]),c=a.match(/base=([0-9]+)/),c=a.match(/lineHeight=([0-9]+)/),null!==c&&(f=c[1]))});return b};
NGL.TextBuffer=function(a,b,c,d,e){e=e||{};this.antialias=void 0!==e.antialias?e.antialias:!0;var f=void 0!==e.font?e.font:"LatoBlack";this.font=NGL.getFont(f);this.tex=new THREE.Texture(NGL.Resources["../fonts/"+f+".png"]);this.tex.needsUpdate=!0;for(var f=a.length/3,g=0,h=0;h<f;++h)g+=d[h].length;this.text=d;this.size=g;this.positionCount=f;this.vertexShader="SDFFont.vert";this.fragmentShader="SDFFont.frag";NGL.QuadBuffer.call(this,e);this.addUniforms({fontTexture:{type:"t",value:this.tex},backgroundColor:{type:"c",
value:new THREE.Color("black")}});this.addAttributes({inputTexCoord:{type:"v2",value:null},inputSize:{type:"f",value:null}});this.setAttributes({position:a,size:b,color:c});this.finalize()};NGL.TextBuffer.prototype=Object.create(NGL.QuadBuffer.prototype);NGL.TextBuffer.prototype.constructor=NGL.TextBuffer;
NGL.TextBuffer.prototype.getMaterial=function(){var a=NGL.Buffer.prototype.getMaterial.call(this);this.antialias&&(a.transparent=!0,a.depthWrite=!0,a.blending=THREE.NormalBlending,a.defines.ANTIALIAS=1);a.lights=!1;a.uniforms.fontTexture.value=this.tex;a.needsUpdate=!0;return a};
NGL.TextBuffer.prototype.setAttributes=function(a){var b,c,d,e,f,g,h=this.text,k=this.geometry.attributes;a.position&&(b=a.position,e=k.position.array,k.position.needsUpdate=!0);a.size&&(c=a.size,f=k.inputSize.array,k.inputSize.needsUpdate=!0);a.color&&(d=a.color,g=k.color.array,k.color.needsUpdate=!0);for(var k=this.positionCount,l,m,n=0,q,p,t=0;t<k;t++)for(m=3*t,l=h[t],p=l.length,q=0;q<p;q++,n++)for(var r=0;4>r;r++)l=12*n+3*r,a.position&&(e[l+0]=b[m+0],e[l+1]=b[m+1],e[l+2]=b[m+2]),a.size&&(f[4*
n+r]=c[t]),d&&(g[l+0]=d[m+0],g[l+1]=d[m+1],g[l+2]=d[m+2])};
NGL.TextBuffer.prototype.makeMapping=function(){for(var a=this.font,b=this.text,c=this.geometry.attributes.inputTexCoord.array,d=this.geometry.attributes.mapping.array,e=this.positionCount,f,g,h=0,k,l,m,n,q=0;q<e;q++)for(k=b[q],l=0,n=k.length,m=0;m<n;m++,h++)f=a[k.charCodeAt(m)],g=8*h,d[g+0]=l+f.xoffset2,d[g+1]=f.lineHeight-f.yoffset2,d[g+2]=l+f.xoffset2,d[g+3]=f.lineHeight-f.yoffset2-f.height2,d[g+4]=l+f.xoffset2+f.width2,d[g+5]=f.lineHeight-f.yoffset2,d[g+6]=l+f.xoffset2+f.width2,d[g+7]=f.lineHeight-
f.yoffset2-f.height2,c.set(f.textureCoords,g),l+=f.xadvance2};NGL.TextBuffer.prototype.dispose=function(){NGL.Buffer.prototype.dispose.call(this);this.tex.dispose()};NGL.BufferVectorHelper=function(a,b,c,d){d=d||1;var e=a.length/3,f=2*e;this.size=e;this.geometry=new THREE.BufferGeometry;this.geometry.addAttribute("position",new THREE.BufferAttribute(new Float32Array(3*f),3));this.color=c;this.scale=d;this.setAttributes({position:a,vector:b});this.group=new THREE.Group};
NGL.BufferVectorHelper.prototype={constructor:NGL.BufferVectorHelper,setAttributes:function(a){var b=this.size,c=this.geometry.attributes,d,e;a.position&&(d=a.position,e=c.position.array,c.position.needsUpdate=!0);a.vector&&(this.vector=a.vector);var c=this.scale,f=this.vector,g;if(a.position)for(var h=0;h<b;h++)a=6*h,g=3*h,e[a+0]=d[g+0],e[a+1]=d[g+1],e[a+2]=d[g+2],e[a+3]=d[g+0]+f[g+0]*c,e[a+4]=d[g+1]+f[g+1]*c,e[a+5]=d[g+2]+f[g+2]*c},getRenderOrder:NGL.Buffer.prototype.getRenderOrder,getMesh:function(a,
b){b=b||this.getMaterial(a);return new THREE.LineSegments(this.geometry,b)},getMaterial:function(a){return new THREE.LineBasicMaterial({color:this.color,fog:!0})},setVisibility:NGL.Buffer.prototype.setVisibility,dispose:NGL.Buffer.prototype.dispose};NGL.SideTypes={};NGL.SideTypes[THREE.FrontSide]="front";NGL.SideTypes[THREE.BackSide]="back";NGL.SideTypes[THREE.DoubleSide]="double";
NGL.makeRepresentation=function(a,b,c,d){NGL.time("NGL.makeRepresentation "+a);var e;if("buffer"===a)e=NGL.BufferRepresentation;else if(b instanceof NGL.Structure){if(e=NGL.representationTypes[a],!e){NGL.error("NGL.makeRepresentation: representation type "+a+" unknown");return}}else if(b instanceof NGL.Surface||b instanceof NGL.Volume)if("surface"===a)e=NGL.SurfaceRepresentation;else if("dot"===a)e=NGL.DotRepresentation;else{NGL.error("NGL.makeRepresentation: representation type "+a+" unknown");return}else if(b instanceof
NGL.Trajectory)e=NGL.TrajectoryRepresentation;else{NGL.error("NGL.makeRepresentation: object "+b+" unknown");return}b=new e(b,c,d);NGL.timeEnd("NGL.makeRepresentation "+a);return b};NGL.Representation=function(a,b,c){this.viewer=b;this.queue=async.queue(this.make.bind(this),1);this.tasks=new NGL.Counter;this.bufferList=[];this.debugBufferList=[];this.init(c)};
NGL.Representation.prototype={constructor:NGL.Representation,type:"",parameters:{nearClip:{type:"boolean",define:"NEAR_CLIP"},flatShaded:{type:"boolean",define:"FLAT_SHADED"}},init:function(a){a=a||{};this.nearClip=void 0!==a.nearClip?a.nearClip:!0;this.flatShaded=a.flatShaded||!1;this.visible=void 0!==a.visible?a.visible:!0;this.quality=a.quality},setColor:function(a){a&&a!==this.color&&(this.color=a,this.update({color:!0}));return this},prepare:function(a){a()},create:function(){},update:function(){this.build()},
build:function(a){0<this.queue.length()?(this.tasks.change(1-this.queue.length()),this.queue.kill()):this.tasks.increment();a||(a=this.getParameters(),delete a.quality);this.queue.push(a)},make:function(a,b){NGL.time("NGL.Representation.make "+this.type);a&&this.init(a);this.prepare(function(){this.clear();this.create();this.manualAttach||this.disposed||(NGL.time("NGL.Representation.attach "+this.type),this.attach(function(){NGL.timeEnd("NGL.Representation.attach "+this.type);this.tasks.decrement();
b()}.bind(this)));NGL.timeEnd("NGL.Representation.make "+this.type)}.bind(this))},attach:function(a){this.setVisibility(this.visible);a()},setVisibility:function(a){this.visible=a;this.bufferList.forEach(function(b){b.setVisibility(a)});this.debugBufferList.forEach(function(b){b.setVisibility(a)});this.viewer.requestRender();return this},setParameters:function(a,b,c){var d=this.parameters;c=c||!1;Object.keys(d).forEach(function(b){if(void 0!==a[b]&&void 0!==d[b]&&(d[b].int&&(a[b]=parseInt(a[b])),
d[b].float&&(a[b]=parseFloat(a[b])),a[b]!==this[b])){this[b]=a[b];if(d[b].uniform){var f=function(c){(c=c.material.uniforms)&&c[b]&&(c[b].value=a[b])};this.bufferList.forEach(function(a){a.group.children.forEach(f);a.pickingGroup&&a.pickingGroup.children.forEach(f)})}if(d[b].define){var g=function(c){a[b]?c.material.defines[d[b].define]=1:delete c.material.defines[d[b].define];c.material.needsUpdate=!0};this.bufferList.forEach(function(a){a.group.children.forEach(g);a.pickingGroup&&a.pickingGroup.children.forEach(g)})}if(d[b].property){var h=
!0===d[b].property?b:d[b].property,k=function(c){h in c.material&&(c.material[h]=a[b]);if("transparent"===b){var d=c.userData.buffer;d.transparent=a[b];c.renderOrder=d.getRenderOrder()}c.material.needsUpdate=!0};this.bufferList.forEach(function(a){a.group.children.forEach(k);a.pickingGroup&&"transparent"!==b&&a.pickingGroup.children.forEach(k)})}!d[b].rebuild||"impostor"===d[b].rebuild&&NGL.extensionFragDepth&&!this.disableImpostor||(c=!0)}},this);c?this.build():b&&Object.keys(b).length&&this.update(b);
return this},getParameters:function(){var a={color:this.color,visible:this.visible,sele:this.selection?this.selection.string:void 0,disableImpostor:this.disableImpostor,quality:this.quality};Object.keys(this.parameters).forEach(function(b){a[b]=this[b]},this);"string"===typeof this.radius&&(a.radiusType=this.radius,delete a.radius);return a},clear:function(){this.bufferList.forEach(function(a){this.viewer.remove(a);a.dispose()},this);this.bufferList.length=0;this.debugBufferList.forEach(function(a){this.viewer.remove(a);
a.dispose()},this);this.debugBufferList.length=0;this.viewer.requestRender()},dispose:function(){this.disposed=!0;this.queue.kill();this.tasks.dispose();this.clear()}};NGL.BufferRepresentation=function(a,b,c){NGL.Representation.call(this,a,b,c);this.buffer=a;this.build()};
NGL.BufferRepresentation.prototype=NGL.createObject(NGL.Representation.prototype,{constructor:NGL.BufferRepresentation,type:"buffer",create:function(){this.bufferList.push(this.buffer)},attach:function(a){this.bufferList.forEach(function(a){this.viewer.add(a)},this);this.setVisibility(this.visible);a()}});
NGL.StructureRepresentation=function(a,b,c){this.fiberList=[];this.selection=new NGL.Selection(c.sele,this.getAssemblySele(c.assembly,a));this.atomSet=new NGL.AtomSet;this.setStructure(a);NGL.Representation.call(this,a,b,c);if(a.biomolDict){var d={__AU:"AU"};Object.keys(a.biomolDict).forEach(function(a){d[a]=a});d[""]="";this.parameters.assembly={type:"select",options:d,rebuild:!0}}else this.parameters.assembly=null;this.selection.signals.stringChanged.add(function(){this.build()}.bind(this));this.build()};
NGL.StructureRepresentation.prototype=NGL.createObject(NGL.Representation.prototype,{constructor:NGL.StructureRepresentation,type:"structure",parameters:Object.assign({radiusType:{type:"select",options:NGL.RadiusFactory.types},radius:{type:"number",precision:3,max:10,min:.001},scale:{type:"number",precision:3,max:10,min:.001},transparent:{type:"boolean",property:!0},side:{type:"select",options:NGL.SideTypes,property:!0,int:!0},opacity:{type:"number",precision:1,max:1,min:0,uniform:!0},assembly:null},
NGL.Representation.prototype.parameters),defaultScale:{vdw:1,covalent:1,bfactor:.01,ss:1},defaultSize:1,init:function(a){a=a||{};this.color=void 0!==a.color?a.color:"element";this.radius=a.radius||"vdw";this.scale=a.scale||1;this.transparent=void 0!==a.transparent?a.transparent:!1;this.side=void 0!==a.side?a.side:THREE.DoubleSide;this.opacity=void 0!==a.opacity?a.opacity:1;this.assembly=a.assembly||"";var b=this.selection.combinedString;this.setSelection(a.sele,this.getAssemblySele(a.assembly),!0);
b!==this.selection.combinedString&&this.atomSet.applySelection();NGL.Representation.prototype.init.call(this,a)},setStructure:function(a){this.structure=a||this.structure;this.atomSet.fromStructure(this.structure,this.selection);return this},getAssemblySele:function(a,b){b=b||this.structure;a=a||b.defaultAssembly;var c=b.biomolDict[a],d="";c&&c.chainList&&c.chainList.length<b.chainCount&&(d=":"+c.chainList.join(" OR :"));return d},setSelection:function(a,b,c){this.selection.setString(a,b,c);return this},
setParameters:function(a,b,c){b=b||{};a&&void 0!==a.radiusType&&(this.radius="size"===a.radiusType?this.defaultSize:a.radiusType,b.radius=!0,!NGL.extensionFragDepth||this.disableImpostor)&&(c=!0);a&&void 0!==a.radius&&(b.radius=!0,!NGL.extensionFragDepth||this.disableImpostor)&&(c=!0);a&&void 0!==a.scale&&(b.scale=!0,!NGL.extensionFragDepth||this.disableImpostor)&&(c=!0);a&&void 0!==a.assembly&&this.setSelection(void 0,this.getAssemblySele(a.assembly));NGL.Representation.prototype.setParameters.call(this,
a,b,c);return this},attach:function(a){var b=this.viewer,c=this.structure,d=this.assembly;""===d&&(d=c.defaultAssembly);var e=[];if(c.biomolDict&&c.biomolDict[d]){var f=c.biomolDict[d].matrixDict;Object.keys(f).forEach(function(a,b){e.push({id:b+1,name:a,assembly:d,matrix:f[a]})})}this.bufferList.forEach(function(c,d,f){requestAnimationFrame(function(){1<=e.length?b.add(c,e):b.add(c);d===f.length-1&&a()}.bind(this))}.bind(this));this.debugBufferList.forEach(function(a){1<e.length?b.add(a,e):b.add(a)});
this.setVisibility(this.visible);0===this.bufferList.length&&a()},clear:function(){this.fiberList.length=0;NGL.Representation.prototype.clear.call(this)},dispose:function(){this.atomSet.dispose();delete this.structure;NGL.Representation.prototype.dispose.call(this)}});NGL.SpacefillRepresentation=function(a,b,c){NGL.StructureRepresentation.call(this,a,b,c)};
NGL.SpacefillRepresentation.prototype=NGL.createObject(NGL.StructureRepresentation.prototype,{constructor:NGL.SpacefillRepresentation,type:"spacefill",parameters:Object.assign({sphereDetail:{type:"integer",max:3,min:0,rebuild:"impostor"}},NGL.StructureRepresentation.prototype.parameters),init:function(a){a=a||{};this.disableImpostor=a.disableImpostor||!1;this.sphereDetail="low"===a.quality?0:"medium"===a.quality?1:"high"===a.quality?2:a.sphereDetail||1;NGL.StructureRepresentation.prototype.init.call(this,
a)},create:function(){if(0!==this.atomSet.atomCount){var a=this.transparent?this.opacity:1;this.sphereBuffer=new NGL.SphereBuffer(this.atomSet.atomPosition(),this.atomSet.atomColor(null,this.color),this.atomSet.atomRadius(null,this.radius,this.scale),this.atomSet.atomColor(null,"picking"),{sphereDetail:this.sphereDetail,transparent:this.transparent,side:this.side,opacity:a,nearClip:this.nearClip,flatShaded:this.flatShaded,dullInterior:!0},this.disableImpostor);this.bufferList.push(this.sphereBuffer)}},
update:function(a){if(0!==this.atomSet.atomCount){a=a||{};var b={};a.position&&(b.position=this.atomSet.atomPosition());a.color&&(b.color=this.atomSet.atomColor(null,this.color));if(a.radius||a.scale)b.radius=this.atomSet.atomRadius(null,this.radius,this.scale);this.sphereBuffer.setAttributes(b)}}});NGL.PointRepresentation=function(a,b,c){NGL.StructureRepresentation.call(this,a,b,c)};
NGL.PointRepresentation.prototype=NGL.createObject(NGL.StructureRepresentation.prototype,{constructor:NGL.PointRepresentation,type:"point",parameters:Object.assign({pointSize:{type:"integer",max:20,min:1,property:"size"},sizeAttenuation:{type:"boolean",property:!0},sort:{type:"boolean",rebuild:!0},transparent:{type:"boolean",property:!0},opacity:{type:"number",precision:1,max:1,min:0,property:!0}},NGL.Representation.prototype.parameters,{nearClip:null,flatShaded:null}),init:function(a){a=a||{};this.pointSize=
a.pointSize||1;this.sizeAttenuation=void 0!==a.sizeAttenuation?a.sizeAttenuation:!0;this.sort=void 0!==a.sort?a.sort:!1;a.transparent=void 0!==a.transparent?a.transparent:!0;a.opacity=void 0!==a.opacity?a.opacity:.6;NGL.StructureRepresentation.prototype.init.call(this,a)},create:function(){if(0!==this.atomSet.atomCount){var a=this.transparent?this.opacity:1;this.pointBuffer=new NGL.PointBuffer(this.atomSet.atomPosition(),this.atomSet.atomColor(null,this.color),{pointSize:this.pointSize,sizeAttenuation:this.sizeAttenuation,
sort:this.sort,transparent:this.transparent,opacity:a,nearClip:this.nearClip});this.bufferList.push(this.pointBuffer)}},update:function(a){if(0!==this.atomSet.atomCount){a=a||{};var b={};a.position&&(b.position=this.atomSet.atomPosition());a.color&&(b.color=this.atomSet.atomColor(null,this.color));this.pointBuffer.setAttributes(b)}}});NGL.LabelRepresentation=function(a,b,c){NGL.StructureRepresentation.call(this,a,b,c)};
NGL.LabelRepresentation.prototype=NGL.createObject(NGL.StructureRepresentation.prototype,{constructor:NGL.LabelRepresentation,type:"label",parameters:Object.assign({labelType:{type:"select",options:NGL.LabelFactory.types,rebuild:!0},font:{type:"select",options:{LatoBlack:"LatoBlack"},rebuild:!0},antialias:{type:"boolean",define:"ANTIALIAS"},flatShaded:null},NGL.StructureRepresentation.prototype.parameters,{side:null,flatShaded:null}),init:function(a){a=a||{};a.color=void 0!==a.color?a.color:16777215;
this.labelType=a.labelType||"res";this.labelText=a.labelText||{};this.font=a.font||"LatoBlack";this.antialias=void 0!==a.antialias?a.antialias:!0;NGL.StructureRepresentation.prototype.init.call(this,a)},create:function(){if(0!==this.atomSet.atomCount){var a=this.transparent?this.opacity:1,b=[],c=new NGL.LabelFactory(this.labelType,this.labelText);this.atomSet.eachAtom(function(a){b.push(c.atomLabel(a))});this.textBuffer=new NGL.TextBuffer(this.atomSet.atomPosition(),this.atomSet.atomRadius(null,this.radius,
this.scale),this.atomSet.atomColor(null,this.color),b,{font:this.font,antialias:this.antialias,opacity:a,nearClip:this.nearClip});this.bufferList.push(this.textBuffer)}},update:function(a){if(0!==this.atomSet.atomCount){a=a||{};var b={};a.position&&(b.position=this.atomSet.atomPosition());if(a.radius||a.scale)b.size=this.atomSet.atomRadius(null,this.radius,this.scale);a.color&&(b.color=this.atomSet.atomColor(null,this.color));this.textBuffer.setAttributes(b)}}});
NGL.BallAndStickRepresentation=function(a,b,c){NGL.StructureRepresentation.call(this,a,b,c)};
NGL.BallAndStickRepresentation.prototype=NGL.createObject(NGL.StructureRepresentation.prototype,{constructor:NGL.BallAndStickRepresentation,type:"ball+stick",defaultSize:.15,parameters:Object.assign({aspectRatio:{type:"number",precision:1,max:10,min:1},sphereDetail:{type:"integer",max:3,min:0,rebuild:"impostor"},radiusSegments:{type:"integer",max:25,min:5,rebuild:"impostor"}},NGL.StructureRepresentation.prototype.parameters),init:function(a){a=a||{};a.radius=a.radius||this.defaultSize;this.disableImpostor=
a.disableImpostor||!1;"low"===a.quality?(this.sphereDetail=0,this.radiusSegments=5):"medium"===a.quality?(this.sphereDetail=1,this.radiusSegments=10):"high"===a.quality?(this.sphereDetail=2,this.radiusSegments=20):(this.sphereDetail=a.sphereDetail||1,this.radiusSegments=a.radiusSegments||10);this.aspectRatio=a.aspectRatio||2;NGL.StructureRepresentation.prototype.init.call(this,a)},create:function(){if(0!==this.atomSet.atomCount){var a=this.transparent?this.opacity:1,b=this.scale*this.aspectRatio;
this.sphereBuffer=new NGL.SphereBuffer(this.atomSet.atomPosition(),this.atomSet.atomColor(null,this.color),this.atomSet.atomRadius(null,this.radius,b),this.atomSet.atomColor(null,"picking"),{sphereDetail:this.sphereDetail,transparent:this.transparent,side:this.side,opacity:a,nearClip:this.nearClip,flatShaded:this.flatShaded,dullInterior:!0},this.disableImpostor);this.__center=new Float32Array(3*this.atomSet.bondCount);this.cylinderBuffer=new NGL.CylinderBuffer(this.atomSet.bondPosition(null,0),this.atomSet.bondPosition(null,
1),this.atomSet.bondColor(null,0,this.color),this.atomSet.bondColor(null,1,this.color),this.atomSet.bondRadius(null,null,this.radius,this.scale),this.atomSet.bondColor(null,0,"picking"),this.atomSet.bondColor(null,1,"picking"),{shift:0,cap:!0,radiusSegments:this.radiusSegments,transparent:this.transparent,side:this.side,opacity:a,nearClip:this.nearClip,flatShaded:this.flatShaded,dullInterior:!0},this.disableImpostor);this.bufferList.push(this.sphereBuffer,this.cylinderBuffer)}},update:function(a){if(0!==
this.atomSet.atomCount){a=a||{};var b={},c={};if(a.position){b.position=this.atomSet.atomPosition();var d=this.atomSet.bondPosition(null,0),e=this.atomSet.bondPosition(null,1);c.position=NGL.Utils.calculateCenterArray(d,e,this.__center);c.position1=d;c.position2=e}a.color&&(b.color=this.atomSet.atomColor(null,this.color),c.color=this.atomSet.bondColor(null,0,this.color),c.color2=this.atomSet.bondColor(null,1,this.color));if(a.radius||a.scale)b.radius=this.atomSet.atomRadius(null,this.radius,this.scale*
this.aspectRatio),c.radius=this.atomSet.bondRadius(null,null,this.radius,this.scale);this.sphereBuffer.setAttributes(b);this.cylinderBuffer.setAttributes(c)}},setParameters:function(a){var b=!1,c={};a&&a.aspectRatio&&(c.radius=!0,c.scale=!0,!NGL.extensionFragDepth||this.disableImpostor)&&(b=!0);NGL.StructureRepresentation.prototype.setParameters.call(this,a,c,b);return this}});NGL.LicoriceRepresentation=function(a,b,c){NGL.StructureRepresentation.call(this,a,b,c)};
NGL.LicoriceRepresentation.prototype=NGL.createObject(NGL.StructureRepresentation.prototype,{constructor:NGL.LicoriceRepresentation,type:"licorice",defaultSize:.15,parameters:Object.assign({sphereDetail:{type:"integer",max:3,min:0,rebuild:"impostor"},radiusSegments:{type:"integer",max:25,min:5,rebuild:"impostor"}},NGL.StructureRepresentation.prototype.parameters),init:function(a){a=a||{};a.radius=a.radius||this.defaultSize;this.disableImpostor=a.disableImpostor||!1;"low"===a.quality?(this.sphereDetail=
0,this.radiusSegments=5):"medium"===a.quality?(this.sphereDetail=1,this.radiusSegments=10):"high"===a.quality?(this.sphereDetail=2,this.radiusSegments=20):(this.sphereDetail=a.sphereDetail||1,this.radiusSegments=a.radiusSegments||10);NGL.StructureRepresentation.prototype.init.call(this,a)},create:function(){if(0!==this.atomSet.atomCount){var a=this.transparent?this.opacity:1;this.sphereBuffer=new NGL.SphereBuffer(this.atomSet.atomPosition(),this.atomSet.atomColor(null,this.color),this.atomSet.atomRadius(null,
this.radius,this.scale),this.atomSet.atomColor(null,"picking"),{sphereDetail:this.sphereDetail,transparent:this.transparent,side:this.side,opacity:a,nearClip:this.nearClip,flatShaded:this.flatShaded,dullInterior:!0},this.disableImpostor);this.cylinderBuffer=new NGL.CylinderBuffer(this.atomSet.bondPosition(null,0),this.atomSet.bondPosition(null,1),this.atomSet.bondColor(null,0,this.color),this.atomSet.bondColor(null,1,this.color),this.atomSet.bondRadius(null,null,this.radius,this.scale),this.atomSet.bondColor(null,
0,"picking"),this.atomSet.bondColor(null,1,"picking"),{shift:0,cap:!0,radiusSegments:this.radiusSegments,transparent:this.transparent,side:this.side,opacity:a,nearClip:this.nearClip,flatShaded:this.flatShaded,dullInterior:!0},this.disableImpostor);this.bufferList.push(this.sphereBuffer,this.cylinderBuffer)}},update:function(a){this.aspectRatio=1;NGL.BallAndStickRepresentation.prototype.update.call(this,a)}});NGL.LineRepresentation=function(a,b,c){NGL.StructureRepresentation.call(this,a,b,c)};
NGL.LineRepresentation.prototype=NGL.createObject(NGL.StructureRepresentation.prototype,{constructor:NGL.LineRepresentation,type:"line",parameters:Object.assign({lineWidth:{type:"integer",max:20,min:1,property:"linewidth"},transparent:{type:"boolean",property:!0},opacity:{type:"number",precision:1,max:1,min:0,uniform:!0}},NGL.Representation.prototype.parameters,{flatShaded:null}),init:function(a){a=a||{};this.lineWidth=a.lineWidth||1;this.transparent=void 0!==a.transparent?a.transparent:!1;this.opacity=
void 0!==a.opacity?a.opacity:1;NGL.StructureRepresentation.prototype.init.call(this,a)},create:function(){if(0!==this.atomSet.atomCount){var a=this.transparent?this.opacity:1;this.lineBuffer=new NGL.LineBuffer(this.atomSet.bondPosition(null,0),this.atomSet.bondPosition(null,1),this.atomSet.bondColor(null,0,this.color),this.atomSet.bondColor(null,1,this.color),{lineWidth:this.lineWidth,transparent:this.transparent,opacity:a,nearClip:this.nearClip});this.bufferList.push(this.lineBuffer)}},update:function(a){if(0!==
this.atomSet.atomCount){a=a||{};var b={};a.position&&(b.from=this.atomSet.bondPosition(null,0),b.to=this.atomSet.bondPosition(null,1));a.color&&(b.color=this.atomSet.bondColor(null,0,this.color),b.color2=this.atomSet.bondColor(null,1,this.color));this.lineBuffer.setAttributes(b)}}});NGL.HyperballRepresentation=function(a,b,c){NGL.StructureRepresentation.call(this,a,b,c);this.defaultScale.vdw=.2};
NGL.HyperballRepresentation.prototype=NGL.createObject(NGL.StructureRepresentation.prototype,{constructor:NGL.HyperballRepresentation,type:"hyperball",parameters:Object.assign({shrink:{type:"number",precision:3,max:1,min:.001,uniform:!0},sphereDetail:{type:"integer",max:3,min:0,rebuild:"impostor"},radiusSegments:{type:"integer",max:25,min:5,rebuild:"impostor"}},NGL.StructureRepresentation.prototype.parameters),init:function(a){a=a||{};a.scale=a.scale||.2;this.disableImpostor=a.disableImpostor||!1;
"low"===a.quality?(this.sphereDetail=0,this.radiusSegments=5):"medium"===a.quality?(this.sphereDetail=1,this.radiusSegments=10):"high"===a.quality?(this.sphereDetail=2,this.radiusSegments=20):(this.sphereDetail=a.sphereDetail||1,this.radiusSegments=a.radiusSegments||10);this.shrink=a.shrink||.12;NGL.StructureRepresentation.prototype.init.call(this,a)},create:function(){if(0!==this.atomSet.atomCount){var a=this.transparent?this.opacity:1;this.sphereBuffer=new NGL.SphereBuffer(this.atomSet.atomPosition(),
this.atomSet.atomColor(null,this.color),this.atomSet.atomRadius(null,this.radius,this.scale),this.atomSet.atomColor(null,"picking"),{sphereDetail:this.sphereDetail,transparent:this.transparent,side:this.side,opacity:a,nearClip:this.nearClip,flatShaded:this.flatShaded,dullInterior:!0},this.disableImpostor);this.__center=new Float32Array(3*this.atomSet.bondCount);this.cylinderBuffer=new NGL.HyperballStickBuffer(this.atomSet.bondPosition(null,0),this.atomSet.bondPosition(null,1),this.atomSet.bondColor(null,
0,this.color),this.atomSet.bondColor(null,1,this.color),this.atomSet.bondRadius(null,0,this.radius,this.scale),this.atomSet.bondRadius(null,1,this.radius,this.scale),this.atomSet.bondColor(null,0,"picking"),this.atomSet.bondColor(null,1,"picking"),{shrink:this.shrink,radiusSegments:this.radiusSegments,transparent:this.transparent,side:this.side,opacity:a,nearClip:this.nearClip,flatShaded:this.flatShaded,dullInterior:!0},this.disableImpostor);this.bufferList.push(this.sphereBuffer,this.cylinderBuffer)}},
update:function(a){if(0!==this.atomSet.atomCount){a=a||{};var b={},c={};if(a.position){b.position=this.atomSet.atomPosition();var d=this.atomSet.bondPosition(null,0),e=this.atomSet.bondPosition(null,1);c.position=NGL.Utils.calculateCenterArray(d,e,this.__center);c.position1=d;c.position2=e}a.color&&(b.color=this.atomSet.atomColor(null,this.color),c.color=this.atomSet.bondColor(null,0,this.color),c.color2=this.atomSet.bondColor(null,1,this.color));if(a.radius||a.scale)b.radius=this.atomSet.atomRadius(null,
this.radius,this.scale),c.radius=this.atomSet.bondRadius(null,0,this.radius,this.scale),c.radius2=this.atomSet.bondRadius(null,1,this.radius,this.scale);this.sphereBuffer.setAttributes(b);this.cylinderBuffer.setAttributes(c)}}});NGL.BackboneRepresentation=function(a,b,c){NGL.StructureRepresentation.call(this,a,b,c)};
NGL.BackboneRepresentation.prototype=NGL.createObject(NGL.StructureRepresentation.prototype,{constructor:NGL.BackboneRepresentation,type:"backbone",defaultSize:.25,parameters:Object.assign({aspectRatio:{type:"number",precision:1,max:10,min:1},sphereDetail:{type:"integer",max:3,min:0,rebuild:"impostor"},radiusSegments:{type:"integer",max:50,min:5,rebuild:"impostor"}},NGL.StructureRepresentation.prototype.parameters),init:function(a){a=a||{};a.radius=a.radius||this.defaultSize;this.disableImpostor=
a.disableImpostor||!1;"low"===a.quality?(this.sphereDetail=0,this.radiusSegments=5):"medium"===a.quality?(this.sphereDetail=1,this.radiusSegments=10):"high"===a.quality?(this.sphereDetail=2,this.radiusSegments=20):(this.sphereDetail=a.sphereDetail||1,this.radiusSegments=a.radiusSegments||10);this.aspectRatio=a.aspectRatio||1;NGL.StructureRepresentation.prototype.init.call(this,a)},create:function(){if(0!==this.atomSet.atomCount){var a=this.transparent?this.opacity:1,b=this.selection.test;this.backboneAtomSet=
new NGL.AtomSet;this.backboneBondSet=new NGL.BondSet;var c=this.backboneAtomSet,d=this.backboneBondSet;c.structure=this.structure;d.structure=this.structure;var e,f;this.structure.eachFiber(function(a){2>a.residueCount||(a.eachResidueN(2,function(a,g){e=a.getTraceAtom();f=g.getTraceAtom();if(!b||b(e)&&b(f))c.addAtom(e),d.addBond(e,f,!0)}),(!b||b(e)&&b(f))&&c.addAtom(f))});if(0!==c.atomCount){var g=this.scale*this.aspectRatio;this.sphereBuffer=new NGL.SphereBuffer(c.atomPosition(),c.atomColor(null,
this.color),c.atomRadius(null,this.radius,g),c.atomColor(null,"picking"),{sphereDetail:this.sphereDetail,transparent:this.transparent,side:this.side,opacity:a,nearClip:this.nearClip,flatShaded:this.flatShaded,dullInterior:!0},this.disableImpostor);this.cylinderBuffer=new NGL.CylinderBuffer(d.bondPosition(null,0),d.bondPosition(null,1),d.bondColor(null,0,this.color),d.bondColor(null,1,this.color),d.bondRadius(null,0,this.radius,this.scale),d.bondColor(null,0,"picking"),d.bondColor(null,1,"picking"),
{shift:0,cap:!0,radiusSegments:this.radiusSegments,transparent:this.transparent,side:this.side,opacity:a,nearClip:this.nearClip,flatShaded:this.flatShaded,dullInterior:!0},this.disableImpostor);this.bufferList.push(this.sphereBuffer,this.cylinderBuffer)}}},update:function(a){if(0!==this.atomSet.atomCount){a=a||{};var b=this.backboneAtomSet,c=this.backboneBondSet;if(0!==b.atomCount){var d={},e={};if(a.position){d.position=b.atomPosition();var f=c.bondPosition(null,0),g=c.bondPosition(null,1);e.position=
NGL.Utils.calculateCenterArray(f,g);e.position1=f;e.position2=g}a.color&&(d.color=b.atomColor(null,this.color),e.color=c.bondColor(null,0,this.color),e.color2=c.bondColor(null,1,this.color));if(a.radius||a.scale)d.radius=b.atomRadius(null,this.radius,this.scale*this.aspectRatio),e.radius=c.bondRadius(null,0,this.radius,this.scale);this.sphereBuffer.setAttributes(d);this.cylinderBuffer.setAttributes(e)}}},setParameters:function(a){var b=!1,c={};a&&a.aspectRatio&&(c.radius=!0,c.scale=!0,!NGL.extensionFragDepth||
this.disableImpostor)&&(b=!0);NGL.StructureRepresentation.prototype.setParameters.call(this,a,c,b);return this},clear:function(){this.backboneAtomSet&&this.backboneAtomSet.dispose();this.backboneBondSet&&this.backboneBondSet.dispose();NGL.StructureRepresentation.prototype.clear.call(this)}});NGL.BaseRepresentation=function(a,b,c){NGL.StructureRepresentation.call(this,a,b,c)};
NGL.BaseRepresentation.prototype=NGL.createObject(NGL.StructureRepresentation.prototype,{constructor:NGL.BaseRepresentation,type:"base",defaultSize:.2,parameters:Object.assign({aspectRatio:{type:"number",precision:1,max:10,min:1},sphereDetail:{type:"integer",max:3,min:0,rebuild:"impostor"},radiusSegments:{type:"integer",max:50,min:5,rebuild:"impostor"}},NGL.StructureRepresentation.prototype.parameters),init:function(a){a=a||{};a.radius=a.radius||this.defaultSize;this.disableImpostor=a.disableImpostor||
!1;"low"===a.quality?(this.sphereDetail=0,this.radiusSegments=5):"medium"===a.quality?(this.sphereDetail=1,this.radiusSegments=10):"high"===a.quality?(this.sphereDetail=2,this.radiusSegments=20):(this.sphereDetail=a.sphereDetail||1,this.radiusSegments=a.radiusSegments||10);this.aspectRatio=a.aspectRatio||1;NGL.StructureRepresentation.prototype.init.call(this,a)},create:function(){if(0!==this.atomSet.atomCount){var a=this.transparent?this.opacity:1,b=this.selection.test;this.baseAtomSet=new NGL.AtomSet;
this.baseBondSet=new NGL.BondSet;var c=this.baseAtomSet,d=this.baseBondSet;c.structure=this.structure;d.structure=this.structure;var e,f,g=["A","G","DA","DG"];this.structure.eachFiber(function(a){1>a.residueCount||!a.isNucleic()||a.eachResidue(function(a){e=a.getTraceAtom();f=-1!==g.indexOf(a.resname)?a.getAtomByName("N1"):a.getAtomByName("N3");if(!b||b(e))c.addAtom(e),c.addAtom(f),d.addBond(e,f,!0)})});if(0!==c.atomCount){var h=this.scale*this.aspectRatio;this.sphereBuffer=new NGL.SphereBuffer(c.atomPosition(),
c.atomColor(null,this.color),c.atomRadius(null,this.radius,h),c.atomColor(null,"picking"),{sphereDetail:this.sphereDetail,transparent:this.transparent,side:this.side,opacity:a,nearClip:this.nearClip,flatShaded:this.flatShaded,dullInterior:!0},this.disableImpostor);this.cylinderBuffer=new NGL.CylinderBuffer(d.bondPosition(null,0),d.bondPosition(null,1),d.bondColor(null,0,this.color),d.bondColor(null,1,this.color),d.bondRadius(null,0,this.radius,this.scale),d.bondColor(null,0,"picking"),d.bondColor(null,
1,"picking"),{shift:0,cap:!0,radiusSegments:this.radiusSegments,transparent:this.transparent,side:this.side,opacity:a,nearClip:this.nearClip,flatShaded:this.flatShaded,dullInterior:!0},this.disableImpostor);this.bufferList.push(this.sphereBuffer,this.cylinderBuffer)}}},update:function(a){if(0!==this.atomSet.atomCount){a=a||{};var b=this.baseAtomSet,c=this.baseBondSet;if(0!==b.atomCount){var d={},e={};if(a.position){d.position=b.atomPosition();var f=c.bondPosition(null,0),g=c.bondPosition(null,1);
e.position=NGL.Utils.calculateCenterArray(f,g);e.position1=f;e.position2=g}a.color&&(d.color=b.atomColor(null,this.color),e.color=c.bondColor(null,0,this.color),e.color2=c.bondColor(null,1,this.color));if(a.radius||a.scale)d.radius=b.atomRadius(null,this.radius,this.scale*this.aspectRatio),e.radius=c.bondRadius(null,0,this.radius,this.scale);this.sphereBuffer.setAttributes(d);this.cylinderBuffer.setAttributes(e)}}},setParameters:function(a){var b=!1,c={};a&&a.aspectRatio&&(c.radius=!0,c.scale=!0,
!NGL.extensionFragDepth||this.disableImpostor)&&(b=!0);NGL.StructureRepresentation.prototype.setParameters.call(this,a,c,b);return this},clear:function(){this.baseAtomSet&&this.baseAtomSet.dispose();this.baseBondSet&&this.baseAtomSet.dispose();NGL.StructureRepresentation.prototype.clear.call(this)}});NGL.TubeRepresentation=function(a,b,c){NGL.StructureRepresentation.call(this,a,b,c)};
NGL.TubeRepresentation.prototype=NGL.createObject(NGL.StructureRepresentation.prototype,{constructor:NGL.TubeRepresentation,type:"tube",defaultSize:.25,parameters:Object.assign({subdiv:{type:"integer",max:50,min:1,rebuild:!0},radialSegments:{type:"integer",max:50,min:1,rebuild:!0},tension:{type:"number",precision:1,max:1,min:.1},capped:{type:"boolean",rebuild:!0},wireframe:{type:"boolean",rebuild:!0},lineWidth:{type:"integer",max:20,min:1,property:"linewidth"}},NGL.StructureRepresentation.prototype.parameters),
init:function(a){a=a||{};a.color=a.color||"ss";a.radius=a.radius||this.defaultSize;"low"===a.quality?(this.subdiv=3,this.radialSegments=5):"medium"===a.quality?(this.subdiv=6,this.radialSegments=10):"high"===a.quality?(this.subdiv=12,this.radialSegments=20):(this.subdiv=a.subdiv||6,this.radialSegments=a.radialSegments||10);this.tension=a.tension||NaN;this.capped=a.capped||!0;this.wireframe=a.wireframe||!1;this.lineWidth=a.lineWidth||1;NGL.StructureRepresentation.prototype.init.call(this,a);this.__fiberList=
[];this.__bufferList=[]},prepare:function(a){this.__fiberList.length=0;this.__bufferList.length=0;if(0===this.atomSet.atomCount)a();else{var b=this,c=this.transparent?this.opacity:1;this.structure.eachFiber(function(a){4>a.residueCount||b.__fiberList.push(a)},this.selection,!0);NGL.processArray(this.__fiberList,function(a,e,f){for(;a<e;++a){var g=new NGL.Spline(f[a]),h=g.getSubdividedPosition(b.subdiv,b.tension),k=g.getSubdividedOrientation(b.subdiv,b.tension),l=g.getSubdividedColor(b.subdiv,b.color),
g=g.getSubdividedSize(b.subdiv,b.radius,b.scale);b.__bufferList.push(new NGL.TubeMeshBuffer(h.position,k.normal,k.binormal,k.tangent,l.color,g.size,l.pickingColor,{radialSegments:b.radialSegments,rx:1,ry:1,capped:b.capped,wireframe:b.wireframe,lineWidth:b.lineWidth,flatShaded:b.flatShaded,transparent:b.transparent,side:b.side,opacity:c,nearClip:b.nearClip,dullInterior:!0}))}},a,50)}},create:function(){for(var a=this.__fiberList.length,b=0;b<a;++b)this.fiberList.push(this.__fiberList[b]),this.bufferList.push(this.__bufferList[b])},
update:function(a){if(0!==this.atomSet.atomCount){a=a||{};for(var b=0,c=this.fiberList.length,b=0;b<c;++b){var d=this.fiberList[b];if(4>d.residueCount)break;var e={},d=new NGL.Spline(d);if(a.position||a.radius||a.scale){var f=d.getSubdividedPosition(this.subdiv,this.tension),g=d.getSubdividedOrientation(this.subdiv,this.tension),h=d.getSubdividedSize(this.subdiv,this.radius,this.scale);e.position=f.position;e.normal=g.normal;e.binormal=g.binormal;e.tangent=g.tangent;e.size=h.size}a.color&&(d=d.getSubdividedColor(this.subdiv,
this.color),e.color=d.color,e.pickingColor=d.pickingColor);this.bufferList[b].setAttributes(e)}}},setParameters:function(a){var b={};a&&a.tension&&(b.position=!0);NGL.StructureRepresentation.prototype.setParameters.call(this,a,b,!1);return this}});NGL.CartoonRepresentation=function(a,b,c){NGL.StructureRepresentation.call(this,a,b,c)};
NGL.CartoonRepresentation.prototype=NGL.createObject(NGL.StructureRepresentation.prototype,{constructor:NGL.CartoonRepresentation,type:"cartoon",parameters:Object.assign({aspectRatio:{type:"number",precision:1,max:10,min:1},subdiv:{type:"integer",max:50,min:1,rebuild:!0},radialSegments:{type:"integer",max:50,min:1,rebuild:!0},tension:{type:"number",precision:1,max:1,min:.1},capped:{type:"boolean",rebuild:!0},wireframe:{type:"boolean",rebuild:!0},lineWidth:{type:"integer",max:20,min:1,property:"linewidth"},
arrows:{type:"boolean",rebuild:!0}},NGL.StructureRepresentation.prototype.parameters),init:function(a){a=a||{};a.color=a.color||"ss";a.radius=a.radius||"ss";"low"===a.quality?(this.subdiv=3,this.radialSegments=6):"medium"===a.quality?(this.subdiv=6,this.radialSegments=10):"high"===a.quality?(this.subdiv=12,this.radialSegments=20):(this.subdiv=a.subdiv||6,this.radialSegments=a.radialSegments||10);this.aspectRatio=a.aspectRatio||3;this.tension=a.tension||NaN;this.capped=a.capped||!0;this.wireframe=
a.wireframe||!1;this.lineWidth=a.lineWidth||1;this.arrows=a.arrows||!1;NGL.StructureRepresentation.prototype.init.call(this,a);this.__fiberList=[];this.__bufferList=[]},prepare:function(a){this.__fiberList.length=0;this.__bufferList.length=0;if(0===this.atomSet.atomCount)a();else{var b=this,c=this.transparent?this.opacity:1;this.structure.eachFiber(function(a){4>a.residueCount||b.__fiberList.push(a)},this.selection,!0);NGL.processArray(this.__fiberList,function(a,e,f){for(;a<e;++a){var g=f[a],h=new NGL.Spline(g,
b.arrows),k=h.getSubdividedPosition(b.subdiv,b.tension),l=h.getSubdividedOrientation(b.subdiv,b.tension),m=h.getSubdividedColor(b.subdiv,b.color),h=h.getSubdividedSize(b.subdiv,b.radius,b.scale),n=1*b.aspectRatio,q=1;g.isCg()&&(q=n);b.__bufferList.push(new NGL.TubeMeshBuffer(k.position,l.normal,l.binormal,l.tangent,m.color,h.size,m.pickingColor,{radialSegments:b.radialSegments,rx:n,ry:q,capped:b.capped,wireframe:b.wireframe,lineWidth:b.lineWidth,flatShaded:b.flatShaded,transparent:b.transparent,side:b.side,
opacity:c,nearClip:b.nearClip,dullInterior:!0}))}},a,50)}},create:function(){for(var a=this.__fiberList.length,b=0;b<a;++b)this.fiberList.push(this.__fiberList[b]),this.bufferList.push(this.__bufferList[b])},update:function(a){if(0!==this.atomSet.atomCount){a=a||{};for(var b=0,c=this.fiberList.length,b=0;b<c;++b){var d=this.fiberList[b];if(4>d.residueCount)break;var e={},d=new NGL.Spline(d,this.arrows);this.bufferList[b].rx=this.aspectRatio;if(a.position||a.radius||a.scale){var f=d.getSubdividedPosition(this.subdiv,
this.tension),g=d.getSubdividedOrientation(this.subdiv,this.tension),h=d.getSubdividedSize(this.subdiv,this.radius,this.scale);e.position=f.position;e.normal=g.normal;e.binormal=g.binormal;e.tangent=g.tangent;e.size=h.size}a.color&&(d=d.getSubdividedColor(this.subdiv,this.color),e.color=d.color,e.pickingColor=d.pickingColor);this.bufferList[b].setAttributes(e)}}},setParameters:function(a){var b={};a&&a.aspectRatio&&(b.radius=!0);a&&a.tension&&(b.position=!0);NGL.StructureRepresentation.prototype.setParameters.call(this,
a,b,!1);return this}});NGL.RibbonRepresentation=function(a,b,c){NGL.StructureRepresentation.call(this,a,b,c);this.defaultScale.ss*=3};
NGL.RibbonRepresentation.prototype=NGL.createObject(NGL.StructureRepresentation.prototype,{constructor:NGL.RibbonRepresentation,type:"ribbon",parameters:Object.assign({subdiv:{type:"integer",max:50,min:1,rebuild:!0},tension:{type:"number",precision:1,max:1,min:.1}},NGL.StructureRepresentation.prototype.parameters),init:function(a){a=a||{};a.color=a.color||"ss";a.radius=a.radius||"ss";a.scale=a.scale||3;this.subdiv="low"===a.quality?3:"medium"===a.quality?6:"high"===a.quality?12:a.subdiv||6;this.tension=
a.tension||NaN;NGL.StructureRepresentation.prototype.init.call(this,a);this.__fiberList=[];this.__bufferList=[]},prepare:function(a){this.__fiberList.length=0;this.__bufferList.length=0;if(0===this.atomSet.atomCount)a();else{var b=this,c=this.transparent?this.opacity:1;this.structure.eachFiber(function(a){4>a.residueCount||b.__fiberList.push(a)},this.selection,!0);NGL.processArray(this.__fiberList,function(a,e,f){for(;a<e;++a){var g=new NGL.Spline(f[a]),h=g.getSubdividedPosition(b.subdiv,b.tension),
k=g.getSubdividedOrientation(b.subdiv,b.tension),l=g.getSubdividedColor(b.subdiv,b.color),g=g.getSubdividedSize(b.subdiv,b.radius,b.scale);b.__bufferList.push(new NGL.RibbonBuffer(h.position,k.binormal,k.normal,l.color,g.size,l.pickingColor,{transparent:b.transparent,side:b.side,opacity:c,nearClip:b.nearClip,flatShaded:b.flatShaded}))}},a,50)}},create:function(){for(var a=this.__fiberList.length,b=0;b<a;++b)this.fiberList.push(this.__fiberList[b]),this.bufferList.push(this.__bufferList[b])},update:function(a){if(0!==
this.atomSet.atomCount){a=a||{};for(var b=0,c=this.fiberList.length,b=0;b<c;++b){var d=this.fiberList[b];if(4>d.residueCount)break;var e={},d=new NGL.Spline(d);if(a.position){var f=d.getSubdividedPosition(this.subdiv,this.tension),g=d.getSubdividedOrientation(this.subdiv,this.tension);e.position=f.position;e.normal=g.binormal;e.dir=g.normal}if(a.radius||a.scale)f=d.getSubdividedSize(this.subdiv,this.radius,this.scale),e.size=f.size;a.color&&(d=d.getSubdividedColor(this.subdiv,this.color),e.color=
d.color,e.pickingColor=d.pickingColor);this.bufferList[b].setAttributes(e)}}},setParameters:function(a){var b={};a&&a.tension&&(b.position=!0);NGL.StructureRepresentation.prototype.setParameters.call(this,a,b,!1);return this}});NGL.TraceRepresentation=function(a,b,c){NGL.StructureRepresentation.call(this,a,b,c)};
NGL.TraceRepresentation.prototype=NGL.createObject(NGL.StructureRepresentation.prototype,{constructor:NGL.TraceRepresentation,type:"trace",parameters:Object.assign({subdiv:{type:"integer",max:50,min:1,rebuild:!0},tension:{type:"number",precision:1,max:1,min:.1},lineWidth:{type:"integer",max:20,min:1,property:"linewidth"},transparent:{type:"boolean",property:!0},opacity:{type:"number",precision:1,max:1,min:0,uniform:!0}},NGL.Representation.prototype.parameters,{flatShaded:null}),init:function(a){a=
a||{};a.color=a.color||"ss";this.subdiv="low"===a.quality?3:"medium"===a.quality?6:"high"===a.quality?12:a.subdiv||6;this.tension=a.tension||NaN;this.lineWidth=a.lineWidth||1;this.transparent=void 0!==a.transparent?a.transparent:!1;this.opacity=void 0!==a.opacity?a.opacity:1;NGL.StructureRepresentation.prototype.init.call(this,a);this.__fiberList=[];this.__bufferList=[]},prepare:function(a){this.__fiberList.length=0;this.__bufferList.length=0;if(0===this.atomSet.atomCount)a();else{var b=this,c=this.transparent?
this.opacity:1;this.structure.eachFiber(function(a){4>a.residueCount||b.__fiberList.push(a)},this.selection,!0);NGL.processArray(this.__fiberList,function(a,e,f){for(;a<e;++a){var g=new NGL.Spline(f[a]),h=g.getSubdividedPosition(b.subdiv,b.tension),g=g.getSubdividedColor(b.subdiv,b.color);b.__bufferList.push(new NGL.TraceBuffer(h.position,g.color,{lineWidth:b.lineWidth,transparent:b.transparent,opacity:c,nearClip:b.nearClip}))}},a,50)}},create:function(){for(var a=this.__fiberList.length,b=0;b<a;++b)this.fiberList.push(this.__fiberList[b]),
this.bufferList.push(this.__bufferList[b])},update:function(a){if(0!==this.atomSet.atomCount){a=a||{};for(var b=0,c=this.fiberList.length,b=0;b<c;++b){var d=this.fiberList[b];if(4>d.residueCount)break;var e={},d=new NGL.Spline(d);if(a.position){var f=d.getSubdividedPosition(this.subdiv,this.tension);e.position=f.position}a.color&&(d=d.getSubdividedColor(this.subdiv,this.color),e.color=d.color);this.bufferList[b].setAttributes(e)}}},setParameters:function(a){var b={};a&&a.tension&&(b.position=!0);
NGL.StructureRepresentation.prototype.setParameters.call(this,a,b,!1);return this}});NGL.HelixorientRepresentation=function(a,b,c){NGL.StructureRepresentation.call(this,a,b,c)};
NGL.HelixorientRepresentation.prototype=NGL.createObject(NGL.StructureRepresentation.prototype,{constructor:NGL.HelixorientRepresentation,type:"helixorient",parameters:Object.assign({},NGL.StructureRepresentation.prototype.parameters),init:function(a){a=a||{};a.color=a.color||"ss";a.radius=a.radius||.15;a.scale=a.scale||1;NGL.StructureRepresentation.prototype.init.call(this,a)},create:function(){if(0!==this.atomSet.atomCount){var a=this.transparent?this.opacity:1,b=this;this.structure.eachFiber(function(c){if(!(4>
c.residueCount||c.isNucleic())){var d=new NGL.Helixorient(c),e=d.getPosition(),f=d.getColor(b.color),d=d.getSize(b.radius,b.scale);b.bufferList.push(new NGL.SphereBuffer(e.center,f.color,d.size,f.pickingColor,{sphereDetail:b.sphereDetail,transparent:b.transparent,side:b.side,opacity:a,nearClip:b.nearClip,flatShaded:b.flatShaded,dullInterior:!0},b.disableImpostor));b.bufferList.push(new NGL.BufferVectorHelper(e.center,e.axis,"skyblue",1));b.bufferList.push(new NGL.BufferVectorHelper(e.center,e.resdir,
"lightgreen",1));b.fiberList.push(c)}},this.selection)}},update:function(a){if(0!==this.atomSet.atomCount){a=a||{};for(var b,c=0,d=this.fiberList.length,c=0;c<d;++c){b=3*c;var e=this.fiberList[c];if(4>e.residueCount)break;var f={},e=new NGL.Helixorient(e);a.position&&(e=e.getPosition(),f.position=e.center,this.bufferList[b+1].setAttributes({position:e.center,vector:e.axis}),this.bufferList[b+2].setAttributes({position:e.center,vector:e.redir}));this.bufferList[b].setAttributes(f)}}}});
NGL.RocketRepresentation=function(a,b,c){this.helixbundleList=[];NGL.StructureRepresentation.call(this,a,b,c)};
NGL.RocketRepresentation.prototype=NGL.createObject(NGL.StructureRepresentation.prototype,{constructor:NGL.RocketRepresentation,type:"rocket",parameters:Object.assign({localAngle:{type:"integer",max:180,min:0,rebuild:!0},centerDist:{type:"number",precision:1,max:10,min:0,rebuild:!0},ssBorder:{type:"boolean",rebuild:!0},radiusSegments:{type:"integer",max:25,min:5,rebuild:"impostor"}},NGL.StructureRepresentation.prototype.parameters),init:function(a){a=a||{};a.color=a.color||"ss";a.radius=a.radius||
1.5;a.scale=a.scale||1;this.disableImpostor=a.disableImpostor||!1;this.radiusSegments="low"===a.quality?5:"medium"===a.quality?10:"high"===a.quality?20:a.radiusSegments||10;this.localAngle=a.localAngle||30;this.centerDist=a.centerDist||2.5;this.ssBorder=void 0===a.ssBorder?!1:a.ssBorder;NGL.StructureRepresentation.prototype.init.call(this,a)},create:function(){if(0!==this.atomSet.atomCount){var a=this.transparent?this.opacity:1,b=this,c=0,d=[];this.structure.eachFiber(function(a){if(!(4>a.residueCount||
a.isNucleic())){a=new NGL.Helixbundle(a);var e=a.getAxis(b.localAngle,b.centerDist,b.ssBorder,b.color,b.radius,b.scale);c+=e.size.length;d.push(e);b.helixbundleList.push(a)}},this.selection);var e=this.axisData={begin:new Float32Array(3*c),end:new Float32Array(3*c),size:new Float32Array(c),color:new Float32Array(3*c),pickingColor:new Float32Array(3*c)},f=0;d.forEach(function(a){e.begin.set(a.begin,3*f);e.end.set(a.end,3*f);e.size.set(a.size,f);e.color.set(a.color,3*f);e.pickingColor.set(a.pickingColor,
3*f);f+=a.size.length});this.cylinderBuffer=new NGL.CylinderBuffer(e.begin,e.end,e.color,e.color,e.size,e.pickingColor,e.pickingColor,{shift:0,cap:!0,radiusSegments:this.radiusSegments,transparent:this.transparent,side:this.side,opacity:a,nearClip:this.nearClip,flatShaded:this.flatShaded,dullInterior:!0},this.disableImpostor);this.bufferList.push(this.cylinderBuffer)}},update:function(a){if(0!==this.atomSet.atomCount){a=a||{};var b=this,c={};if(a.position)this.build();else{if(a.color||a.radius||a.scale){var d=
0,e=this.axisData;this.helixbundleList.forEach(function(c){c=c.getAxis(b.localAngle,b.centerDist,b.ssBorder,b.color,b.radius,b.scale);a.color&&e.color.set(c.color,3*d);(a.radius||a.scale)&&e.size.set(c.size,d);d+=c.size.length});a.color&&(c.color=e.color,c.color2=e.color);if(a.radius||a.scale)c.radius=e.size}this.cylinderBuffer.setAttributes(c)}}},clear:function(){this.helixbundleList.length=0;NGL.StructureRepresentation.prototype.clear.call(this)}});
NGL.RopeRepresentation=function(a,b,c){NGL.StructureRepresentation.call(this,a,b,c)};
NGL.RopeRepresentation.prototype=NGL.createObject(NGL.StructureRepresentation.prototype,{constructor:NGL.RopeRepresentation,type:"rope",parameters:Object.assign({subdiv:{type:"integer",max:50,min:1,rebuild:!0},radialSegments:{type:"integer",max:50,min:1,rebuild:!0},tension:{type:"number",precision:1,max:1,min:.1},capped:{type:"boolean",rebuild:!0},wireframe:{type:"boolean",rebuild:!0},lineWidth:{type:"integer",max:20,min:1,property:"linewidth"},smooth:{type:"integer",max:15,min:0,rebuild:!0}},NGL.StructureRepresentation.prototype.parameters),
init:function(a){a=a||{};a.color=a.color||"ss";a.radius=a.radius||this.defaultSize;"low"===a.quality?(this.subdiv=3,this.radialSegments=5):"medium"===a.quality?(this.subdiv=6,this.radialSegments=10):"high"===a.quality?(this.subdiv=12,this.radialSegments=20):(this.subdiv=a.subdiv||6,this.radialSegments=a.radialSegments||10);this.tension=a.tension||.5;this.capped=a.capped||!0;this.wireframe=a.wireframe||!1;this.lineWidth=a.lineWidth||1;this.smooth=void 0===a.smooth?2:a.smooth;NGL.StructureRepresentation.prototype.init.call(this,
a);this.__fiberList=[];this.__bufferList=[]},prepare:function(a){this.__fiberList.length=0;this.__bufferList.length=0;if(0===this.atomSet.atomCount)a();else{var b=this,c=this.transparent?this.opacity:1;this.structure.eachFiber(function(a){4>a.residueCount||a.isNucleic()||b.__fiberList.push(a)},this.selection,!0);NGL.processArray(this.__fiberList,function(a,e,f){for(;a<e;++a){var g=new NGL.Helixorient(f[a]),h=new NGL.Spline(g.getFiber(b.smooth,!0)),g=h.getSubdividedPosition(b.subdiv,b.tension),k=h.getSubdividedOrientation(b.subdiv,
b.tension),l=h.getSubdividedColor(b.subdiv,b.color),h=h.getSubdividedSize(b.subdiv,b.radius,b.scale);b.__bufferList.push(new NGL.TubeMeshBuffer(g.position,k.normal,k.binormal,k.tangent,l.color,h.size,l.pickingColor,{radialSegments:b.radialSegments,rx:1,ry:1,capped:b.capped,wireframe:b.wireframe,lineWidth:b.lineWidth,flatShaded:b.flatShaded,transparent:b.transparent,side:b.side,opacity:c,nearClip:b.nearClip,dullInterior:!0}))}},a,50)}},create:function(){for(var a=this.__fiberList.length,b=0;b<a;++b)this.fiberList.push(this.__fiberList[b]),
this.bufferList.push(this.__bufferList[b])},update:function(a){if(0!==this.atomSet.atomCount){a=a||{};for(var b=0,c=this.fiberList.length,b=0;b<c;++b){var d=this.fiberList[b];if(4>d.residueCount)break;var e={},d=new NGL.Helixorient(d),d=new NGL.Spline(d.getFiber(this.smooth,!0));if(a.position||a.radius||a.scale){var f=d.getSubdividedPosition(this.subdiv,this.tension),g=d.getSubdividedOrientation(this.subdiv,this.tension),h=d.getSubdividedSize(this.subdiv,this.radius,this.scale);e.position=f.position;
e.normal=g.normal;e.binormal=g.binormal;e.tangent=g.tangent;e.size=h.size}a.color&&(d=d.getSubdividedColor(this.subdiv,this.color),e.color=d.color,e.pickingColor=d.pickingColor);this.bufferList[b].setAttributes(e)}}},setParameters:function(a){var b={};a&&a.tension&&(b.radius=!0);NGL.StructureRepresentation.prototype.setParameters.call(this,a,b,!1);return this}});NGL.CrossingRepresentation=function(a,b,c){NGL.StructureRepresentation.call(this,a,b,c)};
NGL.CrossingRepresentation.prototype=NGL.createObject(NGL.StructureRepresentation.prototype,{constructor:NGL.CrossingRepresentation,type:"crossing",parameters:Object.assign({localAngle:{type:"integer",max:180,min:0,rebuild:!0},centerDist:{type:"number",precision:1,max:10,min:0,rebuild:!0},ssBorder:{type:"boolean",rebuild:!0},radiusSegments:{type:"integer",max:25,min:5,rebuild:"impostor"},helixDist:{type:"number",precision:1,max:30,min:0,rebuild:!0},displayLabel:{type:"boolean",rebuild:!0},download:{type:"button",
methodName:"download"}},NGL.StructureRepresentation.prototype.parameters),init:function(a){a=a||{};a.color=a.color||"ss";a.radius=a.radius||.7;a.scale=a.scale||1;this.disableImpostor=a.disableImpostor||!1;this.radiusSegments="low"===a.quality?5:"medium"===a.quality?10:"high"===a.quality?20:a.radiusSegments||10;this.localAngle=a.localAngle||30;this.centerDist=a.centerDist||2.5;this.ssBorder=void 0===a.ssBorder?!1:a.ssBorder;this.helixDist=a.helixDist||12;this.displayLabel=void 0===a.displayLabel?!0:
a.displayLabel;NGL.StructureRepresentation.prototype.init.call(this,a)},create:function(){if(0!==this.atomSet.atomCount){var a=this,b=this.transparent?this.opacity:1,c=[];this.structure.eachFiber(function(d){if(!(4>d.residueCount||d.isNucleic())){var e=(new NGL.Helixbundle(d)).getAxis(a.localAngle,a.centerDist,a.ssBorder,a.color,a.radius,a.scale);a.bufferList.push(new NGL.CylinderBuffer(e.begin,e.end,e.color,e.color,e.size,e.pickingColor,e.pickingColor,{shift:0,cap:!0,radiusSegments:a.radiusSegments,
transparent:a.transparent,side:a.side,opacity:b,nearClip:a.nearClip,flatShaded:a.flatShaded,dullInterior:!0},a.disableImpostor));a.fiberList.push(d);for(d=0;d<e.residue.length;++d){var h=new NGL.Helix;h.fromHelixbundleAxis(e,d);c.push(h)}}},this.selection);var d=(new NGL.HelixCrossing(c)).getCrossing(this.helixDist);this.crossing=d;var e=d.end.length/3;this.bufferList.push(new NGL.CylinderBuffer(new Float32Array(d.begin),new Float32Array(d.end),NGL.Utils.uniformArray3(e,.2,.2,.9),NGL.Utils.uniformArray3(e,
.2,.2,.9),NGL.Utils.uniformArray(e,.1),NGL.Utils.uniformArray3(e,0,0,0),NGL.Utils.uniformArray3(e,0,0,0),{shift:0,cap:!0,radiusSegments:this.radiusSegments,transparent:this.transparent,side:this.side,opacity:b,nearClip:this.nearClip,flatShaded:this.flatShaded,dullInterior:!0},this.disableImpostor));this.displayLabel&&(e=d.helixLabel.length,this.bufferList.push(new NGL.TextBuffer(d.helixCenter,NGL.Utils.uniformArray(e,2.5),NGL.Utils.uniformArray3(e,1,1,1),d.helixLabel,{nearClip:this.nearClip})))}},
update:function(a){this.build()},download:function(){var a=JSON.stringify(this.crossing.info,null,"\t");NGL.download(new Blob([a],{type:"text/plain"}),"helixCrossing.json")}});NGL.ContactRepresentation=function(a,b,c){NGL.StructureRepresentation.call(this,a,b,c)};
NGL.ContactRepresentation.prototype=NGL.createObject(NGL.StructureRepresentation.prototype,{constructor:NGL.ContactRepresentation,type:"contact",defaultSize:.25,parameters:Object.assign({contactType:{type:"select",rebuild:!0,options:{polar:"polar",polarBackbone:"polar backbone"}},maxDistance:{type:"number",precision:1,max:10,min:.1,rebuild:!0},maxAngle:{type:"integer",max:180,min:0,rebuild:!0}},NGL.StructureRepresentation.prototype.parameters),init:function(a){a=a||{};a.radius=a.radius||this.defaultSize;
this.disableImpostor=a.disableImpostor||!1;this.sphereDetail="low"===a.quality?0:"medium"===a.quality?1:"high"===a.quality?2:a.sphereDetail||1;this.contactType=a.contactType||"polar";this.maxDistance=a.maxDistance||3.5;this.maxAngle=a.maxAngle||40;NGL.StructureRepresentation.prototype.init.call(this,a)},create:function(){if(0!==this.atomSet.atomCount){var a=this.transparent?this.opacity:1,b=new NGL.StructureSubset(this.structure,this.selection),c={polar:NGL.polarContacts,polarBackbone:NGL.polarBackboneContacts}[this.contactType](b,
this.maxDistance,this.maxAngle);this.contactAtomSet=c.atomSet;c=this.contactBondSet=c.bondSet;0!==this.contactAtomSet.atomCount&&(this.cylinderBuffer=new NGL.CylinderBuffer(c.bondPosition(null,0),c.bondPosition(null,1),c.bondColor(null,0,this.color),c.bondColor(null,1,this.color),c.bondRadius(null,0,this.radius,this.scale),c.bondColor(null,0,"picking"),c.bondColor(null,1,"picking"),{shift:0,cap:!0,radiusSegments:this.radiusSegments,transparent:this.transparent,side:this.side,opacity:a,nearClip:this.nearClip,
flatShaded:this.flatShaded,dullInterior:!0},this.disableImpostor),this.bufferList.push(this.cylinderBuffer),b.dispose())}},update:function(a){if(a.position)this.build();else if(0!==this.atomSet.atomCount){a=a||{};var b=this.contactBondSet;if(0!==this.contactAtomSet.atomCount){var c={};if(a.position){var d=b.bondPosition(null,0),e=b.bondPosition(null,1);c.position=NGL.Utils.calculateCenterArray(d,e);c.position1=d;c.position2=e}a.color&&(c.color=b.bondColor(null,0,this.color),c.color2=b.bondColor(null,
1,this.color));if(a.radius||a.scale)c.radius=b.bondRadius(null,0,this.radius,this.scale);this.cylinderBuffer.setAttributes(c)}}},clear:function(){this.contactAtomSet&&this.contactAtomSet.dispose();this.contactBondSet&&this.contactBondSet.dispose();NGL.StructureRepresentation.prototype.clear.call(this)}});NGL.MolecularSurfaceRepresentation=function(a,b,c){NGL.StructureRepresentation.call(this,a,b,c)};
NGL.MolecularSurfaceRepresentation.prototype=NGL.createObject(NGL.StructureRepresentation.prototype,{constructor:NGL.MolecularSurfaceRepresentation,type:"surface",parameters:Object.assign({surfaceType:{type:"select",rebuild:!0,options:{vws:"vws",sas:"sas",ms:"ms",ses:"ses"}},probeRadius:{type:"number",precision:1,max:20,min:0,rebuild:!0},smooth:{type:"integer",precision:1,max:10,min:0,rebuild:!0},scaleFactor:{type:"number",precision:1,max:5,min:0,rebuild:!0},wireframe:{type:"boolean",rebuild:!0},
lineWidth:{type:"integer",max:20,min:1,property:"linewidth"},background:{type:"boolean",rebuild:!0},opaqueBack:{type:"boolean",define:"OPAQUE_BACK"},lowResolution:{type:"boolean",rebuild:!0}},NGL.StructureRepresentation.prototype.parameters,{radiusType:null,radius:null,scale:null,transparent:{type:"boolean",rebuild:!0},side:{type:"select",options:NGL.SideTypes,rebuild:!0,int:!0}}),init:function(a){var b=a||{};b.color=void 0!==b.color?b.color:14540253;this.surfaceType=void 0!==b.surfaceType?b.surfaceType:
"ms";this.probeRadius=void 0!==b.probeRadius?b.probeRadius:1.4;this.smooth=void 0!==b.smooth?b.smooth:2;this.scaleFactor=void 0!==b.scaleFactor?b.scaleFactor:2;this.background=b.background||!1;this.wireframe=b.wireframe||!1;this.lineWidth=b.lineWidth||1;this.transparent=void 0!==b.transparent?b.transparent:!1;this.opaqueBack=void 0!==b.opaqueBack?b.opaqueBack:!0;this.side=void 0!==b.side?b.side:THREE.DoubleSide;this.opacity=void 0!==b.opacity?b.opacity:1;this.lowResolution=void 0!==b.lowResolution?
b.lowResolution:!1;NGL.StructureRepresentation.prototype.init.call(this,a)},prepare:function(a){if(!this.molsurf||this.__forceNewMolsurf||this.__sele!==this.selection.combinedString)this.molsurf&&this.molsurf.dispose(),this.molsurf=new NGL.MolecularSurface(this.atomSet),this.__forceNewMolsurf=!1,this.__sele=this.selection.combinedString;this.molsurf.generateSurfaceWorker(this.surfaceType,this.probeRadius,this.scaleFactor,this.smooth,this.lowResolution,a)},create:function(){if(0!==this.atomSet.atomCount){var a=
this.molsurf.getPosition(),b=this.molsurf.getColor(this.color),c=this.molsurf.getNormal(),d=this.molsurf.getIndex(),e=this.transparent?this.opacity:1;if(this.transparent&&this.side===THREE.DoubleSide){var f=new NGL.SurfaceBuffer(a,b,d,c,void 0,{background:this.background,wireframe:this.wireframe,lineWidth:this.lineWidth,transparent:this.transparent,opaqueBack:this.opaqueBack,side:THREE.FrontSide,opacity:e,nearClip:this.nearClip,flatShaded:this.flatShaded,dullInterior:!1}),a=new NGL.SurfaceBuffer(a,
b,d,c,void 0,{background:this.background,wireframe:this.wireframe,lineWidth:this.lineWidth,transparent:this.transparent,opaqueBack:this.opaqueBack,side:THREE.BackSide,opacity:e,nearClip:this.nearClip,flatShaded:this.flatShaded,dullInterior:!1});this.bufferList.push(a,f)}else f=new NGL.SurfaceBuffer(a,b,d,c,void 0,{background:this.background,wireframe:this.wireframe,lineWidth:this.lineWidth,transparent:this.transparent,opaqueBack:this.opaqueBack,side:this.side,opacity:e,nearClip:this.nearClip,flatShaded:this.flatShaded,
dullInterior:!1}),this.bufferList.push(f)}},update:function(a){a=a||{};var b={};a.position?(this.__forceNewMolsurf=!0,this.build()):(a.color&&(b.color=this.molsurf.getColor(this.color)),this.bufferList.forEach(function(a){a.setAttributes(b)}))},setParameters:function(a,b,c){b=b||{};NGL.StructureRepresentation.prototype.setParameters.call(this,a,b,c);return this},clear:function(){NGL.StructureRepresentation.prototype.clear.call(this)},dispose:function(){this.molsurf&&this.molsurf.dispose();NGL.StructureRepresentation.prototype.dispose.call(this)}});
NGL.DistanceRepresentation=function(a,b,c){NGL.StructureRepresentation.call(this,a,b,c)};
NGL.DistanceRepresentation.prototype=NGL.createObject(NGL.StructureRepresentation.prototype,{constructor:NGL.DistanceRepresentation,type:"distance",defaultSize:.15,parameters:Object.assign({font:{type:"select",options:{LatoBlack:"LatoBlack"},rebuild:!0},labelSize:{type:"number",precision:3,max:10,min:.001},labelColor:{type:"color"},antialias:{type:"boolean",define:"ANTIALIAS"},atomPair:{type:"hidden"},radiusSegments:{type:"integer",max:25,min:5,rebuild:"impostor"}},NGL.StructureRepresentation.prototype.parameters),
init:function(a){a=a||{};a.radius=a.radius||this.defaultSize;this.disableImpostor=a.disableImpostor||!1;this.radiusSegments="low"===a.quality?5:"medium"===a.quality?10:"high"===a.quality?20:a.radiusSegments||10;this.font=a.font||"LatoBlack";this.labelSize=a.labelSize||1;this.labelColor=a.labelColor||16777215;this.antialias=void 0!==a.antialias?a.antialias:!0;this.atomPair=a.atomPair||[];NGL.StructureRepresentation.prototype.init.call(this,a)},create:function(){if(0!==this.atomSet.atomCount){var a=
this.transparent?this.opacity:1,b=this.atomPair.length;if(0!==b){var c=Array(b),d=new Float32Array(3*b),e=new NGL.Selection,f=new NGL.Selection;this.bondSet=new NGL.BondSet;this.bondSet.structure=this.structure;var g=this.bondSet,h=0;this.atomPair.forEach(function(a,b){b-=h;var k=3*b;e.setString(a[0]);f.setString(a[1]);var q=this.atomSet.getAtoms(e,!0),p=this.atomSet.getAtoms(f,!0);q&&p?(g.addBond(q,p,!0),c[b]=q.distanceTo(p).toFixed(2),d[k+0]=(q.x+p.x)/2,d[k+1]=(q.y+p.y)/2,d[k+2]=(q.z+p.z)/2):h+=
1},this);0<h&&(b-=h,d=d.subarray(0,3*b));var k=new THREE.Color(this.labelColor);this.textBuffer=new NGL.TextBuffer(d,NGL.Utils.uniformArray(b,this.labelSize),NGL.Utils.uniformArray3(b,k.r,k.g,k.b),c,{font:this.font,antialias:this.antialias,opacity:a,nearClip:this.nearClip});this.__center=new Float32Array(3*g.bondCount);this.cylinderBuffer=new NGL.CylinderBuffer(g.bondPosition(null,0),g.bondPosition(null,1),g.bondColor(null,0,this.color),g.bondColor(null,1,this.color),g.bondRadius(null,null,this.radius,
this.scale),g.bondColor(null,0,"picking"),g.bondColor(null,1,"picking"),{shift:0,cap:!0,radiusSegments:this.radiusSegments,transparent:this.transparent,side:this.side,opacity:a,nearClip:this.nearClip,flatShaded:this.flatShaded,dullInterior:!0},this.disableImpostor);this.bufferList.push(this.textBuffer,this.cylinderBuffer)}}},update:function(a){if(0!==this.atomSet.atomCount){var b=this.atomPair.length;if(0!==b){a=a||{};var c=this.bondSet,d={},e={};if(a.position){var f=new Float32Array(3*b),g=new NGL.Selection,
h=new NGL.Selection;this.atomPair.forEach(function(a,b){var c=3*b;g.setString(a[0]);h.setString(a[1]);var d=this.atomSet.getAtoms(g,!0),e=this.atomSet.getAtoms(h,!0);f[c+0]=(d.x+e.x)/2;f[c+1]=(d.y+e.y)/2;f[c+2]=(d.z+e.z)/2},this);d.position=f;var k=c.bondPosition(null,0),l=c.bondPosition(null,1);e.position=NGL.Utils.calculateCenterArray(k,l);e.position1=k;e.position2=l}a.labelSize&&(d.size=NGL.Utils.uniformArray(b,this.labelSize));a.labelColor&&(k=new THREE.Color(this.labelColor),d.color=NGL.Utils.uniformArray3(b,
k.r,k.g,k.b));a.color&&(e.color=c.bondColor(null,0,this.color),e.color2=c.bondColor(null,1,this.color));if(a.radius||a.scale)e.radius=c.bondRadius(null,0,this.radius,this.scale);this.textBuffer.setAttributes(d);this.cylinderBuffer.setAttributes(e)}}},setParameters:function(a){var b={};a&&a.labelSize&&(b.labelSize=!0);a&&a.labelColor&&(b.labelColor=!0);NGL.StructureRepresentation.prototype.setParameters.call(this,a,b,!1);return this},clear:function(){this.bondSet&&this.bondSet.dispose();NGL.StructureRepresentation.prototype.clear.call(this)}});
NGL.TrajectoryRepresentation=function(a,b,c){this.manualAttach=!0;this.trajectory=a;NGL.StructureRepresentation.call(this,a.structure,b,c)};
NGL.TrajectoryRepresentation.prototype=NGL.createObject(NGL.StructureRepresentation.prototype,{constructor:NGL.TrajectoryRepresentation,type:"",parameters:Object.assign({drawLine:{type:"boolean",rebuild:!0},drawCylinder:{type:"boolean",rebuild:!0},drawPoint:{type:"boolean",rebuild:!0},drawSphere:{type:"boolean",rebuild:!0},lineWidth:{type:"integer",max:20,min:1,rebuild:!0},pointSize:{type:"integer",max:20,min:1,rebuild:!0},sizeAttenuation:{type:"boolean",rebuild:!0},sort:{type:"boolean",rebuild:!0},
transparent:{type:"boolean",rebuild:!0},side:{type:"select",options:NGL.SideTypes,rebuild:!0,int:!0},opacity:{type:"number",precision:1,max:1,min:0,rebuild:!0}},NGL.Representation.prototype.parameters),init:function(a){a=a||{};a.color=a.color||14540253;this.drawLine=a.drawLine||!0;this.drawCylinder=a.drawCylinder||!1;this.drawPoint=a.drawPoint||!1;this.drawSphere=a.drawSphere||!1;this.lineWidth=a.lineWidth||1;this.pointSize=a.pointSize||1;this.sizeAttenuation=void 0!==a.sizeAttenuation?a.sizeAttenuation:
!1;this.sort=void 0!==a.sort?a.sort:!0;a.transparent=void 0!==a.transparent?a.transparent:!0;a.side=void 0!==a.side?a.side:THREE.DoubleSide;a.opacity=void 0!==a.opacity?a.opacity:.6;NGL.StructureRepresentation.prototype.init.call(this,a)},attach:function(a){this.bufferList.forEach(function(a){this.viewer.add(a)},this);this.setVisibility(this.visible);a()},prepare:function(a){a()},create:function(){if(0!==this.atomSet.atomCount){var a=this,b=this.transparent?this.opacity:1;this.trajectory.getPath(this.atomSet.atoms[0].index,
function(c){var d=c.length/3,e=new THREE.Color(a.color);if(a.drawSphere){var f=new NGL.SphereBuffer(c,NGL.Utils.uniformArray3(d,e.r,e.g,e.b),NGL.Utils.uniformArray(d,.2),NGL.Utils.uniformArray3(d,e.r,e.g,e.b),{sphereDetail:a.sphereDetail,transparent:a.transparent,side:a.side,opacity:b,nearClip:a.nearClip,flatShaded:a.flatShaded,dullInterior:!0},a.disableImpostor);a.bufferList.push(f)}a.drawCylinder&&(f=new NGL.CylinderBuffer(c.subarray(0,-3),c.subarray(3),NGL.Utils.uniformArray3(d-1,e.r,e.g,e.b),
NGL.Utils.uniformArray3(d-1,e.r,e.g,e.b),NGL.Utils.uniformArray(d,.05),NGL.Utils.uniformArray3(d-1,e.r,e.g,e.b),NGL.Utils.uniformArray3(d-1,e.r,e.g,e.b),{shift:0,cap:!0,radiusSegments:this.radiusSegments,transparent:this.transparent,side:this.side,opacity:b,nearClip:a.nearClip,flatShaded:a.flatShaded,dullInterior:!0},this.disableImpostor),a.bufferList.push(f));a.drawPoint&&(f=new NGL.PointBuffer(c,NGL.Utils.uniformArray3(d,e.r,e.g,e.b),{pointSize:a.pointSize,sizeAttenuation:a.sizeAttenuation,sort:a.sort,
transparent:a.transparent,opacity:b,nearClip:a.nearClip,flatShaded:a.flatShaded}),a.bufferList.push(f));a.drawLine&&(c=new NGL.LineBuffer(c.subarray(0,-3),c.subarray(3),NGL.Utils.uniformArray3(d-1,e.r,e.g,e.b),NGL.Utils.uniformArray3(d-1,e.r,e.g,e.b),{lineWidth:a.lineWidth,transparent:a.transparent,opacity:b,nearClip:a.nearClip,flatShaded:a.flatShaded}),a.bufferList.push(c));a.attach()})}}});NGL.SurfaceRepresentation=function(a,b,c){NGL.Representation.call(this,a,b,c);this.surface=a;this.build()};
NGL.SurfaceRepresentation.prototype=NGL.createObject(NGL.Representation.prototype,{constructor:NGL.SurfaceRepresentation,type:"surface",parameters:Object.assign({isolevelType:{type:"select",rebuild:!0,options:{value:"value",sigma:"sigma"}},isolevel:{type:"number",precision:2,max:1E3,min:-1E3,rebuild:!0},smooth:{type:"integer",precision:1,max:10,min:0,rebuild:!0},wireframe:{type:"boolean",rebuild:!0},lineWidth:{type:"integer",max:20,min:1,property:"linewidth"},background:{type:"boolean",rebuild:!0},
transparent:{type:"boolean",rebuild:!0},opaqueBack:{type:"boolean",define:"OPAQUE_BACK"},side:{type:"select",options:NGL.SideTypes,rebuild:!0,int:!0},opacity:{type:"number",precision:1,max:1,min:0,uniform:!0}},NGL.Representation.prototype.parameters),init:function(a){a=a||{};this.color=a.color||14540253;this.isolevelType=void 0!==a.isolevelType?a.isolevelType:"sigma";this.isolevel=void 0!==a.isolevel?a.isolevel:2;this.smooth=void 0!==a.smooth?a.smooth:0;this.background=a.background||!1;this.wireframe=
a.wireframe||!1;this.lineWidth=a.lineWidth||1;this.transparent=void 0!==a.transparent?a.transparent:!1;this.opaqueBack=void 0!==a.opaqueBack?a.opaqueBack:!0;this.side=void 0!==a.side?a.side:THREE.DoubleSide;this.opacity=void 0!==a.opacity?a.opacity:1;NGL.Representation.prototype.init.call(this,a)},attach:function(a){this.bufferList.forEach(function(a){this.viewer.add(a)},this);this.setVisibility(this.visible);a()},prepare:function(a){if(this.surface instanceof NGL.Volume){var b;b="sigma"===this.isolevelType?
this.surface.getIsolevelForSigma(this.isolevel):this.isolevel;this.surface.generateSurfaceWorker(b,this.smooth,a)}else a()},create:function(){var a=this.surface.getPosition(),b=this.surface.getColor(this.color),c=this.surface.getNormal(),d=this.surface.getIndex(),e=this.transparent?this.opacity:1;if(this.transparent&&this.side===THREE.DoubleSide){var f=new NGL.SurfaceBuffer(a,b,d,c,void 0,{background:this.background,wireframe:this.wireframe,lineWidth:this.lineWidth,transparent:this.transparent,opaqueBack:this.opaqueBack,
side:THREE.FrontSide,opacity:e,nearClip:this.nearClip,flatShaded:this.flatShaded,dullInterior:!1}),a=new NGL.SurfaceBuffer(a,b,d,c,void 0,{background:this.background,wireframe:this.wireframe,lineWidth:this.lineWidth,transparent:this.transparent,opaqueBack:this.opaqueBack,side:THREE.BackSide,opacity:e,nearClip:this.nearClip,flatShaded:this.flatShaded,dullInterior:!1});this.bufferList.push(a,f)}else f=new NGL.SurfaceBuffer(a,b,d,c,void 0,{background:this.background,wireframe:this.wireframe,lineWidth:this.lineWidth,
transparent:this.transparent,opaqueBack:this.opaqueBack,side:this.side,opacity:e,nearClip:this.nearClip,flatShaded:this.flatShaded,dullInterior:!1}),this.bufferList.push(f)},update:function(a){a=a||{};var b={};a.color&&(b.color=this.surface.getColor(this.color));this.bufferList.forEach(function(a){a.setAttributes(b)})},setParameters:function(a,b,c){a&&void 0!==a.isolevelType&&this.surface instanceof NGL.Volume&&("value"===this.isolevelType&&"sigma"===a.isolevelType?this.isolevel=this.surface.getSigmaForIsolevel(this.isolevel):
"sigma"===this.isolevelType&&"value"===a.isolevelType&&(this.isolevel=this.surface.getIsolevelForSigma(this.isolevel)),this.isolevelType=a.isolevelType);NGL.Representation.prototype.setParameters.call(this,a,b,c);return this}});NGL.DotRepresentation=function(a,b,c){NGL.Representation.call(this,a,b,c);this.surface=a;this.build()};
NGL.DotRepresentation.prototype=NGL.createObject(NGL.Representation.prototype,{constructor:NGL.DotRepresentation,type:"dot",parameters:Object.assign({minValue:{type:"number",precision:3,max:1E3,min:-1E3,rebuild:!0},maxValue:{type:"number",precision:3,max:1E3,min:-1E3,rebuild:!0},dotType:{type:"select",rebuild:!0,options:{"":"",sphere:"sphere",point:"point"}},radiusType:{type:"select",options:{"":"",value:"value","value-min":"value-min",deviation:"deviation",size:"size"}},radius:{type:"number",precision:3,
max:10,min:.001,property:"size"},scale:{type:"number",precision:3,max:10,min:.001},sphereDetail:{type:"integer",max:3,min:0,rebuild:"impostor"},transparent:{type:"boolean",property:!0},side:{type:"select",options:NGL.SideTypes,property:!0,int:!0},opacity:{type:"number",precision:1,max:1,min:0,uniform:!0}},NGL.Representation.prototype.parameters),defaultSize:.1,init:function(a){a=a||{};this.disableImpostor=a.disableImpostor||!1;this.sphereDetail="low"===a.quality?0:"medium"===a.quality?1:"high"===
a.quality?2:a.sphereDetail||1;this.color=a.color||14540253;this.minValue=void 0!==a.minValue?a.minValue:NaN;this.maxValue=void 0!==a.maxValue?a.maxValue:Infinity;this.dotType=void 0!==a.dotType?a.dotType:"point";this.radius=void 0!==a.radius?a.radius:.1;this.scale=void 0!==a.scale?a.scale:1;this.transparent=void 0!==a.transparent?a.transparent:!1;this.side=void 0!==a.side?a.side:THREE.DoubleSide;this.opacity=void 0!==a.opacity?a.opacity:1;NGL.Representation.prototype.init.call(this,a)},attach:function(a){this.bufferList.forEach(function(a){this.viewer.add(a)},
this);this.setVisibility(this.visible);a()},create:function(){this.surface.filterData(this.minValue,this.maxValue);var a=this.transparent?this.opacity:1;this.dotBuffer="sphere"===this.dotType?new NGL.SphereBuffer(this.surface.getDataPosition(),this.surface.getDataColor(this.color),this.surface.getDataSize(this.radius,this.scale),void 0,{sphereDetail:this.sphereDetail,transparent:this.transparent,side:this.side,opacity:a,nearClip:this.nearClip,flatShaded:this.flatShaded,dullInterior:!1},this.disableImpostor):
new NGL.PointBuffer(this.surface.getDataPosition(),this.surface.getDataColor(this.color),{pointSize:this.radius,sizeAttenuation:!0,sort:!1,transparent:!0,opacity:a,nearClip:this.nearClip});this.bufferList.push(this.dotBuffer)},update:function(a){a=a||{};var b={};a.color&&(b.color=this.surface.getDataColor(this.color));"sphere"===this.dotType&&(a.radius||a.scale)&&(b.radius=this.surface.getDataSize(this.radius,this.scale));this.dotBuffer.setAttributes(b)},setParameters:function(a,b,c){b=b||{};a&&void 0!==
a.radiusType&&(this.radius="radius"===a.radiusType?this.defaultSize:a.radiusType,b.radius=!0,"sphere"!==this.dotType||NGL.extensionFragDepth&&!this.disableImpostor||(c=!0));a&&void 0!==a.radius&&(b.radius=!0,"sphere"!==this.dotType||NGL.extensionFragDepth&&!this.disableImpostor||(c=!0));a&&void 0!==a.scale&&(b.scale=!0,"sphere"!==this.dotType||NGL.extensionFragDepth&&!this.disableImpostor||(c=!0));NGL.Representation.prototype.setParameters.call(this,a,b,c);return this}});
(function(){NGL.representationTypes={};var a=[],b;for(b in NGL){var c=NGL[b];c.prototype instanceof NGL.StructureRepresentation&&c.prototype.type&&a.push(c)}a.sort(function(a,b){return a.prototype.type.localeCompare(b.prototype.type)}).forEach(function(a){NGL.representationTypes[a.prototype.type]=a})})();
NGL.Stage=function(a){var b=signals;this.signals={themeChanged:new b.Signal,componentAdded:new b.Signal,componentRemoved:new b.Signal,atomPicked:new b.Signal,bondPicked:new b.Signal,nothingPicked:new b.Signal,onPicking:new b.Signal,requestTheme:new b.Signal,windowResize:new b.Signal};this.tasks=new NGL.Counter;this.compList=[];this.preferences=new NGL.Preferences(this);this.viewer=new NGL.Viewer(a);this.preferences.setTheme();this.initFileDragDrop();this.viewer.animate();this.pickingControls=new NGL.PickingControls(this.viewer,
this)};
NGL.Stage.prototype={constructor:NGL.Stage,defaultFileRepresentation:function(a){a instanceof NGL.StructureComponent?(1E5<a.structure.atomCount?a.addRepresentation("line"):(a.addRepresentation("cartoon",{sele:"*"}),a.addRepresentation("licorice",{sele:"hetero"})),a.centerView(!0),a.structure.frames.length&&a.addTrajectory()):a instanceof NGL.SurfaceComponent?(a.addRepresentation("surface"),a.centerView()):a instanceof NGL.ScriptComponent&&a.run()},initFileDragDrop:function(){this.viewer.container.addEventListener("dragover",function(a){a.stopPropagation();
a.preventDefault();a.dataTransfer.dropEffect="copy"},!1);this.viewer.container.addEventListener("drop",function(a){a.stopPropagation();a.preventDefault();a=a.dataTransfer.files;for(var b=a.length,c=0;c<b;++c)this.loadFile(a[c])}.bind(this),!1)},loadFile:function(a,b){var c,d=b||{};"function"===typeof b?(c=b,d={}):c=d.onLoad;var e;d.onLoad=function(a,b){e&&this.removeComponent(e);e=this.addComponentFromObject(a,b);"function"===typeof c?c(e):this.defaultFileRepresentation(e)}.bind(this);var f,g=d.onError;
d.onError=function(a){f=a;e&&e.setStatus(a);"function"===typeof g&&g(a)};NGL.autoLoad(a,d);e||(e=new NGL.Component(this,d),e.name=(a instanceof File?a.name:a).replace(/^.*[\\\/]/,""),this.addComponent(e));f&&e.setStatus(f)},addComponent:function(a){a?(this.compList.push(a),this.signals.componentAdded.dispatch(a)):NGL.warn("NGL.Stage.addComponent: no component given")},addComponentFromObject:function(a,b){var c=NGL.makeComponent(this,a,b);this.addComponent(c);return c},removeComponent:function(a){var b=
this.compList.indexOf(a);-1!==b&&this.compList.splice(b,1);a.dispose();this.signals.componentRemoved.dispatch(a)},removeAllComponents:function(a){this.compList.slice().forEach(function(b,c){(!a||b instanceof a)&&this.removeComponent(b)},this)},centerView:function(){if(0<this.tasks.count){var a=function(b,c){0===c&&this.tasks.signals.countChanged.remove(a,this);this.viewer.centerView(!0)};this.tasks.signals.countChanged.add(a,this)}this.viewer.centerView(!0)},setOrientation:function(a){this.tasks.onZeroOnce(function(){this.viewer.setOrientation(a)},
this)},getOrientation:function(){return this.viewer.getOrientation()},exportImage:function(a,b,c,d,e){var f=[];this.tasks.onZeroOnce(function(){this.viewer.screenshot({factor:a,type:"image/png",quality:1,antialias:b,transparent:c,trim:d,onProgress:function(a,b,c){"function"===typeof e&&e(a,b,c);c&&f.forEach(function(a){a.repr.setParameters(a.params)})}})},this)},setTheme:function(a){var b;b="light"===a?"white":"black";this.signals.requestTheme.dispatch(a);this.viewer.setBackground(b)},eachComponent:function(a,
b){this.compList.forEach(function(c,d){(!b||c instanceof b)&&a(c,d)})},eachRepresentation:function(a,b){this.eachComponent(function(b){b.reprList.forEach(function(d){a(d,b)})},b)},getComponentsByName:function(a,b){var c=[];this.eachComponent(function(b){void 0!==a&&null===b.name.match(a)||c.push(b)},b);return new NGL.ComponentCollection(c)},getRepresentationsByName:function(a,b){var c,d;"object"!==typeof a?(c=void 0,d=a):(c=a.comp,d=a.repr);var e=[];this.eachRepresentation(function(a,b){if(void 0===
c||null!==b.name.match(c))void 0!==d&&null===a.name.match(d)||e.push(a)},b);return new NGL.RepresentationCollection(e)},getAnythingByName:function(a){var b=this.getComponentsByName(a).list;a=this.getRepresentationsByName(a).list;return new NGL.Collection(b.concat(a))},dispose:function(){this.tasks.dispose()}};
NGL.PickingControls=function(a,b){var c=new THREE.Vector3,d={position:new THREE.Vector2,down:new THREE.Vector2,moving:!1,distance:function(){return d.position.distanceTo(d.down)}};a.renderer.domElement.addEventListener("mousemove",function(a){a.preventDefault();d.moving=!0;d.position.x=a.layerX;d.position.y=a.layerY});a.renderer.domElement.addEventListener("mousedown",function(a){a.preventDefault();d.moving=!1;d.down.x=a.layerX;d.down.y=a.layerY});a.renderer.domElement.addEventListener("mouseup",
function(e){e.preventDefault();if(!(3<d.distance()||e.which===NGL.RightMouseButton)){var f=a.renderer.domElement.getBoundingClientRect(),g=a.pick(e.clientX-f.left,f.height-(e.clientY-f.top)),f=g.instance,h=void 0,k=void 0,g=NGL.GidPool.getByGid(g.gid);g instanceof NGL.Atom||g instanceof NGL.ProxyAtom?h=g:g instanceof NGL.Bond&&(k=g);(h||k)&&e.which===NGL.MiddleMouseButton&&(h?c.copy(h):k&&c.set(0,0,0).addVectors(k.atom1,k.atom2).multiplyScalar(.5),f&&c.applyProjection(f.matrix),a.centerView(!1,c));
h?b.signals.atomPicked.dispatch(h):k?b.signals.bondPicked.dispatch(k):b.signals.nothingPicked.dispatch();b.signals.onPicking.dispatch({atom:h,bond:k,instance:f});NGL.debug&&(NGL.log("picked atom",h),NGL.log("picked bond",k))}})};
NGL.Preferences=function(a,b){this.id=b||"ngl-stage";this.stage=a;this.storage={impostor:!0,quality:"medium",theme:"dark",overview:!0};try{if(void 0===window.localStorage[this.id])window.localStorage[this.id]=JSON.stringify(this.storage);else{var c=JSON.parse(window.localStorage[this.id]),d;for(d in c)this.storage[d]=c[d]}}catch(e){NGL.error("localStorage not accessible/available")}};
NGL.Preferences.prototype={constructor:NGL.Preferences,setImpostor:function(a){void 0!==a?this.setKey("impostor",a):a=this.getKey("impostor");var b="spacefill ball+stick licorice hyperball backbone rocket crossing contact dot".split(" ");this.stage.eachRepresentation(function(c){if(!(c instanceof NGL.ScriptComponent)&&-1!==b.indexOf(c.getType())){var d=c.getParameters();d.disableImpostor=!a;c.build(d)}})},setQuality:function(a){void 0!==a?this.setKey("quality",a):a=this.getKey("quality");var b=["tube",
"cartoon","ribbon","trace","rope"],c="spacefill ball+stick licorice hyperball backbone rocket crossing contact dot".split(" ");this.stage.eachRepresentation(function(d){if(!(d instanceof NGL.ScriptComponent)){var e=d.getParameters();if(-1===b.indexOf(d.getType())){if(-1===c.indexOf(d.getType()))return;if(NGL.extensionFragDepth&&!e.disableImpostor){d.repr.quality=a;return}}e.quality=a;d.build(e)}})},setTheme:function(a){void 0!==a?this.setKey("theme",a):a=this.getKey("theme");this.stage.setTheme(a)},
getKey:function(a){return this.storage[a]},setKey:function(a,b){this.storage[a]=b;try{window.localStorage[this.id]=JSON.stringify(this.storage)}catch(c){22===c.code||1014===c.code?NGL.error("localStorage full"):NGL.error("localStorage not accessible/available")}},clear:function(){try{delete window.localStorage[this.id]}catch(a){NGL.error("localStorage not accessible/available")}}};
NGL.makeComponent=function(a,b,c){var d;b instanceof NGL.Structure?d=new NGL.StructureComponent(a,b,c):b instanceof NGL.Surface||b instanceof NGL.Volume?d=new NGL.SurfaceComponent(a,b,c):b instanceof NGL.Script?d=new NGL.ScriptComponent(a,b,c):NGL.warn("NGL.makeComponent: object type unknown",b);return d};NGL.nextComponentId=0;
NGL.Component=function(a,b){Object.defineProperty(this,"id",{value:NGL.nextComponentId++});var c=b||{};this.name=c.name;this.uuid=THREE.Math.generateUUID();this.visible=void 0!==c.visible?c.visible:!0;c=Object.keys(this.signals);this.signals={};c.forEach(function(a){this.signals[a]=new signals.Signal},this);this.stage=a;this.viewer=a.viewer;this.reprList=[]};
NGL.Component.prototype={constructor:NGL.Component,type:"component",signals:{representationAdded:null,representationRemoved:null,visibilityChanged:null,requestGuiVisibility:null,statusChanged:null,nameChanged:null,disposed:null},addRepresentation:function(a,b,c){var d=this.stage.preferences;c=c||{};c.quality=c.quality||d.getKey("quality");c.disableImpostor=void 0!==c.disableImpostor?c.disableImpostor:!d.getKey("impostor");c.visible=void 0!==c.visible?c.visible:!0;d=Object.assign({},c,{visible:this.visible&&
c.visible});a=NGL.makeRepresentation(a,b,this.viewer,d);a=new NGL.RepresentationComponent(this.stage,a,c,this);this.reprList.push(a);this.signals.representationAdded.dispatch(a);return a},removeRepresentation:function(a){var b=this.reprList.indexOf(a);-1!==b&&this.reprList.splice(b,1);this.signals.representationRemoved.dispatch(a)},updateRepresentations:function(a){this.reprList.forEach(function(b){b.update(a)});this.stage.viewer.requestRender()},dispose:function(){this.reprList.slice().forEach(function(a){a.dispose()});
delete this.reprList;this.signals.disposed.dispatch()},setVisibility:function(a){this.visible=a;this.eachRepresentation(function(a){a.updateVisibility()});this.signals.visibilityChanged.dispatch(a);return this},setStatus:function(a){this.status=a;this.signals.statusChanged.dispatch(a);return this},setName:function(a){this.name=a;this.signals.nameChanged.dispatch(a);return this},getCenter:function(){},requestGuiVisibility:function(a){this.signals.requestGuiVisibility.dispatch(a);return this},eachRepresentation:function(a){this.reprList.forEach(a)}};
NGL.StructureComponent=function(a,b,c){c=c||{};c.name=void 0!==c.name?c.name:b.name;NGL.Component.call(this,a,c);this.structure=this.__structure=b;this.trajList=[];this.initSelection(c.sele);void 0!==c.assembly&&this.structure.setDefaultAssembly(c.assembly)};
NGL.StructureComponent.prototype=NGL.createObject(NGL.Component.prototype,{constructor:NGL.StructureComponent,type:"structure",signals:Object.assign({trajectoryAdded:null,trajectoryRemoved:null},NGL.Component.prototype.signals),initSelection:function(a){this.selection=new NGL.Selection(a);this.selection.signals.stringChanged.add(function(a){this.applySelection();this.rebuildRepresentations(!0);this.rebuildTrajectories()},this);this.applySelection()},applySelection:function(){this.structure=this.selection.string?
new NGL.StructureSubset(this.__structure,this.selection):this.__structure},setSelection:function(a){this.selection.setString(a);return this},rebuildRepresentations:function(a){this.reprList.forEach(function(b){a&&b.setStructure(this.structure);b.build(b.getParameters())},this)},rebuildTrajectories:function(){this.trajList.slice(0).forEach(function(a){a.trajectory.setStructure(this.structure)},this)},addRepresentation:function(a,b){return NGL.Component.prototype.addRepresentation.call(this,a,this.structure,
b)},addBufferRepresentation:function(a,b){return NGL.Component.prototype.addRepresentation.call(this,"buffer",a,b)},addTrajectory:function(a,b,c){c={i:c};a=NGL.makeTrajectory(a,this.structure,b);a.signals.frameChanged.add(function(a){this.updateRepresentations({position:!0})},this);a=new NGL.TrajectoryComponent(this.stage,a,c,this);this.trajList.push(a);this.signals.trajectoryAdded.dispatch(a);return a},removeTrajectory:function(a){var b=this.trajList.indexOf(a);-1!==b&&this.trajList.splice(b,1);
a.dispose();this.signals.trajectoryRemoved.dispatch(a)},dispose:function(){this.trajList.slice().forEach(function(a){a.dispose()});this.trajList=[];this.structure.dispose();this.__structure.dispose();NGL.Component.prototype.dispose.call(this)},centerView:function(a,b){var c;if(b){var d=new NGL.Selection(b);c=this.structure.atomCenter(d);a&&(a=this.structure.getBoundingBox(d).size().length())}else c=this.structure.center,a&&(a=this.structure.boundingBox.size().length());this.viewer.centerView(a,c);
return this},getCenter:function(){return this.structure.center},superpose:function(a,b,c,d,e,f){NGL.superpose(this.structure,a.structure,b,c,d,e,f);this.structure!==this.__structure&&NGL.superpose(this.__structure,a.structure,b,c,d,e,f);this.updateRepresentations({position:!0});return this},setVisibility:function(a){NGL.Component.prototype.setVisibility.call(this,a);this.trajList.forEach(function(b){b.setVisibility(a)});return this}});
NGL.SurfaceComponent=function(a,b,c){c=c||{};c.name=void 0!==c.name?c.name:b.name;NGL.Component.call(this,a,c);this.surface=b};NGL.SurfaceComponent.prototype=NGL.createObject(NGL.Component.prototype,{constructor:NGL.SurfaceComponent,type:"surface",addRepresentation:function(a,b){return NGL.Component.prototype.addRepresentation.call(this,a,this.surface,b)},centerView:function(a){var b=this.surface.center;a&&(a=this.surface.boundingBox.size().length());this.viewer.centerView(a,b)}});
NGL.TrajectoryComponent=function(a,b,c,d){c=c||{};c.name=void 0!==c.name?c.name:b.name;NGL.Component.call(this,a,c);this.trajectory=b;this.parent=d;this.status="loaded";b.signals.frameChanged.add(function(a){this.signals.frameChanged.dispatch(a)},this);b.signals.playerChanged.add(function(a){this.signals.playerChanged.dispatch(a)},this);b.signals.gotNumframes.add(function(a){this.signals.gotNumframes.dispatch(a)},this);void 0!==c.i&&this.setFrame(c.i)};
NGL.TrajectoryComponent.prototype=NGL.createObject(NGL.Component.prototype,{constructor:NGL.TrajectoryComponent,type:"trajectory",signals:Object.assign({frameChanged:null,playerChanged:null,gotNumframes:null,parametersChanged:null},NGL.Component.prototype.signals),addRepresentation:function(a,b){return NGL.Component.prototype.addRepresentation.call(this,a,this.trajectory,b)},setFrame:function(a){this.trajectory.setFrame(a)},setParameters:function(a){this.trajectory.setParameters(a);this.signals.parametersChanged.dispatch(a);
return this},dispose:function(){this.trajectory.dispose();NGL.Component.prototype.dispose.call(this)},getCenter:function(){}});NGL.ScriptComponent=function(a,b,c){c=c||{};c.name=void 0!==c.name?c.name:b.name;NGL.Component.call(this,a,c);this.script=b;this.status="loaded";this.script.signals.nameChanged.add(function(a){this.setName(a)},this)};
NGL.ScriptComponent.prototype=NGL.createObject(NGL.Component.prototype,{constructor:NGL.ScriptComponent,type:"script",addRepresentation:function(a){},removeRepresentation:function(a){},run:function(){var a=this;this.setStatus("running");this.script.call(this.stage,function(){a.setStatus("finished")});this.setStatus("called")},dispose:function(){this.signals.disposed.dispatch()},setVisibility:function(a){},getCenter:function(){}});
NGL.RepresentationComponent=function(a,b,c,d){c=c||{};c.name=void 0!==c.name?c.name:b.type;NGL.Component.call(this,a,c);this.parent=d;this.setRepresentation(b)};
NGL.RepresentationComponent.prototype=NGL.createObject(NGL.Component.prototype,{constructor:NGL.RepresentationComponent,type:"representation",signals:Object.assign({colorChanged:null,parametersChanged:null},NGL.Component.prototype.signals),getType:function(){return this.repr.type},setRepresentation:function(a){this.repr&&this.repr.dispose();this.repr=a;this.stage.tasks.listen(this.repr.tasks);this.updateVisibility()},addRepresentation:function(a){},removeRepresentation:function(a){},dispose:function(){this.parent&&
this.parent.removeRepresentation(this);this.repr.dispose();this.signals.disposed.dispatch()},setVisibility:function(a){this.visible=a;this.updateVisibility();this.signals.visibilityChanged.dispatch(this.visible);return this},updateVisibility:function(){this.parent?this.repr.setVisibility(this.parent.visible&&this.visible):this.repr.setVisibility(this.visible)},update:function(a){this.repr.update(a);return this},build:function(a){this.repr.build(a);return this},setStructure:function(a){this.repr.setStructure(a);
return this},setSelection:function(a){this.repr.setSelection(a);return this},setParameters:function(a){this.repr.setParameters(a);this.signals.parametersChanged.dispatch(this.repr.getParameters());return this},getParameters:function(){return this.repr.getParameters()},setColor:function(a){this.repr.setColor(a);this.signals.colorChanged.dispatch(this.repr.color);return this},getCenter:function(){}});
NGL.Collection=function(a){this.list=a||[];a=this.list.length;for(var b=0;b<a;++b){var c=this.list[b];c.signals.disposed.add(function(){this._remove(c)},this)}};
NGL.Collection.prototype={constructor:NGL.Collection,_remove:function(a){a=this.list.indexOf(a);-1!==a&&this.list.splice(a,1)},_invoke:function(a,b){for(var c=this.list.length,d=0;d<c;++d){var e=this.list[d],f=e[a];"function"===typeof f&&f.apply(e,b)}return this},setVisibility:function(a){return this._invoke("setVisibility",[a])},setSelection:function(a){return this._invoke("setSelection",[a])},requestGuiVisibility:function(a){return this._invoke("requestGuiVisibility",[a])},dispose:function(){return this._invoke("dispose")}};
NGL.ComponentCollection=function(a){NGL.Collection.call(this,a)};NGL.ComponentCollection.prototype=NGL.createObject(NGL.Collection.prototype,{constructor:NGL.ComponentCollection,addRepresentation:function(a,b){return this._invoke("addRepresentation",[a,b])},centerView:function(a,b){return this._invoke("centerView",[a,b])}});NGL.RepresentationCollection=function(a){NGL.Collection.call(this,a)};
NGL.RepresentationCollection.prototype=NGL.createObject(NGL.Collection.prototype,{constructor:NGL.RepresentationCollection,setParameters:function(a){return this._invoke("setParameters",[a])},setColor:function(a){return this._invoke("setColor",[a])}});
NGL.Examples={load:function(a,b){NGL.Examples.data[a](b)},add:function(a){Object.keys(a).forEach(function(b){NGL.Examples.data[b]=a[b]})},data:{trajectory:function(a){a.loadFile("data://md.gro",{onLoad:function(a){a.addRepresentation("line",{sele:"not hydrogen and sidechainAttached"});a.addRepresentation("cartoon",{sele:"protein"});a.centerView();a.addTrajectory("__example__/md.xtc")},sele:"protein or na or cl"});a.loadFile("data://md.gro",function(a){a.addRepresentation("backbone",{sele:"protein",
color:"ss"})})},trr_trajectory:function(a){a.loadFile("data://md.gro",function(a){a.addRepresentation("line");a.addRepresentation("cartoon",{sele:"protein"});a.centerView();a.addTrajectory("__example__/md.trr")})},dcd_trajectory:function(a){a.loadFile("data://ala3.pdb",function(a){a.addRepresentation("licorice");a.addRepresentation("cartoon",{sele:"protein"});a.centerView();a.addTrajectory("__example__/ala3.dcd").setParameters({centerPbc:!1,removePbc:!1,superpose:!0})})},netcdf_trajectory:function(a){a.loadFile("data://DPDP.pdb",
function(a){a.addRepresentation("licorice");a.addRepresentation("cartoon",{sele:"protein"});a.centerView();a.addTrajectory("__example__/DPDP.nc").setParameters({centerPbc:!1,removePbc:!1,superpose:!0})})},anim_trajectory:function(a){a.loadFile("data://md.gro",function(a){a.addRepresentation("line",{sele:"not hydrogen and protein"});a.addRepresentation("cartoon",{sele:"protein"});a.centerView();var c=a.addTrajectory("__example__/md.xtc");c.trajectory.signals.gotNumframes.add(function(){var a=new NGL.TrajectoryPlayer(c.trajectory,
1,100);a.mode="once";a.play()})})},gro_trajectory:function(a){a.loadFile("data://md_1u19_trj.gro",{onLoad:function(a){a.addTrajectory();a.addRepresentation("cartoon");a.addRepresentation("line",{sele:"not hydrogen and sidechainAttached"});a.centerView()},asTrajectory:!0})},"3pqr":function(a){a.loadFile("data://3pqr.pdb",function(a){a.addRepresentation("cartoon",{color:"residueindex",aspectRatio:4,scale:.5});a.addRepresentation("rope",{color:"residueindex",visible:!1});a.addRepresentation("ball+stick",
{sele:"296 or RET",scale:3,aspectRatio:1.5});a.addRepresentation("surface",{sele:"RET",transparent:!0,opacity:.4});a.addRepresentation("licorice",{sele:"( ( 135 or 223 ) and sidechainAttached ) or ( 347 )",scale:3,aspectRatio:1.5});a.addRepresentation("contact",{sele:"135 or 223 or 347",scale:.7});a.addRepresentation("label",{sele:"( 135 or 223 or 347 or 296 ) and .CB",scale:1.7});a.addRepresentation("label",{sele:"RET and .C19",scale:1.7,labelType:"resname"});a.centerView()})},"1blu":function(a){a.loadFile("data://1blu.pdb",
function(a){a.addRepresentation("cartoon",{sele:"*"});a.addRepresentation("backbone",{sele:"*",scale:1,aspectRatio:1.5,color:(new THREE.Color("lightgreen")).getHex()});a.addRepresentation("licorice",{sele:"*",scale:1});a.centerView()})},multi_model:function(a){a.loadFile("data://1LVZ.pdb",{onLoad:function(a){a.addRepresentation("cartoon",{sele:"*"});a.centerView()},firstModelOnly:!0});a.loadFile("data://md_1u19_trj.gro",{onLoad:function(a){a.addRepresentation("cartoon",{sele:"*"});a.centerView();
a.addTrajectory()},asTrajectory:!0})},multi_struc:function(a){a.loadFile("data://1crn.pdb",function(a){a.addRepresentation("cartoon",{sele:"*"});a.addRepresentation("ball+stick",{sele:"hetero"});a.centerView()});a.loadFile("data://3pqr.pdb",function(a){a.addRepresentation("cartoon",{sele:"*"});a.addRepresentation("ball+stick",{sele:"hetero"});a.centerView()})},superpose:function(a){a.loadFile("data://1u19.pdb",{onLoad:function(b){b.addRepresentation("cartoon",{sele:"1-320:A"});b.addRepresentation("ball+stick",
{sele:"1-320:A"});a.loadFile("data://3dqb.pdb",function(a){a.addRepresentation("cartoon",{sele:"1-320:A"});a.addRepresentation("licorice",{sele:"1-320:A"});b.superpose(a,!1,"1-320:A");b.centerView(!0,":A")},{sele:":A"})},sele:":A"})},alignment:function(a){a.loadFile("data://3dqb.pdb",function(b){b.addRepresentation("cartoon");b.addRepresentation("ball+stick",{sele:"hetero"});b.centerView();a.loadFile("data://3sn6.pdb",function(a){a.addRepresentation("cartoon");a.addRepresentation("ball+stick",{sele:"hetero"});
NGL.superpose(b.structure,a.structure,!0);b.updateRepresentations();b.centerView()})})},alignment2:function(a){a.loadFile("data://1gzm.pdb",function(b){b.addRepresentation("cartoon");b.centerView();a.loadFile("data://1u19.pdb",function(a){a.addRepresentation("cartoon");NGL.superpose(b.structure,a.structure,!0);b.updateRepresentations();b.centerView()})})},pbc:function(a){a.loadFile("data://pbc.gro",function(a){a.addRepresentation("cartoon",{sele:"backbone"});a.addRepresentation("spacefill",{sele:"backbone"});
a.addRepresentation("line");a.centerView()})},xtc_parts:function(a){a.loadFile("data://md_1u19.gro",function(a){a.addRepresentation("cartoon");a.addRepresentation("line",{sele:"not hydrogen and sidechainAttached"});a.centerView();a.addTrajectory("__example__/@md_1u19.xtc")})},impostor:function(a){a.loadFile("data://1crn.pdb",function(a){NGL.disableImpostor=!0;a.addRepresentation("ball+stick",{sele:"16"});a.centerView()})},cg:function(a){a.loadFile("data://BaceCg.pdb",function(a){a.addRepresentation("cartoon");
a.addRepresentation("rope",{sele:"helix"});a.addRepresentation("ball+stick");a.centerView()})},ribosome:function(a){a.loadFile("data://4UJD.cif.gz",function(a){a.addRepresentation("cartoon",{color:(new THREE.Color).setRGB(.5,.75,1).getHex(),sele:":A or :AA or :I or :N or :CA or :F or :V or :DA or :J or :SA or :U or :JA or :S or :GA or :H or :O or :G or :OP or :K or :Q or :C or :E or :OA or :TA or :M or :L or :B or :HA or :R or :W or :MA or :NA or :QA or :P or :KA or :Z or :LA or :KA or :X or :FA or :T or :IA or :BA or :IA or :Y or :D or :RA or :EA",
name:"60S"});a.addRepresentation("cartoon",{color:(new THREE.Color).setRGB(1,1,.5).getHex(),sele:":XA or :QB or :XB or :RB or :BB or :HB or :DB or :EC or :NB or :BC or :VB or :WB or :EB or :OB or :KB or :IB or :AB or :TB or :FB or :SB or :PB or :YA or :UB or :LB or :MB or :ZA or :CC or :CB or :JB or :GB or :ZB or :PA or :DC or :YB or :AC",name:"40S"});a.addRepresentation("spacefill",{color:(new THREE.Color).setRGB(1,.5,1).getHex(),sele:":WA",name:"IRES"});a.addRepresentation("spacefill",{color:(new THREE.Color).setRGB(.2,
1,.2).getHex(),sele:":UA",name:"tRNA"});a.addRepresentation("spacefill",{color:(new THREE.Color).setRGB(1,0,0).getHex(),sele:":VA",name:"EIF5B"});a.centerView(!0)})},selection:function(a){a.loadFile("data://1crn.pdb",function(a){a.addRepresentation("cartoon");a.addRepresentation("licorice",{sele:"not backbone or .CA or (PRO and .N)"});a.centerView()})},spline:function(a){a.loadFile("data://BaceCgProteinAtomistic.pdb",function(a){a.addRepresentation("cartoon",{sele:"10-20"});a.addRepresentation("tube",
{sele:"not 11-19",radius:.07,subdiv:25,radialSegments:25});a.addRepresentation("licorice",{sele:"sidechainAttached"});a.centerView()})},autoChainName:function(a){a.loadFile("data://Bace1Trimer-inDPPC.gro",{onLoad:function(a){a.addRepresentation("cartoon");a.addRepresentation("licorice",{sele:"DPPC"});a.centerView()},sele:":A or :B or DPPC"})},script:function(a){a.loadFile("data://script.ngl")},bfactor:function(a){a.loadFile("data://1u19.pdb",function(a){a.addRepresentation("tube",{sele:":A",visible:!1,
bfactor:.005});a.addRepresentation("hyperball",{sele:":A",visible:!1,shrink:.3});a.addRepresentation("ball+stick",{sele:":A and sidechainAttached",visible:!0,aspectRatio:1.5});a.addRepresentation("cartoon",{sele:":A",visible:!0,scale:.3,aspectRatio:6});a.centerView(!0,":A")})},"1d66":function(a){a.loadFile("data://1d66.pdb",function(a){a.addRepresentation("cartoon",{sele:"nucleic",wireframe:!1});a.addRepresentation("base",{sele:"*",color:"resname"});a.addRepresentation("licorice",{sele:"nucleic",
color:"element",visible:!1});a.centerView(!0,"nucleic")})},trajReprUpdate:function(a){a.loadFile("data://md_1u19.gro",{onLoad:function(b){var c=b.addRepresentation("spacefill",{sele:"1-30",color:52479,radius:2,scale:1});b.addRepresentation("ball+stick",{sele:"30-60"});b.addRepresentation("licorice",{sele:"60-90"});b.addRepresentation("hyperball",{sele:"90-120",color:"resname"});b.addRepresentation("line",{sele:"120-150"});b.addRepresentation("contact",{sele:"120-150",contactType:"polarBackbone"});
b.addRepresentation("backbone",{sele:"150-180"});b.addRepresentation("tube",{sele:"180-210"});b.addRepresentation("cartoon",{sele:"210-240"});b.addRepresentation("ribbon",{sele:"240-270"});b.addRepresentation("trace",{sele:"270-300"});b.addRepresentation("label",{sele:"270-300 and .O"});b.addRepresentation("rope",{sele:"300-330",color:"residueindex"});b.centerView();b.addTrajectory("__example__/@md_1u19.xtc");(function(){var b=100,e=1;setInterval(function(){c.setScale(b/100);a.viewer.render();100===
b?e=-1:10===b&&(e=1);b+=e},10)})},sele:"not hydrogen"})},timing:function(a){NGL.time("test");a.loadFile("data://4UJD.cif.gz",function(b){b.addRepresentation("cartoon",{color:"chainindex"});a.centerView();NGL.timeEnd("test");NGL.time("render");b.viewer.render();NGL.timeEnd("render")})},capsid:function(a){a.loadFile("data://1RB8.pdb",function(a){a.addRepresentation("cartoon",{subdiv:3,radialSegments:6});a.addRepresentation("licorice");a.centerView()})},surface:function(a){a.loadFile("data://1crn.pdb",
function(b){b.addRepresentation("cartoon");b.addRepresentation("ball+stick");a.viewer.setClip(42,100);b.centerView()});a.loadFile("data://1crn.ply",function(a){a.addRepresentation("surface",{transparent:!0,opacity:.3,side:THREE.DoubleSide})})},largeGro:function(a){NGL.time("test");a.loadFile("data://water.gro",function(a){a.addRepresentation("line",{color:"residueindex"});a.centerView();a.viewer.render();NGL.timeEnd("test")})},helixorient:function(a){a.loadFile("data://3dqb.pdb",function(a){a.addRepresentation("crossing",
{ssBorder:!0,radius:.6});a.addRepresentation("rope",{radius:.2});a.centerView()})},norovirus:function(a){a.loadFile("data://norovirus.ngl")},label:function(a){a.loadFile("data://1crn.pdb",function(a){a.addRepresentation("tube",{radius:"ss"});a.addRepresentation("ball+stick",{sele:"sidechainAttached"});a.addRepresentation("label",{sele:".CA",color:"element"});a.centerView()});a.loadFile("data://1crn.ply",function(a){a.addRepresentation("surface",{transparent:!0,opacity:.3,side:THREE.FrontSide})})},
cif:function(a){a.loadFile("data://3SN6.cif",function(a){a.addRepresentation("cartoon",{radius:"ss"});a.centerView()})},"1crn":function(a){a.loadFile("data://1crn.pdb",function(a){a.addRepresentation("licorice");a.addRepresentation("point",{sele:"*",sizeAttenuation:!0,pointSize:12,sort:!0});a.centerView()})},decompress:function(a){a.loadFile("data://1CRN.cif.gz",function(a){a.addRepresentation("cartoon");a.centerView()});a.loadFile("data://1CRN.cif.zip",function(a){a.addRepresentation("licorice");
a.centerView()});a.loadFile("data://1CRN.cif.lzma",function(a){a.addRepresentation("rocket",{transparent:!0,opacity:.5});a.centerView()});a.loadFile("data://1CRN.cif.bz2",function(a){a.addRepresentation("rope",{scale:.3});a.centerView()})},hiv:function(a){a.loadFile("data://3j3y.cif.gz",{onLoad:function(a){a.addRepresentation("point",{color:"chainindex",pointSize:7,sizeAttenuation:!0,sort:!1});a.centerView()},cAlphaOnly:!0})},kdtree:function(a){a.loadFile("data://1crn.pdb",function(a){var c=new NGL.Selection("@10");
a.addRepresentation("cartoon",{color:"chainindex"});a.addRepresentation("line");a.centerView(!0,"@10");var d=[];(new NGL.Kdtree(a.structure)).nearest(a.structure.getAtoms(c,!0),Infinity,4).forEach(function(a){d.push("@"+a.atom.globalindex)});c=d.join(" OR ");a.addRepresentation("licorice",{sele:c});a.addRepresentation("spacefill",{sele:"@10",transparent:!0,opacity:.5})})},contact:function(a){a.loadFile("data://1crn.pdb",function(a){a.addRepresentation("cartoon",{color:"ss",flatShaded:!0});a.addRepresentation("ribbon",
{color:"ss",flatShaded:!0});a.addRepresentation("contact",{contactType:"polarBackbone"});a.addRepresentation("trace");a.addRepresentation("line");a.centerView()})},subset:function(a){a.loadFile("data://3pqr.pdb",function(a){a.addRepresentation("trace",{},!0);var c=a.addRepresentation("cartoon",{},!0),d=a.addRepresentation("spacefill",{color:"element",sele:"TYR"},!0);a.centerView();a.setSelection("1-90");c.setSelection("4-50");d.setSelection("PRO")})},ccp4:function(a){a.loadFile("data://3pqr.ccp4.gz",
function(a){a.addRepresentation("surface",{wireframe:!0});a.centerView()});a.loadFile("data://3pqr.pdb",function(a){a.addRepresentation("cartoon");a.centerView()})},map:function(a){a.loadFile("data://emd_2682.map.gz",function(b){b.addRepresentation("surface",{transparent:!0,opacity:.5,opaqueBack:!0});a.centerView()});a.loadFile("data://4UJD.cif.gz",function(b){b.addRepresentation("cartoon",{color:"chainindex"});a.centerView()})},molsurf:function(a){a.loadFile("data://3dqb.pdb",function(b){b.addRepresentation("licorice",
{});b.addRepresentation("spacefill");b.addRepresentation("surface");a.centerView()})},cube:function(a){a.loadFile("data://acrolein1gs.cube.gz",function(a){a.addRepresentation("surface",{visible:!1,isolevel:.1,wireframe:!0});a.addRepresentation("dot",{visible:!0,minValue:.1});a.centerView()});a.loadFile("data://acrolein.pdb",function(a){a.addRepresentation("licorice");a.centerView()})},bigcube:function(a){a.loadFile("data://rho-inactive_md-hydration.cube.gz",function(a){a.addRepresentation("surface",
{isolevel:2.7})});a.loadFile("data://rho-inactive_md-system.gro",function(a){a.addRepresentation("cartoon");a.addRepresentation("licorice",{sele:"hetero"});a.centerView()})},unitcell:function(a){a.loadFile("data://3pqr.pdb",function(a){a.addRepresentation("cartoon");a.addRepresentation("ribbon",{assembly:"UNITCELL",color:56593,scale:.9});a.centerView()})},biomol:function(a){a.loadFile("data://1U19.cif",function(a){a.addRepresentation("licorice");a.addRepresentation("cartoon",{assembly:"BU1",color:16716049});
a.addRepresentation("cartoon",{assembly:"BU2",color:1179409});a.centerView()})},"helixorient_issue-7":function(a){a.loadFile("data://4YVS.cif",{onLoad:function(a){a.addRepresentation("helixorient");a.addRepresentation("rope",{transparent:!0,opacity:.4,side:THREE.FrontSide,smooth:0});a.addRepresentation("licorice",{sele:"backbone"});a.centerView()},assembly:"AU",sele:"86-100:H"})},selectionColoring:function(a){var b=NGL.ColorFactory.addSelectionScheme([["red","64-74 or 134-154 or 222-254 or 310-310 or 322-326"],
["green","311-322"],["yellow","40-63 or 75-95 or 112-133 or 155-173 or 202-221 or 255-277 or 289-309"],["blue","1-39 or 96-112 or 174-201 or 278-288"],["white","*"]],"TMDET 3dqb");a.loadFile("data://3dqb.pdb",function(a){a.addRepresentation("cartoon",{color:b});a.centerView()})},backboneTypeChange:function(a){a.loadFile("data://4V60_A.pdb",function(a){a.addRepresentation("cartoon");a.addRepresentation("licorice");a.centerView()})},sdf:function(a){a.loadFile("data://adrenalin.sdf",function(a){a.addRepresentation("hyperball");
a.centerView()})},popc:function(a){a.loadFile("data://popc.gro",function(a){a.addRepresentation("hyperball",{sele:"popc"});a.addRepresentation("line",{sele:"water"});a.centerView()})},mol2:function(a){a.loadFile("data://adrenalin.mol2",function(a){a.addRepresentation("hyperball");a.centerView()})},orient:function(a){a.loadFile("data://1blu.pdb",function(b){b.addRepresentation("hyperball",{sele:"hetero"});b.addRepresentation("cartoon");a.setOrientation([[-18.7172412022005,5.747721793036462,-18.600062456402977],
[.8674842484021494,-.26428889267349887,-.4214527968628538],[-28.381417751312256,-13.79699957370758,-.29250049591064453],[-2.1223017048146358,6.1399751311880255,2.539699744389825]])})},distance:function(a){a.loadFile("data://1blu.pdb",function(a){a.addRepresentation("cartoon");a.addRepresentation("distance",{atomPair:[["1.CA","10.CA"],["1.CA","30.CA"]],color:(new THREE.Color("skyblue")).getHex()});a.centerView()})}}};NGL.Resources["../shader/CylinderImpostor.vert"]="// Open-Source PyMOL is Copyright (C) Schrodinger, LLC.\n\n//  All Rights Reserved\n\n//  Permission to use, copy, modify, distribute, and distribute modified\n//  versions of this software and its built-in documentation for any\n//  purpose and without fee is hereby granted, provided that the above\n//  copyright notice appears in all copies and that both the copyright\n//  notice and this permission notice appear in supporting documentation,\n//  and that the name of Schrodinger, LLC not be used in advertising or\n//  publicity pertaining to distribution of the software without specific,\n//  written prior permission.\n\n//  SCHRODINGER, LLC DISCLAIMS ALL WARRANTIES WITH REGARD TO THIS SOFTWARE,\n//  INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS. IN\n//  NO EVENT SHALL SCHRODINGER, LLC BE LIABLE FOR ANY SPECIAL, INDIRECT OR\n//  CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS\n//  OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE\n//  OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE\n//  USE OR PERFORMANCE OF THIS SOFTWARE.\n\n// Contributions by Alexander Rose\n// - ported to WebGL\n// - dual color\n// - picking color\n// - shift\n\n\nattribute vec3 mapping;\nattribute vec3 position1;\nattribute vec3 position2;\nattribute float radius;\n\n// varying float vRadius;\n\n// varying vec3 point;\nvarying vec3 axis;\nvarying vec4 base_radius;\nvarying vec4 end_b;\nvarying vec3 U;\nvarying vec3 V;\n// varying float b;\nvarying vec4 w;\n\n#ifdef PICKING\n    attribute vec3 pickingColor;\n    attribute vec3 pickingColor2;\n    varying vec3 vPickingColor;\n    varying vec3 vPickingColor2;\n#else\n    attribute vec3 color;\n    attribute vec3 color2;\n    varying vec3 vColor;\n    varying vec3 vColor2;\n#endif\n\nuniform mat4 modelViewMatrixInverse;\nuniform float shift;\n\n\nvoid main()\n{\n\n    #ifdef PICKING\n        vPickingColor = pickingColor;\n        vPickingColor2 = pickingColor2;\n    #else\n        vColor = color;\n        vColor2 = color2;\n    #endif\n\n    // vRadius = radius;\n    base_radius.w = radius;\n\n    vec3 center = position;\n    vec3 dir = normalize( position2 - position1 );\n    float ext = length( position2 - position1 ) / 2.0;\n\n    vec3 cam_dir = normalize(\n        ( modelViewMatrixInverse * vec4( 0, 0, 0, 1 ) ).xyz - center\n    );\n\n    vec3 ldir;\n\n    float b = dot( cam_dir, dir );\n    end_b.w = b;\n    if( b < 0.0 ) // direction vector looks away, so flip\n        ldir = -ext * dir;\n    else // direction vector already looks in my direction\n        ldir = ext * dir;\n\n    vec3 left = normalize( cross( cam_dir, ldir ) );\n    vec3 leftShift = shift * left * radius;\n    if( b < 0.0 )\n        leftShift *= -1.0;\n    left = radius * left;\n    vec3 up = radius * normalize( cross( left, ldir ) );\n\n    // transform to modelview coordinates\n    axis =  normalize( normalMatrix * ldir );\n    U = normalize( normalMatrix * up );\n    V = normalize( normalMatrix * left );\n\n    vec4 base4 = modelViewMatrix * vec4( center - ldir + leftShift, 1.0 );\n    base_radius.xyz = base4.xyz / base4.w;\n\n    vec4 top_position = modelViewMatrix * vec4( center + ldir + leftShift, 1.0 );\n    vec4 end4 = top_position;\n    end_b.xyz = end4.xyz / end4.w;\n\n    w = modelViewMatrix * vec4(\n        center + leftShift + mapping.x*ldir + mapping.y*left + mapping.z*up, 1.0\n    );\n\n    gl_Position = projectionMatrix * w;\n\n    // avoid clipping\n    gl_Position.z = 1.0;\n\n}\n\n\n";
NGL.Resources["../shader/CylinderImpostor.frag"]="// Open-Source PyMOL is Copyright (C) Schrodinger, LLC.\n\n//  All Rights Reserved\n\n//  Permission to use, copy, modify, distribute, and distribute modified\n//  versions of this software and its built-in documentation for any\n//  purpose and without fee is hereby granted, provided that the above\n//  copyright notice appears in all copies and that both the copyright\n//  notice and this permission notice appear in supporting documentation,\n//  and that the name of Schrodinger, LLC not be used in advertising or\n//  publicity pertaining to distribution of the software without specific,\n//  written prior permission.\n\n//  SCHRODINGER, LLC DISCLAIMS ALL WARRANTIES WITH REGARD TO THIS SOFTWARE,\n//  INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS. IN\n//  NO EVENT SHALL SCHRODINGER, LLC BE LIABLE FOR ANY SPECIAL, INDIRECT OR\n//  CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS\n//  OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE\n//  OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE\n//  USE OR PERFORMANCE OF THIS SOFTWARE.\n\n// Contributions by Alexander Rose\n// - ported to WebGL\n// - dual color\n// - picking color\n\n\n#extension GL_EXT_frag_depth : enable\n\nuniform float opacity;\nuniform float nearClip;\n\nuniform mat4 projectionMatrix;\nuniform mat3 normalMatrix;\n\n// varying float vRadius;\n\n// varying vec3 point;\nvarying vec3 axis;\nvarying vec4 base_radius;\nvarying vec4 end_b;\nvarying vec3 U;\nvarying vec3 V;\n// varying float b;\nvarying vec4 w;\n\n#ifdef PICKING\n    uniform float objectId;\n    varying vec3 vPickingColor;\n    varying vec3 vPickingColor2;\n#else\n    varying vec3 vColor;\n    varying vec3 vColor2;\n#endif\n\n#include light_params\n\n#include fog_params\n\n\nfloat distSq3( vec3 v3a, vec3 v3b ){\n\n    return (\n        ( v3a.x - v3b.x ) * ( v3a.x - v3b.x ) +\n        ( v3a.y - v3b.y ) * ( v3a.y - v3b.y ) +\n        ( v3a.z - v3b.z ) * ( v3a.z - v3b.z )\n    );\n\n}\n\n\n// round caps\n// http://sourceforge.net/p/pymol/code/HEAD/tree/trunk/pymol/data/shaders/cylinder.fs\n\n\n// void main2(void)\n// {\n//     #ifdef PICKING\n//         gl_FragColor = vec4( vPickingColor, 1.0 );\n//     #else\n//         gl_FragColor = vec4( vColor, 1.0 );\n//     #endif\n// }\n\n// Calculate depth based on the given camera position.\nfloat calcDepth( in vec3 cameraPos )\n{\n    vec2 clipZW = cameraPos.z * projectionMatrix[2].zw + projectionMatrix[3].zw;\n    return 0.5 + 0.5 * clipZW.x / clipZW.y;\n}\n\n\nfloat calcClip( vec3 cameraPos )\n{\n    return dot( vec4( cameraPos, 1.0 ), vec4( 0.0, 0.0, 1.0, nearClip - 0.5 ) );\n}\n\n\nvoid main()\n{\n    vec3 point = w.xyz / w.w;\n\n    // unpacking\n    vec3 base = base_radius.xyz;\n    float vRadius = base_radius.w;\n    vec3 end = end_b.xyz;\n    float b = end_b.w;\n\n    vec3 end_cyl = end;\n    vec3 surface_point = point;\n\n    const float ortho=0.0;\n\n    vec3 ray_target = surface_point;\n    vec3 ray_origin = vec3(0.0);\n    vec3 ray_direction = mix(normalize(ray_origin - ray_target), vec3(0.0, 0.0, 1.0), ortho);\n    mat3 basis = mat3( U, V, axis );\n\n    vec3 diff = ray_target - 0.5 * (base + end_cyl);\n    vec3 P = diff * basis;\n\n    // angle (cos) between cylinder cylinder_axis and ray direction\n    float dz = dot( axis, ray_direction );\n\n    float radius2 = vRadius*vRadius;\n\n    // calculate distance to the cylinder from ray origin\n    vec3 D = vec3(dot(U, ray_direction),\n                dot(V, ray_direction),\n                dz);\n    float a0 = P.x*P.x + P.y*P.y - radius2;\n    float a1 = P.x*D.x + P.y*D.y;\n    float a2 = D.x*D.x + D.y*D.y;\n\n    // calculate a dicriminant of the above quadratic equation\n    float d = a1*a1 - a0*a2;\n    if (d < 0.0)\n        // outside of the cylinder\n        discard;\n\n    float dist = (-a1 + sqrt(d)) / a2;\n\n    // point of intersection on cylinder surface\n    vec3 new_point = ray_target + dist * ray_direction;\n\n    vec3 tmp_point = new_point - base;\n    vec3 normal = normalize( tmp_point - axis * dot(tmp_point, axis) );\n\n    ray_origin = mix( ray_origin, surface_point, ortho );\n\n    // test front cap\n    float cap_test = dot( new_point - base, axis );\n\n    // to calculate caps, simply check the angle between\n    // the point of intersection - cylinder end vector\n    // and a cap plane normal (which is the cylinder cylinder_axis)\n    // if the angle < 0, the point is outside of cylinder\n    // test front cap\n\n    #ifndef CAP\n        vec3 new_point2 = ray_target + ( (-a1 - sqrt(d)) / a2 ) * ray_direction;\n        vec3 tmp_point2 = new_point2 - base;\n    #endif\n\n    // flat\n    if (cap_test < 0.0)\n    {\n        // ray-plane intersection\n        float dNV = dot(-axis, ray_direction);\n        if (dNV < 0.0)\n            discard;\n        float near = dot(-axis, (base)) / dNV;\n        new_point = ray_direction * near + ray_origin;\n        // within the cap radius?\n        if (dot(new_point - base, new_point-base) > radius2)\n            discard;\n\n        #ifdef CAP\n            normal = axis;\n        #else\n            normal = -normalize( tmp_point2 - axis * dot(tmp_point2, axis) );\n        #endif\n    }\n\n    // test end cap\n    cap_test = dot((new_point - end_cyl), axis);\n\n    // flat\n    if( cap_test > 0.0 )\n    {\n        // ray-plane intersection\n        float dNV = dot(axis, ray_direction);\n        if (dNV < 0.0)\n            discard;\n        float near = dot(axis, end_cyl) / dNV;\n        new_point = ray_direction * near + ray_origin;\n        // within the cap radius?\n        if( dot(new_point - end_cyl, new_point-base) > radius2 )\n            discard;\n\n        #ifdef CAP\n            normal = axis;\n        #else\n            normal = -normalize( tmp_point2 - axis * dot(tmp_point2, axis) );\n        #endif\n    }\n\n    gl_FragDepthEXT = calcDepth( new_point );\n\n    #ifdef NEAR_CLIP\n        if( calcClip( new_point ) > 0.0 ){\n            dist = (-a1 - sqrt(d)) / a2;\n            new_point = ray_target + dist * ray_direction;\n            if( calcClip( new_point ) > 0.0 )\n                discard;\n            normal = vec3( 0.0, 0.0, 0.4 );\n            gl_FragDepthEXT = calcDepth( new_point );\n            if( gl_FragDepthEXT >= 0.0 ){\n                gl_FragDepthEXT = max( 0.0, calcDepth( vec3( - ( nearClip - 0.5 ) ) ) + ( 0.0000001 / vRadius ) );\n            }\n        }else if( gl_FragDepthEXT <= 0.0 ){\n            dist = (-a1 - sqrt(d)) / a2;\n            new_point = ray_target + dist * ray_direction;\n            normal = vec3( 0.0, 0.0, 0.4 );\n            gl_FragDepthEXT = calcDepth( new_point );\n            if( gl_FragDepthEXT >= 0.0 ){\n                gl_FragDepthEXT = 0.0 + ( 0.0000001 / vRadius );\n            }\n        }\n    #else\n        if( gl_FragDepthEXT <= 0.0 ){\n            dist = (-a1 - sqrt(d)) / a2;\n            new_point = ray_target + dist * ray_direction;\n            normal = vec3( 0.0, 0.0, 0.4 );\n            gl_FragDepthEXT = calcDepth( new_point );\n            if( gl_FragDepthEXT >= 0.0 ){\n                gl_FragDepthEXT = 0.0 + ( 0.0000001 / vRadius );\n            }\n        }\n    #endif\n\n    // this is a workaround necessary for Mac\n    // otherwise the modified fragment won't clip properly\n    if (gl_FragDepthEXT < 0.0)\n        discard;\n    if (gl_FragDepthEXT > 1.0)\n        discard;\n\n\n    vec3 transformedNormal = normal;\n    vec3 vLightFront = vec3( 0.0, 0.0, 0.0 );\n\n    #include light\n\n    #ifdef PICKING\n        if( distSq3( new_point, end_cyl ) < distSq3( new_point, base ) ){\n            if( b < 0.0 ){\n                gl_FragColor = vec4( vPickingColor, objectId );\n            }else{\n                gl_FragColor = vec4( vPickingColor2, objectId );\n            }\n        }else{\n            if( b > 0.0 ){\n                gl_FragColor = vec4( vPickingColor, objectId );\n            }else{\n                gl_FragColor = vec4( vPickingColor2, objectId );\n            }\n        }\n    #else\n        if( distSq3( new_point, end_cyl ) < distSq3( new_point, base ) ){\n            if( b < 0.0 ){\n                gl_FragColor = vec4( vColor, opacity );\n            }else{\n                gl_FragColor = vec4( vColor2, opacity );\n            }\n        }else{\n            if( b > 0.0 ){\n                gl_FragColor = vec4( vColor, opacity );\n            }else{\n                gl_FragColor = vec4( vColor2, opacity );\n            }\n        }\n        gl_FragColor.rgb *= vLightFront;\n        //gl_FragColor.rgb = transformedNormal;\n    #endif\n\n    // #include fog\n\n    #ifdef USE_FOG\n        float depth = gl_FragDepthEXT / gl_FragCoord.w;\n        #ifdef FOG_EXP2\n            const float LOG2 = 1.442695;\n            float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\n            fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n        #else\n            float fogFactor = smoothstep( fogNear, fogFar, depth );\n        #endif\n        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n    #endif\n}\n\n\n\n\n\n\n\n\n";
NGL.Resources["../shader/HyperballStickImpostor.vert"]="// Copyright (C) 2010-2011 by\n// Laboratoire de Biochimie Theorique (CNRS),\n// Laboratoire d'Informatique Fondamentale d'Orleans (Universite d'Orleans), (INRIA) and\n// Departement des Sciences de la Simulation et de l'Information (CEA).\n\n// License: CeCILL-C license (http://www.cecill.info/)\n\n// Contact: Marc Baaden\n// E-mail: baaden@smplinux.de\n// Webpage: http://hyperballs.sourceforge.net\n\n// Contributions by Alexander Rose\n// - ported to WebGL\n// - dual color\n// - picking color\n\n\nattribute vec3 mapping;\nattribute float radius;\nattribute float radius2;\nattribute vec3 position1;\nattribute vec3 position2;\n\nvarying mat4 matrix_near;\n\nvarying vec4 prime1;\nvarying vec4 prime2;\n\nvarying float vRadius;\nvarying float vRadius2;\n\n#ifdef PICKING\n    attribute vec3 pickingColor;\n    attribute vec3 pickingColor2;\n    varying vec3 vPickingColor;\n    varying vec3 vPickingColor2;\n#else\n    attribute vec3 color;\n    attribute vec3 color2;\n    varying vec3 vColor;\n    varying vec3 vColor2;\n#endif\n\nuniform float shrink;\nuniform mat4 modelViewProjectionMatrix;\nuniform mat4 modelViewProjectionMatrixInverse;\n\n\nvoid main()\n{\n\n    vRadius = radius;\n    vRadius2 = radius2;\n\n    vec4 spaceposition;\n    vec3 position_atom1;\n    vec3 position_atom2;\n    vec4 vertex_position;\n\n    #ifdef PICKING\n        vPickingColor = pickingColor;\n        vPickingColor2 = pickingColor2;\n    #else\n        vColor = color;\n        vColor2 = color2;\n    #endif\n\n    float radius1 = radius;\n\n    position_atom1 = position1;\n    position_atom2 = position2;\n\n    float distance = distance( position_atom1, position_atom2 );\n\n    spaceposition.z = mapping.z * distance;\n\n    if (radius1 > radius2) {\n        spaceposition.y = mapping.y * 1.5 * radius1;\n        spaceposition.x = mapping.x * 1.5 * radius1;\n    } else {\n        spaceposition.y = mapping.y * 1.5 * radius2;\n        spaceposition.x = mapping.x * 1.5 * radius2;\n    }\n    spaceposition.w = 1.0;\n\n    vec4 e3 = vec4( 1.0 );\n    vec3 e1, e1_temp, e2, e2_temp;\n\n    // Calculation of bond direction: e3\n    e3.xyz = normalize(position_atom1-position_atom2);\n\n    // little hack to avoid some problems of precision due to graphic card limitation using float: To improve soon\n    if (e3.z == 0.0) { e3.z = 0.0000000000001;}\n    if ( (position_atom1.x - position_atom2.x) == 0.0) { position_atom1.x += 0.001;}\n    if ( (position_atom1.y - position_atom2.y) == 0.0) { position_atom1.y += 0.001;}\n    if ( (position_atom1.z - position_atom2.z) == 0.0) { position_atom1.z += 0.001;}\n\n    // Focus calculation\n    vec4 focus = vec4( 1.0 );\n    focus.x = ( position_atom1.x*position_atom1.x - position_atom2.x*position_atom2.x +\n        ( radius2*radius2 - radius1*radius1 )*e3.x*e3.x/shrink )/(2.0*(position_atom1.x - position_atom2.x));\n    focus.y = ( position_atom1.y*position_atom1.y - position_atom2.y*position_atom2.y +\n        ( radius2*radius2 - radius1*radius1 )*e3.y*e3.y/shrink )/(2.0*(position_atom1.y - position_atom2.y));\n    focus.z = ( position_atom1.z*position_atom1.z - position_atom2.z*position_atom2.z +\n        ( radius2*radius2 - radius1*radius1 )*e3.z*e3.z/shrink )/(2.0*(position_atom1.z - position_atom2.z));\n\n    // e1 calculation\n    e1.x = 1.0;\n    e1.y = 1.0;\n    e1.z = ( (e3.x*focus.x + e3.y*focus.y + e3.z*focus.z) - e1.x*e3.x - e1.y*e3.y)/e3.z;\n    e1_temp = e1 - focus.xyz;\n    e1 = normalize(e1_temp);\n\n    // e2 calculation\n    e2_temp = e1.yzx * e3.zxy - e1.zxy * e3.yzx;\n    e2 = normalize(e2_temp);\n\n    //ROTATION:\n    // final form of change of basis matrix:\n    mat3 R= mat3( e1.xyz, e2.xyz, e3.xyz );\n    // Apply rotation and translation to the bond primitive\n    vertex_position.xyz = R * spaceposition.xyz;\n    vertex_position.w = 1.0;\n\n    // TRANSLATION:\n    vertex_position.x += (position_atom1.x+position_atom2.x) / 2.0;\n    vertex_position.y += (position_atom1.y+position_atom2.y) / 2.0;\n    vertex_position.z += (position_atom1.z+position_atom2.z) / 2.0;\n\n    // New position\n    gl_Position = modelViewProjectionMatrix * vertex_position;\n\n    vec4 i_near, i_far;\n\n    // Calculate near from position\n    vec4 near = gl_Position;\n    near.z = 0.0 ;\n    near = modelViewProjectionMatrixInverse * near;\n    i_near = near;\n\n    // Calculate far from position\n    vec4 far = gl_Position;\n    far.z = far.w ;\n    i_far = modelViewProjectionMatrixInverse * far;\n\n    prime1 = vec4( position_atom1 - (position_atom1 - focus.xyz)*shrink, 1.0 );\n    prime2 = vec4( position_atom2 - (position_atom2 - focus.xyz)*shrink, 1.0 );\n\n    float Rsquare = (radius1*radius1/shrink) - (\n                        (position_atom1.x - focus.x)*(position_atom1.x - focus.x) +\n                        (position_atom1.y - focus.y)*(position_atom1.y - focus.y) +\n                        (position_atom1.z - focus.z)*(position_atom1.z - focus.z)\n                    );\n\n    focus.w = Rsquare;\n\n    matrix_near = mat4( i_near, i_far, focus, e3 );\n\n    // avoid clipping\n    gl_Position.z = 1.0;\n\n}\n\n";
NGL.Resources["../shader/HyperballStickImpostor.frag"]="// Copyright (C) 2010-2011 by\n// Laboratoire de Biochimie Theorique (CNRS),\n// Laboratoire d'Informatique Fondamentale d'Orleans (Universite d'Orleans), (INRIA) and\n// Departement des Sciences de la Simulation et de l'Information (CEA).\n\n// License: CeCILL-C license (http://www.cecill.info/)\n\n// Contact: Marc Baaden\n// E-mail: baaden@smplinux.de\n// Webpage: http://hyperballs.sourceforge.net\n\n// Contributions by Alexander Rose\n// - ported to WebGL\n// - dual color\n// - picking color\n\n\n#extension GL_EXT_frag_depth : enable\n\n// varying vec3 mapping;\n\nvarying mat4 matrix_near;\n\nvarying vec4 prime1;\nvarying vec4 prime2;\n\nvarying float vRadius;\nvarying float vRadius2;\n\nuniform float opacity;\nuniform float nearClip;\n\nuniform float shrink;\nuniform mat4 modelViewMatrix;\nuniform mat4 modelViewProjectionMatrix;\nuniform mat4 modelViewMatrixInverseTranspose;\nuniform mat4 projectionMatrix;\n\n#ifdef PICKING\n    uniform float objectId;\n    varying vec3 vPickingColor;\n    varying vec3 vPickingColor2;\n#else\n    varying vec3 vColor;\n    varying vec3 vColor2;\n#endif\n\n#include light_params\n\n#include fog_params\n\n\nfloat calcClip( vec4 cameraPos )\n{\n    return dot( cameraPos, vec4( 0.0, 0.0, 1.0, nearClip - 0.5 ) );\n}\nfloat calcClip( vec3 cameraPos )\n{\n    return calcClip( vec4( cameraPos, 1.0 ) );\n}\n\n\nfloat calcDepth( in vec3 cameraPos )\n{\n    vec2 clipZW = cameraPos.z * projectionMatrix[2].zw + projectionMatrix[3].zw;\n    return 0.5 + 0.5 * clipZW.x / clipZW.y;\n}\n\n\nstruct Ray {\n    vec3 origin ;\n    vec3 direction ;\n};\n\n\nbool cutoff_plane (vec3 M, vec3 cutoff, vec3 x3){\n    float a = x3.x;\n    float b = x3.y;\n    float c = x3.z;\n    float d = -x3.x*cutoff.x-x3.y*cutoff.y-x3.z*cutoff.z;\n    float l = a*M.x+b*M.y+c*M.z+d;\n    if (l<0.0) {return true;}\n    else{return false;}\n}\n\n\nvec3 isect_surf(Ray r, mat4 matrix_coef){\n    vec4 direction = vec4(r.direction, 0.0);\n    vec4 origin = vec4(r.origin, 1.0);\n    float a = dot(direction,(matrix_coef*direction));\n    float b = dot(origin,(matrix_coef*direction));\n    float c = dot(origin,(matrix_coef*origin));\n    float delta =b*b-a*c;\n    gl_FragColor.a = 1.0;\n    if (delta<0.0){\n        discard;\n        // gl_FragColor.a = 0.5;\n    }\n    float t1 =(-b-sqrt(delta))/a;\n\n    // Second solution not necessary if you don't want\n    // to see inside spheres and cylinders, save some fps\n    //float t2 = (-b+sqrt(delta)) / a  ;\n    //float t =(t1<t2) ? t1 : t2;\n\n    return r.origin+t1*r.direction;\n}\n\n\nvec3 isect_surf2(Ray r, mat4 matrix_coef){\n    vec4 direction = vec4(r.direction, 0.0);\n    vec4 origin = vec4(r.origin, 1.0);\n    float a = dot(direction,(matrix_coef*direction));\n    float b = dot(origin,(matrix_coef*direction));\n    float c = dot(origin,(matrix_coef*origin));\n    float delta =b*b-a*c;\n    gl_FragColor.a = 1.0;\n    if (delta<0.0){\n        discard;\n        // gl_FragColor.a = 0.5;\n    }\n    float t2 =(-b+sqrt(delta))/a;\n\n    return r.origin+t2*r.direction;\n}\n\n\nRay primary_ray(vec4 near1, vec4 far1){\n    vec3 near=near1.xyz/near1.w;\n    vec3 far=far1.xyz/far1.w;\n    return Ray(near,far-near);\n}\n\n\nfloat update_z_buffer(vec3 M, mat4 ModelViewP){\n    float  depth1;\n    vec4 Ms=(ModelViewP*vec4(M,1.0));\n    return depth1=(1.0+Ms.z/Ms.w)/2.0;\n}\n\n\n// void main2(void)\n// {\n//     gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n// }\n\n// void main(void)\n// {\n//     #ifdef PICKING\n//         gl_FragColor = vec4( vPickingColor, 1.0 );\n//     #else\n//         gl_FragColor = vec4( vColor, 1.0 );\n//     #endif\n// }\n\n\nvoid main()\n{\n\n    float radius = max( vRadius, vRadius2 );\n\n    vec4 i_near, i_far, focus;\n    vec3 e3, e1, e1_temp, e2;\n\n    i_near = vec4(matrix_near[0][0],matrix_near[0][1],matrix_near[0][2],matrix_near[0][3]);\n    i_far  = vec4(matrix_near[1][0],matrix_near[1][1],matrix_near[1][2],matrix_near[1][3]);\n    focus = vec4(matrix_near[2][0],matrix_near[2][1],matrix_near[2][2],matrix_near[2][3]);\n    e3 = vec3(matrix_near[3][0],matrix_near[3][1],matrix_near[3][2]);\n\n    e1.x = 1.0;\n    e1.y = 1.0;\n    e1.z = ( (e3.x*focus.x + e3.y*focus.y + e3.z*focus.z) - e1.x*e3.x - e1.y*e3.y)/e3.z;\n    e1_temp = e1 - focus.xyz;\n    e1 = normalize(e1_temp);\n\n    e2 = normalize(cross(e1,e3));\n\n\n    vec4 equation = focus;\n\n    float shrinkfactor = shrink;\n    float t1 = -1.0/(1.0-shrinkfactor);\n    float t2 = 1.0/(shrinkfactor);\n    // float t3 = 2.0/(shrinkfactor);\n\n    vec4 colonne1, colonne2, colonne3, colonne4;\n    mat4 mat;\n\n    vec3 equation1 = vec3(t2,t2,t1);\n\n\n    float A1 = - e1.x*equation.x - e1.y*equation.y - e1.z*equation.z;\n    float A2 = - e2.x*equation.x - e2.y*equation.y - e2.z*equation.z;\n    float A3 = - e3.x*equation.x - e3.y*equation.y - e3.z*equation.z;\n\n    float A11 = equation1.x*e1.x*e1.x +  equation1.y*e2.x*e2.x + equation1.z*e3.x*e3.x;\n    float A21 = equation1.x*e1.x*e1.y +  equation1.y*e2.x*e2.y + equation1.z*e3.x*e3.y;\n    float A31 = equation1.x*e1.x*e1.z +  equation1.y*e2.x*e2.z + equation1.z*e3.x*e3.z;\n    float A41 = equation1.x*e1.x*A1   +  equation1.y*e2.x*A2   + equation1.z*e3.x*A3;\n\n    float A22 = equation1.x*e1.y*e1.y +  equation1.y*e2.y*e2.y + equation1.z*e3.y*e3.y;\n    float A32 = equation1.x*e1.y*e1.z +  equation1.y*e2.y*e2.z + equation1.z*e3.y*e3.z;\n    float A42 = equation1.x*e1.y*A1   +  equation1.y*e2.y*A2   + equation1.z*e3.y*A3;\n\n    float A33 = equation1.x*e1.z*e1.z +  equation1.y*e2.z*e2.z + equation1.z*e3.z*e3.z;\n    float A43 = equation1.x*e1.z*A1   +  equation1.y*e2.z*A2   + equation1.z*e3.z*A3;\n\n    float A44 = equation1.x*A1*A1 +  equation1.y*A2*A2 + equation1.z*A3*A3 - equation.w;\n\n    colonne1 = vec4(A11,A21,A31,A41);\n    colonne2 = vec4(A21,A22,A32,A42);\n    colonne3 = vec4(A31,A32,A33,A43);\n    colonne4 = vec4(A41,A42,A43,A44);\n\n    mat = mat4(colonne1,colonne2,colonne3,colonne4);\n\n\n\n    // Ray calculation using near and far\n    Ray ray = primary_ray(i_near,i_far) ;\n\n    // Intersection between ray and surface for each pixel\n    vec3 M;\n    M = isect_surf(ray, mat);\n\n    // cut the extremities of bonds to superimpose bond and spheres surfaces\n    if (cutoff_plane(M, prime1.xyz, -e3) || cutoff_plane(M, prime2.xyz, e3)){ discard; }\n\n    // Transform normal to model space to view-space\n    vec4 M1 = vec4(M,1.0);\n    vec4 M2 =  mat*M1;\n    vec3 normal = normalize( ( modelViewMatrixInverseTranspose * M2 ).xyz );\n\n    // Recalculate the depth in function of the new pixel position\n    gl_FragDepthEXT = update_z_buffer(M, modelViewProjectionMatrix) ;\n\n    #ifdef NEAR_CLIP\n        if( calcClip( modelViewMatrix * vec4( M, 1.0 ) ) > 0.0 ){\n            M = isect_surf2(ray, mat);\n            if( calcClip( modelViewMatrix * vec4( M, 1.0 ) ) > 0.0 )\n                discard;\n            normal = vec3( 0.0, 0.0, 0.4 );\n            gl_FragDepthEXT = update_z_buffer(M, modelViewProjectionMatrix) ;\n            if( gl_FragDepthEXT >= 0.0 ){\n                gl_FragDepthEXT = max( 0.0, calcDepth( vec3( - ( nearClip - 0.5 ) ) ) + ( 0.0000001 / radius ) );\n            }\n        }else if( gl_FragDepthEXT <= 0.0 ){\n            M = isect_surf2(ray, mat);\n            normal = vec3( 0.0, 0.0, 0.4 );\n            gl_FragDepthEXT = update_z_buffer(M, modelViewProjectionMatrix);\n            if( gl_FragDepthEXT >= 0.0 ){\n                gl_FragDepthEXT = 0.0 + ( 0.0000001 / radius );\n            }\n        }\n    #else\n        if( gl_FragDepthEXT <= 0.0 ){\n            M = isect_surf2(ray, mat);\n            normal = vec3( 0.0, 0.0, 0.4 );\n            gl_FragDepthEXT = update_z_buffer(M, modelViewProjectionMatrix) ;\n            if( gl_FragDepthEXT >= 0.0 ){\n                gl_FragDepthEXT = 0.0 + ( 0.0000001 / radius );\n            }\n        }\n    #endif\n\n    // cut the extremities of bonds to superimpose bond and spheres surfaces\n    if (cutoff_plane(M, prime1.xyz, -e3) || cutoff_plane(M, prime2.xyz, e3)){ discard; }\n\n    if (gl_FragDepthEXT < 0.0)\n        discard;\n    if (gl_FragDepthEXT > 1.0)\n        discard;\n\n    // Give color parameters to the Graphic card\n    //gl_FragColor.rgb = lighting.y * diffusecolor + lighting.z * specularcolor;\n    //gl_FragColor.a = 1.0;\n\n    vec3 transformedNormal = normal;\n    vec3 vLightFront = vec3( 0.0, 0.0, 0.0 );\n\n    #include light\n\n    // Mix the color bond in function of the two atom colors\n    float distance_ratio = ((M.x-prime2.x)*e3.x + (M.y-prime2.y)*e3.y +(M.z-prime2.z)*e3.z) /\n                                distance(prime2.xyz,prime1.xyz);\n\n    #ifdef PICKING\n        // lerp function not in GLSL. Find something else ...\n        vec3 diffusecolor = mix( vPickingColor2, vPickingColor, distance_ratio );\n        if( distance_ratio>0.5 ){\n            diffusecolor = vPickingColor;\n        }else{\n            diffusecolor = vPickingColor2;\n        }\n        gl_FragColor = vec4( diffusecolor, objectId );\n    #else\n        // lerp function not in GLSL. Find something else ...\n        vec3 diffusecolor = mix( vColor2, vColor, distance_ratio );\n        if( distance_ratio>0.5 ){\n            diffusecolor = vColor;\n        }else{\n            diffusecolor = vColor2;\n        }\n        gl_FragColor = vec4( diffusecolor, opacity );\n        gl_FragColor.rgb *= vLightFront;\n    #endif\n\n    // #include fog\n\n    #ifdef USE_FOG\n        float depth = gl_FragDepthEXT / gl_FragCoord.w;\n        #ifdef FOG_EXP2\n            const float LOG2 = 1.442695;\n            float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\n            fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n        #else\n            float fogFactor = smoothstep( fogNear, fogFar, depth );\n        #endif\n        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n    #endif\n\n    // ############## Fog effect #####################################################\n    // To use fog comment the two previous lines: ie  gl_FragColor.rgb = E and   gl_FragColor.a = 1.0;\n    // and uncomment the next lines.\n    // Color of the fog: white\n    //float fogDistance  = update_z_buffer(M, gl_ModelViewMatrix) ;\n    //float fogExponent  = fogDistance * fogDistance * 0.007;\n    //vec3 fogColor   = vec3(1.0, 1.0, 1.0);\n    //float fogFactor   = exp2(-abs(fogExponent));\n    //fogFactor = clamp(fogFactor, 0.0, 1.0);\n\n    //vec3 final_color = lighting.y * diffusecolor + lighting.z * specularcolor;\n    //gl_FragColor.rgb = mix(fogColor,final_color,fogFactor);\n    //gl_FragColor.a = 1.0;\n    // ##################################################################################\n\n}\n";
NGL.Resources["../shader/Line.vert"]="\nattribute vec3 color;\n\nvarying vec3 vColor;\nvarying vec4 cameraPos;\n\n\nvoid main()\n{\n\n    vColor = color;\n\n    cameraPos =  modelViewMatrix * vec4( position, 1.0 );\n\n    gl_Position = projectionMatrix * vec4( cameraPos.xyz, 1.0 );\n\n}\n";NGL.Resources["../shader/Line.frag"]="\nuniform float opacity;\nuniform float nearClip;\n\nvarying vec3 vColor;\nvarying vec4 cameraPos;\n\n#include fog_params\n\n\nvoid main()\n{\n\n\t#ifdef NEAR_CLIP\n\t\tif( dot( cameraPos, vec4( 0.0, 0.0, 1.0, nearClip ) ) > 0.0 )\n        \tdiscard;\n    #endif\n\n    gl_FragColor = vec4( vColor, opacity );\n\n    #include fog\n\n}\n";
NGL.Resources["../shader/LineSprite.vert"]="// Open-Source PyMOL is Copyright (C) Schrodinger, LLC.\n\n//  All Rights Reserved\n\n//  Permission to use, copy, modify, distribute, and distribute modified\n//  versions of this software and its built-in documentation for any\n//  purpose and without fee is hereby granted, provided that the above\n//  copyright notice appears in all copies and that both the copyright\n//  notice and this permission notice appear in supporting documentation,\n//  and that the name of Schrodinger, LLC not be used in advertising or\n//  publicity pertaining to distribution of the software without specific,\n//  written prior permission.\n\n//  SCHRODINGER, LLC DISCLAIMS ALL WARRANTIES WITH REGARD TO THIS SOFTWARE,\n//  INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS. IN\n//  NO EVENT SHALL SCHRODINGER, LLC BE LIABLE FOR ANY SPECIAL, INDIRECT OR\n//  CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS\n//  OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE\n//  OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE\n//  USE OR PERFORMANCE OF THIS SOFTWARE.\n\n// Note: here the box screen aligned code from Open-Source PyMOL is used\n\n// Contributions by Alexander Rose\n// - ported to WebGL\n// - dual color\n// - adapted for line sprites\n\n\nattribute lowp vec2 inputMapping;\nattribute lowp vec3 inputColor;\nattribute lowp vec3 inputColor2;\nattribute lowp vec3 inputAxis;\nattribute lowp float inputWidth;\n\nvarying float dist;\nvarying lowp vec3 color;\nvarying lowp vec3 color2;\n\n\n// void main2(void){\n//     colorx = inputColor;\n\n//     vec2 B;\n//     vec3 C;\n//     if (inputAxis.y != 0.0 || inputAxis.z != 0.0){\n//         C = vec3(1.0, 0.0, 0.0);\n//     }else{\n//         C = vec3(0.0, 1.0, 0.0);\n//     }\n//     B = normalize(cross(inputAxis, C).xy);\n\n//     vec4 cameraCornerPos = modelViewMatrix * vec4( position, 1.0 );\n//     cameraCornerPos.xy += inputMapping * (B.xy * inputWidth);\n\n//     gl_Position = projectionMatrix * cameraCornerPos;\n// }\n\n\nvoid main(void){\n    mat4 MVMatrix = modelViewMatrix;\n    mat4 PMatrix = projectionMatrix;\n    vec4 EyePoint = vec4( cameraPosition, 1.0 );\n\n    vec3 center = position.xyz;   \n    vec3 dir = normalize(inputAxis);\n    // float ext = inputCylinderHeight/2.0;\n    vec3 ldir;\n\n    vec3 cam_dir = normalize(EyePoint.xyz - center);\n    float b = dot(cam_dir, dir);\n    if(b<0.0) // direction vector looks away, so flip\n        //ldir = -ext*dir;\n        ldir = -(length(inputAxis)/2.0) * normalize(inputAxis);\n    else // direction vector already looks in my direction\n        //ldir = ext*dir;\n        ldir = (length(inputAxis)/2.0) * normalize(inputAxis);\n\n    vec3 left = cross(cam_dir, ldir);\n    vec3 up = cross(left, ldir);\n    left = inputWidth*normalize(left);\n    up = inputWidth*normalize(up);\n\n    vec4 w = MVMatrix * vec4( \n        center + inputMapping.x*ldir + inputMapping.y*left, 1.0 \n    );\n\n    gl_Position = PMatrix * w;\n\n\n    vec4 base4 = MVMatrix * vec4(center-ldir, 1.0);\n    vec3 base = base4.xyz / base4.w;\n\n    vec4 top_position = MVMatrix*(vec4(center+ldir,1.0));\n    vec4 end4 = top_position;\n    vec3 end = end4.xyz / end4.w;\n\n    vec3 point = w.xyz / w.w;\n\n    color = inputColor;\n    color2 = inputColor2;\n    \n    // TODO compare without sqrt\n    if( distance( point, end ) < distance( point, base ) ){\n        dist = b > 0.0 ? 1.0 : 0.0;\n    }else{\n        dist = b < 0.0 ? 1.0 : 0.0;\n    }\n\n}";
NGL.Resources["../shader/LineSprite.frag"]="\nvarying float dist;\nvarying highp vec3 color;\nvarying highp vec3 color2;\n\n#include fog_params\n\n\nvoid main() {\n\n    if( dist > 0.5 ){\n        gl_FragColor = vec4( color, 1.0 );    \n    }else{\n        gl_FragColor = vec4( color2, 1.0 );\n    }\n\n    #include fog\n}\n";NGL.Resources["../shader/Mesh.vert"]="\nvarying vec4 cameraPos;\n\n#ifdef PICKING\n    attribute vec3 pickingColor;\n    varying vec3 vPickingColor;\n#else\n    attribute vec3 color;\n    varying vec3 vColor;\n    varying vec3 vNormal;\n#endif\n\nvoid main()\n{\n\n    #ifdef PICKING\n        vPickingColor = pickingColor;\n    #else\n        vColor = color;\n        vNormal = normalize( normalMatrix * normal );\n    #endif\n\n    cameraPos =  modelViewMatrix * vec4( position, 1.0 );\n\n    gl_Position = projectionMatrix * vec4( cameraPos.xyz, 1.0 );\n\n}\n";
NGL.Resources["../shader/Mesh.frag"]="\n#ifdef FLAT_SHADED\n    #extension GL_OES_standard_derivatives : enable\n#endif\n\nuniform float opacity;\nuniform float nearClip;\n\nvarying vec4 cameraPos;\n\n#ifdef PICKING\n    uniform float objectId;\n    varying vec3 vPickingColor;\n#else\n    varying vec3 vColor;\n    varying vec3 vNormal;\n#endif\n\n#include light_params\n\n#include fog_params\n\n\nvoid main()\n{\n\n    #ifdef NEAR_CLIP\n        if( dot( cameraPos, vec4( 0.0, 0.0, 1.0, nearClip ) ) > 0.0 )\n            discard;\n    #endif\n\n    #ifdef PICKING\n\n        gl_FragColor = vec4( vPickingColor, objectId );\n\n    #else\n\n        #ifdef FLAT_SHADED\n            vec3 fdx = dFdx( cameraPos.xyz );\n            vec3 fdy = dFdy( cameraPos.xyz );\n            vec3 normal = normalize( cross( fdx, fdy ) );\n        #else\n            vec3 normal = normalize( vNormal );\n        #endif\n\n        vec3 transformedNormal = normalize( normal );\n        #ifndef FLAT_SHADED\n            #ifdef DOUBLE_SIDED\n                transformedNormal = transformedNormal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n            #endif\n            #ifdef FLIP_SIDED\n                transformedNormal = -transformedNormal;\n            #endif\n        #endif\n\n        #ifdef DULL_INTERIOR\n            if( !gl_FrontFacing ){\n                transformedNormal = vec3( 0.0, 0.0, 0.4 );\n            }\n        #endif\n\n        vec3 vLightFront = vec3( 0.0, 0.0, 0.0 );\n\n        #ifndef NOLIGHT\n            #include light\n        #endif\n\n        #ifdef OPAQUE_BACK\n            #ifdef FLIP_SIDED\n                if( float( gl_FrontFacing ) == 1.0 ){\n                    gl_FragColor = vec4( vColor, 1.0 );\n                }else{\n                    gl_FragColor = vec4( vColor, opacity );\n                }\n            #else\n                if( float( gl_FrontFacing ) == 1.0 ){\n                    gl_FragColor = vec4( vColor, opacity );\n                }else{\n                    gl_FragColor = vec4( vColor, 1.0 );\n                }\n            #endif\n        #else\n            gl_FragColor = vec4( vColor, opacity );\n        #endif\n\n        #ifndef NOLIGHT\n            gl_FragColor.rgb *= vLightFront;\n        #endif\n\n    #endif\n\n    #include fog\n\n}\n";
NGL.Resources["../shader/ParticleSprite.vert"]='\nattribute vec2 mapping;\nattribute vec3 color;\nattribute float radius;\n\nvarying vec3 point;\nvarying vec3 vColor;\nvarying vec3 cameraSpherePos;\nvarying float sphereRadius;\n\nuniform mat4 projectionMatrixInverse;\n\nconst mat4 D = mat4(\n    1.0, 0.0, 0.0, 0.0,\n    0.0, 1.0, 0.0, 0.0,\n    0.0, 0.0, 1.0, 0.0,\n    0.0, 0.0, 0.0, -1.0\n);\n\nmat4 transpose( in mat4 inMatrix ) {\n    vec4 i0 = inMatrix[0];\n    vec4 i1 = inMatrix[1];\n    vec4 i2 = inMatrix[2];\n    vec4 i3 = inMatrix[3];\n\n    mat4 outMatrix = mat4(\n        vec4(i0.x, i1.x, i2.x, i3.x),\n        vec4(i0.y, i1.y, i2.y, i3.y),\n        vec4(i0.z, i1.z, i2.z, i3.z),\n        vec4(i0.w, i1.w, i2.w, i3.w)\n    );\n    return outMatrix;\n}\n\n\n//------------------------------------------------------------------------------\n// Compute point size and center using the technique described in:\n// "GPU-Based Ray-Casting of Quadratic Surfaces"\n// by Christian Sigg, Tim Weyrich, Mario Botsch, Markus Gross.\n//\n// Code based on\n/*=========================================================================\n\n Program:   Visualization Toolkit\n Module:    Quadrics_fs.glsl and Quadrics_vs.glsl\n\n Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n All rights reserved.\n See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n This software is distributed WITHOUT ANY WARRANTY; without even\n the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n PURPOSE.  See the above copyright notice for more information.\n\n =========================================================================*/\n\n// .NAME Quadrics_fs.glsl and Quadrics_vs.glsl\n// .SECTION Thanks\n// <verbatim>\n//\n//  This file is part of the PointSprites plugin developed and contributed by\n//\n//  Copyright (c) CSCS - Swiss National Supercomputing Centre\n//                EDF - Electricite de France\n//\n//  John Biddiscombe, Ugo Varetto (CSCS)\n//  Stephane Ploix (EDF)\n//\n// </verbatim>\n// \n// Contributions by Alexander Rose\n// - ported to WebGL\n// - adapted to work with quads\nvoid ComputePointSizeAndPositionInClipCoordSphere(){\n    \n    vec2 xbc;\n    vec2 ybc;\n\n    mat4 T = mat4(\n        sphereRadius, 0.0, 0.0, 0.0,\n        0.0, sphereRadius, 0.0, 0.0,\n        0.0, 0.0, sphereRadius, 0.0,\n        position.x, position.y, position.z, 1.0\n    );\n\n    mat4 R = transpose( projectionMatrix * modelViewMatrix * T );\n    float A = dot( R[ 3 ], D * R[ 3 ] );\n    float B = -2.0 * dot( R[ 0 ], D * R[ 3 ] );\n    float C = dot( R[ 0 ], D * R[ 0 ] );\n    xbc[ 0 ] = ( -B - sqrt( B * B - 4.0 * A * C ) ) / ( 2.0 * A );\n    xbc[ 1 ] = ( -B + sqrt( B * B - 4.0 * A * C ) ) / ( 2.0 * A );\n    float sx = abs( xbc[ 0 ] - xbc[ 1 ] ) * 0.5;\n\n    A = dot( R[ 3 ], D * R[ 3 ] );\n    B = -2.0 * dot( R[ 1 ], D * R[ 3 ] );\n    C = dot( R[ 1 ], D * R[ 1 ] );\n    ybc[ 0 ] = ( -B - sqrt( B * B - 4.0 * A * C ) ) / ( 2.0 * A );\n    ybc[ 1 ] = ( -B + sqrt( B * B - 4.0 * A * C ) ) / ( 2.0 * A );\n    float sy = abs( ybc[ 0 ] - ybc[ 1 ]  ) * 0.5;\n\n    gl_Position.xy = vec2( 0.5 * ( xbc.x + xbc.y ), 0.5 * ( ybc.x + ybc.y ) );\n    gl_Position.xy -= mapping * vec2( sx, sy );\n    gl_Position.xy *= gl_Position.w;\n}\n\n\nvoid main(void){\n\n    vColor = color;\n    cameraSpherePos = ( modelViewMatrix * vec4( position, 1.0 ) ).xyz;\n    sphereRadius = radius;\n\n    gl_Position = projectionMatrix * vec4( cameraSpherePos, 1.0 );\n    ComputePointSizeAndPositionInClipCoordSphere();\n\n    point = ( projectionMatrixInverse * gl_Position ).xyz;\n\n    // move out of viewing frustum to avoid clipping artifacts\n    if( gl_Position.z-sphereRadius<=1.0 )\n        gl_Position.z = -10.0;\n}\n\n\n\n\n';
NGL.Resources["../shader/ParticleSprite.frag"]="\nvarying vec3 point;\nvarying vec3 vColor;\nvarying vec3 cameraSpherePos;\nvarying float sphereRadius;\n\n#include fog_params\n\n\nvoid main() {\n\n    vec3 rayDirection = normalize( point );\n    \n    float B = -2.0 * dot(rayDirection, cameraSpherePos);\n    float C = dot(cameraSpherePos, cameraSpherePos) - (sphereRadius*sphereRadius);\n    float det = (B * B) - (4.0 * C);\n    if(det < 0.0)\n        discard;\n\n\tgl_FragColor = vec4( vColor, 1.0 );\n\n    #include fog\n\n}\n";
NGL.Resources["../shader/Quad.vert"]="attribute vec2 position;\nattribute vec2 texture;\nvarying vec2 texCoord;\nvoid main(void) {\n    texCoord = texture;\n    gl_Position = vec4(position, 0.0, 1.0);\n}";NGL.Resources["../shader/Quad.frag"]="precision mediump float;\nuniform sampler2D diffuse;\nvarying vec2 texCoord;\nvoid main(void) {\n    vec4 color = texture2D(diffuse, texCoord);\n    gl_FragColor = vec4(color.rgb, color.a);\n}";NGL.Resources["../shader/Ribbon.vert"]="\nattribute vec3 inputDir;\nattribute float inputSize;\n//attribute vec3 inputNormal;\n\nvarying vec4 cameraPos;\n\n#ifdef PICKING\n    attribute vec3 pickingColor;\n    varying vec3 vPickingColor;\n#else\n    attribute vec3 inputColor;\n    varying vec3 color;\n    varying vec3 vNormal;\n#endif\n\nvoid main(void){\n\n    #ifdef PICKING\n        vPickingColor = pickingColor;\n    #else\n        color = inputColor;\n        vNormal = normalize( normalMatrix * normal );\n    #endif\n\n    cameraPos = modelViewMatrix * vec4(\n        position + ( normalize( inputDir ) * inputSize ), 1.0\n    );\n\n    gl_Position = projectionMatrix * vec4( cameraPos.xyz, 1.0 );\n\n}\n";
NGL.Resources["../shader/Ribbon.frag"]="\n#extension GL_OES_standard_derivatives : enable\n\nuniform float opacity;\nuniform float nearClip;\n\nvarying vec4 cameraPos;\n\n#ifdef PICKING\n    uniform float objectId;\n    varying vec3 vPickingColor;\n#else\n    varying vec3 color;\n    varying vec3 vNormal;\n#endif\n\n#include light_params\n\n#include fog_params\n\n\nvoid main() {\n\n    #ifdef NEAR_CLIP\n        if( dot( cameraPos, vec4( 0.0, 0.0, 1.0, nearClip ) ) > 0.0 )\n            discard;\n    #endif\n\n    #ifdef PICKING\n        gl_FragColor = vec4( vPickingColor, objectId );\n        //gl_FragColor.rgb = vec3( 1.0, 0.0, 0.0 );\n    #else\n\n        #ifdef FLAT_SHADED\n            vec3 fdx = dFdx( cameraPos.xyz );\n            vec3 fdy = dFdy( cameraPos.xyz );\n            vec3 normal = normalize( cross( fdx, fdy ) );\n        #else\n            vec3 normal = normalize( vNormal );\n        #endif\n\n        vec3 transformedNormal = normalize( normal );\n        #ifndef FLAT_SHADED\n            #ifdef DOUBLE_SIDED\n                transformedNormal = transformedNormal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n            #endif\n            #ifdef FLIP_SIDED\n                transformedNormal = -transformedNormal;\n            #endif\n        #endif\n\n        vec3 vLightFront = vec3( 0.0, 0.0, 0.0 );\n\n        #include light\n\n        gl_FragColor = vec4( color, opacity );\n        // gl_FragColor.rgb = vec3( 1.0, 0.0, 0.0 );\n        gl_FragColor.rgb *= vLightFront;\n        // gl_FragColor.rgb = normalx;\n        //gl_FragColor.rgb = color;\n    #endif\n\n    #include fog\n}\n";
NGL.Resources["../shader/SDFFont.vert"]="\nattribute vec2 mapping;\nattribute vec2 inputTexCoord;\nattribute float inputSize;\nattribute vec3 color;\n\nvarying vec3 vColor;\nvarying vec2 texCoord;\n\nuniform float nearClip;\n\n\nvoid main(void){\n\n    vColor = color;\n    texCoord = inputTexCoord;\n\n    vec4 cameraPos = ( modelViewMatrix * vec4( position, 1.0 ) );\n    vec4 cameraCornerPos = vec4( cameraPos.xyz, 1.0 );\n    cameraCornerPos.xy += mapping * inputSize;\n\n    cameraCornerPos.z += 0.5;\n\n    gl_Position = projectionMatrix * cameraCornerPos;\n\n    #ifdef NEAR_CLIP\n        // move out of viewing frustum for custom clipping\n        if( dot( cameraPos, vec4( 0.0, 0.0, 1.0, nearClip ) ) > 0.0 )\n            gl_Position.w = -10.0;\n    #endif\n\n}\n";
NGL.Resources["../shader/SDFFont.frag"]="\n#extension GL_OES_standard_derivatives : enable\n\nuniform vec3 backgroundColor;\nuniform sampler2D fontTexture;\n\nuniform float opacity;\n\nvarying vec3 vColor;\nvarying vec2 texCoord;\n\n#include fog_params\n\nconst float smoothness = 16.0;\nconst float gamma = 2.2;\n\nvoid main() {\n\n    // retrieve signed distance\n    float sdf = texture2D( fontTexture, texCoord ).a;\n\n    // perform adaptive anti-aliasing of the edges\n    float w = clamp(\n        smoothness * ( abs( dFdx( texCoord.x ) ) + abs( dFdy( texCoord.y ) ) ),\n        0.0,\n        0.5\n    );\n    float a = smoothstep( 0.5 - w, 0.5 + w, sdf );\n\n    // gamma correction for linear attenuation\n    a = pow( a, 1.0 / gamma );\n\n    if( a < 0.2 ) discard;\n\n    a *= opacity;\n\n    #ifndef ANTIALIAS\n        gl_FragColor = vec4( mix( backgroundColor, vColor, a ), 1.0 );\n    #else\n        gl_FragColor = vec4( vColor, a );\n    #endif\n\n    #include fog\n\n}\n\n";
NGL.Resources["../shader/SphereHalo.vert"]='\nattribute vec2 mapping;\nattribute float radius;\n\nvarying vec3 point;\nvarying vec3 cameraSpherePos;\nvarying float sphereRadius;\n\nuniform mat4 projectionMatrixInverse;\n\nconst mat4 D = mat4(\n    1.0, 0.0, 0.0, 0.0,\n    0.0, 1.0, 0.0, 0.0,\n    0.0, 0.0, 1.0, 0.0,\n    0.0, 0.0, 0.0, -1.0\n);\n\nmat4 transpose( in mat4 inMatrix ) {\n    vec4 i0 = inMatrix[0];\n    vec4 i1 = inMatrix[1];\n    vec4 i2 = inMatrix[2];\n    vec4 i3 = inMatrix[3];\n\n    mat4 outMatrix = mat4(\n        vec4(i0.x, i1.x, i2.x, i3.x),\n        vec4(i0.y, i1.y, i2.y, i3.y),\n        vec4(i0.z, i1.z, i2.z, i3.z),\n        vec4(i0.w, i1.w, i2.w, i3.w)\n    );\n    return outMatrix;\n}\n\n\n//------------------------------------------------------------------------------\n// Compute point size and center using the technique described in:\n// "GPU-Based Ray-Casting of Quadratic Surfaces"\n// by Christian Sigg, Tim Weyrich, Mario Botsch, Markus Gross.\n//\n// Code based on\n/*=========================================================================\n\n Program:   Visualization Toolkit\n Module:    Quadrics_fs.glsl and Quadrics_vs.glsl\n\n Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n All rights reserved.\n See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n This software is distributed WITHOUT ANY WARRANTY; without even\n the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n PURPOSE.  See the above copyright notice for more information.\n\n =========================================================================*/\n\n// .NAME Quadrics_fs.glsl and Quadrics_vs.glsl\n// .SECTION Thanks\n// <verbatim>\n//\n//  This file is part of the PointSprites plugin developed and contributed by\n//\n//  Copyright (c) CSCS - Swiss National Supercomputing Centre\n//                EDF - Electricite de France\n//\n//  John Biddiscombe, Ugo Varetto (CSCS)\n//  Stephane Ploix (EDF)\n//\n// </verbatim>\n// \n// Contributions by Alexander Rose\n// - ported to WebGL\n// - adapted to work with quads\nvoid ComputePointSizeAndPositionInClipCoordSphere(){\n    \n    vec2 xbc;\n    vec2 ybc;\n\n    mat4 T = mat4(\n        sphereRadius, 0.0, 0.0, 0.0,\n        0.0, sphereRadius, 0.0, 0.0,\n        0.0, 0.0, sphereRadius, 0.0,\n        position.x, position.y, position.z, 1.0\n    );\n\n    mat4 R = transpose( projectionMatrix * modelViewMatrix * T );\n    float A = dot( R[ 3 ], D * R[ 3 ] );\n    float B = -2.0 * dot( R[ 0 ], D * R[ 3 ] );\n    float C = dot( R[ 0 ], D * R[ 0 ] );\n    xbc[ 0 ] = ( -B - sqrt( B * B - 4.0 * A * C ) ) / ( 2.0 * A );\n    xbc[ 1 ] = ( -B + sqrt( B * B - 4.0 * A * C ) ) / ( 2.0 * A );\n    float sx = abs( xbc[ 0 ] - xbc[ 1 ] ) * 0.5;\n\n    A = dot( R[ 3 ], D * R[ 3 ] );\n    B = -2.0 * dot( R[ 1 ], D * R[ 3 ] );\n    C = dot( R[ 1 ], D * R[ 1 ] );\n    ybc[ 0 ] = ( -B - sqrt( B * B - 4.0 * A * C ) ) / ( 2.0 * A );\n    ybc[ 1 ] = ( -B + sqrt( B * B - 4.0 * A * C ) ) / ( 2.0 * A );\n    float sy = abs( ybc[ 0 ] - ybc[ 1 ]  ) * 0.5;\n\n    gl_Position.xy = vec2( 0.5 * ( xbc.x + xbc.y ), 0.5 * ( ybc.x + ybc.y ) );\n    gl_Position.xy -= mapping * vec2( sx, sy );\n    gl_Position.xy *= gl_Position.w;\n}\n\n\nvoid main(void){\n\n    cameraSpherePos = ( modelViewMatrix * vec4( position, 1.0 ) ).xyz;\n    sphereRadius = radius * 1.3;\n\n    gl_Position = projectionMatrix * vec4( cameraSpherePos, 1.0 );\n    ComputePointSizeAndPositionInClipCoordSphere();\n\n    point = ( projectionMatrixInverse * gl_Position ).xyz;\n\n    // move out of viewing frustum to avoid clipping artifacts\n    if( gl_Position.z-sphereRadius<=1.0 )\n        gl_Position.z = -10.0;\n}\n\n\n\n\n\n';
NGL.Resources["../shader/SphereHalo.frag"]="\nvarying vec3 point;\nvarying vec3 cameraSpherePos;\nvarying float sphereRadius;\n\nuniform vec3 color;\n\n#include fog_params\n\n\nvoid main(void)\n{   \n    vec3 rayDirection = normalize( point );\n    \n    float B = -2.0 * dot(rayDirection, cameraSpherePos);\n    float C = dot(cameraSpherePos, cameraSpherePos) - (sphereRadius*sphereRadius);\n    float det = (B * B) - (4.0 * C);\n    if(det < 0.0)\n        discard;\n\n    float r2 = sphereRadius*0.97;\n    B = -2.0 * dot(rayDirection, cameraSpherePos);\n    C = dot(cameraSpherePos, cameraSpherePos) - (r2*r2);\n    det = (B * B) - (4.0 * C);\n\n    if(det < 0.0){\n        gl_FragColor = vec4( color, 1.0 );\n\n    }else{\n    \tgl_FragColor = vec4( color, 0.5 );\n    }\n    \n    #include fog\n}\n\n\n";
NGL.Resources["../shader/SphereImpostor.vert"]='\nattribute vec2 mapping;\nattribute float radius;\n\nvarying vec3 point;\nvarying vec4 cameraSpherePos;\nvarying float sphereRadius;\n\n#ifdef PICKING\n    attribute vec3 pickingColor;\n    varying vec3 vPickingColor;\n#else\n    attribute vec3 color;\n    varying vec3 vColor;\n#endif\n\nuniform mat4 projectionMatrixInverse;\nuniform float nearClip;\n\nconst mat4 D = mat4(\n    1.0, 0.0, 0.0, 0.0,\n    0.0, 1.0, 0.0, 0.0,\n    0.0, 0.0, 1.0, 0.0,\n    0.0, 0.0, 0.0, -1.0\n);\n\nmat4 transpose( in mat4 inMatrix ) {\n    vec4 i0 = inMatrix[0];\n    vec4 i1 = inMatrix[1];\n    vec4 i2 = inMatrix[2];\n    vec4 i3 = inMatrix[3];\n\n    mat4 outMatrix = mat4(\n        vec4(i0.x, i1.x, i2.x, i3.x),\n        vec4(i0.y, i1.y, i2.y, i3.y),\n        vec4(i0.z, i1.z, i2.z, i3.z),\n        vec4(i0.w, i1.w, i2.w, i3.w)\n    );\n    return outMatrix;\n}\n\n\n//------------------------------------------------------------------------------\n// Compute point size and center using the technique described in:\n// "GPU-Based Ray-Casting of Quadratic Surfaces"\n// by Christian Sigg, Tim Weyrich, Mario Botsch, Markus Gross.\n//\n// Code based on\n/*=========================================================================\n\n Program:   Visualization Toolkit\n Module:    Quadrics_fs.glsl and Quadrics_vs.glsl\n\n Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n All rights reserved.\n See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n This software is distributed WITHOUT ANY WARRANTY; without even\n the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n PURPOSE.  See the above copyright notice for more information.\n\n =========================================================================*/\n\n// .NAME Quadrics_fs.glsl and Quadrics_vs.glsl\n// .SECTION Thanks\n// <verbatim>\n//\n//  This file is part of the PointSprites plugin developed and contributed by\n//\n//  Copyright (c) CSCS - Swiss National Supercomputing Centre\n//                EDF - Electricite de France\n//\n//  John Biddiscombe, Ugo Varetto (CSCS)\n//  Stephane Ploix (EDF)\n//\n// </verbatim>\n//\n// Contributions by Alexander Rose\n// - ported to WebGL\n// - adapted to work with quads\nvoid ComputePointSizeAndPositionInClipCoordSphere(){\n\n    vec2 xbc;\n    vec2 ybc;\n\n    mat4 T = mat4(\n        sphereRadius, 0.0, 0.0, 0.0,\n        0.0, sphereRadius, 0.0, 0.0,\n        0.0, 0.0, sphereRadius, 0.0,\n        position.x, position.y, position.z, 1.0\n    );\n\n    mat4 R = transpose( projectionMatrix * modelViewMatrix * T );\n    float A = dot( R[ 3 ], D * R[ 3 ] );\n    float B = -2.0 * dot( R[ 0 ], D * R[ 3 ] );\n    float C = dot( R[ 0 ], D * R[ 0 ] );\n    xbc[ 0 ] = ( -B - sqrt( B * B - 4.0 * A * C ) ) / ( 2.0 * A );\n    xbc[ 1 ] = ( -B + sqrt( B * B - 4.0 * A * C ) ) / ( 2.0 * A );\n    float sx = abs( xbc[ 0 ] - xbc[ 1 ] ) * 0.5;\n\n    A = dot( R[ 3 ], D * R[ 3 ] );\n    B = -2.0 * dot( R[ 1 ], D * R[ 3 ] );\n    C = dot( R[ 1 ], D * R[ 1 ] );\n    ybc[ 0 ] = ( -B - sqrt( B * B - 4.0 * A * C ) ) / ( 2.0 * A );\n    ybc[ 1 ] = ( -B + sqrt( B * B - 4.0 * A * C ) ) / ( 2.0 * A );\n    float sy = abs( ybc[ 0 ] - ybc[ 1 ]  ) * 0.5;\n\n    gl_Position.xy = vec2( 0.5 * ( xbc.x + xbc.y ), 0.5 * ( ybc.x + ybc.y ) );\n    gl_Position.xy -= mapping * vec2( sx, sy );\n    gl_Position.xy *= gl_Position.w;\n\n}\n\n\nvoid main(void){\n\n    #ifdef PICKING\n        vPickingColor = pickingColor;\n    #else\n        vColor = color;\n    #endif\n\n    cameraSpherePos = ( modelViewMatrix * vec4( position, 1.0 ) ).xyzw;\n    sphereRadius = radius;\n\n    // avoid clipping, added again in fragment shader\n    cameraSpherePos.z -= radius;\n\n    gl_Position = projectionMatrix * vec4( cameraSpherePos.xyz, 1.0 );\n    ComputePointSizeAndPositionInClipCoordSphere();\n\n    point = ( projectionMatrixInverse * gl_Position ).xyz;\n\n}\n\n\n\n\n\n';
NGL.Resources["../shader/SphereImpostor.frag"]="\n#extension GL_EXT_frag_depth : enable\n\n// not available in WebGL\n// #extension GL_ARB_conservative_depth : enable\n// layout(depth_less) out float gl_FragDepthEXT;\n\nuniform float opacity;\nuniform float nearClip;\n\nuniform mat4 projectionMatrix;\n\nvarying vec3 point;\nvarying vec4 cameraSpherePos;\nvarying float sphereRadius;\n\n#ifdef PICKING\n    uniform float objectId;\n    varying vec3 vPickingColor;\n#else\n    varying vec3 vColor;\n#endif\n\n#include light_params\n\n#include fog_params\n\n\nvec3 cameraPos;\nvec3 cameraNormal;\n\n\n// vec4 poly_color = gl_Color;\n\n//   if(uf_use_border_hinting == 1.0)\n//   {\n//     vec3 wc_eye_dir = normalize(wc_sp_pt);\n//     float n_dot_e   = abs(dot(wc_sp_nrml,wc_eye_dir));\n//     float alpha     = max(uf_border_color_start_cosine - n_dot_e,0.0)/uf_border_color_start_cosine;\n//     poly_color      = mix(gl_Color,uf_border_color,0.75*alpha);\n//   }\n\n//   color += (diff + amb)*poly_color + spec*gl_FrontMaterial.specular;\n\n\n// Calculate depth based on the given camera position.\nfloat calcDepth( in vec3 cameraPos )\n{\n    vec2 clipZW = cameraPos.z * projectionMatrix[2].zw + projectionMatrix[3].zw;\n    return 0.5 + 0.5 * clipZW.x / clipZW.y;\n}\n\n\nfloat calcClip( vec3 cameraPos )\n{\n    return dot( vec4( cameraPos, 1.0 ), vec4( 0.0, 0.0, 1.0, nearClip - 0.5 ) );\n}\n\n\nbool flag2 = false;\n\n\nbool Impostor(out vec3 cameraPos, out vec3 cameraNormal)\n{\n\n    vec3 cameraSpherePos2 = cameraSpherePos.xyz;\n    cameraSpherePos2.z += sphereRadius;\n\n    vec3 rayDirection = normalize( point );\n\n    float B = -2.0 * dot(rayDirection, cameraSpherePos2);\n    float C = dot(cameraSpherePos2, cameraSpherePos2) - (sphereRadius*sphereRadius);\n\n    float det = (B * B) - (4.0 * C);\n    if(det < 0.0){\n        discard;\n        return false;\n    }else{\n        float sqrtDet = sqrt(det);\n        float posT = (-B + sqrtDet)/2.0;\n        float negT = (-B - sqrtDet)/2.0;\n\n        float intersectT = min(posT, negT);\n        cameraPos = rayDirection * intersectT;\n\n        #ifdef NEAR_CLIP\n            if( calcDepth( cameraPos ) <= 0.0 ){\n                cameraPos = rayDirection * max(posT, negT);\n                cameraNormal = vec3( 0.0, 0.0, 0.4 );\n                return false;\n            }else if( calcClip( cameraPos ) > 0.0 ){\n                cameraPos = rayDirection * max(posT, negT);\n                cameraNormal = vec3( 0.0, 0.0, 0.4 );\n                flag2 = true;\n                return false;\n            }else{\n                cameraNormal = normalize(cameraPos - cameraSpherePos2);\n            }\n        #else\n            if( calcDepth( cameraPos ) <= 0.0 ){\n                cameraPos = rayDirection * max(posT, negT);\n                cameraNormal = vec3( 0.0, 0.0, 0.4 );\n                return false;\n            }else{\n                cameraNormal = normalize(cameraPos - cameraSpherePos2);\n            }\n        #endif\n\n        return true;\n    }\n\n    return false; // ensure that each control flow has a return\n\n}\n\n\nvoid main(void)\n{\n\n    bool flag = Impostor( cameraPos, cameraNormal );\n\n    #ifdef NEAR_CLIP\n        if( calcClip( cameraPos ) > 0.0 )\n            discard;\n    #endif\n\n    // FIXME not compatible with custom clipping plane\n    //Set the depth based on the new cameraPos.\n    gl_FragDepthEXT = calcDepth( cameraPos );\n    if( !flag ){\n\n        // clamp to near clipping plane and add a tiny value to\n        // make spheres with a greater radius occlude smaller ones\n        #ifdef NEAR_CLIP\n            if( flag2 ){\n                gl_FragDepthEXT = max( 0.0, calcDepth( vec3( - ( nearClip - 0.5 ) ) ) + ( 0.0000001 / sphereRadius ) );\n            }else if( gl_FragDepthEXT >= 0.0 ){\n                gl_FragDepthEXT = 0.0 + ( 0.0000001 / sphereRadius );\n            }\n        #else\n            if( gl_FragDepthEXT >= 0.0 ){\n                gl_FragDepthEXT = 0.0 + ( 0.0000001 / sphereRadius );\n            }\n        #endif\n\n    }\n\n    // bugfix (mac only?)\n    if (gl_FragDepthEXT < 0.0)\n        discard;\n    if (gl_FragDepthEXT > 1.0)\n        discard;\n\n    #ifdef PICKING\n        gl_FragColor = vec4( vPickingColor, objectId );\n        //gl_FragColor.rgb = vec3( 1.0, 0.0, 0.0 );\n    #else\n        vec3 transformedNormal = cameraNormal;\n        vec3 vLightFront = vec3( 0.0, 0.0, 0.0 );\n\n        #include light\n\n        gl_FragColor = vec4( vColor, opacity );\n        gl_FragColor.rgb *= vLightFront;\n\n        // gl_FragColor.a = 0.5;\n        // gl_FragColor.rgb = transformedNormal;\n        // gl_FragColor.rgb = point;\n    #endif\n\n    // #include fog\n\n    #ifdef USE_FOG\n        float depth = gl_FragDepthEXT / gl_FragCoord.w;\n        #ifdef FOG_EXP2\n            const float LOG2 = 1.442695;\n            float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\n            fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n        #else\n            float fogFactor = smoothstep( fogNear, fogFar, depth );\n        #endif\n        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n    #endif\n\n}\n\n\n// void main2(void)\n// {\n//     gl_FragColor = vec4( vColor, 1.0 );\n// }\n\n\n\n";
NGL.Resources["../shader/chunk/fog.glsl"]="#ifdef USE_FOG\n\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\t#ifdef FOG_EXP2\n\t\tconst float LOG2 = 1.442695;\n\t\tfloat fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\n\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n\t#endif\n\tgl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n#endif";
NGL.Resources["../shader/chunk/fog_params.glsl"]="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif";NGL.Resources["../shader/chunk/light.glsl"]="\n// LIGHT\n// IN: transformedNormal, vLightFront\n// OUT: vLightFront\n\n// #if MAX_DIR_LIGHTS > 0\n//     for( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n//         vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\n//         vec3 dirVector = normalize( lDirection.xyz );\n//         float dotProduct = dot( transformedNormal, dirVector );\n//         vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n//         vLightFront += directionalLightColor[ i ] * directionalLightWeighting;\n//     }\n// #endif\n// #if MAX_HEMI_LIGHTS > 0\n//     for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n//         vec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\n//         vec3 lVector = normalize( lDirection.xyz );\n//         float dotProduct = dot( transformedNormal, lVector );\n//         float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n//         float hemiDiffuseWeightBack = -0.5 * dotProduct + 0.5;\n//         vLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n//     }\n// #endif\n// // vLightFront = vLightFront * diffuse + ambient * ambientLightColor + emissive;\n// vLightFront = vLightFront + ambient * ambientLightColor + emissive;\n\n\n// Give light vector position perpendicular to the screen\nvec3 lightvec = normalize(vec3(0.0,0.0,1.2));\nvec3 eyepos = vec3(0.0,0.0,1.0);\n\n// calculate half-angle vector\nvec3 halfvec = normalize(lightvec + eyepos);\n\n// Parameters used to calculate per pixel lighting\n// see http://http.developer.nvidia.com/CgTutorial/cg_tutorial_chapter05.html\nfloat diffuse = dot(transformedNormal,lightvec);\nfloat specular = dot(transformedNormal, halfvec);\nvec4 lighting = lit(diffuse, specular, 512.0);\n\nvec3 specularcolor = vec3(1.0,1.0,1.0);\n\nvLightFront = ( vLightFront + lighting.y * vec3(1.0, 1.0, 1.0) + lighting.z * specularcolor ).xyz;\n\n\n";
NGL.Resources["../shader/chunk/light_params.glsl"]="uniform vec3 ambient;\nuniform vec3 diffuse;\nuniform vec3 emissive;\n\nuniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n    uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n    uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n    uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n    uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n    uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n#endif\n\n\n\nvec4 lit(float NdotL, float NdotH, float m) {\n    float ambient = 1.0;\n    float diffuse = max(NdotL, 0.0);\n    float specular = pow(abs(NdotH),m);\n    if(NdotL < 0.0 || NdotH < 0.0)\n        specular = 0.0;\n    return vec4(ambient, diffuse, specular, 1.0);\n}\n\n";
NGL.Resources["../fonts/LatoBlack.fnt"]='info face="Lato Black" size=32 bold=0 italic=0 charset="" unicode=0 stretchH=100 smooth=1 aa=1 padding=4,4,4,4 spacing=-8,-8\ncommon lineHeight=39 base=32 scaleW=512 scaleH=512 pages=1 packed=0\npage id=0 file="LatoBlack-sdf.png"\nchars count=95\nchar id=32   x=0     y=0     width=0     height=0     xoffset=0     yoffset=32    xadvance=6     page=0  chnl=0\nchar id=41   x=0     y=0     width=17     height=41     xoffset=-3     yoffset=2    xadvance=10     page=0  chnl=0\nchar id=40   x=17     y=0     width=17     height=41     xoffset=-3     yoffset=2    xadvance=10     page=0  chnl=0\nchar id=36   x=34     y=0     width=27     height=40     xoffset=-4     yoffset=0    xadvance=19     page=0  chnl=0\nchar id=124   x=61     y=0     width=14     height=40     xoffset=-2     yoffset=2    xadvance=10     page=0  chnl=0\nchar id=125   x=75     y=0     width=19     height=40     xoffset=-4     yoffset=2    xadvance=10     page=0  chnl=0\nchar id=123   x=94     y=0     width=18     height=40     xoffset=-4     yoffset=2    xadvance=10     page=0  chnl=0\nchar id=93   x=112     y=0     width=18     height=40     xoffset=-4     yoffset=2    xadvance=10     page=0  chnl=0\nchar id=91   x=130     y=0     width=17     height=40     xoffset=-3     yoffset=2    xadvance=10     page=0  chnl=0\nchar id=106   x=147     y=0     width=18     height=38     xoffset=-5     yoffset=4    xadvance=9     page=0  chnl=0\nchar id=81   x=165     y=0     width=36     height=38     xoffset=-4     yoffset=3    xadvance=26     page=0  chnl=0\nchar id=92   x=201     y=0     width=24     height=36     xoffset=-5     yoffset=3    xadvance=13     page=0  chnl=0\nchar id=64   x=225     y=0     width=35     height=36     xoffset=-4     yoffset=5    xadvance=26     page=0  chnl=0\nchar id=47   x=260     y=0     width=24     height=36     xoffset=-5     yoffset=3    xadvance=13     page=0  chnl=0\nchar id=127   x=284     y=0     width=27     height=34     xoffset=-4     yoffset=3    xadvance=18     page=0  chnl=0\nchar id=38   x=311     y=0     width=33     height=34     xoffset=-4     yoffset=3    xadvance=23     page=0  chnl=0\nchar id=35   x=344     y=0     width=28     height=34     xoffset=-4     yoffset=3    xadvance=19     page=0  chnl=0\nchar id=37   x=372     y=0     width=35     height=34     xoffset=-4     yoffset=3    xadvance=26     page=0  chnl=0\nchar id=63   x=407     y=0     width=23     height=34     xoffset=-4     yoffset=3    xadvance=14     page=0  chnl=0\nchar id=33   x=430     y=0     width=15     height=34     xoffset=-1     yoffset=3    xadvance=12     page=0  chnl=0\nchar id=48   x=445     y=0     width=27     height=34     xoffset=-4     yoffset=3    xadvance=19     page=0  chnl=0\nchar id=56   x=472     y=0     width=27     height=34     xoffset=-4     yoffset=3    xadvance=19     page=0  chnl=0\nchar id=55   x=0     y=41     width=26     height=34     xoffset=-3     yoffset=3    xadvance=19     page=0  chnl=0\nchar id=54   x=26     y=41     width=26     height=34     xoffset=-3     yoffset=3    xadvance=19     page=0  chnl=0\nchar id=53   x=52     y=41     width=26     height=34     xoffset=-4     yoffset=3    xadvance=19     page=0  chnl=0\nchar id=52   x=78     y=41     width=28     height=34     xoffset=-4     yoffset=3    xadvance=19     page=0  chnl=0\nchar id=51   x=106     y=41     width=26     height=34     xoffset=-3     yoffset=3    xadvance=19     page=0  chnl=0\nchar id=50   x=132     y=41     width=26     height=34     xoffset=-3     yoffset=3    xadvance=19     page=0  chnl=0\nchar id=49   x=158     y=41     width=25     height=34     xoffset=-2     yoffset=3    xadvance=19     page=0  chnl=0\nchar id=108   x=183     y=41     width=15     height=34     xoffset=-2     yoffset=3    xadvance=9     page=0  chnl=0\nchar id=107   x=198     y=41     width=27     height=34     xoffset=-3     yoffset=3    xadvance=18     page=0  chnl=0\nchar id=104   x=225     y=41     width=25     height=34     xoffset=-3     yoffset=3    xadvance=19     page=0  chnl=0\nchar id=100   x=250     y=41     width=26     height=34     xoffset=-4     yoffset=3    xadvance=19     page=0  chnl=0\nchar id=98   x=276     y=41     width=26     height=34     xoffset=-3     yoffset=3    xadvance=19     page=0  chnl=0\nchar id=90   x=302     y=41     width=28     height=34     xoffset=-4     yoffset=3    xadvance=20     page=0  chnl=0\nchar id=89   x=330     y=41     width=32     height=34     xoffset=-5     yoffset=3    xadvance=22     page=0  chnl=0\nchar id=88   x=362     y=41     width=32     height=34     xoffset=-4     yoffset=3    xadvance=23     page=0  chnl=0\nchar id=87   x=394     y=41     width=44     height=34     xoffset=-4     yoffset=3    xadvance=34     page=0  chnl=0\nchar id=86   x=438     y=41     width=33     height=34     xoffset=-4     yoffset=3    xadvance=24     page=0  chnl=0\nchar id=85   x=471     y=41     width=30     height=34     xoffset=-3     yoffset=3    xadvance=23     page=0  chnl=0\nchar id=84   x=0     y=75     width=28     height=34     xoffset=-4     yoffset=3    xadvance=19     page=0  chnl=0\nchar id=83   x=28     y=75     width=26     height=34     xoffset=-4     yoffset=3    xadvance=17     page=0  chnl=0\nchar id=82   x=54     y=75     width=29     height=34     xoffset=-3     yoffset=3    xadvance=21     page=0  chnl=0\nchar id=80   x=83     y=75     width=28     height=34     xoffset=-3     yoffset=3    xadvance=20     page=0  chnl=0\nchar id=79   x=111     y=75     width=34     height=34     xoffset=-4     yoffset=3    xadvance=26     page=0  chnl=0\nchar id=78   x=145     y=75     width=31     height=34     xoffset=-3     yoffset=3    xadvance=24     page=0  chnl=0\nchar id=77   x=176     y=75     width=37     height=34     xoffset=-3     yoffset=3    xadvance=30     page=0  chnl=0\nchar id=76   x=213     y=75     width=24     height=34     xoffset=-3     yoffset=3    xadvance=17     page=0  chnl=0\nchar id=75   x=237     y=75     width=31     height=34     xoffset=-3     yoffset=3    xadvance=23     page=0  chnl=0\nchar id=74   x=268     y=75     width=21     height=34     xoffset=-4     yoffset=3    xadvance=14     page=0  chnl=0\nchar id=73   x=289     y=75     width=15     height=34     xoffset=-2     yoffset=3    xadvance=10     page=0  chnl=0\nchar id=72   x=304     y=75     width=31     height=34     xoffset=-3     yoffset=3    xadvance=24     page=0  chnl=0\nchar id=71   x=335     y=75     width=31     height=34     xoffset=-4     yoffset=3    xadvance=23     page=0  chnl=0\nchar id=70   x=366     y=75     width=25     height=34     xoffset=-3     yoffset=3    xadvance=18     page=0  chnl=0\nchar id=69   x=391     y=75     width=25     height=34     xoffset=-3     yoffset=3    xadvance=18     page=0  chnl=0\nchar id=68   x=416     y=75     width=32     height=34     xoffset=-3     yoffset=3    xadvance=24     page=0  chnl=0\nchar id=67   x=448     y=75     width=30     height=34     xoffset=-4     yoffset=3    xadvance=21     page=0  chnl=0\nchar id=66   x=478     y=75     width=28     height=34     xoffset=-3     yoffset=3    xadvance=21     page=0  chnl=0\nchar id=65   x=0     y=109     width=33     height=34     xoffset=-4     yoffset=3    xadvance=24     page=0  chnl=0\nchar id=57   x=33     y=109     width=27     height=33     xoffset=-3     yoffset=4    xadvance=19     page=0  chnl=0\nchar id=105   x=60     y=109     width=16     height=33     xoffset=-3     yoffset=4    xadvance=9     page=0  chnl=0\nchar id=102   x=76     y=109     width=21     height=33     xoffset=-4     yoffset=4    xadvance=12     page=0  chnl=0\nchar id=121   x=97     y=109     width=27     height=32     xoffset=-4     yoffset=10    xadvance=18     page=0  chnl=0\nchar id=116   x=124     y=109     width=22     height=32     xoffset=-4     yoffset=5    xadvance=13     page=0  chnl=0\nchar id=113   x=146     y=109     width=26     height=32     xoffset=-4     yoffset=10    xadvance=19     page=0  chnl=0\nchar id=112   x=172     y=109     width=26     height=32     xoffset=-3     yoffset=10    xadvance=19     page=0  chnl=0\nchar id=103   x=198     y=109     width=26     height=32     xoffset=-4     yoffset=10    xadvance=17     page=0  chnl=0\nchar id=59   x=224     y=109     width=16     height=31     xoffset=-3     yoffset=11    xadvance=9     page=0  chnl=0\nchar id=122   x=240     y=109     width=23     height=27     xoffset=-3     yoffset=10    xadvance=15     page=0  chnl=0\nchar id=120   x=263     y=109     width=27     height=27     xoffset=-4     yoffset=10    xadvance=18     page=0  chnl=0\nchar id=119   x=290     y=109     width=35     height=27     xoffset=-4     yoffset=10    xadvance=26     page=0  chnl=0\nchar id=118   x=325     y=109     width=27     height=27     xoffset=-4     yoffset=10    xadvance=18     page=0  chnl=0\nchar id=117   x=352     y=109     width=25     height=27     xoffset=-3     yoffset=10    xadvance=19     page=0  chnl=0\nchar id=115   x=377     y=109     width=23     height=27     xoffset=-4     yoffset=10    xadvance=14     page=0  chnl=0\nchar id=114   x=400     y=109     width=21     height=27     xoffset=-3     yoffset=10    xadvance=13     page=0  chnl=0\nchar id=110   x=421     y=109     width=25     height=27     xoffset=-3     yoffset=10    xadvance=19     page=0  chnl=0\nchar id=109   x=446     y=109     width=34     height=27     xoffset=-3     yoffset=10    xadvance=28     page=0  chnl=0\nchar id=101   x=480     y=109     width=26     height=27     xoffset=-4     yoffset=10    xadvance=17     page=0  chnl=0\nchar id=99   x=0     y=143     width=25     height=27     xoffset=-4     yoffset=10    xadvance=16     page=0  chnl=0\nchar id=97   x=25     y=143     width=24     height=27     xoffset=-3     yoffset=10    xadvance=17     page=0  chnl=0\nchar id=43   x=49     y=143     width=26     height=26     xoffset=-3     yoffset=8    xadvance=19     page=0  chnl=0\nchar id=58   x=75     y=143     width=16     height=26     xoffset=-3     yoffset=11    xadvance=9     page=0  chnl=0\nchar id=111   x=91     y=143     width=27     height=26     xoffset=-4     yoffset=11    xadvance=19     page=0  chnl=0\nchar id=62   x=118     y=143     width=23     height=25     xoffset=-1     yoffset=9    xadvance=19     page=0  chnl=0\nchar id=60   x=141     y=143     width=23     height=25     xoffset=-2     yoffset=9    xadvance=19     page=0  chnl=0\nchar id=42   x=164     y=143     width=21     height=21     xoffset=-4     yoffset=3    xadvance=13     page=0  chnl=0\nchar id=94   x=185     y=143     width=25     height=21     xoffset=-3     yoffset=3    xadvance=19     page=0  chnl=0\nchar id=44   x=210     y=143     width=15     height=20     xoffset=-3     yoffset=22    xadvance=8     page=0  chnl=0\nchar id=61   x=225     y=143     width=25     height=19     xoffset=-3     yoffset=12    xadvance=19     page=0  chnl=0\nchar id=39   x=250     y=143     width=15     height=19     xoffset=-3     yoffset=3    xadvance=8     page=0  chnl=0\nchar id=34   x=265     y=143     width=21     height=19     xoffset=-3     yoffset=3    xadvance=14     page=0  chnl=0\nchar id=126   x=286     y=143     width=26     height=17     xoffset=-3     yoffset=14    xadvance=19     page=0  chnl=0\nchar id=46   x=312     y=143     width=16     height=16     xoffset=-4     yoffset=21    xadvance=8     page=0  chnl=0\nchar id=96   x=328     y=143     width=18     height=15     xoffset=-5     yoffset=3    xadvance=11     page=0  chnl=0\nchar id=95   x=346     y=143     width=22     height=13     xoffset=-4     yoffset=29    xadvance=13     page=0  chnl=0\nchar id=45   x=368     y=143     width=19     height=13     xoffset=-3     yoffset=16    xadvance=12     page=0  chnl=0\n';
NGL.Resources["../fonts/LatoBlack.png"]=NGL.dataURItoImage("data:image/png;base64,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\n+9Thmi1iSv0S6qkyke+NUMwNsga0pXgsLNOiP7ijAd4ZBZ0JIYS4JYZABRRPAxSRKaSGzFqrFHld\n264XKrp6NktFGdZGIVqpqVYRQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGE\nEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBC\nCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQggh\nhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQ\nQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEII\nIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGE\nEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBC\nCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQggh\nhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQ\nQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEII\nIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGE\nEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBC\nCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQggh\nhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQ\nQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEII\nIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGE\nEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBC\nCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQggh\nhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQ\nQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEII\nIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGE\nEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBC\nCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQggh\nhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQ\nQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEII\nIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGE\nEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBC\nCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQggh\nhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQ\nQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEII\nIYQQQgghhBBCCCGEEKJM+X8Bl4tInGh6U68AAAAASUVORK5CYII=\n");
NGL.Resources["../img/radial.png"]=NGL.dataURItoImage("data:image/png;base64,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\n");

// File:js/build/gui.min.js

// File:js/lib/tether.min.js

/*! tether 0.6.5 */
if( typeof importScripts !== 'function' ){
!function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e(require,exports,module):t.Tether=e()}(this,function(){return function(){var t,e,o,i,n,s,l,r,h,a,f,p,u,d,g,c,m,b,v,y={}.hasOwnProperty,w=[].indexOf||function(t){for(var e=0,o=this.length;o>e;e++)if(e in this&&this[e]===t)return e;return-1},C=[].slice;null==this.Tether&&(this.Tether={modules:[]}),p=function(t){var e,o,i,n,s;if(o=getComputedStyle(t).position,"fixed"===o)return t;for(i=void 0,e=t;e=e.parentNode;){try{n=getComputedStyle(e)}catch(l){}if(null==n)return e;if(/(auto|scroll)/.test(n.overflow+n.overflowY+n.overflowX)&&("absolute"!==o||"relative"===(s=n.position)||"absolute"===s||"fixed"===s))return e}return document.body},m=function(){var t;return t=0,function(){return t++}}(),v={},a=function(t){var e,i,s,l,r;if(s=t._tetherZeroElement,null==s&&(s=t.createElement("div"),s.setAttribute("data-tether-id",m()),n(s.style,{top:0,left:0,position:"absolute"}),t.body.appendChild(s),t._tetherZeroElement=s),e=s.getAttribute("data-tether-id"),null==v[e]){v[e]={},r=s.getBoundingClientRect();for(i in r)l=r[i],v[e][i]=l;o(function(){return v[e]=void 0})}return v[e]},d=null,l=function(t){var e,o,i,n,s,l,r;t===document?(o=document,t=document.documentElement):o=t.ownerDocument,i=o.documentElement,e={},r=t.getBoundingClientRect();for(n in r)l=r[n],e[n]=l;return s=a(o),e.top-=s.top,e.left-=s.left,null==e.width&&(e.width=document.body.scrollWidth-e.left-e.right),null==e.height&&(e.height=document.body.scrollHeight-e.top-e.bottom),e.top=e.top-i.clientTop,e.left=e.left-i.clientLeft,e.right=o.body.clientWidth-e.width-e.left,e.bottom=o.body.clientHeight-e.height-e.top,e},h=function(t){return t.offsetParent||document.documentElement},f=function(){var t,e,o,i,s;return t=document.createElement("div"),t.style.width="100%",t.style.height="200px",e=document.createElement("div"),n(e.style,{position:"absolute",top:0,left:0,pointerEvents:"none",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),e.appendChild(t),document.body.appendChild(e),i=t.offsetWidth,e.style.overflow="scroll",s=t.offsetWidth,i===s&&(s=e.clientWidth),document.body.removeChild(e),o=i-s,{width:o,height:o}},n=function(t){var e,o,i,n,s,l,r;for(null==t&&(t={}),e=[],Array.prototype.push.apply(e,arguments),r=e.slice(1),s=0,l=r.length;l>s;s++)if(i=r[s])for(o in i)y.call(i,o)&&(n=i[o],t[o]=n);return t},g=function(t,e){var o,i,n,s,l,h;if(null!=t.classList){for(l=e.split(" "),h=[],n=0,s=l.length;s>n;n++)i=l[n],i.trim()&&h.push(t.classList.remove(i));return h}return o=r(t).replace(new RegExp("(^| )"+e.split(" ").join("|")+"( |$)","gi")," "),c(t,o)},e=function(t,e){var o,i,n,s,l;if(null!=t.classList){for(s=e.split(" "),l=[],i=0,n=s.length;n>i;i++)o=s[i],o.trim()&&l.push(t.classList.add(o));return l}return g(t,e),o=r(t)+(" "+e),c(t,o)},u=function(t,e){return null!=t.classList?t.classList.contains(e):new RegExp("(^| )"+e+"( |$)","gi").test(r(t))},r=function(t){return t.className instanceof SVGAnimatedString?t.className.baseVal:t.className},c=function(t,e){return t.setAttribute("class",e)},b=function(t,o,i){var n,s,l,r,h,a;for(s=0,r=i.length;r>s;s++)n=i[s],w.call(o,n)<0&&u(t,n)&&g(t,n);for(a=[],l=0,h=o.length;h>l;l++)n=o[l],a.push(u(t,n)?void 0:e(t,n));return a},i=[],o=function(t){return i.push(t)},s=function(){var t,e;for(e=[];t=i.pop();)e.push(t());return e},t=function(){function t(){}return t.prototype.on=function(t,e,o,i){var n;return null==i&&(i=!1),null==this.bindings&&(this.bindings={}),null==(n=this.bindings)[t]&&(n[t]=[]),this.bindings[t].push({handler:e,ctx:o,once:i})},t.prototype.once=function(t,e,o){return this.on(t,e,o,!0)},t.prototype.off=function(t,e){var o,i,n;if(null!=(null!=(i=this.bindings)?i[t]:void 0)){if(null==e)return delete this.bindings[t];for(o=0,n=[];o<this.bindings[t].length;)n.push(this.bindings[t][o].handler===e?this.bindings[t].splice(o,1):o++);return n}},t.prototype.trigger=function(){var t,e,o,i,n,s,l,r,h;if(o=arguments[0],t=2<=arguments.length?C.call(arguments,1):[],null!=(l=this.bindings)?l[o]:void 0){for(n=0,h=[];n<this.bindings[o].length;)r=this.bindings[o][n],i=r.handler,e=r.ctx,s=r.once,i.apply(null!=e?e:this,t),h.push(s?this.bindings[o].splice(n,1):n++);return h}},t}(),this.Tether.Utils={getScrollParent:p,getBounds:l,getOffsetParent:h,extend:n,addClass:e,removeClass:g,hasClass:u,updateClasses:b,defer:o,flush:s,uniqueId:m,Evented:t,getScrollBarSize:f}}.call(this),function(){var t,e,o,i,n,s,l,r,h,a,f,p,u,d,g,c,m,b,v,y,w,C,O,T,x,A,E,S,W,M=[].slice,z=function(t,e){return function(){return t.apply(e,arguments)}};if(null==this.Tether)throw new Error("You must include the utils.js file before tether.js");i=this.Tether,W=i.Utils,c=W.getScrollParent,m=W.getSize,d=W.getOuterSize,p=W.getBounds,u=W.getOffsetParent,a=W.extend,n=W.addClass,O=W.removeClass,A=W.updateClasses,h=W.defer,f=W.flush,g=W.getScrollBarSize,E=function(t,e,o){return null==o&&(o=1),t+o>=e&&e>=t-o},x=function(){var t,e,o,i,n;for(t=document.createElement("div"),n=["transform","webkitTransform","OTransform","MozTransform","msTransform"],o=0,i=n.length;i>o;o++)if(e=n[o],void 0!==t.style[e])return e}(),T=[],C=function(){var t,e,o;for(e=0,o=T.length;o>e;e++)t=T[e],t.position(!1);return f()},b=function(){var t;return null!=(t="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance.now():void 0)?t:+new Date},function(){var t,e,o,i,n,s,l,r,h;for(e=null,o=null,i=null,n=function(){if(null!=o&&o>16)return o=Math.min(o-16,250),void(i=setTimeout(n,250));if(!(null!=e&&b()-e<10))return null!=i&&(clearTimeout(i),i=null),e=b(),C(),o=b()-e},r=["resize","scroll","touchmove"],h=[],s=0,l=r.length;l>s;s++)t=r[s],h.push(window.addEventListener(t,n));return h}(),t={center:"center",left:"right",right:"left"},e={middle:"middle",top:"bottom",bottom:"top"},o={top:0,left:0,middle:"50%",center:"50%",bottom:"100%",right:"100%"},r=function(o,i){var n,s;return n=o.left,s=o.top,"auto"===n&&(n=t[i.left]),"auto"===s&&(s=e[i.top]),{left:n,top:s}},l=function(t){var e,i;return{left:null!=(e=o[t.left])?e:t.left,top:null!=(i=o[t.top])?i:t.top}},s=function(){var t,e,o,i,n,s,l;for(e=1<=arguments.length?M.call(arguments,0):[],o={top:0,left:0},n=0,s=e.length;s>n;n++)l=e[n],i=l.top,t=l.left,"string"==typeof i&&(i=parseFloat(i,10)),"string"==typeof t&&(t=parseFloat(t,10)),o.top+=i,o.left+=t;return o},v=function(t,e){return"string"==typeof t.left&&-1!==t.left.indexOf("%")&&(t.left=parseFloat(t.left,10)/100*e.width),"string"==typeof t.top&&-1!==t.top.indexOf("%")&&(t.top=parseFloat(t.top,10)/100*e.height),t},y=w=function(t){var e,o,i;return i=t.split(" "),o=i[0],e=i[1],{top:o,left:e}},S=function(){function t(t){this.position=z(this.position,this);var e,o,n,s,l;for(T.push(this),this.history=[],this.setOptions(t,!1),s=i.modules,o=0,n=s.length;n>o;o++)e=s[o],null!=(l=e.initialize)&&l.call(this);this.position()}return t.modules=[],t.prototype.getClass=function(t){var e,o;return(null!=(e=this.options.classes)?e[t]:void 0)?this.options.classes[t]:(null!=(o=this.options.classes)?o[t]:void 0)!==!1?this.options.classPrefix?""+this.options.classPrefix+"-"+t:t:""},t.prototype.setOptions=function(t,e){var o,i,s,l,r,h;for(this.options=t,null==e&&(e=!0),o={offset:"0 0",targetOffset:"0 0",targetAttachment:"auto auto",classPrefix:"tether"},this.options=a(o,this.options),r=this.options,this.element=r.element,this.target=r.target,this.targetModifier=r.targetModifier,"viewport"===this.target?(this.target=document.body,this.targetModifier="visible"):"scroll-handle"===this.target&&(this.target=document.body,this.targetModifier="scroll-handle"),h=["element","target"],s=0,l=h.length;l>s;s++){if(i=h[s],null==this[i])throw new Error("Tether Error: Both element and target must be defined");null!=this[i].jquery?this[i]=this[i][0]:"string"==typeof this[i]&&(this[i]=document.querySelector(this[i]))}if(n(this.element,this.getClass("element")),n(this.target,this.getClass("target")),!this.options.attachment)throw new Error("Tether Error: You must provide an attachment");return this.targetAttachment=y(this.options.targetAttachment),this.attachment=y(this.options.attachment),this.offset=w(this.options.offset),this.targetOffset=w(this.options.targetOffset),null!=this.scrollParent&&this.disable(),this.scrollParent="scroll-handle"===this.targetModifier?this.target:c(this.target),this.options.enabled!==!1?this.enable(e):void 0},t.prototype.getTargetBounds=function(){var t,e,o,i,n,s,l,r,h;if(null==this.targetModifier)return p(this.target);switch(this.targetModifier){case"visible":return this.target===document.body?{top:pageYOffset,left:pageXOffset,height:innerHeight,width:innerWidth}:(t=p(this.target),n={height:t.height,width:t.width,top:t.top,left:t.left},n.height=Math.min(n.height,t.height-(pageYOffset-t.top)),n.height=Math.min(n.height,t.height-(t.top+t.height-(pageYOffset+innerHeight))),n.height=Math.min(innerHeight,n.height),n.height-=2,n.width=Math.min(n.width,t.width-(pageXOffset-t.left)),n.width=Math.min(n.width,t.width-(t.left+t.width-(pageXOffset+innerWidth))),n.width=Math.min(innerWidth,n.width),n.width-=2,n.top<pageYOffset&&(n.top=pageYOffset),n.left<pageXOffset&&(n.left=pageXOffset),n);case"scroll-handle":return h=this.target,h===document.body?(h=document.documentElement,t={left:pageXOffset,top:pageYOffset,height:innerHeight,width:innerWidth}):t=p(h),r=getComputedStyle(h),o=h.scrollWidth>h.clientWidth||"scroll"===[r.overflow,r.overflowX]||this.target!==document.body,s=0,o&&(s=15),i=t.height-parseFloat(r.borderTopWidth)-parseFloat(r.borderBottomWidth)-s,n={width:15,height:.975*i*(i/h.scrollHeight),left:t.left+t.width-parseFloat(r.borderLeftWidth)-15},e=0,408>i&&this.target===document.body&&(e=-11e-5*Math.pow(i,2)-.00727*i+22.58),this.target!==document.body&&(n.height=Math.max(n.height,24)),l=this.target.scrollTop/(h.scrollHeight-i),n.top=l*(i-n.height-e)+t.top+parseFloat(r.borderTopWidth),this.target===document.body&&(n.height=Math.max(n.height,24)),n}},t.prototype.clearCache=function(){return this._cache={}},t.prototype.cache=function(t,e){return null==this._cache&&(this._cache={}),null==this._cache[t]&&(this._cache[t]=e.call(this)),this._cache[t]},t.prototype.enable=function(t){return null==t&&(t=!0),n(this.target,this.getClass("enabled")),n(this.element,this.getClass("enabled")),this.enabled=!0,this.scrollParent!==document&&this.scrollParent.addEventListener("scroll",this.position),t?this.position():void 0},t.prototype.disable=function(){return O(this.target,this.getClass("enabled")),O(this.element,this.getClass("enabled")),this.enabled=!1,null!=this.scrollParent?this.scrollParent.removeEventListener("scroll",this.position):void 0},t.prototype.destroy=function(){var t,e,o,i,n;for(this.disable(),n=[],t=o=0,i=T.length;i>o;t=++o){if(e=T[t],e===this){T.splice(t,1);break}n.push(void 0)}return n},t.prototype.updateAttachClasses=function(t,e){var o,i,n,s,l,r,a,f,p,u=this;for(null==t&&(t=this.attachment),null==e&&(e=this.targetAttachment),s=["left","top","bottom","right","middle","center"],(null!=(p=this._addAttachClasses)?p.length:void 0)&&this._addAttachClasses.splice(0,this._addAttachClasses.length),o=null!=this._addAttachClasses?this._addAttachClasses:this._addAttachClasses=[],t.top&&o.push(""+this.getClass("element-attached")+"-"+t.top),t.left&&o.push(""+this.getClass("element-attached")+"-"+t.left),e.top&&o.push(""+this.getClass("target-attached")+"-"+e.top),e.left&&o.push(""+this.getClass("target-attached")+"-"+e.left),i=[],l=0,a=s.length;a>l;l++)n=s[l],i.push(""+this.getClass("element-attached")+"-"+n);for(r=0,f=s.length;f>r;r++)n=s[r],i.push(""+this.getClass("target-attached")+"-"+n);return h(function(){return null!=u._addAttachClasses?(A(u.element,u._addAttachClasses,i),A(u.target,u._addAttachClasses,i),u._addAttachClasses=void 0):void 0})},t.prototype.position=function(t){var e,o,n,h,a,d,c,m,b,y,w,C,O,T,x,A,E,S,W,M,z,B,P,_,F,L,Y,H,X,N,j,R,U,q,k,D=this;if(null==t&&(t=!0),this.enabled){for(this.clearCache(),M=r(this.targetAttachment,this.attachment),this.updateAttachClasses(this.attachment,M),e=this.cache("element-bounds",function(){return p(D.element)}),F=e.width,n=e.height,0===F&&0===n&&null!=this.lastSize?(N=this.lastSize,F=N.width,n=N.height):this.lastSize={width:F,height:n},P=B=this.cache("target-bounds",function(){return D.getTargetBounds()}),b=v(l(this.attachment),{width:F,height:n}),z=v(l(M),P),a=v(this.offset,{width:F,height:n}),d=v(this.targetOffset,P),b=s(b,a),z=s(z,d),h=B.left+z.left-b.left,_=B.top+z.top-b.top,j=i.modules,L=0,H=j.length;H>L;L++)if(c=j[L],x=c.position.call(this,{left:h,top:_,targetAttachment:M,targetPos:B,attachment:this.attachment,elementPos:e,offset:b,targetOffset:z,manualOffset:a,manualTargetOffset:d,scrollbarSize:S}),null!=x&&"object"==typeof x){if(x===!1)return!1;_=x.top,h=x.left}if(m={page:{top:_,left:h},viewport:{top:_-pageYOffset,bottom:pageYOffset-_-n+innerHeight,left:h-pageXOffset,right:pageXOffset-h-F+innerWidth}},document.body.scrollWidth>window.innerWidth&&(S=this.cache("scrollbar-size",g),m.viewport.bottom-=S.height),document.body.scrollHeight>window.innerHeight&&(S=this.cache("scrollbar-size",g),m.viewport.right-=S.width),(""!==(R=document.body.style.position)&&"static"!==R||""!==(U=document.body.parentElement.style.position)&&"static"!==U)&&(m.page.bottom=document.body.scrollHeight-_-n,m.page.right=document.body.scrollWidth-h-F),(null!=(q=this.options.optimizations)?q.moveElement:void 0)!==!1&&null==this.targetModifier){for(w=this.cache("target-offsetparent",function(){return u(D.target)}),T=this.cache("target-offsetparent-bounds",function(){return p(w)}),O=getComputedStyle(w),o=getComputedStyle(this.element),C=T,y={},k=["Top","Left","Bottom","Right"],Y=0,X=k.length;X>Y;Y++)W=k[Y],y[W.toLowerCase()]=parseFloat(O["border"+W+"Width"]);T.right=document.body.scrollWidth-T.left-C.width+y.right,T.bottom=document.body.scrollHeight-T.top-C.height+y.bottom,m.page.top>=T.top+y.top&&m.page.bottom>=T.bottom&&m.page.left>=T.left+y.left&&m.page.right>=T.right&&(E=w.scrollTop,A=w.scrollLeft,m.offset={top:m.page.top-T.top+E-y.top,left:m.page.left-T.left+A-y.left})}return this.move(m),this.history.unshift(m),this.history.length>3&&this.history.pop(),t&&f(),!0}},t.prototype.move=function(t){var e,o,i,n,s,l,r,f,p,d,g,c,m,b,v,y,w,C=this;if(null!=this.element.parentNode){f={};for(d in t){f[d]={};for(n in t[d]){for(i=!1,y=this.history,b=0,v=y.length;v>b;b++)if(r=y[b],!E(null!=(w=r[d])?w[n]:void 0,t[d][n])){i=!0;break}i||(f[d][n]=!0)}}e={top:"",left:"",right:"",bottom:""},p=function(t,o){var i,n,s;return(null!=(s=C.options.optimizations)?s.gpu:void 0)===!1?(t.top?e.top=""+o.top+"px":e.bottom=""+o.bottom+"px",t.left?e.left=""+o.left+"px":e.right=""+o.right+"px"):(t.top?(e.top=0,n=o.top):(e.bottom=0,n=-o.bottom),t.left?(e.left=0,i=o.left):(e.right=0,i=-o.right),e[x]="translateX("+Math.round(i)+"px) translateY("+Math.round(n)+"px)","msTransform"!==x?e[x]+=" translateZ(0)":void 0)},s=!1,(f.page.top||f.page.bottom)&&(f.page.left||f.page.right)?(e.position="absolute",p(f.page,t.page)):(f.viewport.top||f.viewport.bottom)&&(f.viewport.left||f.viewport.right)?(e.position="fixed",p(f.viewport,t.viewport)):null!=f.offset&&f.offset.top&&f.offset.left?(e.position="absolute",l=this.cache("target-offsetparent",function(){return u(C.target)}),u(this.element)!==l&&h(function(){return C.element.parentNode.removeChild(C.element),l.appendChild(C.element)}),p(f.offset,t.offset),s=!0):(e.position="absolute",p({top:!0,left:!0},t.page)),s||"BODY"===this.element.parentNode.tagName||(this.element.parentNode.removeChild(this.element),document.body.appendChild(this.element)),m={},c=!1;for(n in e)g=e[n],o=this.element.style[n],""===o||""===g||"top"!==n&&"left"!==n&&"bottom"!==n&&"right"!==n||(o=parseFloat(o),g=parseFloat(g)),o!==g&&(c=!0,m[n]=e[n]);return c?h(function(){return a(C.element.style,m)}):void 0}},t}(),i.position=C,this.Tether=a(S,i)}.call(this),function(){var t,e,o,i,n,s,l,r,h,a,f=[].indexOf||function(t){for(var e=0,o=this.length;o>e;e++)if(e in this&&this[e]===t)return e;return-1};a=this.Tether.Utils,l=a.getOuterSize,s=a.getBounds,r=a.getSize,i=a.extend,h=a.updateClasses,o=a.defer,e={left:"right",right:"left",top:"bottom",bottom:"top",middle:"middle"},t=["left","top","right","bottom"],n=function(e,o){var i,n,l,r,h,a,f;if("scrollParent"===o?o=e.scrollParent:"window"===o&&(o=[pageXOffset,pageYOffset,innerWidth+pageXOffset,innerHeight+pageYOffset]),o===document&&(o=o.documentElement),null!=o.nodeType)for(n=r=s(o),h=getComputedStyle(o),o=[n.left,n.top,r.width+n.left,r.height+n.top],i=a=0,f=t.length;f>a;i=++a)l=t[i],l=l[0].toUpperCase()+l.substr(1),"Top"===l||"Left"===l?o[i]+=parseFloat(h["border"+l+"Width"]):o[i]-=parseFloat(h["border"+l+"Width"]);return o},this.Tether.modules.push({position:function(e){var l,r,a,p,u,d,g,c,m,b,v,y,w,C,O,T,x,A,E,S,W,M,z,B,P,_,F,L,Y,H,X,N,j,R,U,q,k,D,Z,V,$,G,I,J,K,Q,te,ee=this;if(_=e.top,v=e.left,W=e.targetAttachment,!this.options.constraints)return!0;for(A=function(e){var o,i,n,s;for(ee.removeClass(e),s=[],i=0,n=t.length;n>i;i++)o=t[i],s.push(ee.removeClass(""+e+"-"+o));return s},V=this.cache("element-bounds",function(){return s(ee.element)}),b=V.height,F=V.width,0===F&&0===b&&null!=this.lastSize&&($=this.lastSize,F=$.width,b=$.height),z=this.cache("target-bounds",function(){return ee.getTargetBounds()}),M=z.height,B=z.width,S={},m={},r=[this.getClass("pinned"),this.getClass("out-of-bounds")],G=this.options.constraints,L=0,N=G.length;N>L;L++)c=G[L],c.outOfBoundsClass&&r.push(c.outOfBoundsClass),c.pinnedClass&&r.push(c.pinnedClass);for(Y=0,j=r.length;j>Y;Y++)for(g=r[Y],I=["left","top","right","bottom"],H=0,R=I.length;R>H;H++)E=I[H],r.push(""+g+"-"+E);for(l=[],S=i({},W),m=i({},this.attachment),J=this.options.constraints,X=0,U=J.length;U>X;X++){if(c=J[X],P=c.to,a=c.attachment,O=c.pin,null==a&&(a=""),f.call(a," ")>=0?(K=a.split(" "),d=K[0],u=K[1]):u=d=a,p=n(this,P),("target"===d||"both"===d)&&(_<p[1]&&"top"===S.top&&(_+=M,S.top="bottom"),_+b>p[3]&&"bottom"===S.top&&(_-=M,S.top="top")),"together"===d&&(_<p[1]&&"top"===S.top&&("bottom"===m.top?(_+=M,S.top="bottom",_+=b,m.top="top"):"top"===m.top&&(_+=M,S.top="bottom",_-=b,m.top="bottom")),_+b>p[3]&&"bottom"===S.top&&("top"===m.top?(_-=M,S.top="top",_-=b,m.top="bottom"):"bottom"===m.top&&(_-=M,S.top="top",_+=b,m.top="top")),"middle"===S.top&&(_+b>p[3]&&"top"===m.top?(_-=b,m.top="bottom"):_<p[1]&&"bottom"===m.top&&(_+=b,m.top="top"))),("target"===u||"both"===u)&&(v<p[0]&&"left"===S.left&&(v+=B,S.left="right"),v+F>p[2]&&"right"===S.left&&(v-=B,S.left="left")),"together"===u&&(v<p[0]&&"left"===S.left?"right"===m.left?(v+=B,S.left="right",v+=F,m.left="left"):"left"===m.left&&(v+=B,S.left="right",v-=F,m.left="right"):v+F>p[2]&&"right"===S.left?"left"===m.left?(v-=B,S.left="left",v-=F,m.left="right"):"right"===m.left&&(v-=B,S.left="left",v+=F,m.left="left"):"center"===S.left&&(v+F>p[2]&&"left"===m.left?(v-=F,m.left="right"):v<p[0]&&"right"===m.left&&(v+=F,m.left="left"))),("element"===d||"both"===d)&&(_<p[1]&&"bottom"===m.top&&(_+=b,m.top="top"),_+b>p[3]&&"top"===m.top&&(_-=b,m.top="bottom")),("element"===u||"both"===u)&&(v<p[0]&&"right"===m.left&&(v+=F,m.left="left"),v+F>p[2]&&"left"===m.left&&(v-=F,m.left="right")),"string"==typeof O?O=function(){var t,e,o,i;for(o=O.split(","),i=[],e=0,t=o.length;t>e;e++)C=o[e],i.push(C.trim());return i}():O===!0&&(O=["top","left","right","bottom"]),O||(O=[]),T=[],y=[],_<p[1]&&(f.call(O,"top")>=0?(_=p[1],T.push("top")):y.push("top")),_+b>p[3]&&(f.call(O,"bottom")>=0?(_=p[3]-b,T.push("bottom")):y.push("bottom")),v<p[0]&&(f.call(O,"left")>=0?(v=p[0],T.push("left")):y.push("left")),v+F>p[2]&&(f.call(O,"right")>=0?(v=p[2]-F,T.push("right")):y.push("right")),T.length)for(x=null!=(Q=this.options.pinnedClass)?Q:this.getClass("pinned"),l.push(x),D=0,q=T.length;q>D;D++)E=T[D],l.push(""+x+"-"+E);if(y.length)for(w=null!=(te=this.options.outOfBoundsClass)?te:this.getClass("out-of-bounds"),l.push(w),Z=0,k=y.length;k>Z;Z++)E=y[Z],l.push(""+w+"-"+E);(f.call(T,"left")>=0||f.call(T,"right")>=0)&&(m.left=S.left=!1),(f.call(T,"top")>=0||f.call(T,"bottom")>=0)&&(m.top=S.top=!1),(S.top!==W.top||S.left!==W.left||m.top!==this.attachment.top||m.left!==this.attachment.left)&&this.updateAttachClasses(m,S)}return o(function(){return h(ee.target,l,r),h(ee.element,l,r)}),{top:_,left:v}}})}.call(this),function(){var t,e,o,i;i=this.Tether.Utils,e=i.getBounds,o=i.updateClasses,t=i.defer,this.Tether.modules.push({position:function(i){var n,s,l,r,h,a,f,p,u,d,g,c,m,b,v,y,w,C,O,T,x,A,E,S,W,M=this;if(g=i.top,a=i.left,x=this.cache("element-bounds",function(){return e(M.element)}),h=x.height,c=x.width,d=this.getTargetBounds(),r=g+h,f=a+c,n=[],g<=d.bottom&&r>=d.top)for(A=["left","right"],m=0,w=A.length;w>m;m++)p=A[m],((E=d[p])===a||E===f)&&n.push(p);if(a<=d.right&&f>=d.left)for(S=["top","bottom"],b=0,C=S.length;C>b;b++)p=S[b],((W=d[p])===g||W===r)&&n.push(p);for(l=[],s=[],u=["left","top","right","bottom"],l.push(this.getClass("abutted")),v=0,O=u.length;O>v;v++)p=u[v],l.push(""+this.getClass("abutted")+"-"+p);for(n.length&&s.push(this.getClass("abutted")),y=0,T=n.length;T>y;y++)p=n[y],s.push(""+this.getClass("abutted")+"-"+p);return t(function(){return o(M.target,s,l),o(M.element,s,l)}),!0}})}.call(this),function(){this.Tether.modules.push({position:function(t){var e,o,i,n,s,l,r;return l=t.top,e=t.left,this.options.shift?(o=function(t){return"function"==typeof t?t.call(this,{top:l,left:e}):t},i=o(this.options.shift),"string"==typeof i?(i=i.split(" "),i[1]||(i[1]=i[0]),s=i[0],n=i[1],s=parseFloat(s,10),n=parseFloat(n,10)):(r=[i.top,i.left],s=r[0],n=r[1]),l+=s,e+=n,{top:l,left:e}):void 0}})}.call(this),this.Tether});
}
// File:js/lib/colorpicker.min.js

if( typeof importScripts !== 'function' ){
(function(w,l,r){function s(a,d){var b=d.getBoundingClientRect();return{x:Math.max(Math.min(a.clientX-b.left,d.clientWidth),0),y:Math.max(Math.min(a.clientY-b.top,d.clientHeight),0)}}function f(a,d,b){a=l.createElementNS("http://www.w3.org/2000/svg",a);for(var c in d)a.setAttribute(c,d[c]);Array.isArray(b)||(b=[b]);d=0;for(c=b[0]&&b.length||0;d<c;d++)a.appendChild(b[d]);return a}function k(a){var d,b,c,e,h=a.h%360/60;e=a.v*a.s;c=e*(1-Math.abs(h%2-1));d=b=a=a.v-e;h=~~h;d+=[e,c,0,0,c,e][h];b+=[c,e,
e,c,0,0][h];a+=[0,0,c,e,e,c][h];c=Math.floor(255*d);b=Math.floor(255*b);a=Math.floor(255*a);return{r:c,g:b,b:a,hex:"#"+(16777216|a|b<<8|c<<16).toString(16).slice(1)}}function m(a){var d=a.r,b=a.g,c=a.b;if(1<a.r||1<a.g||1<a.b)d/=255,b/=255,c/=255;var e;a=Math.max(d,b,c);e=a-Math.min(d,b,c);d=(0==e?0:a==d?(b-c)/e+(b<c?6:0):a==b?(c-d)/e+2:(d-b)/e+4)%6*60;return{h:d,s:0==e?0:e/a,v:a}}function x(a,d,b){return function(c){c=s(c,d);a.h=c.y/d.offsetHeight*360;var e=k({h:a.h,s:1,v:1}),h=k({h:a.h,s:a.s,v:a.v});
b.style.backgroundColor=e.hex;a.callback&&a.callback(h.hex,{h:a.h,s:a.s,v:a.v},{r:h.r,g:h.g,b:h.b},r,c)}}function y(a,d){return function(b){b=s(b,d);var c=d.offsetHeight;a.s=b.x/d.offsetWidth;a.v=(c-b.y)/c;c=k(a);a.callback&&a.callback(c.hex,{h:a.h,s:a.s,v:a.v},{r:c.r,g:c.g,b:c.b},b)}}function g(a,d,b){if(!(this instanceof g))return new g(a,d,b);this.h=0;this.v=this.s=1;b?(this.callback=b,this.pickerElement=d,this.slideElement=a):(a.innerHTML='<div class="picker-wrapper"><div class="picker"></div><div class="picker-indicator"></div></div><div class="slide-wrapper"><div class="slide"></div><div class="slide-indicator"></div></div>',
this.slideElement=a.getElementsByClassName("slide")[0],this.pickerElement=a.getElementsByClassName("picker")[0],this.slideIndicator=a.getElementsByClassName("slide-indicator")[0],this.pickerIndicator=a.getElementsByClassName("picker-indicator")[0],g.positionIndicators(this.slideIndicator,this.pickerIndicator,{x:0,y:0},{x:0,y:0}),this.callback=function(a,b,c,e,f){g.positionIndicators(this.slideIndicator,this.pickerIndicator,f,e);d(a,b,c)});this.slide_listener=x(this,this.slideElement,this.pickerElement);
this.picker_listener=y(this,this.pickerElement);b||this.fixIndicators(this.slideIndicator,this.pickerIndicator);a=t.cloneNode(!0);b=u.cloneNode(!0);var c=a.getElementById("gradient-hsv"),e=a.getElementsByTagName("rect")[0];c.id="gradient-hsv-"+n;e.setAttribute("fill","url(#"+c.id+")");c=[b.getElementById("gradient-black"),b.getElementById("gradient-white")];e=b.getElementsByTagName("rect");c[0].id="gradient-black-"+n;c[1].id="gradient-white-"+n;e[0].setAttribute("fill","url(#"+c[1].id+")");e[1].setAttribute("fill",
"url(#"+c[0].id+")");this.slideElement.appendChild(a);this.pickerElement.appendChild(b);n++;p(this.slideElement,this.slide_listener);p(this.pickerElement,this.picker_listener)}function p(a,d){function b(a){e&&d(a)}function c(a){b(a);e=!1;l.removeEventListener("mouseup",c,!1);l.removeEventListener("mousemove",b,!1)}var e=!1;a.addEventListener("mousedown",function(a){e=!0;a.preventDefault();l.addEventListener("mouseup",c,!0);l.addEventListener("mousemove",b,!1)},!1)}function q(a,d,b,c){a.h=d.h%360;
a.s=d.s;a.v=d.v;d=k(a);var e={y:a.h*a.slideElement.offsetHeight/360,x:0},f=a.pickerElement.offsetHeight,f={x:a.s*a.pickerElement.offsetWidth,y:f-a.v*f};a.pickerElement.style.backgroundColor=k({h:a.h,s:1,v:1}).hex;a.callback&&a.callback(c||d.hex,{h:a.h,s:a.s,v:a.v},b||{r:d.r,g:d.g,b:d.b},f,e);return a}var u,t,v={xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"};t=f("svg",v,[f("defs",{},f("linearGradient",{id:"gradient-hsv",x1:"0%",y1:"100%",x2:"0%",y2:"0%"},[f("stop",{offset:"0%",
"stop-color":"#FF0000","stop-opacity":"1"}),f("stop",{offset:"13%","stop-color":"#FF00FF","stop-opacity":"1"}),f("stop",{offset:"25%","stop-color":"#8000FF","stop-opacity":"1"}),f("stop",{offset:"38%","stop-color":"#0040FF","stop-opacity":"1"}),f("stop",{offset:"50%","stop-color":"#00FFFF","stop-opacity":"1"}),f("stop",{offset:"63%","stop-color":"#00FF40","stop-opacity":"1"}),f("stop",{offset:"75%","stop-color":"#0BED00","stop-opacity":"1"}),f("stop",{offset:"88%","stop-color":"#FFFF00","stop-opacity":"1"}),
f("stop",{offset:"100%","stop-color":"#FF0000","stop-opacity":"1"})])),f("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#gradient-hsv)"})]);u=f("svg",v,[f("defs",{},[f("linearGradient",{id:"gradient-black",x1:"0%",y1:"100%",x2:"0%",y2:"0%"},[f("stop",{offset:"0%","stop-color":"#000000","stop-opacity":"1"}),f("stop",{offset:"100%","stop-color":"#CC9A81","stop-opacity":"0"})]),f("linearGradient",{id:"gradient-white",x1:"0%",y1:"100%",x2:"100%",y2:"100%"},[f("stop",{offset:"0%","stop-color":"#FFFFFF",
"stop-opacity":"1"}),f("stop",{offset:"100%","stop-color":"#CC9A81","stop-opacity":"0"})])]),f("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#gradient-white)"}),f("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#gradient-black)"})]);var n=0;g.hsv2rgb=function(a){a=k(a);delete a.hex;return a};g.hsv2hex=function(a){return k(a).hex};g.rgb2hsv=m;g.rgb2hex=function(a){return k(m(a)).hex};g.hex2hsv=function(a){return m(g.hex2rgb(a))};g.hex2rgb=function(a){return{r:parseInt(a.substr(1,
2),16),g:parseInt(a.substr(3,2),16),b:parseInt(a.substr(5,2),16)}};g.prototype.setHsv=function(a){return q(this,a)};g.prototype.setRgb=function(a){return q(this,m(a),a)};g.prototype.setHex=function(a){return q(this,g.hex2hsv(a),r,a)};g.positionIndicators=function(a,d,b,c){b&&(a.style.top=b.y-a.offsetHeight/2+"px");c&&(d.style.top=c.y-d.offsetHeight/2+"px",d.style.left=c.x-d.offsetWidth/2+"px")};g.prototype.fixIndicators=function(a,d){p(a,this.slide_listener);p(d,this.picker_listener)};w.ColorPicker=
g})(window,window.document);
}
// File:js/lib/vlist.min.js

function VirtualList(a){var b=a&&a.w+"px"||"100%",c=a&&a.h+"px"||"100%",d=this.itemHeight=a.itemHeight;this.items=a.items;this.generatorFn=a.generatorFn;this.totalRows=a.totalRows||a.items&&a.items.length;var e=VirtualList.createScroller(d*this.totalRows);this.container=VirtualList.createContainer(b,c);this.container.appendChild(e);var f=Math.ceil(a.h/d);this.cachedItemsLen=3*f;this._renderChunk(this.container,0);var g=this,h,l=f*d,k=0;this.rmNodeInterval=setInterval(function(){if(100<Date.now()-
k)for(var a=document.querySelectorAll('[data-rm="1"]'),b=0,c=a.length;b<c;b++)g.container.removeChild(a[b])},300);this.container.addEventListener("scroll",function(a){var b=a.target.scrollTop;if(!h||Math.abs(b-h)>l){var c=parseInt(b/d)-f;g._renderChunk(g.container,0>c?0:c);h=b}k=Date.now();a.preventDefault&&a.preventDefault()})}
VirtualList.prototype.createRow=function(a){var b;if(this.generatorFn)b=this.generatorFn(a);else if(this.items)if("string"===typeof this.items[a]){var c=document.createTextNode(this.items[a]);b=document.createElement("div");b.style.height=this.itemHeight+"px";b.appendChild(c)}else b=this.items[a];b.classList.add("vrow");b.style.position="absolute";b.style.top=a*this.itemHeight+"px";return b};
VirtualList.prototype._renderChunk=function(a,b){var c=b+this.cachedItemsLen;c>this.totalRows&&(c=this.totalRows);for(var d=document.createDocumentFragment(),e=b;e<c;e++)d.appendChild(this.createRow(e));c=1;for(e=a.childNodes.length;c<e;c++)a.childNodes[c].style.display="none",a.childNodes[c].setAttribute("data-rm","1");a.appendChild(d)};
VirtualList.createContainer=function(a,b){var c=document.createElement("div");c.style.width=a;c.style.height=b;c.style.overflow="auto";c.style.position="relative";c.style.padding=0;return c};VirtualList.createScroller=function(a){var b=document.createElement("div");b.style.opacity=0;b.style.position="absolute";b.style.top=0;b.style.left=0;b.style.width="1px";b.style.height=a+"px";return b};

// File:js/build/gui-no-libs.min.js

// https://github.com/arose/ngl/ LICENSE
var UI={Element:function(){}};
UI.Element.prototype={setId:function(a){this.dom.id=a;return this},setTitle:function(a){this.dom.title=a;return this},setClass:function(a){this.dom.className=a;return this},setStyle:function(a,b){for(var c=0;c<b.length;c++)this.dom.style[a]=b[c]},getStyle:function(a){return this.dom.style[a]},getBox:function(){return this.dom.getBoundingClientRect()},setDisabled:function(a){this.dom.disabled=a;return this},setTextContent:function(a){this.dom.textContent=a;return this},dispose:function(){this.dom.parentNode.removeChild(this.dom)}};
var properties="position left top right bottom width height border borderLeft borderTop borderRight borderBottom borderColor display overflow margin marginLeft marginTop marginRight marginBottom padding paddingLeft paddingTop paddingRight paddingBottom color backgroundColor opacity fontSize fontWeight fontStyle fontFamily textTransform cursor verticalAlign clear float zIndex minHeight maxHeight minWidth maxWidth wordBreak wordWrap spellcheck lineHeight whiteSpace textOverflow".split(" ");
properties.forEach(function(a){var b=a.substr(0,1).toUpperCase()+a.substr(1,a.length);UI.Element.prototype["set"+b]=function(){this.setStyle(a,arguments);return this};UI.Element.prototype["get"+b]=function(){return this.getStyle(a)}});var events="KeyUp KeyDown KeyPress MouseOver MouseOut Click Change Input".split(" ");events.forEach(function(a){UI.Element.prototype["on"+a]=function(b){this.dom.addEventListener(a.toLowerCase(),b.bind(this),!1);return this}});
UI.Panel=function(){UI.Element.call(this);var a=document.createElement("div");a.className="Panel";this.dom=a;return this};UI.Panel.prototype=Object.create(UI.Element.prototype);UI.Panel.prototype.add=function(){for(var a=0;a<arguments.length;a++)this.dom.appendChild(arguments[a].dom);return this};UI.Panel.prototype.remove=function(){for(var a=0;a<arguments.length;a++)this.dom.removeChild(arguments[a].dom);return this};
UI.Panel.prototype.clear=function(){for(;this.dom.children.length;)this.dom.removeChild(this.dom.lastChild);return this};
UI.CollapsiblePanel=function(){UI.Panel.call(this);this.dom.className="Panel CollapsiblePanel";this.button=document.createElement("div");this.button.className="CollapsiblePanelButton";this.dom.appendChild(this.button);var a=this;this.button.addEventListener("click",function(b){a.toggle()},!1);this.content=document.createElement("div");this.content.className="CollapsibleContent";this.dom.appendChild(this.content);this.isCollapsed=!1;return this};UI.CollapsiblePanel.prototype=Object.create(UI.Panel.prototype);
UI.CollapsiblePanel.prototype.addStatic=function(){for(var a=0;a<arguments.length;a++)this.dom.insertBefore(arguments[a].dom,this.content);return this};UI.CollapsiblePanel.prototype.removeStatic=UI.Panel.prototype.remove;UI.CollapsiblePanel.prototype.clearStatic=function(){this.dom.childNodes.forEach(function(a){a!==this.content&&this.dom.removeChild(a)})};UI.CollapsiblePanel.prototype.add=function(){for(var a=0;a<arguments.length;a++)this.content.appendChild(arguments[a].dom);return this};
UI.CollapsiblePanel.prototype.remove=function(){for(var a=0;a<arguments.length;a++)this.content.removeChild(arguments[a].dom);return this};UI.CollapsiblePanel.prototype.clear=function(){for(;this.content.children.length;)this.content.removeChild(this.content.lastChild)};UI.CollapsiblePanel.prototype.toggle=function(){this.setCollapsed(!this.isCollapsed)};UI.CollapsiblePanel.prototype.collapse=function(){this.setCollapsed(!0)};UI.CollapsiblePanel.prototype.expand=function(){this.setCollapsed(!1)};
UI.CollapsiblePanel.prototype.setCollapsed=function(a){a?this.dom.classList.add("collapsed"):this.dom.classList.remove("collapsed");this.isCollapsed=a};UI.Text=function(a){UI.Element.call(this);var b=document.createElement("span");b.className="Text";b.style.cursor="default";b.style.display="inline-block";b.style.verticalAlign="middle";this.dom=b;this.setValue(a);return this};UI.Text.prototype=Object.create(UI.Element.prototype);
UI.Text.prototype.setValue=function(a){void 0!==a&&(this.dom.textContent=a);return this};UI.Input=function(){UI.Element.call(this);var a=document.createElement("input");a.className="Input";a.style.padding="2px";a.style.border="1px solid #ccc";a.addEventListener("keydown",function(a){a.stopPropagation()},!1);this.dom=a;return this};UI.Input.prototype=Object.create(UI.Element.prototype);UI.Input.prototype.getValue=function(){return this.dom.value};
UI.Input.prototype.setValue=function(a){this.dom.value=a;return this};UI.TextArea=function(){UI.Element.call(this);var a=document.createElement("textarea");a.className="TextArea";a.style.padding="2px";a.style.border="1px solid #ccc";a.addEventListener("keydown",function(a){a.stopPropagation()},!1);this.dom=a;return this};UI.TextArea.prototype=Object.create(UI.Element.prototype);UI.TextArea.prototype.getValue=function(){return this.dom.value};
UI.TextArea.prototype.setValue=function(a){this.dom.value=a;return this};UI.Select=function(){UI.Element.call(this);var a=document.createElement("select");a.className="Select";a.style.width="64px";a.style.height="16px";a.style.border="0px";a.style.padding="0px";this.dom=a;return this};UI.Select.prototype=Object.create(UI.Element.prototype);UI.Select.prototype.setMultiple=function(a){this.dom.multiple=a;return this};
UI.Select.prototype.setOptions=function(a){for(var b=this.dom.value;0<this.dom.children.length;)this.dom.removeChild(this.dom.firstChild);for(var c in a){var d=document.createElement("option");d.value=c;d.innerHTML=a[c];this.dom.appendChild(d)}this.dom.value=b;return this};UI.Select.prototype.getValue=function(){return this.dom.value};UI.Select.prototype.setValue=function(a){this.dom.value=a;return this};
UI.FancySelect=function(){UI.Element.call(this);var a=this,b=document.createElement("div");b.className="FancySelect";b.tabIndex=0;var c=document.createEvent("HTMLEvents");c.initEvent("change",!0,!0);b.addEventListener("keydown",function(a){switch(a.keyCode){case 38:case 40:a.preventDefault(),a.stopPropagation()}},!1);b.addEventListener("keyup",function(b){switch(b.keyCode){case 38:case 40:a.selectedIndex+=38==b.keyCode?-1:1,0<=a.selectedIndex&&a.selectedIndex<a.options.length&&(a.setValue(a.options[a.selectedIndex].value),
a.dom.dispatchEvent(c))}},!1);this.dom=b;this.options=[];this.selectedIndex=-1;this.selectedValue=null;return this};UI.FancySelect.prototype=Object.create(UI.Element.prototype);
UI.FancySelect.prototype.setOptions=function(a){var b=this,c=document.createEvent("HTMLEvents");for(c.initEvent("change",!0,!0);0<b.dom.children.length;)b.dom.removeChild(b.dom.firstChild);b.options=[];for(var d=0;d<a.length;d++){var e=a[d],f=document.createElement("div");f.className="option";f.innerHTML=e.html;f.value=e.value;b.dom.appendChild(f);b.options.push(f);f.addEventListener("click",function(a){b.setValue(this.value);b.dom.dispatchEvent(c)},!1)}return b};
UI.FancySelect.prototype.getValue=function(){return this.selectedValue};UI.FancySelect.prototype.setValue=function(a){for(var b=0;b<this.options.length;b++){var c=this.options[b];if(c.value===a){c.classList.add("active");var d=c.offsetTop-this.dom.offsetTop,c=d+c.offsetHeight-this.dom.offsetHeight;this.dom.scrollTop>d?this.dom.scrollTop=d:this.dom.scrollTop<c&&(this.dom.scrollTop=c);this.selectedIndex=b}else c.classList.remove("active")}this.selectedValue=a;return this};
UI.Checkbox=function(a){UI.Element.call(this);var b=document.createElement("input");b.className="Checkbox";b.type="checkbox";this.dom=b;this.setValue(a);return this};UI.Checkbox.prototype=Object.create(UI.Element.prototype);UI.Checkbox.prototype.getValue=function(){return this.dom.checked};UI.Checkbox.prototype.setValue=function(a){void 0!==a&&(this.dom.checked=a);return this};
UI.Color=function(){UI.Element.call(this);var a=document.createElement("input");a.className="Color";a.style.width="64px";a.style.height="16px";a.style.border="0px";a.style.padding="0px";a.style.backgroundColor="transparent";try{a.type="color",a.value="#ffffff"}catch(b){}this.dom=a;return this};UI.Color.prototype=Object.create(UI.Element.prototype);UI.Color.prototype.getValue=function(){return this.dom.value};UI.Color.prototype.getHexValue=function(){return parseInt(this.dom.value.substr(1),16)};
UI.Color.prototype.setValue=function(a){this.dom.value=a;return this};UI.Color.prototype.setHexValue=function(a){this.dom.value="#"+("000000"+a.toString(16)).slice(-6);return this};
UI.Number=function(a){UI.Element.call(this);var b=this,c=document.createElement("input");c.className="Number";c.value="0.00";c.addEventListener("keydown",function(a){a.stopPropagation();13===a.keyCode&&c.blur()},!1);this.min=-Infinity;this.max=Infinity;this.precision=2;this.step=1;this.dom=c;this.setValue(a);var d=document.createEvent("HTMLEvents");d.initEvent("change",!0,!0);var e=0,f=0,g=[0,0],h=[0,0],l=function(a){var k=c.value;g=[a.clientX,a.clientY];e+=g[0]-h[0]-(g[1]-h[1]);var n=50;a.shiftKey&&
(n=5);a.ctrlKey&&(n=500);c.value=Math.min(b.max,Math.max(b.min,f+e/n*b.step)).toFixed(b.precision);k!==c.value&&c.dispatchEvent(d);h=[a.clientX,a.clientY]},k=function(a){document.removeEventListener("mousemove",l,!1);document.removeEventListener("mouseup",k,!1);2>Math.abs(e)&&(c.focus(),c.select())};c.addEventListener("mousedown",function(a){a.preventDefault();e=0;f=parseFloat(c.value);h=[a.clientX,a.clientY];document.addEventListener("mousemove",l,!1);document.addEventListener("mouseup",k,!1)},!1);
c.addEventListener("change",function(a){a=parseFloat(c.value);c.value=!1===isNaN(a)?a:0},!1);c.addEventListener("focus",function(a){c.style.backgroundColor="";c.style.borderColor="#ccc";c.style.cursor=""},!1);c.addEventListener("blur",function(a){c.style.backgroundColor="transparent";c.style.borderColor="transparent";c.style.cursor="col-resize"},!1);return this};UI.Number.prototype=Object.create(UI.Element.prototype);UI.Number.prototype.getValue=function(){return parseFloat(this.dom.value)};
UI.Number.prototype.setValue=function(a){void 0!==a&&(this.dom.value=a.toFixed(this.precision));return this};UI.Number.prototype.setRange=function(a,b){this.min=a;this.max=b;return this};UI.Number.prototype.setPrecision=function(a){this.precision=a;return this};
UI.Integer=function(a){UI.Element.call(this);var b=this,c=document.createElement("input");c.className="Number";c.value="0.00";c.addEventListener("keydown",function(a){a.stopPropagation()},!1);this.min=-Infinity;this.max=Infinity;this.step=1;this.dom=c;this.setValue(a);var d=document.createEvent("HTMLEvents");d.initEvent("change",!0,!0);var e=0,f=0,g=[0,0],h=[0,0],l=function(a){var k=c.value;g=[a.clientX,a.clientY];e+=g[0]-h[0]-(g[1]-h[1]);var n=50;a.shiftKey&&(n=5);a.ctrlKey&&(n=500);c.value=Math.min(b.max,
Math.max(b.min,f+e/n*b.step))|0;k!==c.value&&c.dispatchEvent(d);h=[a.clientX,a.clientY]},k=function(a){document.removeEventListener("mousemove",l,!1);document.removeEventListener("mouseup",k,!1);2>Math.abs(e)&&(c.focus(),c.select())};c.addEventListener("mousedown",function(a){a.preventDefault();e=0;f=parseFloat(c.value);h=[a.clientX,a.clientY];document.addEventListener("mousemove",l,!1);document.addEventListener("mouseup",k,!1)},!1);c.addEventListener("change",function(a){a=parseInt(c.value);!1===
isNaN(a)&&(c.value=a)},!1);c.addEventListener("focus",function(a){c.style.backgroundColor="";c.style.borderColor="#ccc";c.style.cursor=""},!1);c.addEventListener("blur",function(a){c.style.backgroundColor="transparent";c.style.borderColor="transparent";c.style.cursor="col-resize"},!1);return this};UI.Integer.prototype=Object.create(UI.Element.prototype);UI.Integer.prototype.getValue=function(){return parseInt(this.dom.value)};
UI.Integer.prototype.setValue=function(a){void 0!==a&&(this.dom.value=a|0);return this};UI.Integer.prototype.setRange=function(a,b){this.min=a;this.max=b;return this};UI.Break=function(){UI.Element.call(this);var a=document.createElement("br");a.className="Break";this.dom=a;return this};UI.Break.prototype=Object.create(UI.Element.prototype);UI.HorizontalRule=function(){UI.Element.call(this);var a=document.createElement("hr");a.className="HorizontalRule";this.dom=a;return this};
UI.HorizontalRule.prototype=Object.create(UI.Element.prototype);UI.Button=function(a){UI.Element.call(this);var b=document.createElement("button");b.className="Button";this.dom=b;this.dom.textContent=a;return this};UI.Button.prototype=Object.create(UI.Element.prototype);UI.Button.prototype.setLabel=function(a){this.dom.textContent=a;return this};
UI.MenubarHelper={createMenuContainer:function(a,b){var c=new UI.Panel,d=new UI.Panel;d.setClass("title");d.setTextContent(a);d.setMargin("0px");d.setPadding("8px");c.setClass("menu");c.add(d);c.add(b);return c},createOption:function(a,b,c){var d=new UI.Panel;d.setClass("option");c?(d.add((new UI.Icon(c)).setWidth("20px")),d.add(new UI.Text(a))):d.setTextContent(a);d.onClick(b);return d},createOptionsPanel:function(a){var b=new UI.Panel;b.setClass("options");a.forEach(function(a){b.add(a)});return b},
createInput:function(a,b){var c=(new UI.Panel).setClass("option"),d=(new UI.Text).setWidth("70px").setValue(a),e=(new UI.Input).setWidth("40px").onKeyDown(b);c.add(d);c.add(e);return c},createCheckbox:function(a,b,c){var d=(new UI.Panel).setClass("option");a=(new UI.Text).setWidth("70px").setValue(a);b=(new UI.Checkbox).setValue(b).onClick(c);d.add(b);d.add(a);return d},createDivider:function(){return new UI.HorizontalRule}};
UI.Html=function(a){UI.Element.call(this);var b=document.createElement("span");b.className="Html";b.style.cursor="default";b.style.display="inline-block";b.style.verticalAlign="middle";this.dom=b;this.setValue(a);return this};UI.Html.prototype=Object.create(UI.Element.prototype);UI.Html.prototype.setValue=function(a){void 0!==a&&(this.dom.innerHTML=a);return this};
UI.EllipsisText=function(a){UI.Text.call(this,a);this.setWhiteSpace("nowrap");this.setOverflow("hidden");this.setTextOverflow("ellipsis");return this};UI.EllipsisText.prototype=Object.create(UI.Text.prototype);UI.EllipsisText.prototype.setValue=function(a){void 0!==a&&(this.dom.textContent=a,this.setTitle(a));return this};
UI.EllipsisMultilineText=function(a){UI.Element.call(this);var b=document.createElement("span");b.className="EllipsisMultilineText";b.style.cursor="default";b.style.display="inline-block";b.style.verticalAlign="middle";var c=document.createElement("p");b.appendChild(c);this.dom=b;this.content=c;this.setValue(a);return this};UI.EllipsisMultilineText.prototype=Object.create(UI.Element.prototype);
UI.EllipsisMultilineText.prototype.setValue=function(a){void 0!==a&&(this.content.textContent=a,this.setTitle(a));return this};UI.OverlayPanel=function(){UI.Panel.call(this);this.dom.className="Panel OverlayPanel";this.dom.tabIndex=0;return this};UI.OverlayPanel.prototype=Object.create(UI.Panel.prototype);UI.OverlayPanel.prototype.attach=function(a){a=a||document.body;a.appendChild(this.dom);return this};
UI.Icon=function(a){UI.Panel.call(this);var b=document.createElement("span");b.className="Icon fa";this.dom=b;a&&this.addClass.apply(this,arguments);return this};UI.Icon.prototype=Object.create(UI.Panel.prototype);UI.Icon.prototype.hasClass=function(a){return this.dom.classList.contains("fa-"+a)};UI.Icon.prototype.addClass=function(a){for(var b=0;b<arguments.length;b++)this.dom.classList.add("fa-"+arguments[b]);return this};
UI.Icon.prototype.setClass=function(a){this.dom.className="Icon fa";for(var b=0;b<arguments.length;b++)this.dom.classList.add("fa-"+arguments[b]);return this};UI.Icon.prototype.removeClass=function(a){for(var b=0;b<arguments.length;b++)this.dom.classList.remove("fa-"+arguments[b]);return this};UI.Icon.prototype.switchClass=function(a,b){this.removeClass(b,a);this.addClass(a);return this};UI.ToggleIcon=function(a,b,c){UI.Icon.call(this,a?b:c);this.value=a;this.classTrue=b;this.classFalse=c;return this};
UI.ToggleIcon.prototype=Object.create(UI.Icon.prototype);UI.ToggleIcon.prototype.setValue=function(a){(this.value=a)?this.switchClass(this.classTrue,this.classFalse):this.switchClass(this.classFalse,this.classTrue);return this};UI.ToggleIcon.prototype.getValue=function(){return this.value};
UI.DisposeIcon=function(){UI.Icon.call(this,"trash-o");var a=!1,b=this;this.setTitle("delete");this.setCursor("pointer");this.onClick(function(){!0===a?"function"===typeof b.disposeFunction&&b.disposeFunction():(b.setColor("rgb(178, 34, 34)"),b.dom.classList.add("deleteInfo"),a=!0,setTimeout(function(){b.setColor("#888");b.dom.classList.remove("deleteInfo");a=!1},1500))});return this};UI.DisposeIcon.prototype=Object.create(UI.Icon.prototype);
UI.DisposeIcon.prototype.setDisposeFunction=function(a){this.disposeFunction=a;return this};UI.Progress=function(a,b){UI.Element.call(this);var c=document.createElement("progress");c.className="Progress";c.max=a||1;void 0!==b&&(c.value=b);this.dom=c;return this};UI.Progress.prototype=Object.create(UI.Element.prototype);UI.Progress.prototype.getValue=function(){return this.dom.value};UI.Progress.prototype.setValue=function(a){this.dom.value=a;return this};
UI.Progress.prototype.setMax=function(a){this.dom.max=a;return this};UI.Progress.prototype.setIndeterminate=function(){this.dom.removeAttribute("value");return this};UI.Range=function(a,b,c,d){UI.Element.call(this);var e=document.createElement("input");e.className="Range";e.type="range";e.min=a;e.max=b;e.value=c;e.step=d;this.dom=e;this.dom.textContent=c;this.onInput(function(){this.dom.setAttribute("value",this.getValue())});return this};UI.Range.prototype=Object.create(UI.Element.prototype);
UI.Range.prototype.getValue=function(){return this.dom.value};UI.Range.prototype.setRange=function(a,b){this.dom.min=a;this.dom.max=b;return this};UI.Range.prototype.setValue=function(a){this.dom.value=a;return this};UI.Range.prototype.setStep=function(a){this.dom.step=a;return this};
UI.AdaptiveTextArea=function(){UI.Element.call(this);var a=document.createElement("div");a.className="AdaptiveTextAreaContainer";var b=document.createElement("textarea");b.className="AdaptiveTextArea";var c=document.createElement("div");c.className="AdaptiveTextAreaSize";a.appendChild(b);a.appendChild(c);b.addEventListener("input",function(a){c.innerHTML=b.value+"\n"},!1);this.textarea=b;this.size=c;this.dom=a;return this};UI.AdaptiveTextArea.prototype=Object.create(UI.Element.prototype);
UI.AdaptiveTextArea.prototype.getValue=function(){return this.textarea.value};UI.AdaptiveTextArea.prototype.setValue=function(a){this.textarea.value=a;this.size.innerHTML=a+"\n";return this};UI.AdaptiveTextArea.prototype.setSpellcheck=function(a){this.textarea.spellcheck=a;return this};UI.AdaptiveTextArea.prototype.setBackgroundColor=function(a){this.textarea.style.backgroundColor=a;return this};
UI.VirtualList=function(a){UI.Element.call(this);var b=document.createElement("div");b.className="VirtualList";this.dom=b;this._items=a;this.list=new VirtualList({w:280,h:300,itemHeight:31,totalRows:a.length,generatorFn:function(b){var d=new UI.Panel;b=(new UI.Text).setColor("orange").setMarginLeft("10px").setValue("ITEM "+a[b]);d.add(b);return d.dom}});console.log(this.dom);console.log(this.list);this.dom.appendChild(this.list.container);return this};
UI.PopupMenu=function(a,b,c){c=c||"scrollParent";UI.Panel.call(this);var d=new UI.Icon(a||"bars"),e=(new UI.OverlayPanel).setDisplay("none").attach(this.dom);a=(new UI.Panel).setBorderBottom("1px solid #555").setMarginBottom("10px").setHeight("25px");a.add((new UI.Icon("times")).setFloat("right").setCursor("pointer").onClick(function(){this.setMenuDisplay("none")}.bind(this))).add(new UI.Text(b));e.add(a);var f;d.setTitle("menu");d.setCursor("pointer");d.onClick(function(a){"block"===e.getDisplay()?
(this.setMenuDisplay("none"),f.destroy()):(this.setMenuDisplay("block"),f=new Tether({element:e.dom,target:d.dom,attachment:"top right",targetAttachment:"top left",offset:"0px 5px",constraints:[{to:c,attachment:"element",pin:["top","bottom"]}]}),f.position())}.bind(this));this.add(d);this.setClass("").setDisplay("inline");this.icon=d;this.panel=e;this.entryLabelWidth="100px";return this};UI.PopupMenu.prototype=Object.create(UI.Panel.prototype);
UI.PopupMenu.prototype.addEntry=function(a,b){this.panel.add((new UI.Text(a)).setWidth(this.entryLabelWidth)).add(b||new UI.Panel).add(new UI.Break);return this};UI.PopupMenu.prototype.setEntryLabelWidth=function(a){this.entryLabelWidth=a;return this};UI.PopupMenu.prototype.setMenuDisplay=function(a){this.panel.setDisplay(a);"none"!==a&&this.panel.dom.focus();return this};UI.PopupMenu.prototype.setIconTitle=function(a){this.icon.setTitle(a);return this};
UI.PopupMenu.prototype.dispose=function(){this.panel.dispose();UI.Element.prototype.dispose.call(this)};
UI.CollapsibleIconPanel=function(a,b){UI.Panel.call(this);this.dom.className="Panel CollapsiblePanel";void 0===a&&(a=a||"chevron-right",b=b||"chevron-down");this.button=(new UI.Icon(a)).setTitle("expand/collapse").setCursor("pointer").setWidth("12px").setMarginRight("6px");this.addStatic(this.button);var c=this;this.button.dom.addEventListener("click",function(a){c.toggle()},!1);this.content=document.createElement("div");this.content.className="CollapsibleContent";this.dom.appendChild(this.content);
this.isCollapsed=!1;this.iconClass1=a;this.iconClass2=b;return this};UI.CollapsibleIconPanel.prototype=Object.create(UI.CollapsiblePanel.prototype);
UI.CollapsibleIconPanel.prototype.setCollapsed=function(a){a?(this.dom.classList.add("collapsed"),this.iconClass2?this.button.switchClass(this.iconClass2,this.iconClass1):this.button.addClass("rotate-90")):(this.dom.classList.remove("collapsed"),this.iconClass2?this.button.switchClass(this.iconClass1,this.iconClass2):this.button.removeClass("rotate-90"));this.isCollapsed=a};
UI.ColorPicker=function(){var a=this;UI.Panel.call(this);this.slideWrapper=(new UI.Panel).setClass("slide-wrapper");this.sliderIndicator=(new UI.Panel).setClass("slide-indicator");this.slider=(new UI.Panel).setClass("slide").setWidth("25px").setHeight("80px");this.slideWrapper.add(this.slider,this.sliderIndicator);this.pickerWrapper=(new UI.Panel).setClass("picker-wrapper");this.pickerIndicator=(new UI.Panel).setClass("picker-indicator");this.picker=(new UI.Panel).setClass("picker").setWidth("130px").setHeight("80px");
this.pickerWrapper.add(this.picker,this.pickerIndicator);var b=document.createEvent("Event");b.initEvent("change",!0,!0);this.add(this.pickerWrapper,this.slideWrapper);this.colorPicker=ColorPicker(this.slider.dom,this.picker.dom,function(c,d,e,f,g){!f&&g&&.05>d.s?(d.s=.5,d.v=.7,a.colorPicker.setHsv(d)):(ColorPicker.positionIndicators(a.sliderIndicator.dom,a.pickerIndicator.dom,g,f),a.hex=c,a.hsv=d,a.rgb=e,a._settingValue||a.dom.dispatchEvent(b))});this.colorPicker.fixIndicators(this.sliderIndicator.dom,
this.pickerIndicator.dom);return this};UI.ColorPicker.prototype=Object.create(UI.Panel.prototype);UI.ColorPicker.prototype.setValue=function(a){a!==this.hex&&(this._settingValue=!0,this.colorPicker.setHex(a),this._settingValue=!1);return this};UI.ColorPicker.prototype.getValue=function(){return this.hex};
UI.ColorPopupMenu=function(){var a=this;UI.Panel.call(this);this.iconText=(new UI.Text("")).setCursor("pointer").setClass("fa-stack-1x").setFontFamily("Arial, sans-serif").setColor("#111");this.iconSquare=new UI.Icon("square","stack-1x");this.menu=new UI.PopupMenu("stack","Color");this.menu.icon.setTitle("color").setWidth("1em").setHeight("1em").setLineHeight("1em").add(this.iconSquare).add(this.iconText);var b=document.createEvent("Event");b.initEvent("change",!0,!0);NGL.ColorFactory.signals.typesChanged.add(function(){this.schemeSelector.setOptions(NGL.ColorFactory.getTypes())},
this);this.schemeSelector=(new UI.Select).setColor("#444").setWidth("").setOptions(NGL.ColorFactory.getTypes()).onChange(function(){a.setScheme(a.schemeSelector.getValue());"color"!==a.schemeSelector.getValue()&&a.menu.setMenuDisplay("none");a.dom.dispatchEvent(b)});this.colorInput=(new UI.Input).onChange(function(){a.setScheme("color");a.setColor(a.colorInput.getValue());a.dom.dispatchEvent(b)});this.colorPicker=(new UI.ColorPicker).setDisplay("inline-block").onChange(function(c){a.setScheme("color");
a.setColor(a.colorPicker.getValue());a.dom.dispatchEvent(b)});this.menu.addEntry("Scheme",this.schemeSelector).addEntry("Input",this.colorInput).addEntry("Picker",this.colorPicker);this.add(this.menu);this.setClass("").setDisplay("inline");return this};UI.ColorPopupMenu.prototype=Object.create(UI.Panel.prototype);UI.ColorPopupMenu.prototype.setScheme=function(a){a=a||"";this.iconText.setValue(a.charAt(0).toUpperCase());this.schemeSelector.setValue(a);"color"!==a&&this.setColor("#888888");return this};
UI.ColorPopupMenu.prototype.getScheme=function(){return this.schemeSelector.getValue()};
UI.ColorPopupMenu.prototype.setColor=function(){var a=new THREE.Color;return function(b){a.set(b);b="#"+a.getHexString();this.colorInput.setBackgroundColor(b).setValue(b);this.colorPicker.setValue(b);this.iconSquare.setColor(b);130<Math.sqrt(255*a.r*a.r*61.455+255*a.g*a.g*255*.691+255*a.b*a.b*17.34)?(this.iconText.setColor("#000000"),this.colorInput.setColor("#000000")):(this.iconText.setColor("#FFFFFF"),this.colorInput.setColor("#FFFFFF"));return this}}();UI.ColorPopupMenu.prototype.getColor=function(){return this.colorInput.getValue()};
UI.ColorPopupMenu.prototype.getValue=function(){return this.colorInput.getValue()};UI.ColorPopupMenu.prototype.setValue=function(a){parseInt(a)===a?(this.setColor(a),this.setScheme("color")):this.setScheme(a);return this};UI.ColorPopupMenu.prototype.dispose=function(){this.menu.dispose();UI.Panel.prototype.dispose.call(this)};
UI.SelectionInput=function(a){UI.AdaptiveTextArea.call(this);this.setSpellcheck(!1);if(!(a instanceof NGL.Selection))return NGL.error("UI.SelectionInput: not a selection",a),this;this.setValue(a.string);this.selection=a;var b=this;a.signals.stringChanged.add(function(a){b.setValue(a)});this.onEnter();return this};UI.SelectionInput.prototype=Object.create(UI.AdaptiveTextArea.prototype);UI.SelectionInput.prototype.setValue=function(a){UI.AdaptiveTextArea.prototype.setValue.call(this,a);return this};
UI.SelectionInput.prototype.onEnter=function(a){var b=this;this.onKeyPress(function(c){var d=b.getValue(),e=String.fromCharCode(c.which);13===c.keyCode?(c.preventDefault(),(new NGL.Selection(d)).selection.error?b.setBackgroundColor("tomato"):("function"===typeof a?a(d):b.selection.setString(d),b.setBackgroundColor("white"))):b.selection.string!==d+e?b.setBackgroundColor("skyblue"):b.setBackgroundColor("white")});this.onKeyUp(function(a){a=b.getValue();(new NGL.Selection(a)).selection.error?b.setBackgroundColor("tomato"):
b.selection.string===b.getValue()?b.setBackgroundColor("white"):b.setBackgroundColor("skyblue")});return this};UI.SelectionPanel=function(a){UI.Panel.call(this);this.icon=(new UI.Icon("filter")).setTitle("filter selection").addClass("lg").setMarginRight("10px");this.input=new UI.SelectionInput(a);this.add(this.icon,this.input);return this};UI.SelectionPanel.prototype=Object.create(UI.Panel.prototype);UI.SelectionPanel.prototype.setInputWidth=function(a){this.input.setWidth(a);return this};
UI.ComponentPanel=function(a){UI.Panel.call(this);var b=a.stage,c=a.signals;c.nameChanged.add(function(a){d.setValue(NGL.unicodeHelper(a))});c.visibilityChanged.add(function(a){e.setValue(a)});c.disposed.add(function(){g.dispose()});var d=(new UI.EllipsisText(NGL.unicodeHelper(a.name))).setWidth("100px"),e=(new UI.ToggleIcon(a.visible,"eye","eye-slash")).setTitle("hide/show").setCursor("pointer").setMarginLeft("25px").onClick(function(){a.setVisibility(!a.visible)}),c=(new UI.Icon("bullseye")).setTitle("center").setCursor("pointer").setMarginLeft("10px").onClick(function(){a.centerView(!0)}),
f=(new UI.DisposeIcon).setMarginLeft("10px").setDisposeFunction(function(){b.removeComponent(a)}),g=(new UI.PopupMenu("bars",a.type)).setMarginLeft("46px").setEntryLabelWidth("110px");this.add(d,e,c,f,g);this.menu=g;return this};UI.ComponentPanel.prototype=Object.create(UI.Panel.prototype);UI.ComponentPanel.prototype.addMenuEntry=function(a,b){this.menu.addEntry(a,b);return this};UI.ComponentPanel.prototype.setMenuDisplay=function(a){this.menu.setMenuDisplay(a);return this};NGL.Widget=function(){};
NGL.Widget.prototype={constructor:NGL.Widget};
NGL.StageWidget=function(a){var b=a.signals,c=a.viewer;this.viewport=(new NGL.ViewportWidget(a)).setId("viewport");document.body.appendChild(this.viewport.dom);this.toolbar=(new NGL.ToolbarWidget(a)).setId("toolbar");document.body.appendChild(this.toolbar.dom);this.menubar=(new NGL.MenubarWidget(a)).setId("menubar");document.body.appendChild(this.menubar.dom);this.sidebar=(new NGL.SidebarWidget(a)).setId("sidebar");document.body.appendChild(this.sidebar.dom);b.requestTheme.add(function(a){a="light"===
a?"../css/light.css":"../css/dark.css";document.getElementById("theme").href=a});a.preferences.setTheme();c.onWindowResize();setTimeout(function(){c.onWindowResize()},500);return this};
NGL.ViewportWidget=function(a){var b=a.viewer,c=b.renderer,d=new UI.Panel;d.setPosition("absolute");b.container=d.dom;d.dom.appendChild(c.domElement);d.dom.addEventListener("dragover",function(a){a.stopPropagation();a.preventDefault();a.dataTransfer.dropEffect="copy"},!1);d.dom.addEventListener("drop",function(b){b.stopPropagation();b.preventDefault();b=b.dataTransfer.files;for(var c=b.length,d=0;d<c;++d)a.loadFile(b[d])},!1);return d};
NGL.ToolbarWidget=function(a){var b=a.signals,c=new UI.Panel,d=(new UI.Panel).setDisplay("inline").setFloat("left"),e=(new UI.Panel).setDisplay("inline").setFloat("right");b.onPicking.add(function(a){a=a.atom?"Picked atom: "+a.atom.qualifiedName()+" ("+a.atom.residue.chain.model.structure.name+")":a.bond?"Picked bond: "+a.bond.atom1.qualifiedName()+" - "+a.bond.atom2.qualifiedName()+" ("+a.bond.atom1.residue.chain.model.structure.name+")":"Nothing to pick";d.clear().add(new UI.Text(a))});a.viewer.stats.signals.updated.add(function(){e.clear().add(new UI.Text(a.viewer.stats.lastDuration+
" ms | "+a.viewer.stats.lastFps+" fps"))});c.add(d);return c};NGL.MenubarWidget=function(a){var b=new UI.Panel;b.add(new NGL.MenubarFileWidget(a));b.add(new NGL.MenubarViewWidget(a));b.add(new NGL.MenubarExamplesWidget(a));b.add(new NGL.MenubarHelpWidget(a));b.add((new UI.Panel).setClass("menu").setFloat("right").add((new UI.Text("NGL Viewer "+NGL.REVISION)).setClass("title")));return b};
NGL.MenubarFileWidget=function(a){var b="pdb ent gro cif mcif mmcif sdf mol2 mrc ccp4 map cube obj ply ngl ngz gz lzma bz2 zip".split(" "),c=b+["ngl"],d=document.createElement("input");d.type="file";d.multiple=!0;d.style.display="hidden";document.body.appendChild(d);d.accept="."+b.join(",.");d.addEventListener("change",function(b){b=b.target.files;for(var c=b.length,d=0;d<c;++d)a.loadFile(b[d],{asTrajectory:f,firstModelOnly:g,cAlphaOnly:h})},!1);var e=(new NGL.ExportImageWidget(a)).setDisplay("none").attach(),
f=!1,g=!1,h=!1,b=UI.MenubarHelper.createOption,l=UI.MenubarHelper.createInput,k=UI.MenubarHelper.createCheckbox,m=UI.MenubarHelper.createDivider,b=[b("Open...",function(){d.click()}),b("Import...",function(){var b=new NGL.DirectoryListingWidget(a,"Import file",c,function(d){var e=d.path.split(".").pop().toLowerCase();-1!==c.indexOf(e)?a.loadFile(d.path,{asTrajectory:f,firstModelOnly:g,cAlphaOnly:h}):NGL.log("unknown filetype: "+e);b.dispose()});b.setOpacity("0.9").setLeft("50px").setTop("80px").attach()}),
l("PDB",function(b){13===b.keyCode&&(a.loadFile("rcsb://"+b.target.value,{asTrajectory:f,firstModelOnly:g,cAlphaOnly:h}),b.target.value="")}),k("asTrajectory",!1,function(a){f=a.target.checked}),k("firstModelOnly",!1,function(a){g=a.target.checked}),k("cAlphaOnly",!1,function(a){h=a.target.checked}),m(),b("Screenshot",function(){a.viewer.screenshot({factor:1,type:"image/png",quality:1,antialias:!0,transparent:!1,trim:!1})},"camera"),b("Export image...",function(){e.setOpacity("0.9").setLeft("50px").setTop("80px").setDisplay("block")})],
b=UI.MenubarHelper.createOptionsPanel(b);return UI.MenubarHelper.createMenuContainer("File",b)};
NGL.MenubarViewWidget=function(a){var b=UI.MenubarHelper.createOption,c=UI.MenubarHelper.createDivider,b=[b("Light theme",function(){document.getElementById("theme").href="../css/light.css";a.viewer.setBackground("white")}),b("Dark theme",function(){document.getElementById("theme").href="../css/dark.css";a.viewer.setBackground("black")}),c(),b("Full screen",function(){var a=document.body;a.requestFullscreen?a.requestFullscreen():a.msRequestFullscreen?a.msRequestFullscreen():a.mozRequestFullScreen?
a.mozRequestFullScreen():a.webkitRequestFullscreen&&a.webkitRequestFullscreen()},"expand"),b("Center",function(){a.centerView()},"bullseye"),c(),b("Orientation",function(){window.prompt("Orientation",JSON.stringify(a.viewer.getOrientation()))})],b=UI.MenubarHelper.createOptionsPanel(b);return UI.MenubarHelper.createMenuContainer("View",b)};
NGL.MenubarExamplesWidget=function(a){var b=UI.MenubarHelper.createOption,c=UI.MenubarHelper.createDivider,d=[];Object.keys(NGL.Examples.data).forEach(function(e){"__divider__"===e?d.push(c()):"_"!==e.charAt(0)&&d.push(b(e,function(){NGL.Examples.load(e,a)}))});var e=UI.MenubarHelper.createOptionsPanel(d);return UI.MenubarHelper.createMenuContainer("Examples",e)};
NGL.MenubarHelpWidget=function(a){function b(){d.setOpacity("0.9").setLeft("50px").setTop("80px").setDisplay("block")}var c=(new NGL.PreferencesWidget(a)).setDisplay("none").attach(),d=(new NGL.OverviewWidget(a)).setDisplay("none").attach();a.preferences.getKey("overview")&&b();a=UI.MenubarHelper.createOption;var e=UI.MenubarHelper.createDivider;a=[a("Overview",b),a("Documentation",function(){window.open("../doc/index.html","_blank")}),e(),a("Unittests",function(){window.open("../test/unit/unittests.html",
"_blank")}),a("Benchmarks",function(){window.open("../test/bench/benchmarks.html","_blank")}),e(),a("Prefereces",function(){c.setOpacity("0.9").setLeft("50px").setTop("80px").setDisplay("block")},"sliders")];a=UI.MenubarHelper.createOptionsPanel(a);return UI.MenubarHelper.createMenuContainer("Help",a)};
NGL.OverviewWidget=function(a){function b(a,b){var c=new UI.Panel,d=(new UI.Icon(a)).setWidth("20px").setFloat("left"),f=(new UI.Text(b)).setDisplay("inline").setMarginLeft("5px");c.setMarginLeft("20px").add(d,f);e.add(c)}var c=new UI.OverlayPanel,d=(new UI.Panel).setBorderBottom("1px solid #555").setHeight("25px"),e=(new UI.Panel).setMarginTop("10px").setMinHeight("100px").setMaxHeight("500px").setMaxWidth("600px").setOverflow("auto");d.add((new UI.Text("NGL Viewer")).setFontStyle("italic"),new UI.Html("&nbsp;&mdash;&nbsp;Overview"));
d.add((new UI.Icon("times")).setCursor("pointer").setMarginLeft("20px").setFloat("right").onClick(function(){c.setDisplay("none")}));c.add(d);c.add(e);e.add((new UI.Panel).add(new UI.Html("To load a new structure use the <i>File</i> menu in the top left via drag'n'drop."))).add(new UI.Break);e.add((new UI.Panel).add(new UI.Text("A number of clickable icons provide common actions. Most icons can be clicked on, just try it or hover the mouse pointer over it to see a tooltip."))).add(new UI.Break);b("eye",
"Controls the visibility of a component.");b("trash-o","Deletes a component. Note that a second click is required to confirm the action.");b("bullseye","Centers a component.");b("bars","Opens a menu with further options.");b("square","Opens a menu with coloring options.");b("filter","Indicates atom-selection input fields.");e.add(new UI.Text("Mouse controls")).add(new UI.Html("<ul><li>Left button hold and move to rotate camera around center.</li><li>Left button click to pick atom.</li><li>Middle button hold and move to zoom camera in and out.</li><li>Middle button click to center camera on atom.</li><li>Right button hold and move to translate camera in the screen plane.</li></ul>"));
e.add((new UI.Panel).add(new UI.Html("For more information please visit the <a href='../doc/index.html' target='_blank'>documentation pages</a>.")));var d=a.preferences.getKey("overview"),f=(new UI.Checkbox(d)).onClick(function(){a.preferences.setKey("overview",f.getValue())});e.add((new UI.HorizontalRule).setBorderTop("1px solid #555").setMarginTop("15px")).add((new UI.Panel).add(f,(new UI.Text("Show on startup. Always available from Menu > Help > Overview.")).setMarginLeft("5px")));return c};
NGL.PreferencesWidget=function(a){function b(a,b){e.add((new UI.Text(a)).setWidth("80px")).add(b||new UI.Panel).add(new UI.Break)}var c=a.preferences,d=new UI.OverlayPanel;a=(new UI.Panel).setBorderBottom("1px solid #555").setHeight("25px");var e=(new UI.Panel).setMarginTop("10px").setMinHeight("100px").setMaxHeight("500px").setOverflow("auto");a.add(new UI.Text("Preferences"));a.add((new UI.Icon("times")).setCursor("pointer").setMarginLeft("20px").setFloat("right").onClick(function(){d.setDisplay("none")}));
d.add(a);d.add(e);var f=(new UI.Select).setOptions({dark:"dark",light:"light"}).setValue(c.getKey("theme")).onChange(function(){c.setTheme(f.getValue())}),g=(new UI.Select).setOptions({low:"low",medium:"medium",high:"high"}).setValue(c.getKey("quality")).onChange(function(){c.setQuality(g.getValue())}),h=(new UI.Checkbox).setValue(c.getKey("impostor")).onChange(function(){c.setImpostor(h.getValue())});b("theme",f);b("quality",g);b("impostor",h);return d};
NGL.ExportImageWidget=function(a){function b(a,b){e.add((new UI.Text(a)).setWidth("80px")).add(b||new UI.Panel).add(new UI.Break)}var c=new UI.OverlayPanel,d=(new UI.Panel).setBorderBottom("1px solid #555").setHeight("25px"),e=(new UI.Panel).setMarginTop("10px").setMinHeight("100px").setMaxHeight("500px").setOverflow("auto");d.add(new UI.Text("Image export"));d.add((new UI.Icon("times")).setCursor("pointer").setMarginLeft("20px").setFloat("right").onClick(function(){c.setDisplay("none")}));c.add(d);
c.add(e);var f=(new UI.Select).setOptions({1:"1x",2:"2x",3:"3x",4:"4x",5:"5x",6:"6x",7:"7x",8:"8x",9:"9x",10:"10x"}).setValue("4");(new UI.Select).setOptions({"image/png":"PNG","image/jpeg":"JPEG"}).setValue("image/png");(new UI.Select).setOptions({"0.1":"0.1","0.2":"0.2","0.3":"0.3","0.4":"0.4","0.5":"0.5","0.6":"0.6","0.7":"0.7","0.8":"0.8","0.9":"0.9","1.0":"1.0"}).setValue("1.0");var g=(new UI.Checkbox).setValue(!0),h=(new UI.Checkbox).setValue(!1),l=(new UI.Checkbox).setValue(!1),k=(new UI.Progress).setDisplay("none"),
m=(new UI.Button("export")).onClick(function(){m.setDisplay("none");k.setDisplay("inline-block");setTimeout(function(){a.exportImage(parseInt(f.getValue()),g.getValue(),h.getValue(),l.getValue(),function(a,b,c){1===a&&k.setMax(b);a>=b?k.setIndeterminate():k.setValue(a);c&&(k.setDisplay("none"),m.setDisplay("inline-block"))})},50)});b("scale",f);b("antialias",g);b("transparent",h);b("trim",l);e.add(new UI.Break,m,k);return c};
NGL.SidebarWidget=function(a){var b=a.signals,c=new UI.Panel,d=(new UI.Panel).setClass("Content"),e=[],f=[];b.componentAdded.add(function(b){var c;if(b instanceof NGL.StructureComponent)c=new NGL.StructureComponentWidget(b,a);else if(b instanceof NGL.SurfaceComponent)c=new NGL.SurfaceComponentWidget(b,a);else if(b instanceof NGL.ScriptComponent)c=new NGL.ScriptComponentWidget(b,a);else if(b instanceof NGL.Component)c=new NGL.ComponentWidget(b,a);else{NGL.warn("NGL.SidebarWidget: component type unknown",
b);return}d.add(c);e.push(b);f.push(c)});b.componentRemoved.add(function(a){a=e.indexOf(a);-1!==a&&(f[a].dispose(),e.splice(a,1),f.splice(a,1))});var b=(new UI.Icon("plus-square")).setTitle("expand all").setCursor("pointer").onClick(function(){f.forEach(function(a){a.expand()})}),g=(new UI.Icon("minus-square")).setTitle("collapse all").setCursor("pointer").setMarginLeft("10px").onClick(function(){f.forEach(function(a){a.collapse()})}),h=(new UI.Icon("bullseye")).setTitle("center all").setCursor("pointer").setMarginLeft("10px").onClick(function(){a.centerView()}),
l=(new UI.DisposeIcon).setMarginLeft("10px").setDisposeFunction(function(){a.removeAllComponents()}),k=(new UI.PopupMenu("cogs","Settings","window")).setIconTitle("settings").setMarginLeft("10px"),m=(new UI.Panel).setDisplay("inline").add((new UI.Icon("spinner")).addClass("spin").setMarginLeft("45px"));a.tasks.signals.countChanged.add(function(a,b){if(0<b)s.add(m);else try{s.remove(m)}catch(c){}});var r=(new UI.Range(1,100,a.viewer.params.clipNear,1)).onInput(function(){a.viewer.setClip(r.getValue(),
n.getValue())}),n=(new UI.Range(1,100,a.viewer.params.clipFar,1)).onInput(function(){a.viewer.setClip(r.getValue(),n.getValue())}),q=(new UI.Range(1,100,a.viewer.params.clipDist,1)).onInput(function(){a.viewer.params.clipDist=q.getValue();a.viewer.requestRender()}),t=(new UI.Range(1,100,a.viewer.params.fogNear,1)).onInput(function(){a.viewer.setFog(null,null,t.getValue(),p.getValue())}),p=(new UI.Range(1,100,a.viewer.params.fogFar,1)).onInput(function(){a.viewer.setFog(null,null,t.getValue(),p.getValue())});
k.addEntry("clip near",r).addEntry("clip far",n).addEntry("clip distance",q).addEntry("fog near",t).addEntry("fog far",p);var s=(new UI.Panel).setClass("Panel Sticky").add(b,g,h,l,k);c.add(s,d);return c};
NGL.ComponentWidget=function(a,b){var c=a.signals,d=new UI.CollapsibleIconPanel("file");c.requestGuiVisibility.add(function(a){d.setCollapsed(!a)});c.statusChanged.add(function(b){b={404:"Error: file not found"}[a.status]||a.status;d.setCollapsed(!1);d.add((new UI.Text(b)).setMarginLeft("20px").setWidth("200px").setWordWrap("break-word"));d.removeStatic(e);d.addStatic(f)});var c=(new UI.EllipsisText(NGL.unicodeHelper(a.name))).setWidth("100px"),e=(new UI.Panel).setDisplay("inline").add((new UI.Icon("spinner")).addClass("spin").setMarginLeft("25px")),
f=(new UI.DisposeIcon).setMarginLeft("10px").setDisposeFunction(function(){b.removeComponent(a)});d.addStatic(c,e);return d};
NGL.StructureComponentWidget=function(a,b){function c(){var c={"":"[ structure ]"};b.eachComponent(function(b,d){b!==a&&(c[d]=NGL.unicodeHelper(b.name))},NGL.StructureComponent);m.setOptions(c)}var d=a.signals,e=new UI.CollapsibleIconPanel("file"),f=new UI.Panel,g=new UI.Panel;d.requestGuiVisibility.add(function(a){e.setCollapsed(!a)});d.representationAdded.add(function(a){f.add(new NGL.RepresentationComponentWidget(a,b))});d.trajectoryAdded.add(function(a){g.add(new NGL.TrajectoryComponentWidget(a,
b))});e.add((new UI.SelectionPanel(a.selection)).setMarginLeft("20px").setInputWidth("214px"));var d=(new UI.Button("export")).onClick(function(){var b=new Blob([a.structure.toPdb()],{type:"text/plain"});NGL.download(b,"structure.pdb");q.setMenuDisplay("none")}),h=(new UI.Select).setColor("#444").setOptions(function(){var a={"":"[ add ]"},b;for(b in NGL.representationTypes)a[b]=b;return a}()).onChange(function(){a.addRepresentation(h.getValue());h.setValue("");q.setMenuDisplay("none")}),l=(new UI.Select).setColor("#444").setOptions(function(){var b=
{__AU:"AU"};Object.keys(a.structure.biomolDict).forEach(function(a){b[a]=a});return b}()).setValue(a.structure.defaultAssembly).onChange(function(){a.structure.setDefaultAssembly(l.getValue());a.rebuildRepresentations();q.setMenuDisplay("none")}),k=(new UI.Button("import")).onClick(function(){q.setMenuDisplay("none");var c=["xtc","trr","dcd","netcdf","nc"],d=new NGL.DirectoryListingWidget(b,"Import trajectory",c,function(b){var e=b.path.split(".").pop().toLowerCase();-1!==c.indexOf(e)?(NGL.log(b),
a.addTrajectory(b.path),d.dispose()):NGL.log("unknown trajectory type: "+e)});d.setOpacity("0.9").setLeft("50px").setTop("80px").attach()});b.signals.componentAdded.add(c);b.signals.componentRemoved.add(c);var m=(new UI.Select).setColor("#444").onChange(function(){a.superpose(b.compList[m.getValue()],!0);a.centerView();m.setValue("");q.setMenuDisplay("none")});c();var r=(new UI.Button("calculate")).onClick(function(){a.structure.autoSS();a.rebuildRepresentations();q.setMenuDisplay("none")}),n=(new UI.Button("duplicate")).onClick(function(){b.addComponent(new NGL.StructureComponent(b,
a.structure.clone(),{}));q.setMenuDisplay("none")}),q=(new UI.ComponentPanel(a)).setDisplay("inline-block").setMargin("0px").addMenuEntry("PDB file",d).addMenuEntry("Representation",h).addMenuEntry("Assembly",l).addMenuEntry("Trajectory",k).addMenuEntry("Superpose",m).addMenuEntry("SS",r).addMenuEntry("Structure",n).addMenuEntry("File",(new UI.Text(a.structure.path)).setMaxWidth("100px").setWordWrap("break-word"));e.addStatic(q).add(g).add(f);return e};
NGL.SurfaceComponentWidget=function(a,b){var c=a.signals,d=new UI.CollapsibleIconPanel("file"),e=new UI.Panel;c.requestGuiVisibility.add(function(a){d.setCollapsed(!a)});c.representationAdded.add(function(a){e.add(new NGL.RepresentationComponentWidget(a,b))});var f=(new UI.Select).setColor("#444").setOptions({"":"[ add ]",surface:"surface",dot:"dot"}).onChange(function(){a.addRepresentation(f.getValue());f.setValue("");g.setMenuDisplay("none")}),g=(new UI.ComponentPanel(a)).setDisplay("inline-block").setMargin("0px").addMenuEntry("Representation",
f).addMenuEntry("File",(new UI.Text(a.surface.path)).setMaxWidth("100px").setWordWrap("break-word"));d.addStatic(g).add(e);return d};
NGL.ScriptComponentWidget=function(a,b){var c=a.signals,d=new UI.CollapsibleIconPanel("file"),e=(new UI.Panel).setMarginLeft("20px");c.requestGuiVisibility.add(function(a){d.setCollapsed(!a)});c.nameChanged.add(function(a){g.setValue(NGL.unicodeHelper(a))});c.statusChanged.add(function(a){"finished"===a&&(d.removeStatic(h),d.addStatic(f))});a.script.signals.elementAdded.add(function(a){e.add.apply(e,a)});var f=(new UI.DisposeIcon).setMarginLeft("10px").setDisposeFunction(function(){b.removeComponent(a)}),
g=(new UI.EllipsisText(NGL.unicodeHelper(a.name))).setWidth("100px"),h=(new UI.Icon("spinner")).addClass("spin").setMarginLeft("25px");d.addStatic(g).addStatic(h);d.add(e);return d};
NGL.RepresentationComponentWidget=function(a,b){var c=a.signals,d=(new UI.CollapsibleIconPanel("bookmark")).setMarginLeft("20px");c.requestGuiVisibility.add(function(a){d.setCollapsed(!a)});c.visibilityChanged.add(function(a){f.setValue(a)});c.colorChanged.add(function(a){h.setValue(a)});c.nameChanged.add(function(a){e.setValue(NGL.unicodeHelper(a))});c.disposed.add(function(){l.dispose();h.dispose();d.dispose()});var e=(new UI.EllipsisText(NGL.unicodeHelper(a.name))).setWidth("80px"),f=(new UI.ToggleIcon(a.visible,
"eye","eye-slash")).setTitle("hide/show").setCursor("pointer").setMarginLeft("25px").onClick(function(){a.setVisibility(!a.visible)}),g=(new UI.DisposeIcon).setMarginLeft("10px").setDisposeFunction(function(){a.dispose()}),h=(new UI.ColorPopupMenu).setMarginLeft("10px").setValue(a.repr.color).onChange(function(){var b=new THREE.Color;return function(c){c=h.getScheme();"color"===c?(b.setStyle(h.getColor()),a.setColor(b.getHex())):a.setColor(c);a.viewer.requestRender()}}());a.parent instanceof NGL.SurfaceComponent&&
h.schemeSelector.setOptions({"":"",value:"value",color:"color"});d.addStatic(e).addStatic(f).addStatic(g).addStatic(h);(a.parent instanceof NGL.StructureComponent||a.parent instanceof NGL.TrajectoryComponent)&&a.repr.selection instanceof NGL.Selection&&d.add((new UI.SelectionPanel(a.repr.selection)).setMarginLeft("20px").setInputWidth("194px"));var l=(new UI.PopupMenu("bars","Representation")).setMarginLeft("45px").setEntryLabelWidth("110px");l.addEntry("type",new UI.Text(a.repr.type));Object.keys(a.repr.parameters).forEach(function(b){var d=
a.repr,e,f=d.parameters[b];if(f&&("number"===f.type||"integer"===f.type?(e="number"===f.type?(new UI.Number(parseFloat(d[b])||NaN)).setPrecision(f.precision):new UI.Integer(parseInt(d[b])||NaN),e.setRange(f.min,f.max)):"boolean"===f.type?e=new UI.Checkbox(d[b]):"text"===f.type?e=new UI.Input(d[b]):"select"===f.type?e=(new UI.Select).setWidth("").setOptions(f.options).setValue(d[b]):"button"===f.type?e=(new UI.Button(b)).onClick(function(){d[b]()}):"color"===f.type?e=(new UI.ColorPopupMenu(b)).setValue(d[b]):
"hidden"!==f.type&&NGL.warn("NGL.RepresentationComponentWidget: unknown parameter type '"+f.type+"'"),e)){c.parametersChanged.add(function(a){e.setValue(a[b])});if("color"===f.type)e.onChange(function(){var c=new THREE.Color;return function(f){f={};var g=e.getScheme();"color"===g?(c.setStyle(e.getColor()),f[b]=c.getHex()):f[b]=g;a.setParameters(f);d.viewer.requestRender()}}());else e.onChange(function(){var c={};c[b]=e.getValue();a.setParameters(c);d.viewer.requestRender()});l.addEntry(b,e)}});d.addStatic(l);
return d};
NGL.TrajectoryComponentWidget=function(a,b){function c(a){h.clear().add(k.setWidth("70px"));k.setRange(-1,a-1);r.setRange(-1,a-1);m.setValue(Math.ceil((a+1)/100));p.step=m.getValue();p.end=a}var d=a.signals,e=a.trajectory,f=(new UI.CollapsibleIconPanel("database")).setMarginLeft("20px"),g=new UI.Panel;d.representationAdded.add(function(a){g.add(new NGL.RepresentationComponentWidget(a,b))});d.disposed.add(function(){v.dispose();f.dispose()});var h=(new UI.Panel).setMarginLeft("10px").setDisplay("inline").add((new UI.Icon("spinner")).addClass("spin").setMarginRight("69px"));d.gotNumframes.add(c);
d.frameChanged.add(function(a){k.setValue(a);r.setValue(a);h.clear().add(k.setWidth("70px"))});var l=(new UI.EllipsisText(e.name)).setWidth("108px");f.addStatic(l);f.addStatic(h);var k=(new UI.Integer(-1)).setMarginLeft("5px").setWidth("70px").setRange(-1,-1).onChange(function(a){e.setFrame(k.getValue());v.setMenuDisplay("none")}),m=(new UI.Integer(1)).setWidth("30px").setRange(1,1E4).onChange(function(){p.step=m.getValue()}),l=new UI.Panel,r=(new UI.Range(-1,-1,-1,1)).setWidth("197px").setMargin("0px").setPadding("0px").setBorder("0px").onInput(function(a){a=
r.getValue();a!==e.currentFrame&&(e.player&&e.player._running?(e.setPlayer(),e.setFrame(a)):e.inProgress||e.setFrame(a))}),n=(new UI.Select).setColor("#444").setOptions({"":"none",linear:"linear",spline:"spline"}).onChange(function(){p.interpolateType=n.getValue()}),q=(new UI.Integer(5)).setWidth("30px").setRange(1,50).onChange(function(){p.interpolateStep=q.getValue()}),t=(new UI.Integer(50)).setWidth("30px").setRange(10,1E3).onChange(function(){p.timeout=t.getValue()}),p=new NGL.TrajectoryPlayer(e,
m.getValue(),t.getValue(),0,e.numframes),s=(new UI.ToggleIcon(!0,"play","pause")).setMarginRight("10px").setMarginLeft("20px").setCursor("pointer").setWidth("12px").setTitle("play").onClick(function(){p.toggle()});p.signals.startedRunning.add(function(){s.setTitle("pause").setValue(!1)});p.signals.haltedRunning.add(function(){s.setTitle("play").setValue(!0)});l.add(s);l.add(r);var y=(new UI.Select).setColor("#444").setOptions({forward:"forward",backward:"backward"}).onChange(function(){p.direction=
y.getValue()}),z=(new UI.Select).setColor("#444").setOptions({loop:"loop",once:"once"}).onChange(function(){p.mode=z.getValue()});f.add((new UI.SelectionPanel(e.selection)).setMarginLeft("20px").setInputWidth("194px"));var u=(new UI.Checkbox(e.params.centerPbc)).onChange(function(){a.setParameters({centerPbc:u.getValue()})}),w=(new UI.Checkbox(e.params.removePbc)).onChange(function(){a.setParameters({removePbc:w.getValue()})}),x=(new UI.Checkbox(e.params.superpose)).onChange(function(){a.setParameters({superpose:x.getValue()})});
d.parametersChanged.add(function(a){u.setValue(a.centerPbc);w.setValue(a.removePbc);x.setValue(a.superpose)});(new UI.Button("download")).onClick(function(){e.download(m.getValue())});var d=(new UI.Button("add")).onClick(function(){a.addRepresentation()}),A=(new UI.DisposeIcon).setDisposeFunction(function(){a.parent.removeTrajectory(a)});e.numframes&&c(e.numframes);var v=(new UI.PopupMenu("bars","Trajectory")).setMarginLeft("10px").setEntryLabelWidth("130px").addEntry("Path",d).addEntry("Center",
u).addEntry("Remove PBC",w).addEntry("Superpose",x).addEntry("Step size",m).addEntry("Interpolation type",n).addEntry("Interpolation steps",q).addEntry("Play timeout",t).addEntry("Play direction",y).addEntry("Play mode",z).addEntry("File",(new UI.Text(e.trajPath)).setMaxWidth("100px").setWordWrap("break-word")).addEntry("Dispose",A);f.addStatic(v);f.add(l);f.add(g);return f};NGL.lastUsedDirectory="";NGL.DirectoryListing=function(){this.signals={listingLoaded:new signals.Signal}};
NGL.DirectoryListing.prototype={constructor:NGL.DirectoryListing,getListing:function(a){var b=this;a=a||"";var c=new THREE.XHRLoader,d="../dir/"+a;THREE.Cache.remove(d);c.load(d,function(c){c=JSON.parse(c);b.signals.listingLoaded.dispatch(a,c)})},getFolderDict:function(a){var b={"":""},c=[];(a||"").split("/").forEach(function(a){c.push(a);b[c.join("/")]=a});return b}};
NGL.DirectoryListingWidget=function(a,b,c,d){function e(a,b,c,d,e){return(b=Math,c=b.log,d=1E3,e=c(a)/c(d)|0,a/b.pow(d,e)).toFixed(2)+String.fromCharCode(160)+(e?"kMGTPEZY"[--e]+"B":"Bytes")}var f=new NGL.DirectoryListing;a=f.signals;var g=new UI.OverlayPanel,h=(new UI.Panel).setBorderBottom("1px solid #555").setHeight("30px"),l=(new UI.Panel).setMarginTop("10px").setMinHeight("100px").setMaxHeight("500px").setOverflow("auto"),k=(new UI.Select).setColor("#444").setMarginLeft("20px").setWidth("").setMaxWidth("200px").setOptions(f.getFolderDict()).onChange(function(){f.getListing(k.getValue())});
h.add(new UI.Text(b||"Directoy listing"));h.add(k);h.add((new UI.Icon("times")).setCursor("pointer").setMarginLeft("20px").setFloat("right").onClick(function(){g.dispose()}));g.add(h);g.add(l);a.listingLoaded.add(function(a,b){NGL.lastUsedDirectory=a;l.clear();k.setOptions(f.getFolderDict(a)).setValue(a);b.forEach(function(a){var b=a.path.split(".").pop().toLowerCase();if(!c||a.dir||-1!==c.indexOf(b)){var g;a.dir?(b="folder-o",g=a.name):(b="file-o",g=a.name+String.fromCharCode(160)+"("+e(a.size)+
")");b=(new UI.Panel).setDisplay("block").add((new UI.Icon(b)).setWidth("20px")).add(new UI.Text(g)).onClick(function(){a.dir?f.getListing(a.path):d(a)});a.restricted&&b.add((new UI.Icon("lock")).setMarginLeft("5px"));l.add(b)}})});f.getListing(NGL.lastUsedDirectory);return g};


